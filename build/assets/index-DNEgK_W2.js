(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();function Jv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var qh={exports:{}},Wa={},Wh={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function tT(){if(Zg)return ke;Zg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function E(U){return U===null||typeof U!="object"?null:(U=T&&U[T]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,O={};function V(U,J,me){this.props=U,this.context=J,this.refs=O,this.updater=me||x}V.prototype.isReactComponent={},V.prototype.setState=function(U,J){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,J,"setState")},V.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function $(){}$.prototype=V.prototype;function Z(U,J,me){this.props=U,this.context=J,this.refs=O,this.updater=me||x}var W=Z.prototype=new $;W.constructor=Z,R(W,V.prototype),W.isPureReactComponent=!0;var te=Array.isArray,ae=Object.prototype.hasOwnProperty,se={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function A(U,J,me){var Ce,xe={},Ne=null,Me=null;if(J!=null)for(Ce in J.ref!==void 0&&(Me=J.ref),J.key!==void 0&&(Ne=""+J.key),J)ae.call(J,Ce)&&!b.hasOwnProperty(Ce)&&(xe[Ce]=J[Ce]);var Fe=arguments.length-2;if(Fe===1)xe.children=me;else if(1<Fe){for(var Ge=Array(Fe),Tt=0;Tt<Fe;Tt++)Ge[Tt]=arguments[Tt+2];xe.children=Ge}if(U&&U.defaultProps)for(Ce in Fe=U.defaultProps,Fe)xe[Ce]===void 0&&(xe[Ce]=Fe[Ce]);return{$$typeof:n,type:U,key:Ne,ref:Me,props:xe,_owner:se.current}}function C(U,J){return{$$typeof:n,type:U.type,key:J,ref:U.ref,props:U.props,_owner:U._owner}}function N(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function L(U){var J={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(me){return J[me]})}var j=/\/+/g;function P(U,J){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):J.toString(36)}function st(U,J,me,Ce,xe){var Ne=typeof U;(Ne==="undefined"||Ne==="boolean")&&(U=null);var Me=!1;if(U===null)Me=!0;else switch(Ne){case"string":case"number":Me=!0;break;case"object":switch(U.$$typeof){case n:case e:Me=!0}}if(Me)return Me=U,xe=xe(Me),U=Ce===""?"."+P(Me,0):Ce,te(xe)?(me="",U!=null&&(me=U.replace(j,"$&/")+"/"),st(xe,J,me,"",function(Tt){return Tt})):xe!=null&&(N(xe)&&(xe=C(xe,me+(!xe.key||Me&&Me.key===xe.key?"":(""+xe.key).replace(j,"$&/")+"/")+U)),J.push(xe)),1;if(Me=0,Ce=Ce===""?".":Ce+":",te(U))for(var Fe=0;Fe<U.length;Fe++){Ne=U[Fe];var Ge=Ce+P(Ne,Fe);Me+=st(Ne,J,me,Ge,xe)}else if(Ge=E(U),typeof Ge=="function")for(U=Ge.call(U),Fe=0;!(Ne=U.next()).done;)Ne=Ne.value,Ge=Ce+P(Ne,Fe++),Me+=st(Ne,J,me,Ge,xe);else if(Ne==="object")throw J=String(U),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return Me}function Ot(U,J,me){if(U==null)return U;var Ce=[],xe=0;return st(U,Ce,"","",function(Ne){return J.call(me,Ne,xe++)}),Ce}function Vt(U){if(U._status===-1){var J=U._result;J=J(),J.then(function(me){(U._status===0||U._status===-1)&&(U._status=1,U._result=me)},function(me){(U._status===0||U._status===-1)&&(U._status=2,U._result=me)}),U._status===-1&&(U._status=0,U._result=J)}if(U._status===1)return U._result.default;throw U._result}var ze={current:null},ie={transition:null},ye={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:ie,ReactCurrentOwner:se};function ce(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:Ot,forEach:function(U,J,me){Ot(U,function(){J.apply(this,arguments)},me)},count:function(U){var J=0;return Ot(U,function(){J++}),J},toArray:function(U){return Ot(U,function(J){return J})||[]},only:function(U){if(!N(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},ke.Component=V,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=Z,ke.StrictMode=i,ke.Suspense=p,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,ke.act=ce,ke.cloneElement=function(U,J,me){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Ce=R({},U.props),xe=U.key,Ne=U.ref,Me=U._owner;if(J!=null){if(J.ref!==void 0&&(Ne=J.ref,Me=se.current),J.key!==void 0&&(xe=""+J.key),U.type&&U.type.defaultProps)var Fe=U.type.defaultProps;for(Ge in J)ae.call(J,Ge)&&!b.hasOwnProperty(Ge)&&(Ce[Ge]=J[Ge]===void 0&&Fe!==void 0?Fe[Ge]:J[Ge])}var Ge=arguments.length-2;if(Ge===1)Ce.children=me;else if(1<Ge){Fe=Array(Ge);for(var Tt=0;Tt<Ge;Tt++)Fe[Tt]=arguments[Tt+2];Ce.children=Fe}return{$$typeof:n,type:U.type,key:xe,ref:Ne,props:Ce,_owner:Me}},ke.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},ke.createElement=A,ke.createFactory=function(U){var J=A.bind(null,U);return J.type=U,J},ke.createRef=function(){return{current:null}},ke.forwardRef=function(U){return{$$typeof:h,render:U}},ke.isValidElement=N,ke.lazy=function(U){return{$$typeof:_,_payload:{_status:-1,_result:U},_init:Vt}},ke.memo=function(U,J){return{$$typeof:g,type:U,compare:J===void 0?null:J}},ke.startTransition=function(U){var J=ie.transition;ie.transition={};try{U()}finally{ie.transition=J}},ke.unstable_act=ce,ke.useCallback=function(U,J){return ze.current.useCallback(U,J)},ke.useContext=function(U){return ze.current.useContext(U)},ke.useDebugValue=function(){},ke.useDeferredValue=function(U){return ze.current.useDeferredValue(U)},ke.useEffect=function(U,J){return ze.current.useEffect(U,J)},ke.useId=function(){return ze.current.useId()},ke.useImperativeHandle=function(U,J,me){return ze.current.useImperativeHandle(U,J,me)},ke.useInsertionEffect=function(U,J){return ze.current.useInsertionEffect(U,J)},ke.useLayoutEffect=function(U,J){return ze.current.useLayoutEffect(U,J)},ke.useMemo=function(U,J){return ze.current.useMemo(U,J)},ke.useReducer=function(U,J,me){return ze.current.useReducer(U,J,me)},ke.useRef=function(U){return ze.current.useRef(U)},ke.useState=function(U){return ze.current.useState(U)},ke.useSyncExternalStore=function(U,J,me){return ze.current.useSyncExternalStore(U,J,me)},ke.useTransition=function(){return ze.current.useTransition()},ke.version="18.3.1",ke}var ey;function zf(){return ey||(ey=1,Wh.exports=tT()),Wh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ty;function nT(){if(ty)return Wa;ty=1;var n=zf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,g){var _,T={},E=null,x=null;g!==void 0&&(E=""+g),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(x=p.ref);for(_ in p)i.call(p,_)&&!a.hasOwnProperty(_)&&(T[_]=p[_]);if(h&&h.defaultProps)for(_ in p=h.defaultProps,p)T[_]===void 0&&(T[_]=p[_]);return{$$typeof:e,type:h,key:E,ref:x,props:T,_owner:o.current}}return Wa.Fragment=t,Wa.jsx=c,Wa.jsxs=c,Wa}var ny;function rT(){return ny||(ny=1,qh.exports=nT()),qh.exports}var S=rT(),F=zf();const Sc=Jv(F);var ic={},Kh={exports:{}},sn={},Qh={exports:{}},Jh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ry;function iT(){return ry||(ry=1,function(n){function e(ie,ye){var ce=ie.length;ie.push(ye);e:for(;0<ce;){var U=ce-1>>>1,J=ie[U];if(0<o(J,ye))ie[U]=ye,ie[ce]=J,ce=U;else break e}}function t(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var ye=ie[0],ce=ie.pop();if(ce!==ye){ie[0]=ce;e:for(var U=0,J=ie.length,me=J>>>1;U<me;){var Ce=2*(U+1)-1,xe=ie[Ce],Ne=Ce+1,Me=ie[Ne];if(0>o(xe,ce))Ne<J&&0>o(Me,xe)?(ie[U]=Me,ie[Ne]=ce,U=Ne):(ie[U]=xe,ie[Ce]=ce,U=Ce);else if(Ne<J&&0>o(Me,ce))ie[U]=Me,ie[Ne]=ce,U=Ne;else break e}}return ye}function o(ie,ye){var ce=ie.sortIndex-ye.sortIndex;return ce!==0?ce:ie.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],g=[],_=1,T=null,E=3,x=!1,R=!1,O=!1,V=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(ie){for(var ye=t(g);ye!==null;){if(ye.callback===null)i(g);else if(ye.startTime<=ie)i(g),ye.sortIndex=ye.expirationTime,e(p,ye);else break;ye=t(g)}}function te(ie){if(O=!1,W(ie),!R)if(t(p)!==null)R=!0,Vt(ae);else{var ye=t(g);ye!==null&&ze(te,ye.startTime-ie)}}function ae(ie,ye){R=!1,O&&(O=!1,$(A),A=-1),x=!0;var ce=E;try{for(W(ye),T=t(p);T!==null&&(!(T.expirationTime>ye)||ie&&!L());){var U=T.callback;if(typeof U=="function"){T.callback=null,E=T.priorityLevel;var J=U(T.expirationTime<=ye);ye=n.unstable_now(),typeof J=="function"?T.callback=J:T===t(p)&&i(p),W(ye)}else i(p);T=t(p)}if(T!==null)var me=!0;else{var Ce=t(g);Ce!==null&&ze(te,Ce.startTime-ye),me=!1}return me}finally{T=null,E=ce,x=!1}}var se=!1,b=null,A=-1,C=5,N=-1;function L(){return!(n.unstable_now()-N<C)}function j(){if(b!==null){var ie=n.unstable_now();N=ie;var ye=!0;try{ye=b(!0,ie)}finally{ye?P():(se=!1,b=null)}}else se=!1}var P;if(typeof Z=="function")P=function(){Z(j)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,Ot=st.port2;st.port1.onmessage=j,P=function(){Ot.postMessage(null)}}else P=function(){V(j,0)};function Vt(ie){b=ie,se||(se=!0,P())}function ze(ie,ye){A=V(function(){ie(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ie){ie.callback=null},n.unstable_continueExecution=function(){R||x||(R=!0,Vt(ae))},n.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ie?Math.floor(1e3/ie):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ie){switch(E){case 1:case 2:case 3:var ye=3;break;default:ye=E}var ce=E;E=ye;try{return ie()}finally{E=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ie,ye){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ce=E;E=ie;try{return ye()}finally{E=ce}},n.unstable_scheduleCallback=function(ie,ye,ce){var U=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?U+ce:U):ce=U,ie){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ce+J,ie={id:_++,callback:ye,priorityLevel:ie,startTime:ce,expirationTime:J,sortIndex:-1},ce>U?(ie.sortIndex=ce,e(g,ie),t(p)===null&&ie===t(g)&&(O?($(A),A=-1):O=!0,ze(te,ce-U))):(ie.sortIndex=J,e(p,ie),R||x||(R=!0,Vt(ae))),ie},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(ie){var ye=E;return function(){var ce=E;E=ye;try{return ie.apply(this,arguments)}finally{E=ce}}}}(Jh)),Jh}var iy;function sT(){return iy||(iy=1,Qh.exports=iT()),Qh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy;function oT(){if(sy)return sn;sy=1;var n=zf(),e=sT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,l=1;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function a(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},T={};function E(r){return p.call(T,r)?!0:p.call(_,r)?!1:g.test(r)?T[r]=!0:(_[r]=!0,!1)}function x(r,s,l,d){if(l!==null&&l.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function R(r,s,l,d){if(s===null||typeof s>"u"||x(r,s,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function O(r,s,l,d,f,y,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=r,this.type=s,this.sanitizeURL=y,this.removeEmptyString=w}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){V[r]=new O(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];V[s]=new O(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){V[r]=new O(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){V[r]=new O(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){V[r]=new O(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){V[r]=new O(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){V[r]=new O(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){V[r]=new O(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){V[r]=new O(r,5,!1,r.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Z(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace($,Z);V[s]=new O(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace($,Z);V[s]=new O(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace($,Z);V[s]=new O(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){V[r]=new O(r,1,!1,r.toLowerCase(),null,!1,!1)}),V.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){V[r]=new O(r,1,!1,r.toLowerCase(),null,!0,!0)});function W(r,s,l,d){var f=V.hasOwnProperty(s)?V[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(R(s,l,f,d)&&(l=null),d||f===null?E(s)&&(l===null?r.removeAttribute(s):r.setAttribute(s,""+l)):f.mustUseProperty?r[f.propertyName]=l===null?f.type===3?!1:"":l:(s=f.attributeName,d=f.attributeNamespace,l===null?r.removeAttribute(s):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,d?r.setAttributeNS(d,s,l):r.setAttribute(s,l))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),se=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),L=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),st=Symbol.for("react.suspense_list"),Ot=Symbol.for("react.memo"),Vt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ye(r){return r===null||typeof r!="object"?null:(r=ie&&r[ie]||r["@@iterator"],typeof r=="function"?r:null)}var ce=Object.assign,U;function J(r){if(U===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);U=s&&s[1]||""}return`
`+U+r}var me=!1;function Ce(r,s){if(!r||me)return"";me=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(H){var d=H}Reflect.construct(r,[],s)}else{try{s.call()}catch(H){d=H}r.call(s.prototype)}else{try{throw Error()}catch(H){d=H}r()}}catch(H){if(H&&d&&typeof H.stack=="string"){for(var f=H.stack.split(`
`),y=d.stack.split(`
`),w=f.length-1,k=y.length-1;1<=w&&0<=k&&f[w]!==y[k];)k--;for(;1<=w&&0<=k;w--,k--)if(f[w]!==y[k]){if(w!==1||k!==1)do if(w--,k--,0>k||f[w]!==y[k]){var D=`
`+f[w].replace(" at new "," at ");return r.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",r.displayName)),D}while(1<=w&&0<=k);break}}}finally{me=!1,Error.prepareStackTrace=l}return(r=r?r.displayName||r.name:"")?J(r):""}function xe(r){switch(r.tag){case 5:return J(r.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return r=Ce(r.type,!1),r;case 11:return r=Ce(r.type.render,!1),r;case 1:return r=Ce(r.type,!0),r;default:return""}}function Ne(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case b:return"Fragment";case se:return"Portal";case C:return"Profiler";case A:return"StrictMode";case P:return"Suspense";case st:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ot:return s=r.displayName||null,s!==null?s:Ne(r.type)||"Memo";case Vt:s=r._payload,r=r._init;try{return Ne(r(s))}catch{}}return null}function Me(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(s);case 8:return s===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ge(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Tt(r){var s=Ge(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,y=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){d=""+w,y.call(this,w)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function vr(r){r._valueTracker||(r._valueTracker=Tt(r))}function Os(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return r&&(d=Ge(r)?r.checked?"true":"false":r.value),r=d,r!==l?(s.setValue(r),!0):!1}function Yr(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Hi(r,s){var l=s.checked;return ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??r._wrapperState.initialChecked})}function Vs(r,s){var l=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;l=Fe(s.value!=null?s.value:l),r._wrapperState={initialChecked:d,initialValue:l,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Zo(r,s){s=s.checked,s!=null&&W(r,"checked",s,!1)}function ea(r,s){Zo(r,s);var l=Fe(s.value),d=s.type;if(l!=null)d==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+l):r.value!==""+l&&(r.value=""+l);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Ms(r,s.type,l):s.hasOwnProperty("defaultValue")&&Ms(r,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function $l(r,s,l){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,l||s===r.value||(r.value=s),r.defaultValue=s}l=r.name,l!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,l!==""&&(r.name=l)}function Ms(r,s,l){(s!=="number"||Yr(r.ownerDocument)!==r)&&(l==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+l&&(r.defaultValue=""+l))}var _r=Array.isArray;function wr(r,s,l,d){if(r=r.options,s){s={};for(var f=0;f<l.length;f++)s["$"+l[f]]=!0;for(l=0;l<r.length;l++)f=s.hasOwnProperty("$"+r[l].value),r[l].selected!==f&&(r[l].selected=f),f&&d&&(r[l].defaultSelected=!0)}else{for(l=""+Fe(l),s=null,f=0;f<r.length;f++){if(r[f].value===l){r[f].selected=!0,d&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function ta(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Fs(r,s){var l=s.value;if(l==null){if(l=s.children,s=s.defaultValue,l!=null){if(s!=null)throw Error(t(92));if(_r(l)){if(1<l.length)throw Error(t(93));l=l[0]}s=l}s==null&&(s=""),l=s}r._wrapperState={initialValue:Fe(l)}}function js(r,s){var l=Fe(s.value),d=Fe(s.defaultValue);l!=null&&(l=""+l,l!==r.value&&(r.value=l),s.defaultValue==null&&r.defaultValue!==l&&(r.defaultValue=l)),d!=null&&(r.defaultValue=""+d)}function na(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function gt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?gt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Er,ra=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,l,d,f){MSApp.execUnsafeLocalFunction(function(){return r(s,l,d,f)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Er=Er||document.createElement("div"),Er.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Er.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Xr(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wi=["Webkit","ms","Moz","O"];Object.keys(qi).forEach(function(r){Wi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),qi[s]=qi[r]})});function ia(r,s,l){return s==null||typeof s=="boolean"||s===""?"":l||typeof s!="number"||s===0||qi.hasOwnProperty(r)&&qi[r]?(""+s).trim():s+"px"}function sa(r,s){r=r.style;for(var l in s)if(s.hasOwnProperty(l)){var d=l.indexOf("--")===0,f=ia(l,s[l],d);l==="float"&&(l="cssFloat"),d?r.setProperty(l,f):r[l]=f}}var oa=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aa(r,s){if(s){if(oa[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function la(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=null;function Us(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Bs=null,yn=null,Kn=null;function zs(r){if(r=Na(r)){if(typeof Bs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=_u(s),Bs(r.stateNode,r.type,s))}}function Qn(r){yn?Kn?Kn.push(r):Kn=[r]:yn=r}function ua(){if(yn){var r=yn,s=Kn;if(Kn=yn=null,zs(r),s)for(r=0;r<s.length;r++)zs(s[r])}}function Qi(r,s){return r(s)}function ca(){}var Tr=!1;function da(r,s,l){if(Tr)return r(s,l);Tr=!0;try{return Qi(r,s,l)}finally{Tr=!1,(yn!==null||Kn!==null)&&(ca(),ua())}}function ot(r,s){var l=r.stateNode;if(l===null)return null;var d=_u(l);if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(t(231,s,typeof l));return l}var $s=!1;if(h)try{var Pn={};Object.defineProperty(Pn,"passive",{get:function(){$s=!0}}),window.addEventListener("test",Pn,Pn),window.removeEventListener("test",Pn,Pn)}catch{$s=!1}function Ji(r,s,l,d,f,y,w,k,D){var H=Array.prototype.slice.call(arguments,3);try{s.apply(l,H)}catch(X){this.onError(X)}}var Yi=!1,Gs=null,bn=!1,ha=null,wd={onError:function(r){Yi=!0,Gs=r}};function Hs(r,s,l,d,f,y,w,k,D){Yi=!1,Gs=null,Ji.apply(wd,arguments)}function Gl(r,s,l,d,f,y,w,k,D){if(Hs.apply(this,arguments),Yi){if(Yi){var H=Gs;Yi=!1,Gs=null}else throw Error(t(198));bn||(bn=!0,ha=H)}}function Nn(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function Xi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Dn(r){if(Nn(r)!==r)throw Error(t(188))}function Hl(r){var s=r.alternate;if(!s){if(s=Nn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var l=r,d=s;;){var f=l.return;if(f===null)break;var y=f.alternate;if(y===null){if(d=f.return,d!==null){l=d;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===l)return Dn(f),r;if(y===d)return Dn(f),s;y=y.sibling}throw Error(t(188))}if(l.return!==d.return)l=f,d=y;else{for(var w=!1,k=f.child;k;){if(k===l){w=!0,l=f,d=y;break}if(k===d){w=!0,d=f,l=y;break}k=k.sibling}if(!w){for(k=y.child;k;){if(k===l){w=!0,l=y,d=f;break}if(k===d){w=!0,d=y,l=f;break}k=k.sibling}if(!w)throw Error(t(189))}}if(l.alternate!==d)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?r:s}function fa(r){return r=Hl(r),r!==null?qs(r):null}function qs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=qs(r);if(s!==null)return s;r=r.sibling}return null}var Ws=e.unstable_scheduleCallback,pa=e.unstable_cancelCallback,ql=e.unstable_shouldYield,Ed=e.unstable_requestPaint,He=e.unstable_now,Wl=e.unstable_getCurrentPriorityLevel,Zi=e.unstable_ImmediatePriority,Zr=e.unstable_UserBlockingPriority,vn=e.unstable_NormalPriority,ma=e.unstable_LowPriority,Kl=e.unstable_IdlePriority,es=null,ln=null;function Ql(r){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(es,r,void 0,(r.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:Yl,ga=Math.log,Jl=Math.LN2;function Yl(r){return r>>>=0,r===0?32:31-(ga(r)/Jl|0)|0}var Ks=64,Qs=4194304;function ei(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function ts(r,s){var l=r.pendingLanes;if(l===0)return 0;var d=0,f=r.suspendedLanes,y=r.pingedLanes,w=l&268435455;if(w!==0){var k=w&~f;k!==0?d=ei(k):(y&=w,y!==0&&(d=ei(y)))}else w=l&~f,w!==0?d=ei(w):y!==0&&(d=ei(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&f)===0&&(f=d&-d,y=s&-s,f>=y||f===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=l&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)l=31-Ht(s),f=1<<l,d|=r[l],s&=~f;return d}function Td(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ir(r,s){for(var l=r.suspendedLanes,d=r.pingedLanes,f=r.expirationTimes,y=r.pendingLanes;0<y;){var w=31-Ht(y),k=1<<w,D=f[w];D===-1?((k&l)===0||(k&d)!==0)&&(f[w]=Td(k,s)):D<=s&&(r.expiredLanes|=k),y&=~k}}function un(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ns(){var r=Ks;return Ks<<=1,(Ks&4194240)===0&&(Ks=64),r}function ti(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function ni(r,s,l){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Ht(s),r[s]=l}function $e(r,s){var l=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<l;){var f=31-Ht(l),y=1<<f;s[f]=0,d[f]=-1,r[f]=-1,l&=~y}}function ri(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var d=31-Ht(l),f=1<<d;f&s|r[d]&s&&(r[d]|=s),l&=~f}}var be=0;function ii(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Xl,Js,Zl,eu,tu,ya=!1,Jn=[],kt=null,Ln=null,On=null,si=new Map,_n=new Map,Yn=[],Id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nu(r,s){switch(r){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":si.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(s.pointerId)}}function Yt(r,s,l,d,f,y){return r===null||r.nativeEvent!==y?(r={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[f]},s!==null&&(s=Na(s),s!==null&&Js(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function Sd(r,s,l,d,f){switch(s){case"focusin":return kt=Yt(kt,r,s,l,d,f),!0;case"dragenter":return Ln=Yt(Ln,r,s,l,d,f),!0;case"mouseover":return On=Yt(On,r,s,l,d,f),!0;case"pointerover":var y=f.pointerId;return si.set(y,Yt(si.get(y)||null,r,s,l,d,f)),!0;case"gotpointercapture":return y=f.pointerId,_n.set(y,Yt(_n.get(y)||null,r,s,l,d,f)),!0}return!1}function ru(r){var s=as(r.target);if(s!==null){var l=Nn(s);if(l!==null){if(s=l.tag,s===13){if(s=Xi(l),s!==null){r.blockedOn=s,tu(r.priority,function(){Zl(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Sr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Ys(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(l===null){l=r.nativeEvent;var d=new l.constructor(l.type,l);Ki=d,l.target.dispatchEvent(d),Ki=null}else return s=Na(l),s!==null&&Js(s),r.blockedOn=l,!1;s.shift()}return!0}function rs(r,s,l){Sr(r)&&l.delete(s)}function iu(){ya=!1,kt!==null&&Sr(kt)&&(kt=null),Ln!==null&&Sr(Ln)&&(Ln=null),On!==null&&Sr(On)&&(On=null),si.forEach(rs),_n.forEach(rs)}function Vn(r,s){r.blockedOn===s&&(r.blockedOn=null,ya||(ya=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iu)))}function Mn(r){function s(f){return Vn(f,r)}if(0<Jn.length){Vn(Jn[0],r);for(var l=1;l<Jn.length;l++){var d=Jn[l];d.blockedOn===r&&(d.blockedOn=null)}}for(kt!==null&&Vn(kt,r),Ln!==null&&Vn(Ln,r),On!==null&&Vn(On,r),si.forEach(s),_n.forEach(s),l=0;l<Yn.length;l++)d=Yn[l],d.blockedOn===r&&(d.blockedOn=null);for(;0<Yn.length&&(l=Yn[0],l.blockedOn===null);)ru(l),l.blockedOn===null&&Yn.shift()}var Cr=te.ReactCurrentBatchConfig,oi=!0;function Ye(r,s,l,d){var f=be,y=Cr.transition;Cr.transition=null;try{be=1,va(r,s,l,d)}finally{be=f,Cr.transition=y}}function Cd(r,s,l,d){var f=be,y=Cr.transition;Cr.transition=null;try{be=4,va(r,s,l,d)}finally{be=f,Cr.transition=y}}function va(r,s,l,d){if(oi){var f=Ys(r,s,l,d);if(f===null)Vd(r,s,d,is,l),nu(r,d);else if(Sd(f,r,s,l,d))d.stopPropagation();else if(nu(r,d),s&4&&-1<Id.indexOf(r)){for(;f!==null;){var y=Na(f);if(y!==null&&Xl(y),y=Ys(r,s,l,d),y===null&&Vd(r,s,d,is,l),y===f)break;f=y}f!==null&&d.stopPropagation()}else Vd(r,s,d,null,l)}}var is=null;function Ys(r,s,l,d){if(is=null,r=Us(d),r=as(r),r!==null)if(s=Nn(r),s===null)r=null;else if(l=s.tag,l===13){if(r=Xi(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return is=r,null}function _a(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wl()){case Zi:return 1;case Zr:return 4;case vn:case ma:return 16;case Kl:return 536870912;default:return 16}default:return 16}}var cn=null,Xs=null,Xt=null;function wa(){if(Xt)return Xt;var r,s=Xs,l=s.length,d,f="value"in cn?cn.value:cn.textContent,y=f.length;for(r=0;r<l&&s[r]===f[r];r++);var w=l-r;for(d=1;d<=w&&s[l-d]===f[y-d];d++);return Xt=f.slice(r,1<d?1-d:void 0)}function Zs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Xn(){return!0}function Ea(){return!1}function Rt(r){function s(l,d,f,y,w){this._reactName=l,this._targetInst=f,this.type=d,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(l=r[k],this[k]=l?l(y):y[k]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Xn:Ea,this.isPropagationStopped=Ea,this}return ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),s}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=Rt(Fn),Zn=ce({},Fn,{view:0,detail:0}),Ad=Rt(Zn),to,Ar,ai,ss=ce({},Zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==ai&&(ai&&r.type==="mousemove"?(to=r.screenX-ai.screenX,Ar=r.screenY-ai.screenY):Ar=to=0,ai=r),to)},movementY:function(r){return"movementY"in r?r.movementY:Ar}}),no=Rt(ss),Ta=ce({},ss,{dataTransfer:0}),su=Rt(Ta),ro=ce({},Zn,{relatedTarget:0}),io=Rt(ro),ou=ce({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),xr=Rt(ou),au=ce({},Fn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),lu=Rt(au),uu=ce({},Fn,{data:0}),Ia=Rt(uu),so={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function du(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=cu[r])?!!s[r]:!1}function er(){return du}var u=ce({},Zn,{key:function(r){if(r.key){var s=so[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Zs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?qt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(r){return r.type==="keypress"?Zs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Zs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Rt(u),v=ce({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Rt(v),B=ce({},Zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),q=Rt(B),re=ce({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Be=Rt(re),vt=ce({},ss,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),De=Rt(vt),It=[9,13,27,32],dt=h&&"CompositionEvent"in window,wn=null;h&&"documentMode"in document&&(wn=document.documentMode);var dn=h&&"TextEvent"in window&&!wn,os=h&&(!dt||wn&&8<wn&&11>=wn),oo=" ",Wp=!1;function Kp(r,s){switch(r){case"keyup":return It.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ao=!1;function Xw(r,s){switch(r){case"compositionend":return Qp(s);case"keypress":return s.which!==32?null:(Wp=!0,oo);case"textInput":return r=s.data,r===oo&&Wp?null:r;default:return null}}function Zw(r,s){if(ao)return r==="compositionend"||!dt&&Kp(r,s)?(r=wa(),Xt=Xs=cn=null,ao=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return os&&s.locale!=="ko"?null:s.data;default:return null}}var eE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!eE[r.type]:s==="textarea"}function Yp(r,s,l,d){Qn(d),s=gu(s,"onChange"),0<s.length&&(l=new eo("onChange","change",null,l,d),r.push({event:l,listeners:s}))}var Sa=null,Ca=null;function tE(r){mm(r,0)}function hu(r){var s=fo(r);if(Os(s))return r}function nE(r,s){if(r==="change")return s}var Xp=!1;if(h){var xd;if(h){var kd="oninput"in document;if(!kd){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),kd=typeof Zp.oninput=="function"}xd=kd}else xd=!1;Xp=xd&&(!document.documentMode||9<document.documentMode)}function em(){Sa&&(Sa.detachEvent("onpropertychange",tm),Ca=Sa=null)}function tm(r){if(r.propertyName==="value"&&hu(Ca)){var s=[];Yp(s,Ca,r,Us(r)),da(tE,s)}}function rE(r,s,l){r==="focusin"?(em(),Sa=s,Ca=l,Sa.attachEvent("onpropertychange",tm)):r==="focusout"&&em()}function iE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return hu(Ca)}function sE(r,s){if(r==="click")return hu(s)}function oE(r,s){if(r==="input"||r==="change")return hu(s)}function aE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var jn=typeof Object.is=="function"?Object.is:aE;function Aa(r,s){if(jn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var f=l[d];if(!p.call(s,f)||!jn(r[f],s[f]))return!1}return!0}function nm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function rm(r,s){var l=nm(r);r=0;for(var d;l;){if(l.nodeType===3){if(d=r+l.textContent.length,r<=s&&d>=s)return{node:l,offset:s-r};r=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=nm(l)}}function im(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?im(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function sm(){for(var r=window,s=Yr();s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Yr(r.document)}return s}function Rd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function lE(r){var s=sm(),l=r.focusedElem,d=r.selectionRange;if(s!==l&&l&&l.ownerDocument&&im(l.ownerDocument.documentElement,l)){if(d!==null&&Rd(l)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in l)l.selectionStart=s,l.selectionEnd=Math.min(r,l.value.length);else if(r=(s=l.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=l.textContent.length,y=Math.min(d.start,f);d=d.end===void 0?y:Math.min(d.end,f),!r.extend&&y>d&&(f=d,d=y,y=f),f=rm(l,y);var w=rm(l,d);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),y>d?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=l;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<s.length;l++)r=s[l],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var uE=h&&"documentMode"in document&&11>=document.documentMode,lo=null,Pd=null,xa=null,bd=!1;function om(r,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;bd||lo==null||lo!==Yr(d)||(d=lo,"selectionStart"in d&&Rd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),xa&&Aa(xa,d)||(xa=d,d=gu(Pd,"onSelect"),0<d.length&&(s=new eo("onSelect","select",null,s,l),r.push({event:s,listeners:d}),s.target=lo)))}function fu(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var uo={animationend:fu("Animation","AnimationEnd"),animationiteration:fu("Animation","AnimationIteration"),animationstart:fu("Animation","AnimationStart"),transitionend:fu("Transition","TransitionEnd")},Nd={},am={};h&&(am=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function pu(r){if(Nd[r])return Nd[r];if(!uo[r])return r;var s=uo[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in am)return Nd[r]=s[l];return r}var lm=pu("animationend"),um=pu("animationiteration"),cm=pu("animationstart"),dm=pu("transitionend"),hm=new Map,fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(r,s){hm.set(r,s),a(s,[r])}for(var Dd=0;Dd<fm.length;Dd++){var Ld=fm[Dd],cE=Ld.toLowerCase(),dE=Ld[0].toUpperCase()+Ld.slice(1);li(cE,"on"+dE)}li(lm,"onAnimationEnd"),li(um,"onAnimationIteration"),li(cm,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(dm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function pm(r,s,l){var d=r.type||"unknown-event";r.currentTarget=l,Gl(d,s,void 0,r),r.currentTarget=null}function mm(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var d=r[l],f=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var w=d.length-1;0<=w;w--){var k=d[w],D=k.instance,H=k.currentTarget;if(k=k.listener,D!==y&&f.isPropagationStopped())break e;pm(f,k,H),y=D}else for(w=0;w<d.length;w++){if(k=d[w],D=k.instance,H=k.currentTarget,k=k.listener,D!==y&&f.isPropagationStopped())break e;pm(f,k,H),y=D}}}if(bn)throw r=ha,bn=!1,ha=null,r}function Ke(r,s){var l=s[zd];l===void 0&&(l=s[zd]=new Set);var d=r+"__bubble";l.has(d)||(gm(s,r,2,!1),l.add(d))}function Od(r,s,l){var d=0;s&&(d|=4),gm(l,r,d,s)}var mu="_reactListening"+Math.random().toString(36).slice(2);function Ra(r){if(!r[mu]){r[mu]=!0,i.forEach(function(l){l!=="selectionchange"&&(hE.has(l)||Od(l,!1,r),Od(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[mu]||(s[mu]=!0,Od("selectionchange",!1,s))}}function gm(r,s,l,d){switch(_a(s)){case 1:var f=Ye;break;case 4:f=Cd;break;default:f=va}l=f.bind(null,s,l,r),f=void 0,!$s||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?r.addEventListener(s,l,{capture:!0,passive:f}):r.addEventListener(s,l,!0):f!==void 0?r.addEventListener(s,l,{passive:f}):r.addEventListener(s,l,!1)}function Vd(r,s,l,d,f){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var k=d.stateNode.containerInfo;if(k===f||k.nodeType===8&&k.parentNode===f)break;if(w===4)for(w=d.return;w!==null;){var D=w.tag;if((D===3||D===4)&&(D=w.stateNode.containerInfo,D===f||D.nodeType===8&&D.parentNode===f))return;w=w.return}for(;k!==null;){if(w=as(k),w===null)return;if(D=w.tag,D===5||D===6){d=y=w;continue e}k=k.parentNode}}d=d.return}da(function(){var H=y,X=Us(l),ee=[];e:{var Y=hm.get(r);if(Y!==void 0){var le=eo,he=r;switch(r){case"keypress":if(Zs(l)===0)break e;case"keydown":case"keyup":le=m;break;case"focusin":he="focus",le=io;break;case"focusout":he="blur",le=io;break;case"beforeblur":case"afterblur":le=io;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=no;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=q;break;case lm:case um:case cm:le=xr;break;case dm:le=Be;break;case"scroll":le=Ad;break;case"wheel":le=De;break;case"copy":case"cut":case"paste":le=lu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=I}var fe=(s&4)!==0,at=!fe&&r==="scroll",z=fe?Y!==null?Y+"Capture":null:Y;fe=[];for(var M=H,G;M!==null;){G=M;var ne=G.stateNode;if(G.tag===5&&ne!==null&&(G=ne,z!==null&&(ne=ot(M,z),ne!=null&&fe.push(Pa(M,ne,G)))),at)break;M=M.return}0<fe.length&&(Y=new le(Y,he,null,l,X),ee.push({event:Y,listeners:fe}))}}if((s&7)===0){e:{if(Y=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",Y&&l!==Ki&&(he=l.relatedTarget||l.fromElement)&&(as(he)||he[kr]))break e;if((le||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,le?(he=l.relatedTarget||l.toElement,le=H,he=he?as(he):null,he!==null&&(at=Nn(he),he!==at||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=H),le!==he)){if(fe=no,ne="onMouseLeave",z="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(fe=I,ne="onPointerLeave",z="onPointerEnter",M="pointer"),at=le==null?Y:fo(le),G=he==null?Y:fo(he),Y=new fe(ne,M+"leave",le,l,X),Y.target=at,Y.relatedTarget=G,ne=null,as(X)===H&&(fe=new fe(z,M+"enter",he,l,X),fe.target=G,fe.relatedTarget=at,ne=fe),at=ne,le&&he)t:{for(fe=le,z=he,M=0,G=fe;G;G=co(G))M++;for(G=0,ne=z;ne;ne=co(ne))G++;for(;0<M-G;)fe=co(fe),M--;for(;0<G-M;)z=co(z),G--;for(;M--;){if(fe===z||z!==null&&fe===z.alternate)break t;fe=co(fe),z=co(z)}fe=null}else fe=null;le!==null&&ym(ee,Y,le,fe,!1),he!==null&&at!==null&&ym(ee,at,he,fe,!0)}}e:{if(Y=H?fo(H):window,le=Y.nodeName&&Y.nodeName.toLowerCase(),le==="select"||le==="input"&&Y.type==="file")var pe=nE;else if(Jp(Y))if(Xp)pe=oE;else{pe=iE;var ve=rE}else(le=Y.nodeName)&&le.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(pe=sE);if(pe&&(pe=pe(r,H))){Yp(ee,pe,l,X);break e}ve&&ve(r,Y,H),r==="focusout"&&(ve=Y._wrapperState)&&ve.controlled&&Y.type==="number"&&Ms(Y,"number",Y.value)}switch(ve=H?fo(H):window,r){case"focusin":(Jp(ve)||ve.contentEditable==="true")&&(lo=ve,Pd=H,xa=null);break;case"focusout":xa=Pd=lo=null;break;case"mousedown":bd=!0;break;case"contextmenu":case"mouseup":case"dragend":bd=!1,om(ee,l,X);break;case"selectionchange":if(uE)break;case"keydown":case"keyup":om(ee,l,X)}var _e;if(dt)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ao?Kp(r,l)&&(Te="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Te="onCompositionStart");Te&&(os&&l.locale!=="ko"&&(ao||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ao&&(_e=wa()):(cn=X,Xs="value"in cn?cn.value:cn.textContent,ao=!0)),ve=gu(H,Te),0<ve.length&&(Te=new Ia(Te,r,null,l,X),ee.push({event:Te,listeners:ve}),_e?Te.data=_e:(_e=Qp(l),_e!==null&&(Te.data=_e)))),(_e=dn?Xw(r,l):Zw(r,l))&&(H=gu(H,"onBeforeInput"),0<H.length&&(X=new Ia("onBeforeInput","beforeinput",null,l,X),ee.push({event:X,listeners:H}),X.data=_e))}mm(ee,s)})}function Pa(r,s,l){return{instance:r,listener:s,currentTarget:l}}function gu(r,s){for(var l=s+"Capture",d=[];r!==null;){var f=r,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=ot(r,l),y!=null&&d.unshift(Pa(r,y,f)),y=ot(r,s),y!=null&&d.push(Pa(r,y,f))),r=r.return}return d}function co(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function ym(r,s,l,d,f){for(var y=s._reactName,w=[];l!==null&&l!==d;){var k=l,D=k.alternate,H=k.stateNode;if(D!==null&&D===d)break;k.tag===5&&H!==null&&(k=H,f?(D=ot(l,y),D!=null&&w.unshift(Pa(l,D,k))):f||(D=ot(l,y),D!=null&&w.push(Pa(l,D,k)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var fE=/\r\n?/g,pE=/\u0000|\uFFFD/g;function vm(r){return(typeof r=="string"?r:""+r).replace(fE,`
`).replace(pE,"")}function yu(r,s,l){if(s=vm(s),vm(r)!==s&&l)throw Error(t(425))}function vu(){}var Md=null,Fd=null;function jd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ud=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,_m=typeof Promise=="function"?Promise:void 0,gE=typeof queueMicrotask=="function"?queueMicrotask:typeof _m<"u"?function(r){return _m.resolve(null).then(r).catch(yE)}:Ud;function yE(r){setTimeout(function(){throw r})}function Bd(r,s){var l=s,d=0;do{var f=l.nextSibling;if(r.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(d===0){r.removeChild(f),Mn(s);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=f}while(l);Mn(s)}function ui(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function wm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}var ho=Math.random().toString(36).slice(2),tr="__reactFiber$"+ho,ba="__reactProps$"+ho,kr="__reactContainer$"+ho,zd="__reactEvents$"+ho,vE="__reactListeners$"+ho,_E="__reactHandles$"+ho;function as(r){var s=r[tr];if(s)return s;for(var l=r.parentNode;l;){if(s=l[kr]||l[tr]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=wm(r);r!==null;){if(l=r[tr])return l;r=wm(r)}return s}r=l,l=r.parentNode}return null}function Na(r){return r=r[tr]||r[kr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function fo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function _u(r){return r[ba]||null}var $d=[],po=-1;function ci(r){return{current:r}}function Qe(r){0>po||(r.current=$d[po],$d[po]=null,po--)}function qe(r,s){po++,$d[po]=r.current,r.current=s}var di={},Mt=ci(di),Zt=ci(!1),ls=di;function mo(r,s){var l=r.type.contextTypes;if(!l)return di;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in l)f[y]=s[y];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function en(r){return r=r.childContextTypes,r!=null}function wu(){Qe(Zt),Qe(Mt)}function Em(r,s,l){if(Mt.current!==di)throw Error(t(168));qe(Mt,s),qe(Zt,l)}function Tm(r,s,l){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,Me(r)||"Unknown",f));return ce({},l,d)}function Eu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||di,ls=Mt.current,qe(Mt,r),qe(Zt,Zt.current),!0}function Im(r,s,l){var d=r.stateNode;if(!d)throw Error(t(169));l?(r=Tm(r,s,ls),d.__reactInternalMemoizedMergedChildContext=r,Qe(Zt),Qe(Mt),qe(Mt,r)):Qe(Zt),qe(Zt,l)}var Rr=null,Tu=!1,Gd=!1;function Sm(r){Rr===null?Rr=[r]:Rr.push(r)}function wE(r){Tu=!0,Sm(r)}function hi(){if(!Gd&&Rr!==null){Gd=!0;var r=0,s=be;try{var l=Rr;for(be=1;r<l.length;r++){var d=l[r];do d=d(!0);while(d!==null)}Rr=null,Tu=!1}catch(f){throw Rr!==null&&(Rr=Rr.slice(r+1)),Ws(Zi,hi),f}finally{be=s,Gd=!1}}return null}var go=[],yo=0,Iu=null,Su=0,En=[],Tn=0,us=null,Pr=1,br="";function cs(r,s){go[yo++]=Su,go[yo++]=Iu,Iu=r,Su=s}function Cm(r,s,l){En[Tn++]=Pr,En[Tn++]=br,En[Tn++]=us,us=r;var d=Pr;r=br;var f=32-Ht(d)-1;d&=~(1<<f),l+=1;var y=32-Ht(s)+f;if(30<y){var w=f-f%5;y=(d&(1<<w)-1).toString(32),d>>=w,f-=w,Pr=1<<32-Ht(s)+f|l<<f|d,br=y+r}else Pr=1<<y|l<<f|d,br=r}function Hd(r){r.return!==null&&(cs(r,1),Cm(r,1,0))}function qd(r){for(;r===Iu;)Iu=go[--yo],go[yo]=null,Su=go[--yo],go[yo]=null;for(;r===us;)us=En[--Tn],En[Tn]=null,br=En[--Tn],En[Tn]=null,Pr=En[--Tn],En[Tn]=null}var hn=null,fn=null,Xe=!1,Un=null;function Am(r,s){var l=An(5,null,null,0);l.elementType="DELETED",l.stateNode=s,l.return=r,s=r.deletions,s===null?(r.deletions=[l],r.flags|=16):s.push(l)}function xm(r,s){switch(r.tag){case 5:var l=r.type;return s=s.nodeType!==1||l.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,hn=r,fn=ui(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,hn=r,fn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(l=us!==null?{id:Pr,overflow:br}:null,r.memoizedState={dehydrated:s,treeContext:l,retryLane:1073741824},l=An(18,null,null,0),l.stateNode=s,l.return=r,r.child=l,hn=r,fn=null,!0):!1;default:return!1}}function Wd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Kd(r){if(Xe){var s=fn;if(s){var l=s;if(!xm(r,s)){if(Wd(r))throw Error(t(418));s=ui(l.nextSibling);var d=hn;s&&xm(r,s)?Am(d,l):(r.flags=r.flags&-4097|2,Xe=!1,hn=r)}}else{if(Wd(r))throw Error(t(418));r.flags=r.flags&-4097|2,Xe=!1,hn=r}}}function km(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;hn=r}function Cu(r){if(r!==hn)return!1;if(!Xe)return km(r),Xe=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!jd(r.type,r.memoizedProps)),s&&(s=fn)){if(Wd(r))throw Rm(),Error(t(418));for(;s;)Am(r,s),s=ui(s.nextSibling)}if(km(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"){if(s===0){fn=ui(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++}r=r.nextSibling}fn=null}}else fn=hn?ui(r.stateNode.nextSibling):null;return!0}function Rm(){for(var r=fn;r;)r=ui(r.nextSibling)}function vo(){fn=hn=null,Xe=!1}function Qd(r){Un===null?Un=[r]:Un.push(r)}var EE=te.ReactCurrentBatchConfig;function Da(r,s,l){if(r=l.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var d=l.stateNode}if(!d)throw Error(t(147,r));var f=d,y=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(w){var k=f.refs;w===null?delete k[y]:k[y]=w},s._stringRef=y,s)}if(typeof r!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,r))}return r}function Au(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Pm(r){var s=r._init;return s(r._payload)}function bm(r){function s(z,M){if(r){var G=z.deletions;G===null?(z.deletions=[M],z.flags|=16):G.push(M)}}function l(z,M){if(!r)return null;for(;M!==null;)s(z,M),M=M.sibling;return null}function d(z,M){for(z=new Map;M!==null;)M.key!==null?z.set(M.key,M):z.set(M.index,M),M=M.sibling;return z}function f(z,M){return z=wi(z,M),z.index=0,z.sibling=null,z}function y(z,M,G){return z.index=G,r?(G=z.alternate,G!==null?(G=G.index,G<M?(z.flags|=2,M):G):(z.flags|=2,M)):(z.flags|=1048576,M)}function w(z){return r&&z.alternate===null&&(z.flags|=2),z}function k(z,M,G,ne){return M===null||M.tag!==6?(M=Uh(G,z.mode,ne),M.return=z,M):(M=f(M,G),M.return=z,M)}function D(z,M,G,ne){var pe=G.type;return pe===b?X(z,M,G.props.children,ne,G.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Vt&&Pm(pe)===M.type)?(ne=f(M,G.props),ne.ref=Da(z,M,G),ne.return=z,ne):(ne=Ju(G.type,G.key,G.props,null,z.mode,ne),ne.ref=Da(z,M,G),ne.return=z,ne)}function H(z,M,G,ne){return M===null||M.tag!==4||M.stateNode.containerInfo!==G.containerInfo||M.stateNode.implementation!==G.implementation?(M=Bh(G,z.mode,ne),M.return=z,M):(M=f(M,G.children||[]),M.return=z,M)}function X(z,M,G,ne,pe){return M===null||M.tag!==7?(M=vs(G,z.mode,ne,pe),M.return=z,M):(M=f(M,G),M.return=z,M)}function ee(z,M,G){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Uh(""+M,z.mode,G),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ae:return G=Ju(M.type,M.key,M.props,null,z.mode,G),G.ref=Da(z,null,M),G.return=z,G;case se:return M=Bh(M,z.mode,G),M.return=z,M;case Vt:var ne=M._init;return ee(z,ne(M._payload),G)}if(_r(M)||ye(M))return M=vs(M,z.mode,G,null),M.return=z,M;Au(z,M)}return null}function Y(z,M,G,ne){var pe=M!==null?M.key:null;if(typeof G=="string"&&G!==""||typeof G=="number")return pe!==null?null:k(z,M,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case ae:return G.key===pe?D(z,M,G,ne):null;case se:return G.key===pe?H(z,M,G,ne):null;case Vt:return pe=G._init,Y(z,M,pe(G._payload),ne)}if(_r(G)||ye(G))return pe!==null?null:X(z,M,G,ne,null);Au(z,G)}return null}function le(z,M,G,ne,pe){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return z=z.get(G)||null,k(M,z,""+ne,pe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case ae:return z=z.get(ne.key===null?G:ne.key)||null,D(M,z,ne,pe);case se:return z=z.get(ne.key===null?G:ne.key)||null,H(M,z,ne,pe);case Vt:var ve=ne._init;return le(z,M,G,ve(ne._payload),pe)}if(_r(ne)||ye(ne))return z=z.get(G)||null,X(M,z,ne,pe,null);Au(M,ne)}return null}function he(z,M,G,ne){for(var pe=null,ve=null,_e=M,Te=M=0,At=null;_e!==null&&Te<G.length;Te++){_e.index>Te?(At=_e,_e=null):At=_e.sibling;var Ve=Y(z,_e,G[Te],ne);if(Ve===null){_e===null&&(_e=At);break}r&&_e&&Ve.alternate===null&&s(z,_e),M=y(Ve,M,Te),ve===null?pe=Ve:ve.sibling=Ve,ve=Ve,_e=At}if(Te===G.length)return l(z,_e),Xe&&cs(z,Te),pe;if(_e===null){for(;Te<G.length;Te++)_e=ee(z,G[Te],ne),_e!==null&&(M=y(_e,M,Te),ve===null?pe=_e:ve.sibling=_e,ve=_e);return Xe&&cs(z,Te),pe}for(_e=d(z,_e);Te<G.length;Te++)At=le(_e,z,Te,G[Te],ne),At!==null&&(r&&At.alternate!==null&&_e.delete(At.key===null?Te:At.key),M=y(At,M,Te),ve===null?pe=At:ve.sibling=At,ve=At);return r&&_e.forEach(function(Ei){return s(z,Ei)}),Xe&&cs(z,Te),pe}function fe(z,M,G,ne){var pe=ye(G);if(typeof pe!="function")throw Error(t(150));if(G=pe.call(G),G==null)throw Error(t(151));for(var ve=pe=null,_e=M,Te=M=0,At=null,Ve=G.next();_e!==null&&!Ve.done;Te++,Ve=G.next()){_e.index>Te?(At=_e,_e=null):At=_e.sibling;var Ei=Y(z,_e,Ve.value,ne);if(Ei===null){_e===null&&(_e=At);break}r&&_e&&Ei.alternate===null&&s(z,_e),M=y(Ei,M,Te),ve===null?pe=Ei:ve.sibling=Ei,ve=Ei,_e=At}if(Ve.done)return l(z,_e),Xe&&cs(z,Te),pe;if(_e===null){for(;!Ve.done;Te++,Ve=G.next())Ve=ee(z,Ve.value,ne),Ve!==null&&(M=y(Ve,M,Te),ve===null?pe=Ve:ve.sibling=Ve,ve=Ve);return Xe&&cs(z,Te),pe}for(_e=d(z,_e);!Ve.done;Te++,Ve=G.next())Ve=le(_e,z,Te,Ve.value,ne),Ve!==null&&(r&&Ve.alternate!==null&&_e.delete(Ve.key===null?Te:Ve.key),M=y(Ve,M,Te),ve===null?pe=Ve:ve.sibling=Ve,ve=Ve);return r&&_e.forEach(function(eT){return s(z,eT)}),Xe&&cs(z,Te),pe}function at(z,M,G,ne){if(typeof G=="object"&&G!==null&&G.type===b&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case ae:e:{for(var pe=G.key,ve=M;ve!==null;){if(ve.key===pe){if(pe=G.type,pe===b){if(ve.tag===7){l(z,ve.sibling),M=f(ve,G.props.children),M.return=z,z=M;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Vt&&Pm(pe)===ve.type){l(z,ve.sibling),M=f(ve,G.props),M.ref=Da(z,ve,G),M.return=z,z=M;break e}l(z,ve);break}else s(z,ve);ve=ve.sibling}G.type===b?(M=vs(G.props.children,z.mode,ne,G.key),M.return=z,z=M):(ne=Ju(G.type,G.key,G.props,null,z.mode,ne),ne.ref=Da(z,M,G),ne.return=z,z=ne)}return w(z);case se:e:{for(ve=G.key;M!==null;){if(M.key===ve)if(M.tag===4&&M.stateNode.containerInfo===G.containerInfo&&M.stateNode.implementation===G.implementation){l(z,M.sibling),M=f(M,G.children||[]),M.return=z,z=M;break e}else{l(z,M);break}else s(z,M);M=M.sibling}M=Bh(G,z.mode,ne),M.return=z,z=M}return w(z);case Vt:return ve=G._init,at(z,M,ve(G._payload),ne)}if(_r(G))return he(z,M,G,ne);if(ye(G))return fe(z,M,G,ne);Au(z,G)}return typeof G=="string"&&G!==""||typeof G=="number"?(G=""+G,M!==null&&M.tag===6?(l(z,M.sibling),M=f(M,G),M.return=z,z=M):(l(z,M),M=Uh(G,z.mode,ne),M.return=z,z=M),w(z)):l(z,M)}return at}var _o=bm(!0),Nm=bm(!1),xu=ci(null),ku=null,wo=null,Jd=null;function Yd(){Jd=wo=ku=null}function Xd(r){var s=xu.current;Qe(xu),r._currentValue=s}function Zd(r,s,l){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===l)break;r=r.return}}function Eo(r,s){ku=r,Jd=wo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(tn=!0),r.firstContext=null)}function In(r){var s=r._currentValue;if(Jd!==r)if(r={context:r,memoizedValue:s,next:null},wo===null){if(ku===null)throw Error(t(308));wo=r,ku.dependencies={lanes:0,firstContext:r}}else wo=wo.next=r;return s}var ds=null;function eh(r){ds===null?ds=[r]:ds.push(r)}function Dm(r,s,l,d){var f=s.interleaved;return f===null?(l.next=l,eh(s)):(l.next=f.next,f.next=l),s.interleaved=l,Nr(r,d)}function Nr(r,s){r.lanes|=s;var l=r.alternate;for(l!==null&&(l.lanes|=s),l=r,r=r.return;r!==null;)r.childLanes|=s,l=r.alternate,l!==null&&(l.childLanes|=s),l=r,r=r.return;return l.tag===3?l.stateNode:null}var fi=!1;function th(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Dr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function pi(r,s,l){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Oe&2)!==0){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,Nr(r,l)}return f=d.interleaved,f===null?(s.next=s,eh(d)):(s.next=f.next,f.next=s),d.interleaved=s,Nr(r,l)}function Ru(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,ri(r,l)}}function Om(r,s){var l=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var f=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var w={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?f=y=w:y=y.next=w,l=l.next}while(l!==null);y===null?f=y=s:y=y.next=s}else f=y=s;l={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:d.shared,effects:d.effects},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}function Pu(r,s,l,d){var f=r.updateQueue;fi=!1;var y=f.firstBaseUpdate,w=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var D=k,H=D.next;D.next=null,w===null?y=H:w.next=H,w=D;var X=r.alternate;X!==null&&(X=X.updateQueue,k=X.lastBaseUpdate,k!==w&&(k===null?X.firstBaseUpdate=H:k.next=H,X.lastBaseUpdate=D))}if(y!==null){var ee=f.baseState;w=0,X=H=D=null,k=y;do{var Y=k.lane,le=k.eventTime;if((d&Y)===Y){X!==null&&(X=X.next={eventTime:le,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var he=r,fe=k;switch(Y=s,le=l,fe.tag){case 1:if(he=fe.payload,typeof he=="function"){ee=he.call(le,ee,Y);break e}ee=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,Y=typeof he=="function"?he.call(le,ee,Y):he,Y==null)break e;ee=ce({},ee,Y);break e;case 2:fi=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,Y=f.effects,Y===null?f.effects=[k]:Y.push(k))}else le={eventTime:le,lane:Y,tag:k.tag,payload:k.payload,callback:k.callback,next:null},X===null?(H=X=le,D=ee):X=X.next=le,w|=Y;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;Y=k,k=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(X===null&&(D=ee),f.baseState=D,f.firstBaseUpdate=H,f.lastBaseUpdate=X,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else y===null&&(f.shared.lanes=0);ps|=w,r.lanes=w,r.memoizedState=ee}}function Vm(r,s,l){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],f=d.callback;if(f!==null){if(d.callback=null,d=l,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var La={},nr=ci(La),Oa=ci(La),Va=ci(La);function hs(r){if(r===La)throw Error(t(174));return r}function nh(r,s){switch(qe(Va,s),qe(Oa,r),qe(nr,La),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:yt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=yt(s,r)}Qe(nr),qe(nr,s)}function To(){Qe(nr),Qe(Oa),Qe(Va)}function Mm(r){hs(Va.current);var s=hs(nr.current),l=yt(s,r.type);s!==l&&(qe(Oa,r),qe(nr,l))}function rh(r){Oa.current===r&&(Qe(nr),Qe(Oa))}var Ze=ci(0);function bu(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ih=[];function sh(){for(var r=0;r<ih.length;r++)ih[r]._workInProgressVersionPrimary=null;ih.length=0}var Nu=te.ReactCurrentDispatcher,oh=te.ReactCurrentBatchConfig,fs=0,et=null,_t=null,St=null,Du=!1,Ma=!1,Fa=0,TE=0;function Ft(){throw Error(t(321))}function ah(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!jn(r[l],s[l]))return!1;return!0}function lh(r,s,l,d,f,y){if(fs=y,et=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Nu.current=r===null||r.memoizedState===null?AE:xE,r=l(d,f),Ma){y=0;do{if(Ma=!1,Fa=0,25<=y)throw Error(t(301));y+=1,St=_t=null,s.updateQueue=null,Nu.current=kE,r=l(d,f)}while(Ma)}if(Nu.current=Vu,s=_t!==null&&_t.next!==null,fs=0,St=_t=et=null,Du=!1,s)throw Error(t(300));return r}function uh(){var r=Fa!==0;return Fa=0,r}function rr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?et.memoizedState=St=r:St=St.next=r,St}function Sn(){if(_t===null){var r=et.alternate;r=r!==null?r.memoizedState:null}else r=_t.next;var s=St===null?et.memoizedState:St.next;if(s!==null)St=s,_t=r;else{if(r===null)throw Error(t(310));_t=r,r={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},St===null?et.memoizedState=St=r:St=St.next=r}return St}function ja(r,s){return typeof s=="function"?s(r):s}function ch(r){var s=Sn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var d=_t,f=d.baseQueue,y=l.pending;if(y!==null){if(f!==null){var w=f.next;f.next=y.next,y.next=w}d.baseQueue=f=y,l.pending=null}if(f!==null){y=f.next,d=d.baseState;var k=w=null,D=null,H=y;do{var X=H.lane;if((fs&X)===X)D!==null&&(D=D.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),d=H.hasEagerState?H.eagerState:r(d,H.action);else{var ee={lane:X,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};D===null?(k=D=ee,w=d):D=D.next=ee,et.lanes|=X,ps|=X}H=H.next}while(H!==null&&H!==y);D===null?w=d:D.next=k,jn(d,s.memoizedState)||(tn=!0),s.memoizedState=d,s.baseState=w,s.baseQueue=D,l.lastRenderedState=d}if(r=l.interleaved,r!==null){f=r;do y=f.lane,et.lanes|=y,ps|=y,f=f.next;while(f!==r)}else f===null&&(l.lanes=0);return[s.memoizedState,l.dispatch]}function dh(r){var s=Sn(),l=s.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=r;var d=l.dispatch,f=l.pending,y=s.memoizedState;if(f!==null){l.pending=null;var w=f=f.next;do y=r(y,w.action),w=w.next;while(w!==f);jn(y,s.memoizedState)||(tn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,d]}function Fm(){}function jm(r,s){var l=et,d=Sn(),f=s(),y=!jn(d.memoizedState,f);if(y&&(d.memoizedState=f,tn=!0),d=d.queue,hh(zm.bind(null,l,d,r),[r]),d.getSnapshot!==s||y||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,Ua(9,Bm.bind(null,l,d,f,s),void 0,null),Ct===null)throw Error(t(349));(fs&30)!==0||Um(l,s,f)}return f}function Um(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function Bm(r,s,l,d){s.value=l,s.getSnapshot=d,$m(s)&&Gm(r)}function zm(r,s,l){return l(function(){$m(s)&&Gm(r)})}function $m(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!jn(r,l)}catch{return!0}}function Gm(r){var s=Nr(r,1);s!==null&&Gn(s,r,1,-1)}function Hm(r){var s=rr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:r},s.queue=r,r=r.dispatch=CE.bind(null,et,r),[s.memoizedState,r]}function Ua(r,s,l,d){return r={tag:r,create:s,destroy:l,deps:d,next:null},s=et.updateQueue,s===null?(s={lastEffect:null,stores:null},et.updateQueue=s,s.lastEffect=r.next=r):(l=s.lastEffect,l===null?s.lastEffect=r.next=r:(d=l.next,l.next=r,r.next=d,s.lastEffect=r)),r}function qm(){return Sn().memoizedState}function Lu(r,s,l,d){var f=rr();et.flags|=r,f.memoizedState=Ua(1|s,l,void 0,d===void 0?null:d)}function Ou(r,s,l,d){var f=Sn();d=d===void 0?null:d;var y=void 0;if(_t!==null){var w=_t.memoizedState;if(y=w.destroy,d!==null&&ah(d,w.deps)){f.memoizedState=Ua(s,l,y,d);return}}et.flags|=r,f.memoizedState=Ua(1|s,l,y,d)}function Wm(r,s){return Lu(8390656,8,r,s)}function hh(r,s){return Ou(2048,8,r,s)}function Km(r,s){return Ou(4,2,r,s)}function Qm(r,s){return Ou(4,4,r,s)}function Jm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Ym(r,s,l){return l=l!=null?l.concat([r]):null,Ou(4,4,Jm.bind(null,s,r),l)}function fh(){}function Xm(r,s){var l=Sn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&ah(s,d[1])?d[0]:(l.memoizedState=[r,s],r)}function Zm(r,s){var l=Sn();s=s===void 0?null:s;var d=l.memoizedState;return d!==null&&s!==null&&ah(s,d[1])?d[0]:(r=r(),l.memoizedState=[r,s],r)}function eg(r,s,l){return(fs&21)===0?(r.baseState&&(r.baseState=!1,tn=!0),r.memoizedState=l):(jn(l,s)||(l=ns(),et.lanes|=l,ps|=l,r.baseState=!0),s)}function IE(r,s){var l=be;be=l!==0&&4>l?l:4,r(!0);var d=oh.transition;oh.transition={};try{r(!1),s()}finally{be=l,oh.transition=d}}function tg(){return Sn().memoizedState}function SE(r,s,l){var d=vi(r);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},ng(r))rg(s,l);else if(l=Dm(r,s,l,d),l!==null){var f=Kt();Gn(l,r,d,f),ig(l,s,d)}}function CE(r,s,l){var d=vi(r),f={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(ng(r))rg(s,f);else{var y=r.alternate;if(r.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var w=s.lastRenderedState,k=y(w,l);if(f.hasEagerState=!0,f.eagerState=k,jn(k,w)){var D=s.interleaved;D===null?(f.next=f,eh(s)):(f.next=D.next,D.next=f),s.interleaved=f;return}}catch{}finally{}l=Dm(r,s,f,d),l!==null&&(f=Kt(),Gn(l,r,d,f),ig(l,s,d))}}function ng(r){var s=r.alternate;return r===et||s!==null&&s===et}function rg(r,s){Ma=Du=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function ig(r,s,l){if((l&4194240)!==0){var d=s.lanes;d&=r.pendingLanes,l|=d,s.lanes=l,ri(r,l)}}var Vu={readContext:In,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},AE={readContext:In,useCallback:function(r,s){return rr().memoizedState=[r,s===void 0?null:s],r},useContext:In,useEffect:Wm,useImperativeHandle:function(r,s,l){return l=l!=null?l.concat([r]):null,Lu(4194308,4,Jm.bind(null,s,r),l)},useLayoutEffect:function(r,s){return Lu(4194308,4,r,s)},useInsertionEffect:function(r,s){return Lu(4,2,r,s)},useMemo:function(r,s){var l=rr();return s=s===void 0?null:s,r=r(),l.memoizedState=[r,s],r},useReducer:function(r,s,l){var d=rr();return s=l!==void 0?l(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=SE.bind(null,et,r),[d.memoizedState,r]},useRef:function(r){var s=rr();return r={current:r},s.memoizedState=r},useState:Hm,useDebugValue:fh,useDeferredValue:function(r){return rr().memoizedState=r},useTransition:function(){var r=Hm(!1),s=r[0];return r=IE.bind(null,r[1]),rr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,l){var d=et,f=rr();if(Xe){if(l===void 0)throw Error(t(407));l=l()}else{if(l=s(),Ct===null)throw Error(t(349));(fs&30)!==0||Um(d,s,l)}f.memoizedState=l;var y={value:l,getSnapshot:s};return f.queue=y,Wm(zm.bind(null,d,y,r),[r]),d.flags|=2048,Ua(9,Bm.bind(null,d,y,l,s),void 0,null),l},useId:function(){var r=rr(),s=Ct.identifierPrefix;if(Xe){var l=br,d=Pr;l=(d&~(1<<32-Ht(d)-1)).toString(32)+l,s=":"+s+"R"+l,l=Fa++,0<l&&(s+="H"+l.toString(32)),s+=":"}else l=TE++,s=":"+s+"r"+l.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},xE={readContext:In,useCallback:Xm,useContext:In,useEffect:hh,useImperativeHandle:Ym,useInsertionEffect:Km,useLayoutEffect:Qm,useMemo:Zm,useReducer:ch,useRef:qm,useState:function(){return ch(ja)},useDebugValue:fh,useDeferredValue:function(r){var s=Sn();return eg(s,_t.memoizedState,r)},useTransition:function(){var r=ch(ja)[0],s=Sn().memoizedState;return[r,s]},useMutableSource:Fm,useSyncExternalStore:jm,useId:tg,unstable_isNewReconciler:!1},kE={readContext:In,useCallback:Xm,useContext:In,useEffect:hh,useImperativeHandle:Ym,useInsertionEffect:Km,useLayoutEffect:Qm,useMemo:Zm,useReducer:dh,useRef:qm,useState:function(){return dh(ja)},useDebugValue:fh,useDeferredValue:function(r){var s=Sn();return _t===null?s.memoizedState=r:eg(s,_t.memoizedState,r)},useTransition:function(){var r=dh(ja)[0],s=Sn().memoizedState;return[r,s]},useMutableSource:Fm,useSyncExternalStore:jm,useId:tg,unstable_isNewReconciler:!1};function Bn(r,s){if(r&&r.defaultProps){s=ce({},s),r=r.defaultProps;for(var l in r)s[l]===void 0&&(s[l]=r[l]);return s}return s}function ph(r,s,l,d){s=r.memoizedState,l=l(d,s),l=l==null?s:ce({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Mu={isMounted:function(r){return(r=r._reactInternals)?Nn(r)===r:!1},enqueueSetState:function(r,s,l){r=r._reactInternals;var d=Kt(),f=vi(r),y=Dr(d,f);y.payload=s,l!=null&&(y.callback=l),s=pi(r,y,f),s!==null&&(Gn(s,r,f,d),Ru(s,r,f))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var d=Kt(),f=vi(r),y=Dr(d,f);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=pi(r,y,f),s!==null&&(Gn(s,r,f,d),Ru(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Kt(),d=vi(r),f=Dr(l,d);f.tag=2,s!=null&&(f.callback=s),s=pi(r,f,d),s!==null&&(Gn(s,r,d,l),Ru(s,r,d))}};function sg(r,s,l,d,f,y,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,y,w):s.prototype&&s.prototype.isPureReactComponent?!Aa(l,d)||!Aa(f,y):!0}function og(r,s,l){var d=!1,f=di,y=s.contextType;return typeof y=="object"&&y!==null?y=In(y):(f=en(s)?ls:Mt.current,d=s.contextTypes,y=(d=d!=null)?mo(r,f):di),s=new s(l,y),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Mu,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=y),s}function ag(r,s,l,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==r&&Mu.enqueueReplaceState(s,s.state,null)}function mh(r,s,l,d){var f=r.stateNode;f.props=l,f.state=r.memoizedState,f.refs={},th(r);var y=s.contextType;typeof y=="object"&&y!==null?f.context=In(y):(y=en(s)?ls:Mt.current,f.context=mo(r,y)),f.state=r.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(ph(r,s,y,l),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Mu.enqueueReplaceState(f,f.state,null),Pu(r,l,f,d),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Io(r,s){try{var l="",d=s;do l+=xe(d),d=d.return;while(d);var f=l}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:r,source:s,stack:f,digest:null}}function gh(r,s,l){return{value:r,source:null,stack:l??null,digest:s??null}}function yh(r,s){try{console.error(s.value)}catch(l){setTimeout(function(){throw l})}}var RE=typeof WeakMap=="function"?WeakMap:Map;function lg(r,s,l){l=Dr(-1,l),l.tag=3,l.payload={element:null};var d=s.value;return l.callback=function(){Gu||(Gu=!0,Nh=d),yh(r,s)},l}function ug(r,s,l){l=Dr(-1,l),l.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;l.payload=function(){return d(f)},l.callback=function(){yh(r,s)}}var y=r.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){yh(r,s),typeof d!="function"&&(gi===null?gi=new Set([this]):gi.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),l}function cg(r,s,l){var d=r.pingCache;if(d===null){d=r.pingCache=new RE;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(l)||(f.add(l),r=$E.bind(null,r,s,l),s.then(r,r))}function dg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function hg(r,s,l,d,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(s=Dr(-1,1),s.tag=2,pi(l,s,1))),l.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var PE=te.ReactCurrentOwner,tn=!1;function Wt(r,s,l,d){s.child=r===null?Nm(s,null,l,d):_o(s,r.child,l,d)}function fg(r,s,l,d,f){l=l.render;var y=s.ref;return Eo(s,f),d=lh(r,s,l,d,y,f),l=uh(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Lr(r,s,f)):(Xe&&l&&Hd(s),s.flags|=1,Wt(r,s,d,f),s.child)}function pg(r,s,l,d,f){if(r===null){var y=l.type;return typeof y=="function"&&!jh(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(s.tag=15,s.type=y,mg(r,s,y,d,f)):(r=Ju(l.type,null,d,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(y=r.child,(r.lanes&f)===0){var w=y.memoizedProps;if(l=l.compare,l=l!==null?l:Aa,l(w,d)&&r.ref===s.ref)return Lr(r,s,f)}return s.flags|=1,r=wi(y,d),r.ref=s.ref,r.return=s,s.child=r}function mg(r,s,l,d,f){if(r!==null){var y=r.memoizedProps;if(Aa(y,d)&&r.ref===s.ref)if(tn=!1,s.pendingProps=d=y,(r.lanes&f)!==0)(r.flags&131072)!==0&&(tn=!0);else return s.lanes=r.lanes,Lr(r,s,f)}return vh(r,s,l,d,f)}function gg(r,s,l){var d=s.pendingProps,f=d.children,y=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(Co,pn),pn|=l;else{if((l&1073741824)===0)return r=y!==null?y.baseLanes|l:l,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,qe(Co,pn),pn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,qe(Co,pn),pn|=d}else y!==null?(d=y.baseLanes|l,s.memoizedState=null):d=l,qe(Co,pn),pn|=d;return Wt(r,s,f,l),s.child}function yg(r,s){var l=s.ref;(r===null&&l!==null||r!==null&&r.ref!==l)&&(s.flags|=512,s.flags|=2097152)}function vh(r,s,l,d,f){var y=en(l)?ls:Mt.current;return y=mo(s,y),Eo(s,f),l=lh(r,s,l,d,y,f),d=uh(),r!==null&&!tn?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,Lr(r,s,f)):(Xe&&d&&Hd(s),s.flags|=1,Wt(r,s,l,f),s.child)}function vg(r,s,l,d,f){if(en(l)){var y=!0;Eu(s)}else y=!1;if(Eo(s,f),s.stateNode===null)ju(r,s),og(s,l,d),mh(s,l,d,f),d=!0;else if(r===null){var w=s.stateNode,k=s.memoizedProps;w.props=k;var D=w.context,H=l.contextType;typeof H=="object"&&H!==null?H=In(H):(H=en(l)?ls:Mt.current,H=mo(s,H));var X=l.getDerivedStateFromProps,ee=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==d||D!==H)&&ag(s,w,d,H),fi=!1;var Y=s.memoizedState;w.state=Y,Pu(s,d,w,f),D=s.memoizedState,k!==d||Y!==D||Zt.current||fi?(typeof X=="function"&&(ph(s,l,X,d),D=s.memoizedState),(k=fi||sg(s,l,k,d,Y,D,H))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=D),w.props=d,w.state=D,w.context=H,d=k):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{w=s.stateNode,Lm(r,s),k=s.memoizedProps,H=s.type===s.elementType?k:Bn(s.type,k),w.props=H,ee=s.pendingProps,Y=w.context,D=l.contextType,typeof D=="object"&&D!==null?D=In(D):(D=en(l)?ls:Mt.current,D=mo(s,D));var le=l.getDerivedStateFromProps;(X=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==ee||Y!==D)&&ag(s,w,d,D),fi=!1,Y=s.memoizedState,w.state=Y,Pu(s,d,w,f);var he=s.memoizedState;k!==ee||Y!==he||Zt.current||fi?(typeof le=="function"&&(ph(s,l,le,d),he=s.memoizedState),(H=fi||sg(s,l,H,d,Y,he,D)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,he,D),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,he,D)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=he),w.props=d,w.state=he,w.context=D,d=H):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&Y===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&Y===r.memoizedState||(s.flags|=1024),d=!1)}return _h(r,s,l,d,y,f)}function _h(r,s,l,d,f,y){yg(r,s);var w=(s.flags&128)!==0;if(!d&&!w)return f&&Im(s,l,!1),Lr(r,s,y);d=s.stateNode,PE.current=s;var k=w&&typeof l.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&w?(s.child=_o(s,r.child,null,y),s.child=_o(s,null,k,y)):Wt(r,s,k,y),s.memoizedState=d.state,f&&Im(s,l,!0),s.child}function _g(r){var s=r.stateNode;s.pendingContext?Em(r,s.pendingContext,s.pendingContext!==s.context):s.context&&Em(r,s.context,!1),nh(r,s.containerInfo)}function wg(r,s,l,d,f){return vo(),Qd(f),s.flags|=256,Wt(r,s,l,d),s.child}var wh={dehydrated:null,treeContext:null,retryLane:0};function Eh(r){return{baseLanes:r,cachePool:null,transitions:null}}function Eg(r,s,l){var d=s.pendingProps,f=Ze.current,y=!1,w=(s.flags&128)!==0,k;if((k=w)||(k=r!==null&&r.memoizedState===null?!1:(f&2)!==0),k?(y=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),qe(Ze,f&1),r===null)return Kd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=d.children,r=d.fallback,y?(d=s.mode,y=s.child,w={mode:"hidden",children:w},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=Yu(w,d,0,null),r=vs(r,d,l,null),y.return=s,r.return=s,y.sibling=r,s.child=y,s.child.memoizedState=Eh(l),s.memoizedState=wh,r):Th(s,w));if(f=r.memoizedState,f!==null&&(k=f.dehydrated,k!==null))return bE(r,s,w,d,k,f,l);if(y){y=d.fallback,w=s.mode,f=r.child,k=f.sibling;var D={mode:"hidden",children:d.children};return(w&1)===0&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=D,s.deletions=null):(d=wi(f,D),d.subtreeFlags=f.subtreeFlags&14680064),k!==null?y=wi(k,y):(y=vs(y,w,l,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,w=r.child.memoizedState,w=w===null?Eh(l):{baseLanes:w.baseLanes|l,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=r.childLanes&~l,s.memoizedState=wh,d}return y=r.child,r=y.sibling,d=wi(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=l),d.return=s,d.sibling=null,r!==null&&(l=s.deletions,l===null?(s.deletions=[r],s.flags|=16):l.push(r)),s.child=d,s.memoizedState=null,d}function Th(r,s){return s=Yu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Fu(r,s,l,d){return d!==null&&Qd(d),_o(s,r.child,null,l),r=Th(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function bE(r,s,l,d,f,y,w){if(l)return s.flags&256?(s.flags&=-257,d=gh(Error(t(422))),Fu(r,s,w,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(y=d.fallback,f=s.mode,d=Yu({mode:"visible",children:d.children},f,0,null),y=vs(y,f,w,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&_o(s,r.child,null,w),s.child.memoizedState=Eh(w),s.memoizedState=wh,y);if((s.mode&1)===0)return Fu(r,s,w,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var k=d.dgst;return d=k,y=Error(t(419)),d=gh(y,d,void 0),Fu(r,s,w,d)}if(k=(w&r.childLanes)!==0,tn||k){if(d=Ct,d!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|w))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Nr(r,f),Gn(d,r,f,-1))}return Fh(),d=gh(Error(t(421))),Fu(r,s,w,d)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=GE.bind(null,r),f._reactRetry=s,null):(r=y.treeContext,fn=ui(f.nextSibling),hn=s,Xe=!0,Un=null,r!==null&&(En[Tn++]=Pr,En[Tn++]=br,En[Tn++]=us,Pr=r.id,br=r.overflow,us=s),s=Th(s,d.children),s.flags|=4096,s)}function Tg(r,s,l){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),Zd(r.return,s,l)}function Ih(r,s,l,d,f){var y=r.memoizedState;y===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:f}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=f)}function Ig(r,s,l){var d=s.pendingProps,f=d.revealOrder,y=d.tail;if(Wt(r,s,d.children,l),d=Ze.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Tg(r,l,s);else if(r.tag===19)Tg(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(qe(Ze,d),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(l=s.child,f=null;l!==null;)r=l.alternate,r!==null&&bu(r)===null&&(f=l),l=l.sibling;l=f,l===null?(f=s.child,s.child=null):(f=l.sibling,l.sibling=null),Ih(s,!1,f,l,y);break;case"backwards":for(l=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&bu(r)===null){s.child=f;break}r=f.sibling,f.sibling=l,l=f,f=r}Ih(s,!0,l,null,y);break;case"together":Ih(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ju(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function Lr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),ps|=s.lanes,(l&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,l=wi(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=wi(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function NE(r,s,l){switch(s.tag){case 3:_g(s),vo();break;case 5:Mm(s);break;case 1:en(s.type)&&Eu(s);break;case 4:nh(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;qe(xu,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(qe(Ze,Ze.current&1),s.flags|=128,null):(l&s.child.childLanes)!==0?Eg(r,s,l):(qe(Ze,Ze.current&1),r=Lr(r,s,l),r!==null?r.sibling:null);qe(Ze,Ze.current&1);break;case 19:if(d=(l&s.childLanes)!==0,(r.flags&128)!==0){if(d)return Ig(r,s,l);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),qe(Ze,Ze.current),d)break;return null;case 22:case 23:return s.lanes=0,gg(r,s,l)}return Lr(r,s,l)}var Sg,Sh,Cg,Ag;Sg=function(r,s){for(var l=s.child;l!==null;){if(l.tag===5||l.tag===6)r.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Sh=function(){},Cg=function(r,s,l,d){var f=r.memoizedProps;if(f!==d){r=s.stateNode,hs(nr.current);var y=null;switch(l){case"input":f=Hi(r,f),d=Hi(r,d),y=[];break;case"select":f=ce({},f,{value:void 0}),d=ce({},d,{value:void 0}),y=[];break;case"textarea":f=ta(r,f),d=ta(r,d),y=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=vu)}aa(l,d);var w;l=null;for(H in f)if(!d.hasOwnProperty(H)&&f.hasOwnProperty(H)&&f[H]!=null)if(H==="style"){var k=f[H];for(w in k)k.hasOwnProperty(w)&&(l||(l={}),l[w]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?y||(y=[]):(y=y||[]).push(H,null));for(H in d){var D=d[H];if(k=f?.[H],d.hasOwnProperty(H)&&D!==k&&(D!=null||k!=null))if(H==="style")if(k){for(w in k)!k.hasOwnProperty(w)||D&&D.hasOwnProperty(w)||(l||(l={}),l[w]="");for(w in D)D.hasOwnProperty(w)&&k[w]!==D[w]&&(l||(l={}),l[w]=D[w])}else l||(y||(y=[]),y.push(H,l)),l=D;else H==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,k=k?k.__html:void 0,D!=null&&k!==D&&(y=y||[]).push(H,D)):H==="children"?typeof D!="string"&&typeof D!="number"||(y=y||[]).push(H,""+D):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(D!=null&&H==="onScroll"&&Ke("scroll",r),y||k===D||(y=[])):(y=y||[]).push(H,D))}l&&(y=y||[]).push("style",l);var H=y;(s.updateQueue=H)&&(s.flags|=4)}},Ag=function(r,s,l,d){l!==d&&(s.flags|=4)};function Ba(r,s){if(!Xe)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function jt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,d=0;if(s)for(var f=r.child;f!==null;)l|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)l|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=d,r.childLanes=l,s}function DE(r,s,l){var d=s.pendingProps;switch(qd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(s),null;case 1:return en(s.type)&&wu(),jt(s),null;case 3:return d=s.stateNode,To(),Qe(Zt),Qe(Mt),sh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(Cu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Un!==null&&(Oh(Un),Un=null))),Sh(r,s),jt(s),null;case 5:rh(s);var f=hs(Va.current);if(l=s.type,r!==null&&s.stateNode!=null)Cg(r,s,l,d,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return jt(s),null}if(r=hs(nr.current),Cu(s)){d=s.stateNode,l=s.type;var y=s.memoizedProps;switch(d[tr]=s,d[ba]=y,r=(s.mode&1)!==0,l){case"dialog":Ke("cancel",d),Ke("close",d);break;case"iframe":case"object":case"embed":Ke("load",d);break;case"video":case"audio":for(f=0;f<ka.length;f++)Ke(ka[f],d);break;case"source":Ke("error",d);break;case"img":case"image":case"link":Ke("error",d),Ke("load",d);break;case"details":Ke("toggle",d);break;case"input":Vs(d,y),Ke("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Ke("invalid",d);break;case"textarea":Fs(d,y),Ke("invalid",d)}aa(l,y),f=null;for(var w in y)if(y.hasOwnProperty(w)){var k=y[w];w==="children"?typeof k=="string"?d.textContent!==k&&(y.suppressHydrationWarning!==!0&&yu(d.textContent,k,r),f=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(y.suppressHydrationWarning!==!0&&yu(d.textContent,k,r),f=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&Ke("scroll",d)}switch(l){case"input":vr(d),$l(d,y,!0);break;case"textarea":vr(d),na(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=vu)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=gt(l)),r==="http://www.w3.org/1999/xhtml"?l==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=w.createElement(l,{is:d.is}):(r=w.createElement(l),l==="select"&&(w=r,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):r=w.createElementNS(r,l),r[tr]=s,r[ba]=d,Sg(r,s,!1,!1),s.stateNode=r;e:{switch(w=la(l,d),l){case"dialog":Ke("cancel",r),Ke("close",r),f=d;break;case"iframe":case"object":case"embed":Ke("load",r),f=d;break;case"video":case"audio":for(f=0;f<ka.length;f++)Ke(ka[f],r);f=d;break;case"source":Ke("error",r),f=d;break;case"img":case"image":case"link":Ke("error",r),Ke("load",r),f=d;break;case"details":Ke("toggle",r),f=d;break;case"input":Vs(r,d),f=Hi(r,d),Ke("invalid",r);break;case"option":f=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},f=ce({},d,{value:void 0}),Ke("invalid",r);break;case"textarea":Fs(r,d),f=ta(r,d),Ke("invalid",r);break;default:f=d}aa(l,f),k=f;for(y in k)if(k.hasOwnProperty(y)){var D=k[y];y==="style"?sa(r,D):y==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&ra(r,D)):y==="children"?typeof D=="string"?(l!=="textarea"||D!=="")&&Xr(r,D):typeof D=="number"&&Xr(r,""+D):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(o.hasOwnProperty(y)?D!=null&&y==="onScroll"&&Ke("scroll",r):D!=null&&W(r,y,D,w))}switch(l){case"input":vr(r),$l(r,d,!1);break;case"textarea":vr(r),na(r);break;case"option":d.value!=null&&r.setAttribute("value",""+Fe(d.value));break;case"select":r.multiple=!!d.multiple,y=d.value,y!=null?wr(r,!!d.multiple,y,!1):d.defaultValue!=null&&wr(r,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=vu)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return jt(s),null;case 6:if(r&&s.stateNode!=null)Ag(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(l=hs(Va.current),hs(nr.current),Cu(s)){if(d=s.stateNode,l=s.memoizedProps,d[tr]=s,(y=d.nodeValue!==l)&&(r=hn,r!==null))switch(r.tag){case 3:yu(d.nodeValue,l,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&yu(d.nodeValue,l,(r.mode&1)!==0)}y&&(s.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[tr]=s,s.stateNode=d}return jt(s),null;case 13:if(Qe(Ze),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Xe&&fn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)Rm(),vo(),s.flags|=98560,y=!1;else if(y=Cu(s),d!==null&&d.dehydrated!==null){if(r===null){if(!y)throw Error(t(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[tr]=s}else vo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jt(s),y=!1}else Un!==null&&(Oh(Un),Un=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=l,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Ze.current&1)!==0?wt===0&&(wt=3):Fh())),s.updateQueue!==null&&(s.flags|=4),jt(s),null);case 4:return To(),Sh(r,s),r===null&&Ra(s.stateNode.containerInfo),jt(s),null;case 10:return Xd(s.type._context),jt(s),null;case 17:return en(s.type)&&wu(),jt(s),null;case 19:if(Qe(Ze),y=s.memoizedState,y===null)return jt(s),null;if(d=(s.flags&128)!==0,w=y.rendering,w===null)if(d)Ba(y,!1);else{if(wt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=bu(r),w!==null){for(s.flags|=128,Ba(y,!1),d=w.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=l,l=s.child;l!==null;)y=l,r=d,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=r,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,r=w.dependencies,y.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),l=l.sibling;return qe(Ze,Ze.current&1|2),s.child}r=r.sibling}y.tail!==null&&He()>Ao&&(s.flags|=128,d=!0,Ba(y,!1),s.lanes=4194304)}else{if(!d)if(r=bu(w),r!==null){if(s.flags|=128,d=!0,l=r.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),Ba(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Xe)return jt(s),null}else 2*He()-y.renderingStartTime>Ao&&l!==1073741824&&(s.flags|=128,d=!0,Ba(y,!1),s.lanes=4194304);y.isBackwards?(w.sibling=s.child,s.child=w):(l=y.last,l!==null?l.sibling=w:s.child=w,y.last=w)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=He(),s.sibling=null,l=Ze.current,qe(Ze,d?l&1|2:l&1),s):(jt(s),null);case 22:case 23:return Mh(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(pn&1073741824)!==0&&(jt(s),s.subtreeFlags&6&&(s.flags|=8192)):jt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function LE(r,s){switch(qd(s),s.tag){case 1:return en(s.type)&&wu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return To(),Qe(Zt),Qe(Mt),sh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return rh(s),null;case 13:if(Qe(Ze),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));vo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Qe(Ze),null;case 4:return To(),null;case 10:return Xd(s.type._context),null;case 22:case 23:return Mh(),null;case 24:return null;default:return null}}var Uu=!1,Ut=!1,OE=typeof WeakSet=="function"?WeakSet:Set,de=null;function So(r,s){var l=r.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){rt(r,s,d)}else l.current=null}function Ch(r,s,l){try{l()}catch(d){rt(r,s,d)}}var xg=!1;function VE(r,s){if(Md=oi,r=sm(),Rd(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var f=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var w=0,k=-1,D=-1,H=0,X=0,ee=r,Y=null;t:for(;;){for(var le;ee!==l||f!==0&&ee.nodeType!==3||(k=w+f),ee!==y||d!==0&&ee.nodeType!==3||(D=w+d),ee.nodeType===3&&(w+=ee.nodeValue.length),(le=ee.firstChild)!==null;)Y=ee,ee=le;for(;;){if(ee===r)break t;if(Y===l&&++H===f&&(k=w),Y===y&&++X===d&&(D=w),(le=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=le}l=k===-1||D===-1?null:{start:k,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(Fd={focusedElem:r,selectionRange:l},oi=!1,de=s;de!==null;)if(s=de,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,de=r;else for(;de!==null;){s=de;try{var he=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var fe=he.memoizedProps,at=he.memoizedState,z=s.stateNode,M=z.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Bn(s.type,fe),at);z.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var G=s.stateNode.containerInfo;G.nodeType===1?G.textContent="":G.nodeType===9&&G.documentElement&&G.removeChild(G.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){rt(s,s.return,ne)}if(r=s.sibling,r!==null){r.return=s.return,de=r;break}de=s.return}return he=xg,xg=!1,he}function za(r,s,l){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&r)===r){var y=f.destroy;f.destroy=void 0,y!==void 0&&Ch(s,l,y)}f=f.next}while(f!==d)}}function Bu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&r)===r){var d=l.create;l.destroy=d()}l=l.next}while(l!==s)}}function Ah(r){var s=r.ref;if(s!==null){var l=r.stateNode;switch(r.tag){case 5:r=l;break;default:r=l}typeof s=="function"?s(r):s.current=r}}function kg(r){var s=r.alternate;s!==null&&(r.alternate=null,kg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[tr],delete s[ba],delete s[zd],delete s[vE],delete s[_E])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Rg(r){return r.tag===5||r.tag===3||r.tag===4}function Pg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Rg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function xh(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?l.nodeType===8?l.parentNode.insertBefore(r,s):l.insertBefore(r,s):(l.nodeType===8?(s=l.parentNode,s.insertBefore(r,l)):(s=l,s.appendChild(r)),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=vu));else if(d!==4&&(r=r.child,r!==null))for(xh(r,s,l),r=r.sibling;r!==null;)xh(r,s,l),r=r.sibling}function kh(r,s,l){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(kh(r,s,l),r=r.sibling;r!==null;)kh(r,s,l),r=r.sibling}var Pt=null,zn=!1;function mi(r,s,l){for(l=l.child;l!==null;)bg(r,s,l),l=l.sibling}function bg(r,s,l){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(es,l)}catch{}switch(l.tag){case 5:Ut||So(l,s);case 6:var d=Pt,f=zn;Pt=null,mi(r,s,l),Pt=d,zn=f,Pt!==null&&(zn?(r=Pt,l=l.stateNode,r.nodeType===8?r.parentNode.removeChild(l):r.removeChild(l)):Pt.removeChild(l.stateNode));break;case 18:Pt!==null&&(zn?(r=Pt,l=l.stateNode,r.nodeType===8?Bd(r.parentNode,l):r.nodeType===1&&Bd(r,l),Mn(r)):Bd(Pt,l.stateNode));break;case 4:d=Pt,f=zn,Pt=l.stateNode.containerInfo,zn=!0,mi(r,s,l),Pt=d,zn=f;break;case 0:case 11:case 14:case 15:if(!Ut&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var y=f,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&Ch(l,s,w),f=f.next}while(f!==d)}mi(r,s,l);break;case 1:if(!Ut&&(So(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(k){rt(l,s,k)}mi(r,s,l);break;case 21:mi(r,s,l);break;case 22:l.mode&1?(Ut=(d=Ut)||l.memoizedState!==null,mi(r,s,l),Ut=d):mi(r,s,l);break;default:mi(r,s,l)}}function Ng(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var l=r.stateNode;l===null&&(l=r.stateNode=new OE),s.forEach(function(d){var f=HE.bind(null,r,d);l.has(d)||(l.add(d),d.then(f,f))})}}function $n(r,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var f=l[d];try{var y=r,w=s,k=w;e:for(;k!==null;){switch(k.tag){case 5:Pt=k.stateNode,zn=!1;break e;case 3:Pt=k.stateNode.containerInfo,zn=!0;break e;case 4:Pt=k.stateNode.containerInfo,zn=!0;break e}k=k.return}if(Pt===null)throw Error(t(160));bg(y,w,f),Pt=null,zn=!1;var D=f.alternate;D!==null&&(D.return=null),f.return=null}catch(H){rt(f,s,H)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Dg(s,r),s=s.sibling}function Dg(r,s){var l=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if($n(s,r),ir(r),d&4){try{za(3,r,r.return),Bu(3,r)}catch(fe){rt(r,r.return,fe)}try{za(5,r,r.return)}catch(fe){rt(r,r.return,fe)}}break;case 1:$n(s,r),ir(r),d&512&&l!==null&&So(l,l.return);break;case 5:if($n(s,r),ir(r),d&512&&l!==null&&So(l,l.return),r.flags&32){var f=r.stateNode;try{Xr(f,"")}catch(fe){rt(r,r.return,fe)}}if(d&4&&(f=r.stateNode,f!=null)){var y=r.memoizedProps,w=l!==null?l.memoizedProps:y,k=r.type,D=r.updateQueue;if(r.updateQueue=null,D!==null)try{k==="input"&&y.type==="radio"&&y.name!=null&&Zo(f,y),la(k,w);var H=la(k,y);for(w=0;w<D.length;w+=2){var X=D[w],ee=D[w+1];X==="style"?sa(f,ee):X==="dangerouslySetInnerHTML"?ra(f,ee):X==="children"?Xr(f,ee):W(f,X,ee,H)}switch(k){case"input":ea(f,y);break;case"textarea":js(f,y);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var le=y.value;le!=null?wr(f,!!y.multiple,le,!1):Y!==!!y.multiple&&(y.defaultValue!=null?wr(f,!!y.multiple,y.defaultValue,!0):wr(f,!!y.multiple,y.multiple?[]:"",!1))}f[ba]=y}catch(fe){rt(r,r.return,fe)}}break;case 6:if($n(s,r),ir(r),d&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,y=r.memoizedProps;try{f.nodeValue=y}catch(fe){rt(r,r.return,fe)}}break;case 3:if($n(s,r),ir(r),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Mn(s.containerInfo)}catch(fe){rt(r,r.return,fe)}break;case 4:$n(s,r),ir(r);break;case 13:$n(s,r),ir(r),f=r.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(bh=He())),d&4&&Ng(r);break;case 22:if(X=l!==null&&l.memoizedState!==null,r.mode&1?(Ut=(H=Ut)||X,$n(s,r),Ut=H):$n(s,r),ir(r),d&8192){if(H=r.memoizedState!==null,(r.stateNode.isHidden=H)&&!X&&(r.mode&1)!==0)for(de=r,X=r.child;X!==null;){for(ee=de=X;de!==null;){switch(Y=de,le=Y.child,Y.tag){case 0:case 11:case 14:case 15:za(4,Y,Y.return);break;case 1:So(Y,Y.return);var he=Y.stateNode;if(typeof he.componentWillUnmount=="function"){d=Y,l=Y.return;try{s=d,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(fe){rt(d,l,fe)}}break;case 5:So(Y,Y.return);break;case 22:if(Y.memoizedState!==null){Vg(ee);continue}}le!==null?(le.return=Y,de=le):Vg(ee)}X=X.sibling}e:for(X=null,ee=r;;){if(ee.tag===5){if(X===null){X=ee;try{f=ee.stateNode,H?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(k=ee.stateNode,D=ee.memoizedProps.style,w=D!=null&&D.hasOwnProperty("display")?D.display:null,k.style.display=ia("display",w))}catch(fe){rt(r,r.return,fe)}}}else if(ee.tag===6){if(X===null)try{ee.stateNode.nodeValue=H?"":ee.memoizedProps}catch(fe){rt(r,r.return,fe)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===r)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===r)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===r)break e;X===ee&&(X=null),ee=ee.return}X===ee&&(X=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:$n(s,r),ir(r),d&4&&Ng(r);break;case 21:break;default:$n(s,r),ir(r)}}function ir(r){var s=r.flags;if(s&2){try{e:{for(var l=r.return;l!==null;){if(Rg(l)){var d=l;break e}l=l.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(Xr(f,""),d.flags&=-33);var y=Pg(r);kh(r,y,f);break;case 3:case 4:var w=d.stateNode.containerInfo,k=Pg(r);xh(r,k,w);break;default:throw Error(t(161))}}catch(D){rt(r,r.return,D)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function ME(r,s,l){de=r,Lg(r)}function Lg(r,s,l){for(var d=(r.mode&1)!==0;de!==null;){var f=de,y=f.child;if(f.tag===22&&d){var w=f.memoizedState!==null||Uu;if(!w){var k=f.alternate,D=k!==null&&k.memoizedState!==null||Ut;k=Uu;var H=Ut;if(Uu=w,(Ut=D)&&!H)for(de=f;de!==null;)w=de,D=w.child,w.tag===22&&w.memoizedState!==null?Mg(f):D!==null?(D.return=w,de=D):Mg(f);for(;y!==null;)de=y,Lg(y),y=y.sibling;de=f,Uu=k,Ut=H}Og(r)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,de=y):Og(r)}}function Og(r){for(;de!==null;){var s=de;if((s.flags&8772)!==0){var l=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ut||Bu(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Ut)if(l===null)d.componentDidMount();else{var f=s.elementType===s.type?l.memoizedProps:Bn(s.type,l.memoizedProps);d.componentDidUpdate(f,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&Vm(s,y,d);break;case 3:var w=s.updateQueue;if(w!==null){if(l=null,s.child!==null)switch(s.child.tag){case 5:l=s.child.stateNode;break;case 1:l=s.child.stateNode}Vm(s,w,l)}break;case 5:var k=s.stateNode;if(l===null&&s.flags&4){l=k;var D=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&l.focus();break;case"img":D.src&&(l.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var H=s.alternate;if(H!==null){var X=H.memoizedState;if(X!==null){var ee=X.dehydrated;ee!==null&&Mn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ut||s.flags&512&&Ah(s)}catch(Y){rt(s,s.return,Y)}}if(s===r){de=null;break}if(l=s.sibling,l!==null){l.return=s.return,de=l;break}de=s.return}}function Vg(r){for(;de!==null;){var s=de;if(s===r){de=null;break}var l=s.sibling;if(l!==null){l.return=s.return,de=l;break}de=s.return}}function Mg(r){for(;de!==null;){var s=de;try{switch(s.tag){case 0:case 11:case 15:var l=s.return;try{Bu(4,s)}catch(D){rt(s,l,D)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(D){rt(s,f,D)}}var y=s.return;try{Ah(s)}catch(D){rt(s,y,D)}break;case 5:var w=s.return;try{Ah(s)}catch(D){rt(s,w,D)}}}catch(D){rt(s,s.return,D)}if(s===r){de=null;break}var k=s.sibling;if(k!==null){k.return=s.return,de=k;break}de=s.return}}var FE=Math.ceil,zu=te.ReactCurrentDispatcher,Rh=te.ReactCurrentOwner,Cn=te.ReactCurrentBatchConfig,Oe=0,Ct=null,ht=null,bt=0,pn=0,Co=ci(0),wt=0,$a=null,ps=0,$u=0,Ph=0,Ga=null,nn=null,bh=0,Ao=1/0,Or=null,Gu=!1,Nh=null,gi=null,Hu=!1,yi=null,qu=0,Ha=0,Dh=null,Wu=-1,Ku=0;function Kt(){return(Oe&6)!==0?He():Wu!==-1?Wu:Wu=He()}function vi(r){return(r.mode&1)===0?1:(Oe&2)!==0&&bt!==0?bt&-bt:EE.transition!==null?(Ku===0&&(Ku=ns()),Ku):(r=be,r!==0||(r=window.event,r=r===void 0?16:_a(r.type)),r)}function Gn(r,s,l,d){if(50<Ha)throw Ha=0,Dh=null,Error(t(185));ni(r,l,d),((Oe&2)===0||r!==Ct)&&(r===Ct&&((Oe&2)===0&&($u|=l),wt===4&&_i(r,bt)),rn(r,d),l===1&&Oe===0&&(s.mode&1)===0&&(Ao=He()+500,Tu&&hi()))}function rn(r,s){var l=r.callbackNode;Ir(r,s);var d=ts(r,r===Ct?bt:0);if(d===0)l!==null&&pa(l),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(l!=null&&pa(l),s===1)r.tag===0?wE(jg.bind(null,r)):Sm(jg.bind(null,r)),gE(function(){(Oe&6)===0&&hi()}),l=null;else{switch(ii(d)){case 1:l=Zi;break;case 4:l=Zr;break;case 16:l=vn;break;case 536870912:l=Kl;break;default:l=vn}l=Wg(l,Fg.bind(null,r))}r.callbackPriority=s,r.callbackNode=l}}function Fg(r,s){if(Wu=-1,Ku=0,(Oe&6)!==0)throw Error(t(327));var l=r.callbackNode;if(xo()&&r.callbackNode!==l)return null;var d=ts(r,r===Ct?bt:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||s)s=Qu(r,d);else{s=d;var f=Oe;Oe|=2;var y=Bg();(Ct!==r||bt!==s)&&(Or=null,Ao=He()+500,gs(r,s));do try{BE();break}catch(k){Ug(r,k)}while(!0);Yd(),zu.current=y,Oe=f,ht!==null?s=0:(Ct=null,bt=0,s=wt)}if(s!==0){if(s===2&&(f=un(r),f!==0&&(d=f,s=Lh(r,f))),s===1)throw l=$a,gs(r,0),_i(r,d),rn(r,He()),l;if(s===6)_i(r,d);else{if(f=r.current.alternate,(d&30)===0&&!jE(f)&&(s=Qu(r,d),s===2&&(y=un(r),y!==0&&(d=y,s=Lh(r,y))),s===1))throw l=$a,gs(r,0),_i(r,d),rn(r,He()),l;switch(r.finishedWork=f,r.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ys(r,nn,Or);break;case 3:if(_i(r,d),(d&130023424)===d&&(s=bh+500-He(),10<s)){if(ts(r,0)!==0)break;if(f=r.suspendedLanes,(f&d)!==d){Kt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Ud(ys.bind(null,r,nn,Or),s);break}ys(r,nn,Or);break;case 4:if(_i(r,d),(d&4194240)===d)break;for(s=r.eventTimes,f=-1;0<d;){var w=31-Ht(d);y=1<<w,w=s[w],w>f&&(f=w),d&=~y}if(d=f,d=He()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*FE(d/1960))-d,10<d){r.timeoutHandle=Ud(ys.bind(null,r,nn,Or),d);break}ys(r,nn,Or);break;case 5:ys(r,nn,Or);break;default:throw Error(t(329))}}}return rn(r,He()),r.callbackNode===l?Fg.bind(null,r):null}function Lh(r,s){var l=Ga;return r.current.memoizedState.isDehydrated&&(gs(r,s).flags|=256),r=Qu(r,s),r!==2&&(s=nn,nn=l,s!==null&&Oh(s)),r}function Oh(r){nn===null?nn=r:nn.push.apply(nn,r)}function jE(r){for(var s=r;;){if(s.flags&16384){var l=s.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var f=l[d],y=f.getSnapshot;f=f.value;try{if(!jn(y(),f))return!1}catch{return!1}}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function _i(r,s){for(s&=~Ph,s&=~$u,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var l=31-Ht(s),d=1<<l;r[l]=-1,s&=~d}}function jg(r){if((Oe&6)!==0)throw Error(t(327));xo();var s=ts(r,0);if((s&1)===0)return rn(r,He()),null;var l=Qu(r,s);if(r.tag!==0&&l===2){var d=un(r);d!==0&&(s=d,l=Lh(r,d))}if(l===1)throw l=$a,gs(r,0),_i(r,s),rn(r,He()),l;if(l===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ys(r,nn,Or),rn(r,He()),null}function Vh(r,s){var l=Oe;Oe|=1;try{return r(s)}finally{Oe=l,Oe===0&&(Ao=He()+500,Tu&&hi())}}function ms(r){yi!==null&&yi.tag===0&&(Oe&6)===0&&xo();var s=Oe;Oe|=1;var l=Cn.transition,d=be;try{if(Cn.transition=null,be=1,r)return r()}finally{be=d,Cn.transition=l,Oe=s,(Oe&6)===0&&hi()}}function Mh(){pn=Co.current,Qe(Co)}function gs(r,s){r.finishedWork=null,r.finishedLanes=0;var l=r.timeoutHandle;if(l!==-1&&(r.timeoutHandle=-1,mE(l)),ht!==null)for(l=ht.return;l!==null;){var d=l;switch(qd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&wu();break;case 3:To(),Qe(Zt),Qe(Mt),sh();break;case 5:rh(d);break;case 4:To();break;case 13:Qe(Ze);break;case 19:Qe(Ze);break;case 10:Xd(d.type._context);break;case 22:case 23:Mh()}l=l.return}if(Ct=r,ht=r=wi(r.current,null),bt=pn=s,wt=0,$a=null,Ph=$u=ps=0,nn=Ga=null,ds!==null){for(s=0;s<ds.length;s++)if(l=ds[s],d=l.interleaved,d!==null){l.interleaved=null;var f=d.next,y=l.pending;if(y!==null){var w=y.next;y.next=f,d.next=w}l.pending=d}ds=null}return r}function Ug(r,s){do{var l=ht;try{if(Yd(),Nu.current=Vu,Du){for(var d=et.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}Du=!1}if(fs=0,St=_t=et=null,Ma=!1,Fa=0,Rh.current=null,l===null||l.return===null){wt=1,$a=s,ht=null;break}e:{var y=r,w=l.return,k=l,D=s;if(s=bt,k.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var H=D,X=k,ee=X.tag;if((X.mode&1)===0&&(ee===0||ee===11||ee===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var le=dg(w);if(le!==null){le.flags&=-257,hg(le,w,k,y,s),le.mode&1&&cg(y,H,s),s=le,D=H;var he=s.updateQueue;if(he===null){var fe=new Set;fe.add(D),s.updateQueue=fe}else he.add(D);break e}else{if((s&1)===0){cg(y,H,s),Fh();break e}D=Error(t(426))}}else if(Xe&&k.mode&1){var at=dg(w);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),hg(at,w,k,y,s),Qd(Io(D,k));break e}}y=D=Io(D,k),wt!==4&&(wt=2),Ga===null?Ga=[y]:Ga.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var z=lg(y,D,s);Om(y,z);break e;case 1:k=D;var M=y.type,G=y.stateNode;if((y.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||G!==null&&typeof G.componentDidCatch=="function"&&(gi===null||!gi.has(G)))){y.flags|=65536,s&=-s,y.lanes|=s;var ne=ug(y,k,s);Om(y,ne);break e}}y=y.return}while(y!==null)}$g(l)}catch(pe){s=pe,ht===l&&l!==null&&(ht=l=l.return);continue}break}while(!0)}function Bg(){var r=zu.current;return zu.current=Vu,r===null?Vu:r}function Fh(){(wt===0||wt===3||wt===2)&&(wt=4),Ct===null||(ps&268435455)===0&&($u&268435455)===0||_i(Ct,bt)}function Qu(r,s){var l=Oe;Oe|=2;var d=Bg();(Ct!==r||bt!==s)&&(Or=null,gs(r,s));do try{UE();break}catch(f){Ug(r,f)}while(!0);if(Yd(),Oe=l,zu.current=d,ht!==null)throw Error(t(261));return Ct=null,bt=0,wt}function UE(){for(;ht!==null;)zg(ht)}function BE(){for(;ht!==null&&!ql();)zg(ht)}function zg(r){var s=qg(r.alternate,r,pn);r.memoizedProps=r.pendingProps,s===null?$g(r):ht=s,Rh.current=null}function $g(r){var s=r;do{var l=s.alternate;if(r=s.return,(s.flags&32768)===0){if(l=DE(l,s,pn),l!==null){ht=l;return}}else{if(l=LE(l,s),l!==null){l.flags&=32767,ht=l;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wt=6,ht=null;return}}if(s=s.sibling,s!==null){ht=s;return}ht=s=r}while(s!==null);wt===0&&(wt=5)}function ys(r,s,l){var d=be,f=Cn.transition;try{Cn.transition=null,be=1,zE(r,s,l,d)}finally{Cn.transition=f,be=d}return null}function zE(r,s,l,d){do xo();while(yi!==null);if((Oe&6)!==0)throw Error(t(327));l=r.finishedWork;var f=r.finishedLanes;if(l===null)return null;if(r.finishedWork=null,r.finishedLanes=0,l===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var y=l.lanes|l.childLanes;if($e(r,y),r===Ct&&(ht=Ct=null,bt=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Hu||(Hu=!0,Wg(vn,function(){return xo(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=Cn.transition,Cn.transition=null;var w=be;be=1;var k=Oe;Oe|=4,Rh.current=null,VE(r,l),Dg(l,r),lE(Fd),oi=!!Md,Fd=Md=null,r.current=l,ME(l),Ed(),Oe=k,be=w,Cn.transition=y}else r.current=l;if(Hu&&(Hu=!1,yi=r,qu=f),y=r.pendingLanes,y===0&&(gi=null),Ql(l.stateNode),rn(r,He()),s!==null)for(d=r.onRecoverableError,l=0;l<s.length;l++)f=s[l],d(f.value,{componentStack:f.stack,digest:f.digest});if(Gu)throw Gu=!1,r=Nh,Nh=null,r;return(qu&1)!==0&&r.tag!==0&&xo(),y=r.pendingLanes,(y&1)!==0?r===Dh?Ha++:(Ha=0,Dh=r):Ha=0,hi(),null}function xo(){if(yi!==null){var r=ii(qu),s=Cn.transition,l=be;try{if(Cn.transition=null,be=16>r?16:r,yi===null)var d=!1;else{if(r=yi,yi=null,qu=0,(Oe&6)!==0)throw Error(t(331));var f=Oe;for(Oe|=4,de=r.current;de!==null;){var y=de,w=y.child;if((de.flags&16)!==0){var k=y.deletions;if(k!==null){for(var D=0;D<k.length;D++){var H=k[D];for(de=H;de!==null;){var X=de;switch(X.tag){case 0:case 11:case 15:za(8,X,y)}var ee=X.child;if(ee!==null)ee.return=X,de=ee;else for(;de!==null;){X=de;var Y=X.sibling,le=X.return;if(kg(X),X===H){de=null;break}if(Y!==null){Y.return=le,de=Y;break}de=le}}}var he=y.alternate;if(he!==null){var fe=he.child;if(fe!==null){he.child=null;do{var at=fe.sibling;fe.sibling=null,fe=at}while(fe!==null)}}de=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,de=w;else e:for(;de!==null;){if(y=de,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:za(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,de=z;break e}de=y.return}}var M=r.current;for(de=M;de!==null;){w=de;var G=w.child;if((w.subtreeFlags&2064)!==0&&G!==null)G.return=w,de=G;else e:for(w=M;de!==null;){if(k=de,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Bu(9,k)}}catch(pe){rt(k,k.return,pe)}if(k===w){de=null;break e}var ne=k.sibling;if(ne!==null){ne.return=k.return,de=ne;break e}de=k.return}}if(Oe=f,hi(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(es,r)}catch{}d=!0}return d}finally{be=l,Cn.transition=s}}return!1}function Gg(r,s,l){s=Io(l,s),s=lg(r,s,1),r=pi(r,s,1),s=Kt(),r!==null&&(ni(r,1,s),rn(r,s))}function rt(r,s,l){if(r.tag===3)Gg(r,r,l);else for(;s!==null;){if(s.tag===3){Gg(s,r,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(gi===null||!gi.has(d))){r=Io(l,r),r=ug(s,r,1),s=pi(s,r,1),r=Kt(),s!==null&&(ni(s,1,r),rn(s,r));break}}s=s.return}}function $E(r,s,l){var d=r.pingCache;d!==null&&d.delete(s),s=Kt(),r.pingedLanes|=r.suspendedLanes&l,Ct===r&&(bt&l)===l&&(wt===4||wt===3&&(bt&130023424)===bt&&500>He()-bh?gs(r,0):Ph|=l),rn(r,s)}function Hg(r,s){s===0&&((r.mode&1)===0?s=1:(s=Qs,Qs<<=1,(Qs&130023424)===0&&(Qs=4194304)));var l=Kt();r=Nr(r,s),r!==null&&(ni(r,s,l),rn(r,l))}function GE(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),Hg(r,l)}function HE(r,s){var l=0;switch(r.tag){case 13:var d=r.stateNode,f=r.memoizedState;f!==null&&(l=f.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),Hg(r,l)}var qg;qg=function(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps||Zt.current)tn=!0;else{if((r.lanes&l)===0&&(s.flags&128)===0)return tn=!1,NE(r,s,l);tn=(r.flags&131072)!==0}else tn=!1,Xe&&(s.flags&1048576)!==0&&Cm(s,Su,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;ju(r,s),r=s.pendingProps;var f=mo(s,Mt.current);Eo(s,l),f=lh(null,s,d,r,f,l);var y=uh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,en(d)?(y=!0,Eu(s)):y=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,th(s),f.updater=Mu,s.stateNode=f,f._reactInternals=s,mh(s,d,r,l),s=_h(null,s,d,!0,y,l)):(s.tag=0,Xe&&y&&Hd(s),Wt(null,s,f,l),s=s.child),s;case 16:d=s.elementType;e:{switch(ju(r,s),r=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=WE(d),r=Bn(d,r),f){case 0:s=vh(null,s,d,r,l);break e;case 1:s=vg(null,s,d,r,l);break e;case 11:s=fg(null,s,d,r,l);break e;case 14:s=pg(null,s,d,Bn(d.type,r),l);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Bn(d,f),vh(r,s,d,f,l);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Bn(d,f),vg(r,s,d,f,l);case 3:e:{if(_g(s),r===null)throw Error(t(387));d=s.pendingProps,y=s.memoizedState,f=y.element,Lm(r,s),Pu(s,d,null,l);var w=s.memoizedState;if(d=w.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){f=Io(Error(t(423)),s),s=wg(r,s,d,l,f);break e}else if(d!==f){f=Io(Error(t(424)),s),s=wg(r,s,d,l,f);break e}else for(fn=ui(s.stateNode.containerInfo.firstChild),hn=s,Xe=!0,Un=null,l=Nm(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(vo(),d===f){s=Lr(r,s,l);break e}Wt(r,s,d,l)}s=s.child}return s;case 5:return Mm(s),r===null&&Kd(s),d=s.type,f=s.pendingProps,y=r!==null?r.memoizedProps:null,w=f.children,jd(d,f)?w=null:y!==null&&jd(d,y)&&(s.flags|=32),yg(r,s),Wt(r,s,w,l),s.child;case 6:return r===null&&Kd(s),null;case 13:return Eg(r,s,l);case 4:return nh(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=_o(s,null,d,l):Wt(r,s,d,l),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Bn(d,f),fg(r,s,d,f,l);case 7:return Wt(r,s,s.pendingProps,l),s.child;case 8:return Wt(r,s,s.pendingProps.children,l),s.child;case 12:return Wt(r,s,s.pendingProps.children,l),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,y=s.memoizedProps,w=f.value,qe(xu,d._currentValue),d._currentValue=w,y!==null)if(jn(y.value,w)){if(y.children===f.children&&!Zt.current){s=Lr(r,s,l);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var k=y.dependencies;if(k!==null){w=y.child;for(var D=k.firstContext;D!==null;){if(D.context===d){if(y.tag===1){D=Dr(-1,l&-l),D.tag=2;var H=y.updateQueue;if(H!==null){H=H.shared;var X=H.pending;X===null?D.next=D:(D.next=X.next,X.next=D),H.pending=D}}y.lanes|=l,D=y.alternate,D!==null&&(D.lanes|=l),Zd(y.return,l,s),k.lanes|=l;break}D=D.next}}else if(y.tag===10)w=y.type===s.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=l,k=w.alternate,k!==null&&(k.lanes|=l),Zd(w,l,s),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===s){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Wt(r,s,f.children,l),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,Eo(s,l),f=In(f),d=d(f),s.flags|=1,Wt(r,s,d,l),s.child;case 14:return d=s.type,f=Bn(d,s.pendingProps),f=Bn(d.type,f),pg(r,s,d,f,l);case 15:return mg(r,s,s.type,s.pendingProps,l);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Bn(d,f),ju(r,s),s.tag=1,en(d)?(r=!0,Eu(s)):r=!1,Eo(s,l),og(s,d,f),mh(s,d,f,l),_h(null,s,d,!0,r,l);case 19:return Ig(r,s,l);case 22:return gg(r,s,l)}throw Error(t(156,s.tag))};function Wg(r,s){return Ws(r,s)}function qE(r,s,l,d){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(r,s,l,d){return new qE(r,s,l,d)}function jh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function WE(r){if(typeof r=="function")return jh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===j)return 11;if(r===Ot)return 14}return 2}function wi(r,s){var l=r.alternate;return l===null?(l=An(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&14680064,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l}function Ju(r,s,l,d,f,y){var w=2;if(d=r,typeof r=="function")jh(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case b:return vs(l.children,f,y,s);case A:w=8,f|=8;break;case C:return r=An(12,l,s,f|2),r.elementType=C,r.lanes=y,r;case P:return r=An(13,l,s,f),r.elementType=P,r.lanes=y,r;case st:return r=An(19,l,s,f),r.elementType=st,r.lanes=y,r;case ze:return Yu(l,f,y,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:w=10;break e;case L:w=9;break e;case j:w=11;break e;case Ot:w=14;break e;case Vt:w=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=An(w,l,s,f),s.elementType=r,s.type=d,s.lanes=y,s}function vs(r,s,l,d){return r=An(7,r,d,s),r.lanes=l,r}function Yu(r,s,l,d){return r=An(22,r,d,s),r.elementType=ze,r.lanes=l,r.stateNode={isHidden:!1},r}function Uh(r,s,l){return r=An(6,r,null,s),r.lanes=l,r}function Bh(r,s,l){return s=An(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function KE(r,s,l,d,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ti(0),this.expirationTimes=ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ti(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function zh(r,s,l,d,f,y,w,k,D){return r=new KE(r,s,l,k,D),s===1?(s=1,y===!0&&(s|=8)):s=0,y=An(3,null,null,s),r.current=y,y.stateNode=r,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},th(y),r}function QE(r,s,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:d==null?null:""+d,children:r,containerInfo:s,implementation:l}}function Kg(r){if(!r)return di;r=r._reactInternals;e:{if(Nn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(en(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var l=r.type;if(en(l))return Tm(r,l,s)}return s}function Qg(r,s,l,d,f,y,w,k,D){return r=zh(l,d,!0,r,f,y,w,k,D),r.context=Kg(null),l=r.current,d=Kt(),f=vi(l),y=Dr(d,f),y.callback=s??null,pi(l,y,f),r.current.lanes=f,ni(r,f,d),rn(r,d),r}function Xu(r,s,l,d){var f=s.current,y=Kt(),w=vi(f);return l=Kg(l),s.context===null?s.context=l:s.pendingContext=l,s=Dr(y,w),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=pi(f,s,w),r!==null&&(Gn(r,f,w,y),Ru(r,f,w)),w}function Zu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Jg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function $h(r,s){Jg(r,s),(r=r.alternate)&&Jg(r,s)}function JE(){return null}var Yg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Gh(r){this._internalRoot=r}ec.prototype.render=Gh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Xu(r,s,null,null)},ec.prototype.unmount=Gh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ms(function(){Xu(null,r,null,null)}),s[kr]=null}};function ec(r){this._internalRoot=r}ec.prototype.unstable_scheduleHydration=function(r){if(r){var s=eu();r={blockedOn:null,target:r,priority:s};for(var l=0;l<Yn.length&&s!==0&&s<Yn[l].priority;l++);Yn.splice(l,0,r),l===0&&ru(r)}};function Hh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function tc(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Xg(){}function YE(r,s,l,d,f){if(f){if(typeof d=="function"){var y=d;d=function(){var H=Zu(w);y.call(H)}}var w=Qg(s,d,r,0,null,!1,!1,"",Xg);return r._reactRootContainer=w,r[kr]=w.current,Ra(r.nodeType===8?r.parentNode:r),ms(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof d=="function"){var k=d;d=function(){var H=Zu(D);k.call(H)}}var D=zh(r,0,!1,null,null,!1,!1,"",Xg);return r._reactRootContainer=D,r[kr]=D.current,Ra(r.nodeType===8?r.parentNode:r),ms(function(){Xu(s,D,l,d)}),D}function nc(r,s,l,d,f){var y=l._reactRootContainer;if(y){var w=y;if(typeof f=="function"){var k=f;f=function(){var D=Zu(w);k.call(D)}}Xu(s,w,r,f)}else w=YE(l,s,r,f,d);return Zu(w)}Xl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var l=ei(s.pendingLanes);l!==0&&(ri(s,l|1),rn(s,He()),(Oe&6)===0&&(Ao=He()+500,hi()))}break;case 13:ms(function(){var d=Nr(r,1);if(d!==null){var f=Kt();Gn(d,r,1,f)}}),$h(r,1)}},Js=function(r){if(r.tag===13){var s=Nr(r,134217728);if(s!==null){var l=Kt();Gn(s,r,134217728,l)}$h(r,134217728)}},Zl=function(r){if(r.tag===13){var s=vi(r),l=Nr(r,s);if(l!==null){var d=Kt();Gn(l,r,s,d)}$h(r,s)}},eu=function(){return be},tu=function(r,s){var l=be;try{return be=r,s()}finally{be=l}},Bs=function(r,s,l){switch(s){case"input":if(ea(r,l),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==r&&d.form===r.form){var f=_u(d);if(!f)throw Error(t(90));Os(d),ea(d,f)}}}break;case"textarea":js(r,l);break;case"select":s=l.value,s!=null&&wr(r,!!l.multiple,s,!1)}},Qi=Vh,ca=ms;var XE={usingClientEntryPoint:!1,Events:[Na,fo,_u,Qn,ua,Vh]},qa={findFiberByHostInstance:as,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZE={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=fa(r),r===null?null:r.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||JE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{es=rc.inject(ZE),ln=rc}catch{}}return sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XE,sn.createPortal=function(r,s){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hh(s))throw Error(t(200));return QE(r,s,null,l)},sn.createRoot=function(r,s){if(!Hh(r))throw Error(t(299));var l=!1,d="",f=Yg;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=zh(r,1,!1,null,null,l,!1,d,f),r[kr]=s.current,Ra(r.nodeType===8?r.parentNode:r),new Gh(s)},sn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=fa(s),r=r===null?null:r.stateNode,r},sn.flushSync=function(r){return ms(r)},sn.hydrate=function(r,s,l){if(!tc(s))throw Error(t(200));return nc(null,r,s,!0,l)},sn.hydrateRoot=function(r,s,l){if(!Hh(r))throw Error(t(405));var d=l!=null&&l.hydratedSources||null,f=!1,y="",w=Yg;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(w=l.onRecoverableError)),s=Qg(s,null,r,1,l??null,f,!1,y,w),r[kr]=s.current,Ra(r),d)for(r=0;r<d.length;r++)l=d[r],f=l._getVersion,f=f(l._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[l,f]:s.mutableSourceEagerHydrationData.push(l,f);return new ec(s)},sn.render=function(r,s,l){if(!tc(s))throw Error(t(200));return nc(null,r,s,!1,l)},sn.unmountComponentAtNode=function(r){if(!tc(r))throw Error(t(40));return r._reactRootContainer?(ms(function(){nc(null,null,r,!1,function(){r._reactRootContainer=null,r[kr]=null})}),!0):!1},sn.unstable_batchedUpdates=Vh,sn.unstable_renderSubtreeIntoContainer=function(r,s,l,d){if(!tc(l))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return nc(r,s,l,!1,d)},sn.version="18.3.1-next-f1338f8080-20240426",sn}var oy;function aT(){if(oy)return Kh.exports;oy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kh.exports=oT(),Kh.exports}var ay;function lT(){if(ay)return ic;ay=1;var n=aT();return ic.createRoot=n.createRoot,ic.hydrateRoot=n.hydrateRoot,ic}var uT=lT();const cT=Jv(uT);var Ka={},ly;function dT(){if(ly)return Ka;ly=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.parse=c,Ka.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,a=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function c(E,x){const R=new a,O=E.length;if(O<2)return R;const V=x?.decode||_;let $=0;do{const Z=E.indexOf("=",$);if(Z===-1)break;const W=E.indexOf(";",$),te=W===-1?O:W;if(Z>te){$=E.lastIndexOf(";",Z-1)+1;continue}const ae=h(E,$,Z),se=p(E,Z,ae),b=E.slice(ae,se);if(R[b]===void 0){let A=h(E,Z+1,te),C=p(E,te,A);const N=V(E.slice(A,C));R[b]=N}$=te+1}while($<O);return R}function h(E,x,R){do{const O=E.charCodeAt(x);if(O!==32&&O!==9)return x}while(++x<R);return R}function p(E,x,R){for(;x>R;){const O=E.charCodeAt(--x);if(O!==32&&O!==9)return x+1}return R}function g(E,x,R){const O=R?.encode||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const V=O(x);if(!e.test(V))throw new TypeError(`argument val is invalid: ${x}`);let $=E+"="+V;if(!R)return $;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);$+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);$+="; Domain="+R.domain}if(R.path){if(!i.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);$+="; Path="+R.path}if(R.expires){if(!T(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);$+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&($+="; HttpOnly"),R.secure&&($+="; Secure"),R.partitioned&&($+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return $}function _(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function T(E){return o.call(E)==="[object Date]"}return Ka}dT();var uy="popstate";function hT(n={}){function e(i,o){let{pathname:a,search:c,hash:h}=i.location;return ff("",{pathname:a,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:ul(o)}return pT(e,t,null,n)}function tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fT(){return Math.random().toString(36).substring(2,10)}function cy(n,e){return{usr:n.state,key:n.key,idx:e}}function ff(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Go(e):e,state:t,key:e&&e.key||i||fT()}}function ul({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Go(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function pT(n,e,t,i={}){let{window:o=document.defaultView,v5Compat:a=!1}=i,c=o.history,h="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){h="POP";let V=_(),$=V==null?null:V-g;g=V,p&&p({action:h,location:O.location,delta:$})}function E(V,$){h="PUSH";let Z=ff(O.location,V,$);g=_()+1;let W=cy(Z,g),te=O.createHref(Z);try{c.pushState(W,"",te)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(te)}a&&p&&p({action:h,location:O.location,delta:1})}function x(V,$){h="REPLACE";let Z=ff(O.location,V,$);g=_();let W=cy(Z,g),te=O.createHref(Z);c.replaceState(W,"",te),a&&p&&p({action:h,location:O.location,delta:0})}function R(V){return mT(V)}let O={get action(){return h},get location(){return n(o,c)},listen(V){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(uy,T),p=V,()=>{o.removeEventListener(uy,T),p=null}},createHref(V){return e(o,V)},createURL:R,encodeLocation(V){let $=R(V);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:E,replace:x,go(V){return c.go(V)}};return O}function mT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),tt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:ul(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Yv(n,e,t="/"){return gT(n,e,t,!1)}function gT(n,e,t,i){let o=typeof e=="string"?Go(e):e,a=Gr(o.pathname||"/",t);if(a==null)return null;let c=Xv(n);yT(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let g=kT(a);h=AT(c[p],g,i)}return h}function Xv(n,e=[],t=[],i=""){let o=(a,c,h)=>{let p={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};p.relativePath.startsWith("/")&&(tt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let g=Ur([i,p.relativePath]),_=t.concat(p);a.children&&a.children.length>0&&(tt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Xv(a.children,e,_,g)),!(a.path==null&&!a.index)&&e.push({path:g,score:ST(g,a.index),routesMeta:_})};return n.forEach((a,c)=>{if(a.path===""||!a.path?.includes("?"))o(a,c);else for(let h of Zv(a.path))o(a,c,h)}),e}function Zv(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return o?[a,""]:[a];let c=Zv(i.join("/")),h=[];return h.push(...c.map(p=>p===""?a:[a,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function yT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:CT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var vT=/^:[\w-]+$/,_T=3,wT=2,ET=1,TT=10,IT=-2,dy=n=>n==="*";function ST(n,e){let t=n.split("/"),i=t.length;return t.some(dy)&&(i+=IT),e&&(i+=wT),t.filter(o=>!dy(o)).reduce((o,a)=>o+(vT.test(a)?_T:a===""?ET:TT),i)}function CT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function AT(n,e,t=!1){let{routesMeta:i}=n,o={},a="/",c=[];for(let h=0;h<i.length;++h){let p=i[h],g=h===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",T=Cc({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),E=p.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=Cc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:Ur([a,T.pathname]),pathnameBase:NT(Ur([a,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(a=Ur([a,T.pathnameBase]))}return c}function Cc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=xT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let a=o[0],c=a.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:T},E)=>{if(_==="*"){let R=h[E]||"";c=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const x=h[E];return T&&!x?g[_]=void 0:g[_]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:c,pattern:n}}function xT(n,e=!1,t=!0){hr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function kT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Gr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function RT(n,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Go(n):n;return{pathname:t?t.startsWith("/")?t:PT(t,e):e,search:DT(i),hash:LT(o)}}function PT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Yh(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function e_(n){let e=bT(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function t_(n,e,t,i=!1){let o;typeof n=="string"?o=Go(n):(o={...n},tt(!o.pathname||!o.pathname.includes("?"),Yh("?","pathname","search",o)),tt(!o.pathname||!o.pathname.includes("#"),Yh("#","pathname","hash",o)),tt(!o.search||!o.search.includes("#"),Yh("#","search","hash",o)));let a=n===""||o.pathname==="",c=a?"/":o.pathname,h;if(c==null)h=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),T-=1;o.pathname=E.join("/")}h=T>=0?e[T]:"/"}let p=RT(o,h),g=c&&c!=="/"&&c.endsWith("/"),_=(a||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Ur=n=>n.join("/").replace(/\/\/+/g,"/"),NT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),DT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,LT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function OT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var n_=["POST","PUT","PATCH","DELETE"];new Set(n_);var VT=["GET",...n_];new Set(VT);var Ho=F.createContext(null);Ho.displayName="DataRouter";var Kc=F.createContext(null);Kc.displayName="DataRouterState";var r_=F.createContext({isTransitioning:!1});r_.displayName="ViewTransition";var MT=F.createContext(new Map);MT.displayName="Fetchers";var FT=F.createContext(null);FT.displayName="Await";var mr=F.createContext(null);mr.displayName="Navigation";var wl=F.createContext(null);wl.displayName="Location";var gr=F.createContext({outlet:null,matches:[],isDataRoute:!1});gr.displayName="Route";var $f=F.createContext(null);$f.displayName="RouteError";function jT(n,{relative:e}={}){tt(El(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=F.useContext(mr),{hash:o,pathname:a,search:c}=Tl(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:Ur([t,a])),i.createHref({pathname:h,search:c,hash:o})}function El(){return F.useContext(wl)!=null}function Rs(){return tt(El(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(wl).location}var i_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function s_(n){F.useContext(mr).static||F.useLayoutEffect(n)}function Rn(){let{isDataRoute:n}=F.useContext(gr);return n?XT():UT()}function UT(){tt(El(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(Ho),{basename:e,navigator:t}=F.useContext(mr),{matches:i}=F.useContext(gr),{pathname:o}=Rs(),a=JSON.stringify(e_(i)),c=F.useRef(!1);return s_(()=>{c.current=!0}),F.useCallback((p,g={})=>{if(hr(c.current,i_),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=t_(p,JSON.parse(a),o,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ur([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,a,o,n])}F.createContext(null);function o_(){let{matches:n}=F.useContext(gr),e=n[n.length-1];return e?e.params:{}}function Tl(n,{relative:e}={}){let{matches:t}=F.useContext(gr),{pathname:i}=Rs(),o=JSON.stringify(e_(t));return F.useMemo(()=>t_(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function BT(n,e){return a_(n,e)}function a_(n,e,t,i){tt(El(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=F.useContext(mr),{matches:a}=F.useContext(gr),c=a[a.length-1],h=c?c.params:{},p=c?c.pathname:"/",g=c?c.pathnameBase:"/",_=c&&c.route;{let $=_&&_.path||"";l_(p,!_||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=Rs(),E;if(e){let $=typeof e=="string"?Go(e):e;tt(g==="/"||$.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),E=$}else E=T;let x=E.pathname||"/",R=x;if(g!=="/"){let $=g.replace(/^\//,"").split("/");R="/"+x.replace(/^\//,"").split("/").slice($.length).join("/")}let O=Yv(n,{pathname:R});hr(_||O!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),hr(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=qT(O&&O.map($=>Object.assign({},$,{params:Object.assign({},h,$.params),pathname:Ur([g,o.encodeLocation?o.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Ur([g,o.encodeLocation?o.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),a,t,i);return e&&V?F.createElement(wl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},V):V}function zT(){let n=YT(),e=OT(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=F.createElement(F.Fragment,null,F.createElement("p",null,"💿 Hey developer 👋"),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:a},"ErrorBoundary")," or"," ",F.createElement("code",{style:a},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:o},t):null,c)}var $T=F.createElement(zT,null),GT=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?F.createElement(gr.Provider,{value:this.props.routeContext},F.createElement($f.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HT({routeContext:n,match:e,children:t}){let i=F.useContext(Ho);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(gr.Provider,{value:n},t)}function qT(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=t?.errors;if(a!=null){let p=o.findIndex(g=>g.route.id&&a?.[g.route.id]!==void 0);tt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:_,errors:T}=t,E=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!T||T[g.route.id]===void 0);if(g.route.lazy||E){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,g,_)=>{let T,E=!1,x=null,R=null;t&&(T=a&&g.route.id?a[g.route.id]:void 0,x=g.route.errorElement||$T,c&&(h<0&&_===0?(l_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,R=null):h===_&&(E=!0,R=g.route.hydrateFallbackElement||null)));let O=e.concat(o.slice(0,_+1)),V=()=>{let $;return T?$=x:E?$=R:g.route.Component?$=F.createElement(g.route.Component,null):g.route.element?$=g.route.element:$=p,F.createElement(HT,{match:g,routeContext:{outlet:p,matches:O,isDataRoute:t!=null},children:$})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?F.createElement(GT,{location:t.location,revalidation:t.revalidation,component:x,error:T,children:V(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):V()},null)}function Gf(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function WT(n){let e=F.useContext(Ho);return tt(e,Gf(n)),e}function KT(n){let e=F.useContext(Kc);return tt(e,Gf(n)),e}function QT(n){let e=F.useContext(gr);return tt(e,Gf(n)),e}function Hf(n){let e=QT(n),t=e.matches[e.matches.length-1];return tt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function JT(){return Hf("useRouteId")}function YT(){let n=F.useContext($f),e=KT("useRouteError"),t=Hf("useRouteError");return n!==void 0?n:e.errors?.[t]}function XT(){let{router:n}=WT("useNavigate"),e=Hf("useNavigate"),t=F.useRef(!1);return s_(()=>{t.current=!0}),F.useCallback(async(o,a={})=>{hr(t.current,i_),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...a}))},[n,e])}var hy={};function l_(n,e,t){!e&&!hy[n]&&(hy[n]=!0,hr(!1,t))}F.memo(ZT);function ZT({routes:n,future:e,state:t}){return a_(n,void 0,t,e)}function Vr(n){tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eI({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:a=!1}){tt(!El(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=F.useMemo(()=>({basename:c,navigator:o,static:a,future:{}}),[c,o,a]);typeof t=="string"&&(t=Go(t));let{pathname:p="/",search:g="",hash:_="",state:T=null,key:E="default"}=t,x=F.useMemo(()=>{let R=Gr(p,c);return R==null?null:{location:{pathname:R,search:g,hash:_,state:T,key:E},navigationType:i}},[c,p,g,_,T,E,i]);return hr(x!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:F.createElement(mr.Provider,{value:h},F.createElement(wl.Provider,{children:e,value:x}))}function tI({children:n,location:e}){return BT(pf(n),e)}function pf(n,e=[]){let t=[];return F.Children.forEach(n,(i,o)=>{if(!F.isValidElement(i))return;let a=[...e,o];if(i.type===F.Fragment){t.push.apply(t,pf(i.props.children,a));return}tt(i.type===Vr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),tt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=pf(i.props.children,a)),t.push(c)}),t}var hc="get",fc="application/x-www-form-urlencoded";function Qc(n){return n!=null&&typeof n.tagName=="string"}function nI(n){return Qc(n)&&n.tagName.toLowerCase()==="button"}function rI(n){return Qc(n)&&n.tagName.toLowerCase()==="form"}function iI(n){return Qc(n)&&n.tagName.toLowerCase()==="input"}function sI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function oI(n,e){return n.button===0&&(!e||e==="_self")&&!sI(n)}var sc=null;function aI(){if(sc===null)try{new FormData(document.createElement("form"),0),sc=!1}catch{sc=!0}return sc}var lI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xh(n){return n!=null&&!lI.has(n)?(hr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fc}"`),null):n}function uI(n,e){let t,i,o,a,c;if(rI(n)){let h=n.getAttribute("action");i=h?Gr(h,e):null,t=n.getAttribute("method")||hc,o=Xh(n.getAttribute("enctype"))||fc,a=new FormData(n)}else if(nI(n)||iI(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(i=p?Gr(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||hc,o=Xh(n.getAttribute("formenctype"))||Xh(h.getAttribute("enctype"))||fc,a=new FormData(h,n),!aI()){let{name:g,type:_,value:T}=n;if(_==="image"){let E=g?`${g}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else g&&a.append(g,T)}}else{if(Qc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hc,i=null,o=fc,c=n}return a&&o==="text/plain"&&(c=a,a=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:a,body:c}}function qf(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function cI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function hI(n,e,t){let i=await Promise.all(n.map(async o=>{let a=e.routes[o.route.id];if(a){let c=await cI(a,t);return c.links?c.links():[]}return[]}));return gI(i.flat(1).filter(dI).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function fy(n,e,t,i,o,a){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,h=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return a==="assets"?e.filter((p,g)=>c(p,g)||h(p,g)):a==="data"?e.filter((p,g)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||h(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function fI(n,e,{includeHydrateFallback:t}={}){return pI(n.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function pI(n){return[...new Set(n)]}function mI(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function gI(n,e){let t=new Set;return new Set(e),n.reduce((i,o)=>{let a=JSON.stringify(mI(o));return t.has(a)||(t.add(a),i.push({key:a,link:o})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yI=new Set([100,101,204,205]);function vI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Gr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function u_(){let n=F.useContext(Ho);return qf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _I(){let n=F.useContext(Kc);return qf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Wf=F.createContext(void 0);Wf.displayName="FrameworkContext";function c_(){let n=F.useContext(Wf);return qf(n,"You must render this element inside a <HydratedRouter> element"),n}function wI(n,e){let t=F.useContext(Wf),[i,o]=F.useState(!1),[a,c]=F.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,E=F.useRef(null);F.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let O=$=>{$.forEach(Z=>{c(Z.isIntersecting)})},V=new IntersectionObserver(O,{threshold:.5});return E.current&&V.observe(E.current),()=>{V.disconnect()}}},[n]),F.useEffect(()=>{if(i){let O=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(O)}}},[i]);let x=()=>{o(!0)},R=()=>{o(!1),c(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:Qa(h,x),onBlur:Qa(p,R),onMouseEnter:Qa(g,x),onMouseLeave:Qa(_,R),onTouchStart:Qa(T,x)}]:[!1,E,{}]}function Qa(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function EI({page:n,...e}){let{router:t}=u_(),i=F.useMemo(()=>Yv(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?F.createElement(II,{page:n,matches:i,...e}):null}function TI(n){let{manifest:e,routeModules:t}=c_(),[i,o]=F.useState([]);return F.useEffect(()=>{let a=!1;return hI(n,e,t).then(c=>{a||o(c)}),()=>{a=!0}},[n,e,t]),i}function II({page:n,matches:e,...t}){let i=Rs(),{manifest:o,routeModules:a}=c_(),{basename:c}=u_(),{loaderData:h,matches:p}=_I(),g=F.useMemo(()=>fy(n,e,p,o,i,"data"),[n,e,p,o,i]),_=F.useMemo(()=>fy(n,e,p,o,i,"assets"),[n,e,p,o,i]),T=F.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let R=new Set,O=!1;if(e.forEach($=>{let Z=o.routes[$.route.id];!Z||!Z.hasLoader||(!g.some(W=>W.route.id===$.route.id)&&$.route.id in h&&a[$.route.id]?.shouldRevalidate||Z.hasClientLoader?O=!0:R.add($.route.id))}),R.size===0)return[];let V=vI(n,c);return O&&R.size>0&&V.searchParams.set("_routes",e.filter($=>R.has($.route.id)).map($=>$.route.id).join(",")),[V.pathname+V.search]},[c,h,i,o,g,e,n,a]),E=F.useMemo(()=>fI(_,o),[_,o]),x=TI(_);return F.createElement(F.Fragment,null,T.map(R=>F.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),E.map(R=>F.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),x.map(({key:R,link:O})=>F.createElement("link",{key:R,...O})))}function SI(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var d_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{d_&&(window.__reactRouterVersion="7.6.3")}catch{}function CI({basename:n,children:e,window:t}){let i=F.useRef();i.current==null&&(i.current=hT({window:t,v5Compat:!0}));let o=i.current,[a,c]=F.useState({action:o.action,location:o.location}),h=F.useCallback(p=>{F.startTransition(()=>c(p))},[c]);return F.useLayoutEffect(()=>o.listen(h),[o,h]),F.createElement(eI,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:o})}var h_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jc=F.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:a,replace:c,state:h,target:p,to:g,preventScrollReset:_,viewTransition:T,...E},x){let{basename:R}=F.useContext(mr),O=typeof g=="string"&&h_.test(g),V,$=!1;if(typeof g=="string"&&O&&(V=g,d_))try{let C=new URL(window.location.href),N=g.startsWith("//")?new URL(C.protocol+g):new URL(g),L=Gr(N.pathname,R);N.origin===C.origin&&L!=null?g=L+N.search+N.hash:$=!0}catch{hr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=jT(g,{relative:o}),[W,te,ae]=wI(i,E),se=RI(g,{replace:c,state:h,target:p,preventScrollReset:_,relative:o,viewTransition:T});function b(C){e&&e(C),C.defaultPrevented||se(C)}let A=F.createElement("a",{...E,...ae,href:V||Z,onClick:$||a?e:b,ref:SI(x,te),target:p,"data-discover":!O&&t==="render"?"true":void 0});return W&&!O?F.createElement(F.Fragment,null,A,F.createElement(EI,{page:Z})):A});Jc.displayName="Link";var AI=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:a,to:c,viewTransition:h,children:p,...g},_){let T=Tl(c,{relative:g.relative}),E=Rs(),x=F.useContext(Kc),{navigator:R,basename:O}=F.useContext(mr),V=x!=null&&LI(T)&&h===!0,$=R.encodeLocation?R.encodeLocation(T).pathname:T.pathname,Z=E.pathname,W=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(Z=Z.toLowerCase(),W=W?W.toLowerCase():null,$=$.toLowerCase()),W&&O&&(W=Gr(W,O)||W);const te=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ae=Z===$||!o&&Z.startsWith($)&&Z.charAt(te)==="/",se=W!=null&&(W===$||!o&&W.startsWith($)&&W.charAt($.length)==="/"),b={isActive:ae,isPending:se,isTransitioning:V},A=ae?e:void 0,C;typeof i=="function"?C=i(b):C=[i,ae?"active":null,se?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(b):a;return F.createElement(Jc,{...g,"aria-current":A,className:C,ref:_,style:N,to:c,viewTransition:h},typeof p=="function"?p(b):p)});AI.displayName="NavLink";var xI=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:a,method:c=hc,action:h,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:T,...E},x)=>{let R=NI(),O=DI(h,{relative:g}),V=c.toLowerCase()==="get"?"get":"post",$=typeof h=="string"&&h_.test(h),Z=W=>{if(p&&p(W),W.defaultPrevented)return;W.preventDefault();let te=W.nativeEvent.submitter,ae=te?.getAttribute("formmethod")||c;R(te||W.currentTarget,{fetcherKey:e,method:ae,navigate:t,replace:o,state:a,relative:g,preventScrollReset:_,viewTransition:T})};return F.createElement("form",{ref:x,method:V,action:O,onSubmit:i?p:Z,...E,"data-discover":!$&&n==="render"?"true":void 0})});xI.displayName="Form";function kI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f_(n){let e=F.useContext(Ho);return tt(e,kI(n)),e}function RI(n,{target:e,replace:t,state:i,preventScrollReset:o,relative:a,viewTransition:c}={}){let h=Rn(),p=Rs(),g=Tl(n,{relative:a});return F.useCallback(_=>{if(oI(_,e)){_.preventDefault();let T=t!==void 0?t:ul(p)===ul(g);h(n,{replace:T,state:i,preventScrollReset:o,relative:a,viewTransition:c})}},[p,h,g,t,i,e,n,o,a,c])}var PI=0,bI=()=>`__${String(++PI)}__`;function NI(){let{router:n}=f_("useSubmit"),{basename:e}=F.useContext(mr),t=JT();return F.useCallback(async(i,o={})=>{let{action:a,method:c,encType:h,formData:p,body:g}=uI(i,e);if(o.navigate===!1){let _=o.fetcherKey||bI();await n.fetch(_,t,o.action||a,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||h,flushSync:o.flushSync})}else await n.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function DI(n,{relative:e}={}){let{basename:t}=F.useContext(mr),i=F.useContext(gr);tt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a={...Tl(n||".",{relative:e})},c=Rs();if(n==null){a.search=c.search;let h=new URLSearchParams(a.search),p=h.getAll("index");if(p.some(_=>_==="")){h.delete("index"),p.filter(T=>T).forEach(T=>h.append("index",T));let _=h.toString();a.search=_?`?${_}`:""}}return(!n||n===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Ur([t,a.pathname])),ul(a)}function LI(n,e={}){let t=F.useContext(r_);tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=f_("useViewTransitionState"),o=Tl(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=Gr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Gr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Cc(o.pathname,c)!=null||Cc(o.pathname,a)!=null}[...yI];const OI=()=>{};var py={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},VI=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const a=n[t++];e[i++]=String.fromCharCode((o&31)<<6|a&63)}else if(o>239&&o<365){const a=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(a&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const a=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(a&63)<<6|c&63)}}return e.join("")},m_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const a=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,g=p?n[o+2]:0,_=a>>2,T=(a&3)<<4|h>>4;let E=(h&15)<<2|g>>6,x=g&63;p||(x=64,c||(E=64)),i.push(t[_],t[T],t[E],t[x])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(p_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VI(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const a=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,a==null||h==null||g==null||T==null)throw new MI;const E=a<<2|h>>4;if(i.push(E),g!==64){const x=h<<4&240|g>>2;if(i.push(x),T!==64){const R=g<<6&192|T;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class MI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FI=function(n){const e=p_(n);return m_.encodeByteArray(e,!0)},Ac=function(n){return FI(n).replace(/\./g,"")},g_=function(n){try{return m_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=()=>jI().__FIREBASE_DEFAULTS__,BI=()=>{if(typeof process>"u"||typeof py>"u")return;const n=py.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&g_(n[1]);return e&&JSON.parse(e)},Yc=()=>{try{return OI()||UI()||BI()||zI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},y_=n=>{var e,t;return(t=(e=Yc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},$I=n=>{const e=y_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},v_=()=>{var n;return(n=Yc())===null||n===void 0?void 0:n.config},__=n=>{var e;return(e=Yc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function w_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Ac(JSON.stringify(t)),Ac(JSON.stringify(c)),""].join(".")}const nl={};function qI(){const n={prod:[],emulator:[]};for(const e of Object.keys(nl))nl[e]?n.emulator.push(e):n.prod.push(e);return n}function WI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let my=!1;function E_(n,e){if(typeof window>"u"||typeof document>"u"||!qo(window.location.host)||nl[n]===e||nl[n]||my)return;nl[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=qI().prod.length>0;function c(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,x){E.setAttribute("width","24"),E.setAttribute("id",x),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function g(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{my=!0,c()},E}function _(E,x){E.setAttribute("id",x),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=WI(i),x=t("text"),R=document.getElementById(x)||document.createElement("span"),O=t("learnmore"),V=document.getElementById(O)||document.createElement("a"),$=t("preprendIcon"),Z=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const W=E.element;h(W),_(V,O);const te=g();p(Z,$),W.append(Z,R,V,te),document.body.appendChild(W)}a?(R.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function QI(){var n;const e=(n=Yc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function XI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ZI(){const n=Gt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function eS(){return!QI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tS(){try{return typeof indexedDB=="object"}catch{return!1}}function nS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var a;e(((a=o.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="FirebaseError";class Jr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rS,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,a=this.errors[e],c=a?iS(a,i):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new Jr(o,h,i)}}function iS(n,e){return n.replace(sS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const sS=/\{\$([^}]+)}/g;function oS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Is(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const a=n[o],c=e[o];if(gy(a)&&gy(c)){if(!Is(a,c))return!1}else if(a!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function gy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ja(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,a]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(a)}}),e}function Ya(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aS(n,e){const t=new lS(n,e);return t.subscribe.bind(t)}class lS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");uS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Zh),o.error===void 0&&(o.error=Zh),o.complete===void 0&&(o.complete=Zh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function uS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Zh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(n){return n&&n._delegate?n._delegate:n}class Ss{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new GI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hS(e))try{this.getOrInitializeService({instanceIdentifier:_s})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:o});i.resolve(a)}catch{}}}}clearInstance(e=_s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_s){return this.instances.has(e)}getOptions(e=_s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),a=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_s){return this.component?this.component.multipleInstances?e:_s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dS(n){return n===_s?void 0:n}function hS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new cS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Re||(Re={}));const pS={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},mS=Re.INFO,gS={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},yS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=gS[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kf{constructor(e){this.name=e,this._logLevel=mS,this._logHandler=yS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const vS=(n,e)=>e.some(t=>n instanceof t);let yy,vy;function _S(){return yy||(yy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wS(){return vy||(vy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T_=new WeakMap,mf=new WeakMap,I_=new WeakMap,ef=new WeakMap,Qf=new WeakMap;function ES(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",a),n.removeEventListener("error",c)},a=()=>{t(Ri(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",a),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&T_.set(t,n)}).catch(()=>{}),Qf.set(e,n),e}function TS(n){if(mf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",c),n.removeEventListener("abort",c)},a=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",a),n.addEventListener("error",c),n.addEventListener("abort",c)});mf.set(n,e)}let gf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return mf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||I_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function IS(n){gf=n(gf)}function SS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(tf(this),e,...t);return I_.set(i,e.sort?e.sort():[e]),Ri(i)}:wS().includes(n)?function(...e){return n.apply(tf(this),e),Ri(T_.get(this))}:function(...e){return Ri(n.apply(tf(this),e))}}function CS(n){return typeof n=="function"?SS(n):(n instanceof IDBTransaction&&TS(n),vS(n,_S())?new Proxy(n,gf):n)}function Ri(n){if(n instanceof IDBRequest)return ES(n);if(ef.has(n))return ef.get(n);const e=CS(n);return e!==n&&(ef.set(n,e),Qf.set(e,n)),e}const tf=n=>Qf.get(n);function AS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:a}={}){const c=indexedDB.open(n,e),h=Ri(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ri(c.result),p.oldVersion,p.newVersion,Ri(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{a&&p.addEventListener("close",()=>a()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const xS=["get","getKey","getAll","getAllKeys","count"],kS=["put","add","delete","clear"],nf=new Map;function _y(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nf.get(e))return nf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=kS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||xS.includes(t)))return;const a=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(h.shift())),(await Promise.all([g[t](...h),o&&p.done]))[0]};return nf.set(e,a),a}IS(n=>({...n,get:(e,t,i)=>_y(e,t)||n.get(e,t,i),has:(e,t)=>!!_y(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(PS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function PS(n){const e=n.getComponent();return e?.type==="VERSION"}const yf="@firebase/app",wy="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=new Kf("@firebase/app"),bS="@firebase/app-compat",NS="@firebase/analytics-compat",DS="@firebase/analytics",LS="@firebase/app-check-compat",OS="@firebase/app-check",VS="@firebase/auth",MS="@firebase/auth-compat",FS="@firebase/database",jS="@firebase/data-connect",US="@firebase/database-compat",BS="@firebase/functions",zS="@firebase/functions-compat",$S="@firebase/installations",GS="@firebase/installations-compat",HS="@firebase/messaging",qS="@firebase/messaging-compat",WS="@firebase/performance",KS="@firebase/performance-compat",QS="@firebase/remote-config",JS="@firebase/remote-config-compat",YS="@firebase/storage",XS="@firebase/storage-compat",ZS="@firebase/firestore",eC="@firebase/ai",tC="@firebase/firestore-compat",nC="firebase",rC="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="[DEFAULT]",iC={[yf]:"fire-core",[bS]:"fire-core-compat",[DS]:"fire-analytics",[NS]:"fire-analytics-compat",[OS]:"fire-app-check",[LS]:"fire-app-check-compat",[VS]:"fire-auth",[MS]:"fire-auth-compat",[FS]:"fire-rtdb",[jS]:"fire-data-connect",[US]:"fire-rtdb-compat",[BS]:"fire-fn",[zS]:"fire-fn-compat",[$S]:"fire-iid",[GS]:"fire-iid-compat",[HS]:"fire-fcm",[qS]:"fire-fcm-compat",[WS]:"fire-perf",[KS]:"fire-perf-compat",[QS]:"fire-rc",[JS]:"fire-rc-compat",[YS]:"fire-gcs",[XS]:"fire-gcs-compat",[ZS]:"fire-fst",[tC]:"fire-fst-compat",[eC]:"fire-vertex","fire-js":"fire-js",[nC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Map,sC=new Map,_f=new Map;function Ey(n,e){try{n.container.addComponent(e)}catch(t){Hr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fo(n){const e=n.name;if(_f.has(e))return Hr.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,n);for(const t of xc.values())Ey(t,n);for(const t of sC.values())Ey(t,n);return!0}function Jf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function xn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pi=new Il("app","Firebase",oC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=rC;function S_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vf,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Pi.create("bad-app-name",{appName:String(o)});if(t||(t=v_()),!t)throw Pi.create("no-options");const a=xc.get(o);if(a){if(Is(t,a.options)&&Is(i,a.config))return a;throw Pi.create("duplicate-app",{appName:o})}const c=new fS(o);for(const p of _f.values())c.addComponent(p);const h=new aC(t,i,c);return xc.set(o,h),h}function C_(n=vf){const e=xc.get(n);if(!e&&n===vf&&v_())return S_();if(!e)throw Pi.create("no-app",{appName:n});return e}function bi(n,e,t){var i;let o=(i=iC[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const h=[`Unable to register library "${o}" with version "${e}":`];a&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hr.warn(h.join(" "));return}Fo(new Ss(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="firebase-heartbeat-database",uC=1,cl="firebase-heartbeat-store";let rf=null;function A_(){return rf||(rf=AS(lC,uC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Pi.create("idb-open",{originalErrorMessage:n.message})})),rf}async function cC(n){try{const t=(await A_()).transaction(cl),i=await t.objectStore(cl).get(x_(n));return await t.done,i}catch(e){if(e instanceof Jr)Hr.warn(e.message);else{const t=Pi.create("idb-get",{originalErrorMessage:e?.message});Hr.warn(t.message)}}}async function Ty(n,e){try{const i=(await A_()).transaction(cl,"readwrite");await i.objectStore(cl).put(e,x_(n)),await i.done}catch(t){if(t instanceof Jr)Hr.warn(t.message);else{const i=Pi.create("idb-set",{originalErrorMessage:t?.message});Hr.warn(i.message)}}}function x_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=1024,hC=30;class fC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mC(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Iy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats.length>hC){const c=gC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Hr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Iy(),{heartbeatsToSend:i,unsentEntries:o}=pC(this._heartbeatsCache.heartbeats),a=Ac(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Hr.warn(t),""}}}function Iy(){return new Date().toISOString().substring(0,10)}function pC(n,e=dC){const t=[];let i=n.slice();for(const o of n){const a=t.find(c=>c.agent===o.agent);if(a){if(a.dates.push(o.date),Sy(t)>e){a.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Sy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class mC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tS()?nS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await cC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ty(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Sy(n){return Ac(JSON.stringify({version:2,heartbeats:n})).length}function gC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(n){Fo(new Ss("platform-logger",e=>new RS(e),"PRIVATE")),Fo(new Ss("heartbeat",e=>new fC(e),"PRIVATE")),bi(yf,wy,n),bi(yf,wy,"esm2017"),bi("fire-js","")}yC("");function Yf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function k_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vC=k_,R_=new Il("auth","Firebase",k_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Kf("@firebase/auth");function _C(n,...e){kc.logLevel<=Re.WARN&&kc.warn(`Auth (${Wo}): ${n}`,...e)}function pc(n,...e){kc.logLevel<=Re.ERROR&&kc.error(`Auth (${Wo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(n,...e){throw Xf(n,...e)}function or(n,...e){return Xf(n,...e)}function P_(n,e,t){const i=Object.assign(Object.assign({},vC()),{[e]:t});return new Il("auth","Firebase",i).create(e,{appName:n.name})}function Br(n){return P_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xf(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return R_.create(n,...e)}function we(n,e,...t){if(!n)throw Xf(e,...t)}function Mr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pc(e),new Error(e)}function qr(n,e){n||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function wC(){return Cy()==="http:"||Cy()==="https:"}function Cy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wC()||YI()||"connection"in navigator)?navigator.onLine:!0}function TC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.shortDelay=e,this.longDelay=t,qr(t>e,"Short delay should be less than long delay!"),this.isMobile=KI()||XI()}get(){return EC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zf(n,e){qr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CC=new Cl(3e4,6e4);function Bi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function zi(n,e,t,i,o={}){return N_(n,o,async()=>{let a={},c={};i&&(e==="GET"?c=i:a={body:JSON.stringify(i)});const h=Sl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},a);return JI()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&qo(n.emulatorConfig.host)&&(g.credentials="include"),b_.fetch()(await D_(n,n.config.apiHost,t,h),g)})}async function N_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},IC),e);try{const o=new xC(n),a=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await a.json();if("needConfirmation"in c)throw oc(n,"account-exists-with-different-credential",c);if(a.ok&&!("errorMessage"in c))return c;{const h=a.ok?c.errorMessage:c.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw oc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw oc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw oc(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw P_(n,_,g);qn(n,_)}}catch(o){if(o instanceof Jr)throw o;qn(n,"network-request-failed",{message:String(o)})}}async function Al(n,e,t,i,o={}){const a=await zi(n,e,t,i,o);return"mfaPendingCredential"in a&&qn(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function D_(n,e,t,i){const o=`${e}${t}?${i}`,a=n,c=a.config.emulator?Zf(n.config,o):`${n.config.apiScheme}://${o}`;return SC.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(c).toString():c}function AC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(or(this.auth,"network-request-failed")),CC.get())})}}function oc(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=or(n,e,i);return o.customData._tokenResponse=t,o}function Ay(n){return n!==void 0&&n.enterprise!==void 0}class kC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return AC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function RC(n,e){return zi(n,"GET","/v2/recaptchaConfig",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(n,e){return zi(n,"POST","/v1/accounts:delete",e)}async function Rc(n,e){return zi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bC(n,e=!1){const t=ct(n),i=await t.getIdToken(e),o=ep(i);we(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const a=typeof o.firebase=="object"?o.firebase:void 0,c=a?.sign_in_provider;return{claims:o,token:i,authTime:rl(sf(o.auth_time)),issuedAtTime:rl(sf(o.iat)),expirationTime:rl(sf(o.exp)),signInProvider:c||null,signInSecondFactor:a?.sign_in_second_factor||null}}function sf(n){return Number(n)*1e3}function ep(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return pc("JWT malformed, contained fewer than 3 sections"),null;try{const o=g_(t);return o?JSON.parse(o):(pc("Failed to decode base64 JWT payload"),null)}catch(o){return pc("Caught error parsing JWT payload as JSON",o?.toString()),null}}function xy(n){const e=ep(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Jr&&NC(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function NC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rl(this.lastLoginAt),this.creationTime=rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await dl(n,Rc(t,{idToken:i}));we(o?.users.length,t,"internal-error");const a=o.users[0];n._notifyReloadListener(a);const c=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?L_(a.providerUserInfo):[],h=OC(n.providerData,c),p=n.isAnonymous,g=!(n.email&&a.passwordHash)&&!h?.length,_=p?g:!1,T={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Ef(a.createdAt,a.lastLoginAt),isAnonymous:_};Object.assign(n,T)}async function LC(n){const e=ct(n);await Pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OC(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function L_(n){return n.map(e=>{var{providerId:t}=e,i=Yf(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(n,e){const t=await N_(n,{},async()=>{const i=Sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:a}=n.config,c=await D_(n,o,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:i};return n.emulatorConfig&&qo(n.emulatorConfig.host)&&(p.credentials="include"),b_.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function MC(n,e){return zi(n,"POST","/v2/accounts:revokeToken",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=xy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:a}=await VC(e,t);this.updateTokensAndExpiration(i,o,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:a}=t,c=new Lo;return i&&(we(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(we(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),a&&(we(typeof a=="number","internal-error",{appName:e}),c.expirationTime=a),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Lo,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,a=Yf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new DC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ef(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await dl(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bC(this,e)}reload(){return LC(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Pc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xn(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await dl(this,PC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,a,c,h,p,g,_;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(o=t.email)!==null&&o!==void 0?o:void 0,x=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,R=(c=t.photoURL)!==null&&c!==void 0?c:void 0,O=(h=t.tenantId)!==null&&h!==void 0?h:void 0,V=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,$=(g=t.createdAt)!==null&&g!==void 0?g:void 0,Z=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:W,emailVerified:te,isAnonymous:ae,providerData:se,stsTokenManager:b}=t;we(W&&b,e,"internal-error");const A=Lo.fromJSON(this.name,b);we(typeof W=="string",e,"internal-error"),Ti(T,e.name),Ti(E,e.name),we(typeof te=="boolean",e,"internal-error"),we(typeof ae=="boolean",e,"internal-error"),Ti(x,e.name),Ti(R,e.name),Ti(O,e.name),Ti(V,e.name),Ti($,e.name),Ti(Z,e.name);const C=new Hn({uid:W,auth:e,email:E,emailVerified:te,displayName:T,isAnonymous:ae,photoURL:R,phoneNumber:x,tenantId:O,stsTokenManager:A,createdAt:$,lastLoginAt:Z});return se&&Array.isArray(se)&&(C.providerData=se.map(N=>Object.assign({},N))),V&&(C._redirectEventId=V),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new Lo;o.updateFromServerResponse(t);const a=new Hn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Pc(a),a}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];we(o.localId!==void 0,"internal-error");const a=o.providerUserInfo!==void 0?L_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!a?.length,h=new Lo;h.updateFromIdToken(i);const p=new Hn({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ef(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!a?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=new Map;function Fr(n){qr(n instanceof Function,"Expected a class definition");let e=ky.get(n);return e?(qr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ky.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}O_.type="NONE";const Ry=O_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(n,e,t){return`firebase:${n}:${e}:${t}`}class Oo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:a}=this.auth;this.fullUserKey=mc(this.userKey,o.apiKey,a),this.fullPersistenceKey=mc("persistence",o.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Rc(this.auth,{idToken:e}).catch(()=>{});return t?Hn._fromGetAccountInfoResponse(this.auth,t,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Oo(Fr(Ry),e,i);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let a=o[0]||Fr(Ry);const c=mc(i,e.config.apiKey,e.name);let h=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const E=await Rc(e,{idToken:_}).catch(()=>{});if(!E)break;T=await Hn._fromGetAccountInfoResponse(e,E,_)}else T=Hn._fromJSON(e,_);g!==a&&(h=T),a=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!a._shouldAllowMigration||!p.length?new Oo(a,e,i):(a=p[0],h&&await a._set(c,h.toJSON()),await Promise.all(t.map(async g=>{if(g!==a)try{await g._remove(c)}catch{}})),new Oo(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(V_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(B_(e))return"Blackberry";if(z_(e))return"Webos";if(M_(e))return"Safari";if((e.includes("chrome/")||F_(e))&&!e.includes("edge/"))return"Chrome";if(U_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function V_(n=Gt()){return/firefox\//i.test(n)}function M_(n=Gt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function F_(n=Gt()){return/crios\//i.test(n)}function j_(n=Gt()){return/iemobile/i.test(n)}function U_(n=Gt()){return/android/i.test(n)}function B_(n=Gt()){return/blackberry/i.test(n)}function z_(n=Gt()){return/webos/i.test(n)}function tp(n=Gt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function FC(n=Gt()){var e;return tp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jC(){return ZI()&&document.documentMode===10}function $_(n=Gt()){return tp(n)||U_(n)||z_(n)||B_(n)||/windows phone/i.test(n)||j_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n,e=[]){let t;switch(n){case"Browser":t=Py(Gt());break;case"Worker":t=`${Py(Gt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((c,h)=>{try{const p=e(a);c(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(n,e={}){return zi(n,"GET","/v2/passwordPolicy",Bi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=6;class $C{constructor(e){var t,i,o,a;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:zC,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,a,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(a=p.containsUppercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new by(this),this.idTokenSubscription=new by(this),this.beforeStateQueue=new UC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=R_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(async()=>{var i,o,a;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rc(this,{idToken:e}),i=await Hn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(xn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&p?.user&&(o=p.user,a=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xn(this.app))return Promise.reject(Br(this));const t=e?ct(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xn(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xn(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BC(this),t=new $C(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await MC(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fr(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(h,this,"internal-error"),h.then(()=>{c||a(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&_C(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ps(n){return ct(n)}class by{constructor(e){this.auth=e,this.observer=null,this.addObserver=aS(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HC(n){Xc=n}function H_(n){return Xc.loadJS(n)}function qC(){return Xc.recaptchaEnterpriseScript}function WC(){return Xc.gapiScript}function KC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class QC{constructor(){this.enterprise=new JC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class JC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const YC="recaptcha-enterprise",q_="NO_RECAPTCHA";class XC{constructor(e){this.type=YC,this.auth=Ps(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(c,h)=>{RC(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const g=new kC(p);return a.tenantId==null?a._agentRecaptchaConfig=g:a._tenantRecaptchaConfigs[a.tenantId]=g,c(g.siteKey)}}).catch(p=>{h(p)})})}function o(a,c,h){const p=window.grecaptcha;Ay(p)?p.enterprise.ready(()=>{p.enterprise.execute(a,{action:e}).then(g=>{c(g)}).catch(()=>{c(q_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QC().execute("siteKey",{action:"verify"}):new Promise((a,c)=>{i(this.auth).then(h=>{if(!t&&Ay(window.grecaptcha))o(h,a,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=qC();p.length!==0&&(p+=h),H_(p).then(()=>{o(h,a,c)}).catch(g=>{c(g)})}}).catch(h=>{c(h)})})}}async function Ny(n,e,t,i=!1,o=!1){const a=new XC(n);let c;if(o)c=q_;else try{c=await a.verify(t)}catch{c=await a.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,g=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Tf(n,e,t,i,o){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Ny(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Ny(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(n,e){const t=Jf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),a=t.getOptions();if(Is(a,e??{}))return o;qn(o,"already-initialized")}return t.initialize({options:e})}function eA(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Fr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function tA(n,e,t){const i=Ps(n);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,a=W_(e),{host:c,port:h}=nA(e),p=h===null?"":`:${h}`,g={url:`${a}//${c}${p}/`},_=Object.freeze({host:c,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(Is(g,i.config.emulator)&&Is(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,qo(c)?(w_(`${a}//${c}${p}`),E_("Auth",!0)):rA()}function W_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function nA(n){const e=W_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const a=o[1];return{host:a,port:Dy(i.substr(a.length+1))}}else{const[a,c]=i.split(":");return{host:a,port:Dy(c)}}}function Dy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function rA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,t){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function iA(n,e){return zi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(n,e){return Al(n,"POST","/v1/accounts:signInWithPassword",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(n,e){return Al(n,"POST","/v1/accounts:signInWithEmailLink",Bi(n,e))}async function aA(n,e){return Al(n,"POST","/v1/accounts:signInWithEmailLink",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends np{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new hl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new hl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tf(e,t,"signInWithPassword",sA);case"emailLink":return oA(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tf(e,i,"signUpPassword",iA);case"emailLink":return aA(e,{idToken:t,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(n,e){return Al(n,"POST","/v1/accounts:signInWithIdp",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="http://localhost";class Cs extends np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Cs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,a=Yf(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new Cs(i,o);return c.idToken=a.idToken||void 0,c.accessToken=a.accessToken||void 0,c.secret=a.secret,c.nonce=a.nonce,c.pendingToken=a.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Vo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Vo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Vo(e,t)}buildRequest(){const e={requestUri:lA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cA(n){const e=Ja(Ya(n)).link,t=e?Ja(Ya(e)).deep_link_id:null,i=Ja(Ya(n)).deep_link_id;return(i?Ja(Ya(i)).link:null)||i||t||e||n}class rp{constructor(e){var t,i,o,a,c,h;const p=Ja(Ya(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,T=uA((o=p.mode)!==null&&o!==void 0?o:null);we(g&&_&&T,"argument-error"),this.apiKey=g,this.operation=T,this.code=_,this.continueUrl=(a=p.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=cA(e);try{return new rp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,t){return hl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=rp.parseLink(t);return we(i,"argument-error"),hl._fromEmailAndCode(e,i.code,i.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends K_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends xl{constructor(){super("facebook.com")}static credential(e){return Cs._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Cs._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Si.credential(t,i)}catch{return null}}}Si.GOOGLE_SIGN_IN_METHOD="google.com";Si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends xl{constructor(){super("github.com")}static credential(e){return Cs._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends xl{constructor(){super("twitter.com")}static credential(e,t){return Cs._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ai.credential(t,i)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(n,e){return Al(n,"POST","/v1/accounts:signUp",Bi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const a=await Hn._fromIdTokenResponse(e,i,o),c=Ly(i);return new As({user:a,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ly(i);return new As({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ly(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc extends Jr{constructor(e,t,i,o){var a;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,bc.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new bc(e,t,i,o)}}function Q_(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?bc._fromErrorAndOperation(n,a,e,i):a})}async function hA(n,e,t=!1){const i=await dl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return As._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(n,e,t=!1){const{auth:i}=n;if(xn(i.app))return Promise.reject(Br(i));const o="reauthenticate";try{const a=await dl(n,Q_(i,o,e,n),t);we(a.idToken,i,"internal-error");const c=ep(a.idToken);we(c,i,"internal-error");const{sub:h}=c;return we(n.uid===h,i,"user-mismatch"),As._forOperation(n,o,a)}catch(a){throw a?.code==="auth/user-not-found"&&qn(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J_(n,e,t=!1){if(xn(n.app))return Promise.reject(Br(n));const i="signIn",o=await Q_(n,i,e),a=await As._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(a.user),a}async function pA(n,e){return J_(Ps(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y_(n){const e=Ps(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mA(n,e,t){if(xn(n.app))return Promise.reject(Br(n));const i=Ps(n),c=await Tf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Y_(n),p}),h=await As._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function gA(n,e,t){return xn(n.app)?Promise.reject(Br(n)):pA(ct(n),Ko.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Y_(n),i})}function yA(n,e,t,i){return ct(n).onIdTokenChanged(e,t,i)}function vA(n,e,t){return ct(n).beforeAuthStateChanged(e,t)}function X_(n,e,t,i){return ct(n).onAuthStateChanged(e,t,i)}function Z_(n){return ct(n).signOut()}const Nc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Nc,"1"),this.storage.removeItem(Nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=1e3,wA=10;class t0 extends e0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},a=this.storage.getItem(i);jC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_A)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}t0.type="LOCAL";const EA=t0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends e0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}n0.type="SESSION";const r0=n0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Zc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:a}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(c).map(async g=>g(t.origin,a)),p=await TA(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let a,c;return new Promise((h,p)=>{const g=ip("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(T){const E=T;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(_),clearTimeout(a),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function SA(n){ar().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function CA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AA(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function xA(){return i0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="firebaseLocalStorageDb",kA=1,Dc="firebaseLocalStorage",o0="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ed(n,e){return n.transaction([Dc],e?"readwrite":"readonly").objectStore(Dc)}function RA(){const n=indexedDB.deleteDatabase(s0);return new kl(n).toPromise()}function If(){const n=indexedDB.open(s0,kA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Dc,{keyPath:o0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Dc)?e(i):(i.close(),await RA(),e(await If()))})})}async function Oy(n,e,t){const i=ed(n,!0).put({[o0]:e,value:t});return new kl(i).toPromise()}async function PA(n,e){const t=ed(n,!1).get(e),i=await new kl(t).toPromise();return i===void 0?null:i.value}function Vy(n,e){const t=ed(n,!0).delete(e);return new kl(t).toPromise()}const bA=800,NA=3;class a0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await If(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>NA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zc._getInstance(xA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await CA(),!this.activeServiceWorker)return;this.sender=new IA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await If();return await Oy(e,Nc,"1"),await Vy(e,Nc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Oy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>PA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Vy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const a=ed(o,!1).getAll();return new kl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:a}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(a)&&(this.notifyListeners(o,a),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}a0.type="LOCAL";const DA=a0;new Cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(n,e){return e?Fr(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp extends np{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OA(n){return J_(n.auth,new sp(n),n.bypassAuthState)}function VA(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),fA(t,new sp(n),n.bypassAuthState)}async function MA(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),hA(t,new sp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,t,i,o,a=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:a,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OA;case"linkViaPopup":case"linkViaRedirect":return MA;case"reauthViaPopup":case"reauthViaRedirect":return VA;default:qn(this.auth,"internal-error")}}resolve(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=new Cl(2e3,1e4);class No extends l0{constructor(e,t,i,o,a){super(e,t,o,a),this.provider=i,this.authWindow=null,this.pollId=null,No.currentPopupAction&&No.currentPopupAction.cancel(),No.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){qr(this.filter.length===1,"Popup operations only handle one event");const e=ip();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(or(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(or(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,No.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(or(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,FA.get())};e()}}No.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="pendingRedirect",gc=new Map;class UA extends l0{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{const i=await BA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BA(n,e){const t=GA(e),i=$A(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function zA(n,e){gc.set(n._key(),e)}function $A(n){return Fr(n._redirectPersistence)}function GA(n){return mc(jA,n.config.apiKey,n.name)}async function HA(n,e,t=!1){if(xn(n.app))return Promise.reject(Br(n));const i=Ps(n),o=LA(i,e),c=await new UA(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=10*60*1e3;class WA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!u0(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(or(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=qA&&this.cachedEventUids.clear(),this.cachedEventUids.has(My(e))}saveEventToCache(e){this.cachedEventUids.add(My(e)),this.lastProcessedEventTime=Date.now()}}function My(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function u0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function KA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return u0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QA(n,e={}){return zi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YA=/^https?/;async function XA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await QA(n);for(const t of e)try{if(ZA(t))return}catch{}qn(n,"unauthorized-domain")}function ZA(n){const e=wf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!YA.test(t))return!1;if(JA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Cl(3e4,6e4);function Fy(){const n=ar().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function t1(n){return new Promise((e,t)=>{var i,o,a;function c(){Fy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fy(),t(or(n,"network-request-failed"))},timeout:e1.get()})}if(!((o=(i=ar().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((a=ar().gapi)===null||a===void 0)&&a.load)c();else{const h=KC("iframefcb");return ar()[h]=()=>{gapi.load?c():t(or(n,"network-request-failed"))},H_(`${WC()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw yc=null,e})}let yc=null;function n1(n){return yc=yc||t1(n),yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Cl(5e3,15e3),i1="__/auth/iframe",s1="emulator/auth/iframe",o1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l1(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Zf(e,s1):`https://${n.config.authDomain}/${i1}`,i={apiKey:e.apiKey,appName:n.name,v:Wo},o=a1.get(n.config.apiHost);o&&(i.eid=o);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Sl(i).slice(1)}`}async function u1(n){const e=await n1(n),t=ar().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:l1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o1,dontclear:!0},i=>new Promise(async(o,a)=>{await i.restyle({setHideOnLeave:!1});const c=or(n,"network-request-failed"),h=ar().setTimeout(()=>{a(c)},r1.get());function p(){ar().clearTimeout(h),o(i)}i.ping(p).then(p,()=>{a(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},d1=500,h1=600,f1="_blank",p1="http://localhost";class jy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m1(n,e,t,i=d1,o=h1){const a=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},c1),{width:i.toString(),height:o.toString(),top:a,left:c}),g=Gt().toLowerCase();t&&(h=F_(g)?f1:t),V_(g)&&(e=e||p1,p.scrollbars="yes");const _=Object.entries(p).reduce((E,[x,R])=>`${E}${x}=${R},`,"");if(FC(g)&&h!=="_self")return g1(e||"",h),new jy(null);const T=window.open(e||"",h,_);we(T,n,"popup-blocked");try{T.focus()}catch{}return new jy(T)}function g1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="__/auth/handler",v1="emulator/auth/handler",_1=encodeURIComponent("fac");async function Uy(n,e,t,i,o,a){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Wo,eventId:o};if(e instanceof K_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",oS(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof xl){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const p=await n._getAppCheckToken(),g=p?`#${_1}=${encodeURIComponent(p)}`:"";return`${w1(n)}?${Sl(h).slice(1)}${g}`}function w1({config:n}){return n.emulator?Zf(n,v1):`https://${n.authDomain}/${y1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of="webStorageSupport";class E1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r0,this._completeRedirectFn=HA,this._overrideRedirectResult=zA}async _openPopup(e,t,i,o){var a;qr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const c=await Uy(e,t,i,wf(),o);return m1(e,c,ip())}async _openRedirect(e,t,i,o){await this._originValidation(e);const a=await Uy(e,t,i,wf(),o);return SA(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:a}=this.eventManagers[t];return o?Promise.resolve(o):(qr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await u1(e),i=new WA(e);return t.register("authEvent",o=>(we(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(of,{type:of},o=>{var a;const c=(a=o?.[0])===null||a===void 0?void 0:a[of];c!==void 0&&t(!!c),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $_()||M_()||tp()}}const T1=E1;var By="@firebase/auth",zy="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function C1(n){Fo(new Ss("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;we(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G_(n)},g=new GC(i,o,a,p);return eA(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Fo(new Ss("auth-internal",e=>{const t=Ps(e.getProvider("auth").getImmediate());return(i=>new I1(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),bi(By,zy,S1(n)),bi(By,zy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1=5*60,x1=__("authIdTokenMaxAge")||A1;let $y=null;const k1=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>x1)return;const o=t?.token;$y!==o&&($y=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function R1(n=C_()){const e=Jf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ZC(n,{popupRedirectResolver:T1,persistence:[DA,EA,r0]}),i=__("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const c=k1(a.toString());vA(t,c,()=>c(t.currentUser)),yA(t,h=>c(h))}}const o=y_("auth");return o&&tA(t,`http://${o}`),t}function P1(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}HC({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const a=or("internal-error");a.customData=o,t(a)},i.type="text/javascript",i.charset="UTF-8",P1().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});C1("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function b1(n,e,t,i){function o(a){return a instanceof t?a:new t(function(c){c(a)})}return new(t||(t=Promise))(function(a,c){function h(_){try{g(i.next(_))}catch(T){c(T)}}function p(_){try{g(i.throw(_))}catch(T){c(T)}}function g(_){_.done?a(_.value):o(_.value).then(h,p)}g((i=i.apply(n,[])).next())})}function N1(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(g){return function(_){return p([g,_])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=g[0]&2?o.return:g[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,g[1])).done)return a;switch(o=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,o=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){t.label=g[1];break}if(g[0]===6&&t.label<a[1]){t.label=a[1],a=g;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(g);break}a[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(n,t)}catch(_){g=[6,_],o=0}finally{i=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Do=function(){return Do=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Do.apply(this,arguments)},c0=function(n){return{loading:n==null,value:n}},D1=function(){return function(n,e){switch(e.type){case"error":return Do(Do({},n),{error:e.error,loading:!1,value:void 0});case"reset":return c0(e.defaultValue);case"value":return Do(Do({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},L1=function(n){var e=n?n():void 0,t=F.useReducer(D1(),c0(e)),i=t[0],o=t[1],a=F.useCallback(function(){var p=n?n():void 0;o({type:"reset",defaultValue:p})},[n]),c=F.useCallback(function(p){o({type:"error",error:p})},[]),h=F.useCallback(function(p){o({type:"value",value:p})},[]);return F.useMemo(function(){return{error:i.error,loading:i.loading,reset:a,setError:c,setValue:h,value:i.value}},[i.error,i.loading,a,c,h,i.value])},Rl=function(n,e){var t=L1(function(){return n.currentUser}),i=t.error,o=t.loading,a=t.setError,c=t.setValue,h=t.value;return F.useEffect(function(){var p=X_(n,function(g){return b1(void 0,void 0,void 0,function(){var _;return N1(this,function(T){switch(T.label){case 0:return[3,4];case 1:return T.trys.push([1,3,,4]),[4,e.onUserChanged(g)];case 2:return T.sent(),[3,4];case 3:return _=T.sent(),a(_),[3,4];case 4:return c(g),[2]}})})},a);return function(){p()}},[n]),[h,o,i]},O1="firebase",V1="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bi(O1,V1,"app");var Gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ni,d0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function C(){}C.prototype=A.prototype,b.D=A.prototype,b.prototype=new C,b.prototype.constructor=b,b.C=function(N,L,j){for(var P=Array(arguments.length-2),st=2;st<arguments.length;st++)P[st-2]=arguments[st];return A.prototype[L].apply(N,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,A,C){C||(C=0);var N=Array(16);if(typeof A=="string")for(var L=0;16>L;++L)N[L]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(L=0;16>L;++L)N[L]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=b.g[0],C=b.g[1],L=b.g[2];var j=b.g[3],P=A+(j^C&(L^j))+N[0]+3614090360&4294967295;A=C+(P<<7&4294967295|P>>>25),P=j+(L^A&(C^L))+N[1]+3905402710&4294967295,j=A+(P<<12&4294967295|P>>>20),P=L+(C^j&(A^C))+N[2]+606105819&4294967295,L=j+(P<<17&4294967295|P>>>15),P=C+(A^L&(j^A))+N[3]+3250441966&4294967295,C=L+(P<<22&4294967295|P>>>10),P=A+(j^C&(L^j))+N[4]+4118548399&4294967295,A=C+(P<<7&4294967295|P>>>25),P=j+(L^A&(C^L))+N[5]+1200080426&4294967295,j=A+(P<<12&4294967295|P>>>20),P=L+(C^j&(A^C))+N[6]+2821735955&4294967295,L=j+(P<<17&4294967295|P>>>15),P=C+(A^L&(j^A))+N[7]+4249261313&4294967295,C=L+(P<<22&4294967295|P>>>10),P=A+(j^C&(L^j))+N[8]+1770035416&4294967295,A=C+(P<<7&4294967295|P>>>25),P=j+(L^A&(C^L))+N[9]+2336552879&4294967295,j=A+(P<<12&4294967295|P>>>20),P=L+(C^j&(A^C))+N[10]+4294925233&4294967295,L=j+(P<<17&4294967295|P>>>15),P=C+(A^L&(j^A))+N[11]+2304563134&4294967295,C=L+(P<<22&4294967295|P>>>10),P=A+(j^C&(L^j))+N[12]+1804603682&4294967295,A=C+(P<<7&4294967295|P>>>25),P=j+(L^A&(C^L))+N[13]+4254626195&4294967295,j=A+(P<<12&4294967295|P>>>20),P=L+(C^j&(A^C))+N[14]+2792965006&4294967295,L=j+(P<<17&4294967295|P>>>15),P=C+(A^L&(j^A))+N[15]+1236535329&4294967295,C=L+(P<<22&4294967295|P>>>10),P=A+(L^j&(C^L))+N[1]+4129170786&4294967295,A=C+(P<<5&4294967295|P>>>27),P=j+(C^L&(A^C))+N[6]+3225465664&4294967295,j=A+(P<<9&4294967295|P>>>23),P=L+(A^C&(j^A))+N[11]+643717713&4294967295,L=j+(P<<14&4294967295|P>>>18),P=C+(j^A&(L^j))+N[0]+3921069994&4294967295,C=L+(P<<20&4294967295|P>>>12),P=A+(L^j&(C^L))+N[5]+3593408605&4294967295,A=C+(P<<5&4294967295|P>>>27),P=j+(C^L&(A^C))+N[10]+38016083&4294967295,j=A+(P<<9&4294967295|P>>>23),P=L+(A^C&(j^A))+N[15]+3634488961&4294967295,L=j+(P<<14&4294967295|P>>>18),P=C+(j^A&(L^j))+N[4]+3889429448&4294967295,C=L+(P<<20&4294967295|P>>>12),P=A+(L^j&(C^L))+N[9]+568446438&4294967295,A=C+(P<<5&4294967295|P>>>27),P=j+(C^L&(A^C))+N[14]+3275163606&4294967295,j=A+(P<<9&4294967295|P>>>23),P=L+(A^C&(j^A))+N[3]+4107603335&4294967295,L=j+(P<<14&4294967295|P>>>18),P=C+(j^A&(L^j))+N[8]+1163531501&4294967295,C=L+(P<<20&4294967295|P>>>12),P=A+(L^j&(C^L))+N[13]+2850285829&4294967295,A=C+(P<<5&4294967295|P>>>27),P=j+(C^L&(A^C))+N[2]+4243563512&4294967295,j=A+(P<<9&4294967295|P>>>23),P=L+(A^C&(j^A))+N[7]+1735328473&4294967295,L=j+(P<<14&4294967295|P>>>18),P=C+(j^A&(L^j))+N[12]+2368359562&4294967295,C=L+(P<<20&4294967295|P>>>12),P=A+(C^L^j)+N[5]+4294588738&4294967295,A=C+(P<<4&4294967295|P>>>28),P=j+(A^C^L)+N[8]+2272392833&4294967295,j=A+(P<<11&4294967295|P>>>21),P=L+(j^A^C)+N[11]+1839030562&4294967295,L=j+(P<<16&4294967295|P>>>16),P=C+(L^j^A)+N[14]+4259657740&4294967295,C=L+(P<<23&4294967295|P>>>9),P=A+(C^L^j)+N[1]+2763975236&4294967295,A=C+(P<<4&4294967295|P>>>28),P=j+(A^C^L)+N[4]+1272893353&4294967295,j=A+(P<<11&4294967295|P>>>21),P=L+(j^A^C)+N[7]+4139469664&4294967295,L=j+(P<<16&4294967295|P>>>16),P=C+(L^j^A)+N[10]+3200236656&4294967295,C=L+(P<<23&4294967295|P>>>9),P=A+(C^L^j)+N[13]+681279174&4294967295,A=C+(P<<4&4294967295|P>>>28),P=j+(A^C^L)+N[0]+3936430074&4294967295,j=A+(P<<11&4294967295|P>>>21),P=L+(j^A^C)+N[3]+3572445317&4294967295,L=j+(P<<16&4294967295|P>>>16),P=C+(L^j^A)+N[6]+76029189&4294967295,C=L+(P<<23&4294967295|P>>>9),P=A+(C^L^j)+N[9]+3654602809&4294967295,A=C+(P<<4&4294967295|P>>>28),P=j+(A^C^L)+N[12]+3873151461&4294967295,j=A+(P<<11&4294967295|P>>>21),P=L+(j^A^C)+N[15]+530742520&4294967295,L=j+(P<<16&4294967295|P>>>16),P=C+(L^j^A)+N[2]+3299628645&4294967295,C=L+(P<<23&4294967295|P>>>9),P=A+(L^(C|~j))+N[0]+4096336452&4294967295,A=C+(P<<6&4294967295|P>>>26),P=j+(C^(A|~L))+N[7]+1126891415&4294967295,j=A+(P<<10&4294967295|P>>>22),P=L+(A^(j|~C))+N[14]+2878612391&4294967295,L=j+(P<<15&4294967295|P>>>17),P=C+(j^(L|~A))+N[5]+4237533241&4294967295,C=L+(P<<21&4294967295|P>>>11),P=A+(L^(C|~j))+N[12]+1700485571&4294967295,A=C+(P<<6&4294967295|P>>>26),P=j+(C^(A|~L))+N[3]+2399980690&4294967295,j=A+(P<<10&4294967295|P>>>22),P=L+(A^(j|~C))+N[10]+4293915773&4294967295,L=j+(P<<15&4294967295|P>>>17),P=C+(j^(L|~A))+N[1]+2240044497&4294967295,C=L+(P<<21&4294967295|P>>>11),P=A+(L^(C|~j))+N[8]+1873313359&4294967295,A=C+(P<<6&4294967295|P>>>26),P=j+(C^(A|~L))+N[15]+4264355552&4294967295,j=A+(P<<10&4294967295|P>>>22),P=L+(A^(j|~C))+N[6]+2734768916&4294967295,L=j+(P<<15&4294967295|P>>>17),P=C+(j^(L|~A))+N[13]+1309151649&4294967295,C=L+(P<<21&4294967295|P>>>11),P=A+(L^(C|~j))+N[4]+4149444226&4294967295,A=C+(P<<6&4294967295|P>>>26),P=j+(C^(A|~L))+N[11]+3174756917&4294967295,j=A+(P<<10&4294967295|P>>>22),P=L+(A^(j|~C))+N[2]+718787259&4294967295,L=j+(P<<15&4294967295|P>>>17),P=C+(j^(L|~A))+N[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,b.g[2]=b.g[2]+L&4294967295,b.g[3]=b.g[3]+j&4294967295}i.prototype.u=function(b,A){A===void 0&&(A=b.length);for(var C=A-this.blockSize,N=this.B,L=this.h,j=0;j<A;){if(L==0)for(;j<=C;)o(this,b,j),j+=this.blockSize;if(typeof b=="string"){for(;j<A;)if(N[L++]=b.charCodeAt(j++),L==this.blockSize){o(this,N),L=0;break}}else for(;j<A;)if(N[L++]=b[j++],L==this.blockSize){o(this,N),L=0;break}}this.h=L,this.o+=A},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;var C=8*this.o;for(A=b.length-8;A<b.length;++A)b[A]=C&255,C/=256;for(this.u(b),b=Array(16),A=C=0;4>A;++A)for(var N=0;32>N;N+=8)b[C++]=this.g[A]>>>N&255;return b};function a(b,A){var C=h;return Object.prototype.hasOwnProperty.call(C,b)?C[b]:C[b]=A(b)}function c(b,A){this.h=A;for(var C=[],N=!0,L=b.length-1;0<=L;L--){var j=b[L]|0;N&&j==A||(C[L]=j,N=!1)}this.g=C}var h={};function p(b){return-128<=b&&128>b?a(b,function(A){return new c([A|0],0>A?-1:0)}):new c([b|0],0>b?-1:0)}function g(b){if(isNaN(b)||!isFinite(b))return T;if(0>b)return V(g(-b));for(var A=[],C=1,N=0;b>=C;N++)A[N]=b/C|0,C*=4294967296;return new c(A,0)}function _(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return V(_(b.substring(1),A));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=g(Math.pow(A,8)),N=T,L=0;L<b.length;L+=8){var j=Math.min(8,b.length-L),P=parseInt(b.substring(L,L+j),A);8>j?(j=g(Math.pow(A,j)),N=N.j(j).add(g(P))):(N=N.j(C),N=N.add(g(P)))}return N}var T=p(0),E=p(1),x=p(16777216);n=c.prototype,n.m=function(){if(O(this))return-V(this).m();for(var b=0,A=1,C=0;C<this.g.length;C++){var N=this.i(C);b+=(0<=N?N:4294967296+N)*A,A*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(R(this))return"0";if(O(this))return"-"+V(this).toString(b);for(var A=g(Math.pow(b,6)),C=this,N="";;){var L=te(C,A).g;C=$(C,L.j(A));var j=((0<C.g.length?C.g[0]:C.h)>>>0).toString(b);if(C=L,R(C))return j+N;for(;6>j.length;)j="0"+j;N=j+N}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function R(b){if(b.h!=0)return!1;for(var A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function O(b){return b.h==-1}n.l=function(b){return b=$(this,b),O(b)?-1:R(b)?0:1};function V(b){for(var A=b.g.length,C=[],N=0;N<A;N++)C[N]=~b.g[N];return new c(C,~b.h).add(E)}n.abs=function(){return O(this)?V(this):this},n.add=function(b){for(var A=Math.max(this.g.length,b.g.length),C=[],N=0,L=0;L<=A;L++){var j=N+(this.i(L)&65535)+(b.i(L)&65535),P=(j>>>16)+(this.i(L)>>>16)+(b.i(L)>>>16);N=P>>>16,j&=65535,P&=65535,C[L]=P<<16|j}return new c(C,C[C.length-1]&-2147483648?-1:0)};function $(b,A){return b.add(V(A))}n.j=function(b){if(R(this)||R(b))return T;if(O(this))return O(b)?V(this).j(V(b)):V(V(this).j(b));if(O(b))return V(this.j(V(b)));if(0>this.l(x)&&0>b.l(x))return g(this.m()*b.m());for(var A=this.g.length+b.g.length,C=[],N=0;N<2*A;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(var L=0;L<b.g.length;L++){var j=this.i(N)>>>16,P=this.i(N)&65535,st=b.i(L)>>>16,Ot=b.i(L)&65535;C[2*N+2*L]+=P*Ot,Z(C,2*N+2*L),C[2*N+2*L+1]+=j*Ot,Z(C,2*N+2*L+1),C[2*N+2*L+1]+=P*st,Z(C,2*N+2*L+1),C[2*N+2*L+2]+=j*st,Z(C,2*N+2*L+2)}for(N=0;N<A;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=A;N<2*A;N++)C[N]=0;return new c(C,0)};function Z(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function W(b,A){this.g=b,this.h=A}function te(b,A){if(R(A))throw Error("division by zero");if(R(b))return new W(T,T);if(O(b))return A=te(V(b),A),new W(V(A.g),V(A.h));if(O(A))return A=te(b,V(A)),new W(V(A.g),A.h);if(30<b.g.length){if(O(b)||O(A))throw Error("slowDivide_ only works with positive integers.");for(var C=E,N=A;0>=N.l(b);)C=ae(C),N=ae(N);var L=se(C,1),j=se(N,1);for(N=se(N,2),C=se(C,2);!R(N);){var P=j.add(N);0>=P.l(b)&&(L=L.add(C),j=P),N=se(N,1),C=se(C,1)}return A=$(b,L.j(A)),new W(L,A)}for(L=T;0<=b.l(A);){for(C=Math.max(1,Math.floor(b.m()/A.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),j=g(C),P=j.j(A);O(P)||0<P.l(b);)C-=N,j=g(C),P=j.j(A);R(j)&&(j=E),L=L.add(j),b=$(b,P)}return new W(L,b)}n.A=function(b){return te(this,b).h},n.and=function(b){for(var A=Math.max(this.g.length,b.g.length),C=[],N=0;N<A;N++)C[N]=this.i(N)&b.i(N);return new c(C,this.h&b.h)},n.or=function(b){for(var A=Math.max(this.g.length,b.g.length),C=[],N=0;N<A;N++)C[N]=this.i(N)|b.i(N);return new c(C,this.h|b.h)},n.xor=function(b){for(var A=Math.max(this.g.length,b.g.length),C=[],N=0;N<A;N++)C[N]=this.i(N)^b.i(N);return new c(C,this.h^b.h)};function ae(b){for(var A=b.g.length+1,C=[],N=0;N<A;N++)C[N]=b.i(N)<<1|b.i(N-1)>>>31;return new c(C,b.h)}function se(b,A){var C=A>>5;A%=32;for(var N=b.g.length-C,L=[],j=0;j<N;j++)L[j]=0<A?b.i(j+C)>>>A|b.i(j+C+1)<<32-A:b.i(j+C);return new c(L,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,d0=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Ni=c}).apply(typeof Gy<"u"?Gy:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var h0,Xa,f0,vc,Sf,p0,m0,g0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var B=u[I];if(!(B in v))break e;v=v[B]}u=u[u.length-1],I=v[u],m=m(I),m!=I&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function a(u,m){u instanceof String&&(u+="");var v=0,I=!1,B={next:function(){if(!I&&v<u.length){var q=v++;return{value:m(q,u[q]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return a(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function g(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function T(u,m,v){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),u.apply(m,B)}}return function(){return u.apply(m,arguments)}}function E(u,m,v){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,E.apply(null,arguments)}function x(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function R(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(I,B,q){for(var re=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)re[Be-2]=arguments[Be];return m.prototype[B].apply(I,re)}}function O(u){const m=u.length;if(0<m){const v=Array(m);for(let I=0;I<m;I++)v[I]=u[I];return v}return[]}function V(u,m){for(let v=1;v<arguments.length;v++){const I=arguments[v];if(p(I)){const B=u.length||0,q=I.length||0;u.length=B+q;for(let re=0;re<q;re++)u[B+re]=I[re]}else u.push(I)}}class ${constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(u){return/^[\s\xa0]*$/.test(u)}function W(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var ae=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function se(u,m,v){for(const I in u)m.call(v,u[I],I,u)}function b(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function A(u){const m={};for(const v in u)m[v]=u[v];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let v,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(v in I)u[v]=I[v];for(let q=0;q<C.length;q++)v=C[q],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function L(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function j(u){h.setTimeout(()=>{throw u},0)}function P(){var u=ye;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class st{constructor(){this.h=this.g=null}add(m,v){const I=Ot.get();I.set(m,v),this.h?this.h.next=I:this.g=I,this.h=I}}var Ot=new $(()=>new Vt,u=>u.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,ie=!1,ye=new st,ce=()=>{const u=h.Promise.resolve(void 0);ze=()=>{u.then(U)}};var U=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(v){j(v)}var m=Ot;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ie=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};h.addEventListener("test",v,m),h.removeEventListener("test",v,m)}catch{}return u}();function xe(u,m){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(ae){e:{try{te(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ne[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}R(xe,me);var Ne={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Ge(u,m,v,I,B){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!I,this.ha=B,this.key=++Fe,this.da=this.fa=!1}function Tt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vr(u){this.src=u,this.g={},this.h=0}vr.prototype.add=function(u,m,v,I,B){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var re=Yr(u,m,I,B);return-1<re?(m=u[re],v||(m.fa=!1)):(m=new Ge(m,this.src,q,!!I,B),m.fa=v,u.push(m)),m};function Os(u,m){var v=m.type;if(v in u.g){var I=u.g[v],B=Array.prototype.indexOf.call(I,m,void 0),q;(q=0<=B)&&Array.prototype.splice.call(I,B,1),q&&(Tt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Yr(u,m,v,I){for(var B=0;B<u.length;++B){var q=u[B];if(!q.da&&q.listener==m&&q.capture==!!v&&q.ha==I)return B}return-1}var Hi="closure_lm_"+(1e6*Math.random()|0),Vs={};function Zo(u,m,v,I,B){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Zo(u,m[q],v,I,B);return null}return v=na(v),u&&u[Me]?u.K(m,v,g(I)?!!I.capture:!1,B):ea(u,m,v,!1,I,B)}function ea(u,m,v,I,B,q){if(!m)throw Error("Invalid event type");var re=g(B)?!!B.capture:!!B,Be=Fs(u);if(Be||(u[Hi]=Be=new vr(u)),v=Be.add(m,v,I,re,q),v.proxy)return v;if(I=$l(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)Ce||(B=re),B===void 0&&(B=!1),u.addEventListener(m.toString(),I,B);else if(u.attachEvent)u.attachEvent(wr(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function $l(){function u(v){return m.call(u.src,u.listener,v)}const m=ta;return u}function Ms(u,m,v,I,B){if(Array.isArray(m))for(var q=0;q<m.length;q++)Ms(u,m[q],v,I,B);else I=g(I)?!!I.capture:!!I,v=na(v),u&&u[Me]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],v=Yr(q,v,I,B),-1<v&&(Tt(q[v]),Array.prototype.splice.call(q,v,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=Fs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Yr(m,v,I,B)),(v=-1<u?m[u]:null)&&_r(v))}function _r(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Me])Os(m.i,u);else{var v=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(v,I,u.capture):m.detachEvent?m.detachEvent(wr(v),I):m.addListener&&m.removeListener&&m.removeListener(I),(v=Fs(m))?(Os(v,u),v.h==0&&(v.src=null,m[Hi]=null)):Tt(u)}}}function wr(u){return u in Vs?Vs[u]:Vs[u]="on"+u}function ta(u,m){if(u.da)u=!0;else{m=new xe(m,this);var v=u.listener,I=u.ha||u.src;u.fa&&_r(u),u=v.call(I,m)}return u}function Fs(u){return u=u[Hi],u instanceof vr?u:null}var js="__closure_events_fn_"+(1e9*Math.random()>>>0);function na(u){return typeof u=="function"?u:(u[js]||(u[js]=function(m){return u.handleEvent(m)}),u[js])}function gt(){J.call(this),this.i=new vr(this),this.M=this,this.F=null}R(gt,J),gt.prototype[Me]=!0,gt.prototype.removeEventListener=function(u,m,v,I){Ms(this,u,m,v,I)};function yt(u,m){var v,I=u.F;if(I)for(v=[];I;I=I.F)v.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new me(m,u);else if(m instanceof me)m.target=m.target||u;else{var B=m;m=new me(I,u),N(m,B)}if(B=!0,v)for(var q=v.length-1;0<=q;q--){var re=m.g=v[q];B=Er(re,I,!0,m)&&B}if(re=m.g=u,B=Er(re,I,!0,m)&&B,B=Er(re,I,!1,m)&&B,v)for(q=0;q<v.length;q++)re=m.g=v[q],B=Er(re,I,!1,m)&&B}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],I=0;I<v.length;I++)Tt(v[I]);delete u.g[m],u.h--}}this.F=null},gt.prototype.K=function(u,m,v,I){return this.i.add(String(u),m,!1,v,I)},gt.prototype.L=function(u,m,v,I){return this.i.add(String(u),m,!0,v,I)};function Er(u,m,v,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,q=0;q<m.length;++q){var re=m[q];if(re&&!re.da&&re.capture==v){var Be=re.listener,vt=re.ha||re.src;re.fa&&Os(u.i,re),B=Be.call(vt,I)!==!1&&B}}return B&&!I.defaultPrevented}function ra(u,m,v){if(typeof u=="function")v&&(u=E(u,v));else if(u&&typeof u.handleEvent=="function")u=E(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function Xr(u){u.g=ra(()=>{u.g=null,u.i&&(u.i=!1,Xr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class qi extends J{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Xr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(u){J.call(this),this.h=u,this.g={}}R(Wi,J);var ia=[];function sa(u){se(u.g,function(m,v){this.g.hasOwnProperty(v)&&_r(m)},u),u.g={}}Wi.prototype.N=function(){Wi.aa.N.call(this),sa(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oa=h.JSON.stringify,aa=h.JSON.parse,la=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function Ki(){}Ki.prototype.h=null;function Us(u){return u.h||(u.h=u.i())}function Bs(){}var yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){me.call(this,"d")}R(Kn,me);function zs(){me.call(this,"c")}R(zs,me);var Qn={},ua=null;function Qi(){return ua=ua||new gt}Qn.La="serverreachability";function ca(u){me.call(this,Qn.La,u)}R(ca,me);function Tr(u){const m=Qi();yt(m,new ca(m))}Qn.STAT_EVENT="statevent";function da(u,m){me.call(this,Qn.STAT_EVENT,u),this.stat=m}R(da,me);function ot(u){const m=Qi();yt(m,new da(m,u))}Qn.Ma="timingevent";function $s(u,m){me.call(this,Qn.Ma,u),this.size=m}R($s,me);function Pn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function Ji(){this.g=!0}Ji.prototype.xa=function(){this.g=!1};function Yi(u,m,v,I,B,q){u.info(function(){if(u.g)if(q)for(var re="",Be=q.split("&"),vt=0;vt<Be.length;vt++){var De=Be[vt].split("=");if(1<De.length){var It=De[0];De=De[1];var dt=It.split("_");re=2<=dt.length&&dt[1]=="type"?re+(It+"="+De+"&"):re+(It+"=redacted&")}}else re=null;else re=q;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+m+`
`+v+`
`+re})}function Gs(u,m,v,I,B,q,re){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+m+`
`+v+`
`+q+" "+re})}function bn(u,m,v,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+wd(u,v)+(I?" "+I:"")})}function ha(u,m){u.info(function(){return"TIMEOUT: "+m})}Ji.prototype.info=function(){};function wd(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var I=v[u];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var q=B[0];if(q!="noop"&&q!="stop"&&q!="close")for(var re=1;re<B.length;re++)B[re]=""}}}}return oa(v)}catch{return m}}var Hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function Xi(){}R(Xi,Ki),Xi.prototype.g=function(){return new XMLHttpRequest},Xi.prototype.i=function(){return{}},Nn=new Xi;function Dn(u,m,v,I){this.j=u,this.i=m,this.l=v,this.R=I||1,this.U=new Wi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hl}function Hl(){this.i=null,this.g="",this.h=!1}var fa={},qs={};function Ws(u,m,v){u.L=1,u.v=ri(un(m)),u.m=v,u.P=!0,pa(u,null)}function pa(u,m){u.F=Date.now(),He(u),u.A=un(u.v);var v=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),si(v.i,"t",I),u.C=0,v=u.j.J,u.h=new Hl,u.g=uu(u.j,v?m:null,!u.m),0<u.O&&(u.M=new qi(E(u.Y,u,u.g),u.O)),m=u.U,v=u.g,I=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(ia[0]=B.toString()),B=ia);for(var q=0;q<B.length;q++){var re=Zo(v,B[q],I||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=u.H?A(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Tr(),Yi(u.i,u.u,u.A,u.l,u.R,u.m)}Dn.prototype.ca=function(u){u=u.target;const m=this.M;m&&Xt(u)==3?m.j():this.Y(u)},Dn.prototype.Y=function(u){try{if(u==this.g)e:{const dt=Xt(this.g);var m=this.g.Ba();const wn=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||wa(this.g)))){this.J||dt!=4||m==7||(m==8||0>=wn?Tr(3):Tr(2)),Zi(this);var v=this.g.Z();this.X=v;t:if(ql(this)){var I=wa(this.g);u="";var B=I.length,q=Xt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Zr(this);var re="";break t}this.h.i=new h.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(q&&m==B-1)});I.length=0,this.h.g+=u,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=v==200,Gs(this.i,this.u,this.A,this.l,this.R,dt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,vt=this.g;if((Be=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Be)){var De=Be;break t}}De=null}if(v=De)bn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ma(this,v);else{this.o=!1,this.s=3,ot(12),vn(this),Zr(this);break e}}if(this.P){v=!0;let dn;for(;!this.J&&this.C<re.length;)if(dn=Ed(this,re),dn==qs){dt==4&&(this.s=4,ot(14),v=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==fa){this.s=4,ot(15),bn(this.i,this.l,re,"[Invalid Chunk]"),v=!1;break}else bn(this.i,this.l,dn,null),ma(this,dn);if(ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||re.length!=0||this.h.h||(this.s=1,ot(16),v=!1),this.o=this.o&&v,!v)bn(this.i,this.l,re,"[Invalid Chunked Response]"),vn(this),Zr(this);else if(0<re.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),Ta(It),It.M=!0,ot(11))}}else bn(this.i,this.l,re,null),ma(this,re);dt==4&&vn(this),this.o&&!this.J&&(dt==4?io(this.j,this):(this.o=!1,He(this)))}else Zs(this.g),v==400&&0<re.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),vn(this),Zr(this)}}}catch{}finally{}};function ql(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ed(u,m){var v=u.C,I=m.indexOf(`
`,v);return I==-1?qs:(v=Number(m.substring(v,I)),isNaN(v)?fa:(I+=1,I+v>m.length?qs:(m=m.slice(I,I+v),u.C=I+v,m)))}Dn.prototype.cancel=function(){this.J=!0,vn(this)};function He(u){u.S=Date.now()+u.I,Wl(u,u.I)}function Wl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Pn(E(u.ba,u),m)}function Zi(u){u.B&&(h.clearTimeout(u.B),u.B=null)}Dn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ha(this.i,this.A),this.L!=2&&(Tr(),ot(17)),vn(this),this.s=2,Zr(this)):Wl(this,this.S-u)};function Zr(u){u.j.G==0||u.J||io(u.j,u)}function vn(u){Zi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,sa(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ma(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Ht(v.h,u))){if(!u.K&&Ht(v.h,u)&&v.G==3){try{var I=v.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)ro(v),Fn(v);else break e;no(v),ot(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=Pn(E(v.Za,v),6e3));if(1>=Ql(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else xr(v,11)}else if((u.K||v.g==u)&&ro(v),!Z(m))for(B=v.Da.g.parse(m),m=0;m<B.length;m++){let De=B[m];if(v.T=De[0],De=De[1],v.G==2)if(De[0]=="c"){v.K=De[1],v.ia=De[2];const It=De[3];It!=null&&(v.la=It,v.j.info("VER="+v.la));const dt=De[4];dt!=null&&(v.Aa=dt,v.j.info("SVER="+v.Aa));const wn=De[5];wn!=null&&typeof wn=="number"&&0<wn&&(I=1.5*wn,v.L=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const dn=u.g;if(dn){const os=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(os){var q=I.h;q.g||os.indexOf("spdy")==-1&&os.indexOf("quic")==-1&&os.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(ga(q,q.h),q.h=null))}if(I.D){const oo=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;oo&&(I.ya=oo,$e(I.I,I.D,oo))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),I=v;var re=u;if(I.qa=lu(I,I.J?I.ia:null,I.W),re.K){Jl(I.h,re);var Be=re,vt=I.L;vt&&(Be.I=vt),Be.B&&(Zi(Be),He(Be)),I.g=re}else ss(I);0<v.i.length&&Zn(v)}else De[0]!="stop"&&De[0]!="close"||xr(v,7);else v.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?xr(v,7):Rt(v):De[0]!="noop"&&v.l&&v.l.ta(De),v.v=0)}}Tr(4)}catch{}}var Kl=class{constructor(u,m){this.g=u,this.map=m}};function es(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ql(u){return u.h?1:u.g?u.g.size:0}function Ht(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ga(u,m){u.g?u.g.add(m):u.h=m}function Jl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}es.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return O(u.i)}function Ks(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,I=0;I<v;I++)m.push(u[I]);return m}m=[],v=0;for(I in u)m[v++]=u[I];return m}function Qs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const I in u)m[v++]=I;return m}}}function ei(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Qs(u),I=Ks(u),B=I.length,q=0;q<B;q++)m.call(void 0,I[q],v&&v[q],u)}var ts=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Td(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var I=u[v].indexOf("="),B=null;if(0<=I){var q=u[v].substring(0,I);B=u[v].substring(I+1)}else q=u[v];m(q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ir(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ir){this.h=u.h,ns(this,u.j),this.o=u.o,this.g=u.g,ti(this,u.s),this.l=u.l;var m=u.i,v=new Jn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),ni(this,v),this.m=u.m}else u&&(m=String(u).match(ts))?(this.h=!1,ns(this,m[1]||"",!0),this.o=be(m[2]||""),this.g=be(m[3]||"",!0),ti(this,m[4]),this.l=be(m[5]||"",!0),ni(this,m[6]||"",!0),this.m=be(m[7]||"")):(this.h=!1,this.i=new Jn(null,this.h))}Ir.prototype.toString=function(){var u=[],m=this.j;m&&u.push(ii(m,Js,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(ii(m,Js,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(ii(v,v.charAt(0)=="/"?eu:Zl,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",ii(v,ya)),u.join("")};function un(u){return new Ir(u)}function ns(u,m,v){u.j=v?be(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ti(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function ni(u,m,v){m instanceof Jn?(u.i=m,Yn(u.i,u.h)):(v||(m=ii(m,tu)),u.i=new Jn(m,u.h))}function $e(u,m,v){u.i.set(m,v)}function ri(u){return $e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function be(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ii(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Xl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Xl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Js=/[#\/\?@]/g,Zl=/[#\?:]/g,eu=/[#\?]/g,tu=/[#\?@]/g,ya=/#/g;function Jn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function kt(u){u.g||(u.g=new Map,u.h=0,u.i&&Td(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Jn.prototype,n.add=function(u,m){kt(this),this.i=null,u=_n(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Ln(u,m){kt(u),m=_n(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function On(u,m){return kt(u),m=_n(u,m),u.g.has(m)}n.forEach=function(u,m){kt(this),this.g.forEach(function(v,I){v.forEach(function(B){u.call(m,B,I,this)},this)},this)},n.na=function(){kt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let I=0;I<m.length;I++){const B=u[I];for(let q=0;q<B.length;q++)v.push(m[I])}return v},n.V=function(u){kt(this);let m=[];if(typeof u=="string")On(this,u)&&(m=m.concat(this.g.get(_n(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return kt(this),this.i=null,u=_n(this,u),On(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function si(u,m,v){Ln(u,m),0<v.length&&(u.i=null,u.g.set(_n(u,m),O(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var I=m[v];const q=encodeURIComponent(String(I)),re=this.V(I);for(I=0;I<re.length;I++){var B=q;re[I]!==""&&(B+="="+encodeURIComponent(String(re[I]))),u.push(B)}}return this.i=u.join("&")};function _n(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Yn(u,m){m&&!u.j&&(kt(u),u.i=null,u.g.forEach(function(v,I){var B=I.toLowerCase();I!=B&&(Ln(this,I),si(this,B,v))},u)),u.j=m}function Id(u,m){const v=new Ji;if(h.Image){const I=new Image;I.onload=x(Yt,v,"TestLoadImage: loaded",!0,m,I),I.onerror=x(Yt,v,"TestLoadImage: error",!1,m,I),I.onabort=x(Yt,v,"TestLoadImage: abort",!1,m,I),I.ontimeout=x(Yt,v,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function nu(u,m){const v=new Ji,I=new AbortController,B=setTimeout(()=>{I.abort(),Yt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(q=>{clearTimeout(B),q.ok?Yt(v,"TestPingServer: ok",!0,m):Yt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),Yt(v,"TestPingServer: error",!1,m)})}function Yt(u,m,v,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(v)}catch{}}function Sd(){this.g=new la}function ru(u,m,v){const I=v||"";try{ei(u,function(B,q){let re=B;g(B)&&(re=oa(B)),m.push(I+q+"="+encodeURIComponent(re))})}catch(B){throw m.push(I+"type="+encodeURIComponent("_badmap")),B}}function Sr(u){this.l=u.Ub||null,this.j=u.eb||!1}R(Sr,Ki),Sr.prototype.g=function(){return new rs(this.l,this.j)},Sr.prototype.i=function(u){return function(){return u}}({});function rs(u,m){gt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(rs,gt),n=rs.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Mn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;iu(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function iu(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Vn(this):Mn(this),this.readyState==3&&iu(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Vn(this))},n.Qa=function(u){this.g&&(this.response=u,Vn(this))},n.ga=function(){this.g&&Vn(this)};function Vn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mn(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Cr(u){let m="";return se(u,function(v,I){m+=I,m+=":",m+=v,m+=`\r
`}),m}function oi(u,m,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Cr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):$e(u,m,v))}function Ye(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ye,gt);var Cd=/^https?$/i,va=["POST","PUT"];n=Ye.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?Us(this.o):Us(Nn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){is(this,q);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)v.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())v.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(va,m,void 0))||I||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,re]of v)this.g.setRequestHeader(q,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xs(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){is(this,q)}};function is(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Ys(u),cn(u)}function Ys(u){u.A||(u.A=!0,yt(u,"complete"),yt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,yt(this,"complete"),yt(this,"abort"),cn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?_a(this):this.bb())},n.bb=function(){_a(this)};function _a(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Xt(u)!=4||u.Z()!=2)){if(u.u&&Xt(u)==4)ra(u.Ea,0,u);else if(yt(u,"readystatechange"),Xt(u)==4){u.h=!1;try{const re=u.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var I;if(I=re===0){var B=String(u.D).match(ts)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),I=!Cd.test(B?B.toLowerCase():"")}v=I}if(v)yt(u,"complete"),yt(u,"success");else{u.m=6;try{var q=2<Xt(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",Ys(u)}}finally{cn(u)}}}}function cn(u,m){if(u.g){Xs(u);const v=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||yt(u,"ready");try{v.onreadystatechange=I}catch{}}}function Xs(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Xt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Xt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),aa(m)}};function wa(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Zs(u){const m={};u=(u.g&&2<=Xt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(Z(u[I]))continue;var v=L(u[I]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=m[B]||[];m[B]=q,q.push(v)}b(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Ea(u){this.Aa=0,this.i=[],this.j=new Ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,u),this.cb=Xn("retryDelaySeedMs",1e4,u),this.Wa=Xn("forwardChannelMaxRetries",2,u),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new es(u&&u.concurrentRequestLimit),this.Da=new Sd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ea.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,I){ot(0),this.W=u,this.H=m||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.I=lu(this,null,this.W),Zn(this)};function Rt(u){if(eo(u),u.G==3){var m=u.U++,v=un(u.I);if($e(v,"SID",u.K),$e(v,"RID",m),$e(v,"TYPE","terminate"),Ar(u,v),m=new Dn(u,u.j,m),m.L=2,m.v=ri(un(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=m.v,v=!0),v||(m.g=uu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),He(m)}au(u)}function Fn(u){u.g&&(Ta(u),u.g.cancel(),u.g=null)}function eo(u){Fn(u),u.u&&(h.clearTimeout(u.u),u.u=null),ro(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function Zn(u){if(!ln(u.h)&&!u.s){u.s=!0;var m=u.Ga;ze||ce(),ie||(ze(),ie=!0),ye.add(m,u),u.B=0}}function Ad(u,m){return Ql(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Pn(E(u.Ga,u,m),ou(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new Dn(this,this.j,u);let q=this.o;if(this.S&&(q?(q=A(q),N(q,this.S)):q=this.S),this.m!==null||this.O||(B.H=q,q=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ai(this,B,m),v=un(this.I),$e(v,"RID",u),$e(v,"CVER",22),this.D&&$e(v,"X-HTTP-Session-Id",this.D),Ar(this,v),q&&(this.O?m="headers="+encodeURIComponent(String(Cr(q)))+"&"+m:this.m&&oi(v,this.m,q)),ga(this.h,B),this.Ua&&$e(v,"TYPE","init"),this.P?($e(v,"$req",m),$e(v,"SID","null"),B.T=!0,Ws(B,v,null)):Ws(B,v,m),this.G=2}}else this.G==3&&(u?to(this,u):this.i.length==0||ln(this.h)||to(this))};function to(u,m){var v;m?v=m.l:v=u.U++;const I=un(u.I);$e(I,"SID",u.K),$e(I,"RID",v),$e(I,"AID",u.T),Ar(u,I),u.m&&u.o&&oi(I,u.m,u.o),v=new Dn(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ai(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ga(u.h,v),Ws(v,I,m)}function Ar(u,m){u.H&&se(u.H,function(v,I){$e(m,I,v)}),u.l&&ei({},function(v,I){$e(m,I,v)})}function ai(u,m,v){v=Math.min(u.i.length,v);var I=u.l?E(u.l.Na,u.l,u):null;e:{var B=u.i;let q=-1;for(;;){const re=["count="+v];q==-1?0<v?(q=B[0].g,re.push("ofs="+q)):q=0:re.push("ofs="+q);let Be=!0;for(let vt=0;vt<v;vt++){let De=B[vt].g;const It=B[vt].map;if(De-=q,0>De)q=Math.max(0,B[vt].g-100),Be=!1;else try{ru(It,re,"req"+De+"_")}catch{I&&I(It)}}if(Be){I=re.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,I}function ss(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ze||ce(),ie||(ze(),ie=!0),ye.add(m,u),u.v=0}}function no(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Pn(E(u.Fa,u),ou(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Pn(E(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Fn(this),su(this))};function Ta(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function su(u){u.g=new Dn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=un(u.qa);$e(m,"RID","rpc"),$e(m,"SID",u.K),$e(m,"AID",u.T),$e(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&$e(m,"TO",u.ja),$e(m,"TYPE","xmlhttp"),Ar(u,m),u.m&&u.o&&oi(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=ri(un(m)),v.m=null,v.P=!0,pa(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Fn(this),no(this),ot(19))};function ro(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function io(u,m){var v=null;if(u.g==m){ro(u),Ta(u),u.g=null;var I=2}else if(Ht(u.h,m))v=m.D,Jl(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var B=u.B;I=Qi(),yt(I,new $s(I,v)),Zn(u)}else ss(u);else if(B=m.s,B==3||B==0&&0<m.X||!(I==1&&Ad(u,m)||I==2&&no(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),B){case 1:xr(u,5);break;case 4:xr(u,10);break;case 3:xr(u,6);break;default:xr(u,2)}}}function ou(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function xr(u,m){if(u.j.info("Error code "+m),m==2){var v=E(u.fb,u),I=u.Xa;const B=!I;I=new Ir(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ns(I,"https"),ri(I),B?Id(I.toString(),v):nu(I.toString(),v)}else ot(2);u.G=0,u.l&&u.l.sa(m),au(u),eo(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function au(u){if(u.G=0,u.ka=[],u.l){const m=Yl(u.h);(m.length!=0||u.i.length!=0)&&(V(u.ka,m),V(u.ka,u.i),u.h.i.length=0,O(u.i),u.i.length=0),u.l.ra()}}function lu(u,m,v){var I=v instanceof Ir?un(v):new Ir(v);if(I.g!="")m&&(I.g=m+"."+I.g),ti(I,I.s);else{var B=h.location;I=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var q=new Ir(null);I&&ns(q,I),m&&(q.g=m),B&&ti(q,B),v&&(q.l=v),I=q}return v=u.D,m=u.ya,v&&m&&$e(I,v,m),$e(I,"VER",u.la),Ar(u,I),I}function uu(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ye(new Sr({eb:v})):new Ye(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ia(){}n=Ia.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function so(){}so.prototype.g=function(u,m){return new qt(u,m)};function qt(u,m){gt.call(this),this.g=new Ea(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Z(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Z(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new er(this)}R(qt,gt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Rt(this.g)},qt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=oa(u),u=v);m.i.push(new Kl(m.Ya++,u)),m.G==3&&Zn(m)},qt.prototype.N=function(){this.g.l=null,delete this.j,Rt(this.g),delete this.g,qt.aa.N.call(this)};function cu(u){Kn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}R(cu,Kn);function du(){zs.call(this),this.status=1}R(du,zs);function er(u){this.g=u}R(er,Ia),er.prototype.ua=function(){yt(this.g,"a")},er.prototype.ta=function(u){yt(this.g,new cu(u))},er.prototype.sa=function(u){yt(this.g,new du)},er.prototype.ra=function(){yt(this.g,"b")},so.prototype.createWebChannel=so.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,g0=function(){return new so},m0=function(){return Qi()},p0=Qn,Sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,vc=Hs,Gl.COMPLETE="complete",f0=Gl,Bs.EventType=yn,yn.OPEN="a",yn.CLOSE="b",yn.ERROR="c",yn.MESSAGE="d",gt.prototype.listen=gt.prototype.K,Xa=Bs,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,h0=Ye}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const Hy="@firebase/firestore",qy="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new Kf("@firebase/firestore");function ko(){return xs.logLevel}function ue(n,...e){if(xs.logLevel<=Re.DEBUG){const t=e.map(op);xs.debug(`Firestore (${Qo}): ${n}`,...t)}}function Wr(n,...e){if(xs.logLevel<=Re.ERROR){const t=e.map(op);xs.error(`Firestore (${Qo}): ${n}`,...t)}}function Li(n,...e){if(xs.logLevel<=Re.WARN){const t=e.map(op);xs.warn(`Firestore (${Qo}): ${n}`,...t)}}function op(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,y0(n,i,t)}function y0(n,e,t){let i=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Wr(i),new Error(i)}function Ue(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||y0(e,o,i)}function Se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zt.UNAUTHENTICATED))}shutdown(){}}class F1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class j1{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let a=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new zr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=a;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},h=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new zr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string",31837,{l:i}),new v0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class U1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new U1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ue(this.o===void 0,3512);const i=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.m;return this.m=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const o=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>o(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?o(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Wy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=$1(40);for(let a=0;a<o.length;++a)i.length<20&&o[a]<t&&(i+=e.charAt(o[a]%62))}return i}}function Ae(n,e){return n<e?-1:n>e?1:0}function Cf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Ae(i,o);{const a=_0(),c=G1(a.encode(Ky(n,t)),a.encode(Ky(e,t)));return c!==0?c:Ae(i,o)}}t+=i>65535?2:1}return Ae(n.length,e.length)}function Ky(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function G1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ae(n[t],e[t]);return Ae(n.length,e.length)}function jo(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="__name__";class sr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ee(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const a=sr.compareSegments(e.get(o),t.get(o));if(a!==0)return a}return Ae(e.length,t.length)}static compareSegments(e,t){const i=sr.isNumericId(e),o=sr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?sr.extractNumericId(e).compare(sr.extractNumericId(t)):Cf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class We extends sr{construct(e,t,i){return new We(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new oe(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new We(t)}static emptyPath(){return new We([])}}const H1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends sr{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return H1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qy}static keyField(){return new Dt([Qy])}static fromServerFormat(e){const t=[];let i="",o=0;const a=()=>{if(i.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new oe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new oe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(i+=h,o++):(a(),o++)}if(a(),c)throw new oe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(We.fromString(e))}static fromName(e){return new ge(We.fromString(e).popFirst(5))}static empty(){return new ge(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(n,e,t){if(!t)throw new oe(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function q1(n,e,t,i){if(e===!0&&i===!0)throw new oe(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Jy(n){if(!ge.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Yy(n){if(ge.isDocumentKey(n))throw new oe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function E0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function td(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function Qt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=td(n);throw new oe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Pl(n,e){if(!E0(n))throw new oe(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(a!==void 0&&c!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new oe(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=-62135596800,Zy=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Zy);return new Je(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Xy)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Zy}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pl(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:mt("string",Je._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Je(0,0))}static max(){return new Ie(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=-1;function W1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(i===1e9?new Je(t+1,0):new Je(t,i));return new Oi(o,ge.empty(),e)}function K1(n){return new Oi(n.readTime,n.key,fl)}class Oi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Oi(Ie.min(),ge.empty(),fl)}static max(){return new Oi(Ie.max(),ge.empty(),fl)}}function Q1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ge.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==J1)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q((i,o)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,o)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Q.reject(t)}static resolve(e){return new Q((t,i)=>{t(e)})}static reject(e){return new Q((t,i)=>{i(e)})}static waitFor(e){return new Q((t,i)=>{let o=0,a=0,c=!1;e.forEach(h=>{++o,h.next(()=>{++a,c&&a===o&&t()},p=>i(p))}),c=!0,a===o&&t()})}static or(e){let t=Q.resolve(!1);for(const i of e)t=t.next(o=>o?Q.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,a)=>{i.push(t.call(this,o,a))}),this.waitFor(i)}static mapArray(e,t){return new Q((i,o)=>{const a=e.length,c=new Array(a);let h=0;for(let p=0;p<a;p++){const g=p;t(e[g]).next(_=>{c[g]=_,++h,h===a&&i(c)},_=>o(_))}})}static doWhile(e,t){return new Q((i,o)=>{const a=()=>{e()===!0?t().next(()=>{a()},o):i()};a()})}}function X1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}nd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=-1;function rd(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function Z1(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="";function ex(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ev(e)),e=tx(n.get(t),e);return ev(e)}function tx(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const a=n.charAt(o);switch(a){case"\0":t+="";break;case T0:t+="";break;default:t+=a}}return t}function ev(n){return n+T0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $i(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function I0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,t){this.comparator=e,this.root=t||Nt.EMPTY}insert(e,t){return new nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lc(this.root,e,this.comparator,!1)}getReverseIterator(){return new lc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lc(this.root,e,this.comparator,!0)}}class lc{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&o&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,t,i,o,a){this.key=e,this.value=t,this.color=i??Nt.RED,this.left=o??Nt.EMPTY,this.right=a??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,a){return new Nt(e??this.key,t??this.value,i??this.color,o??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const a=i(e,o.key);return o=a<0?o.copy(null,null,null,o.left.insert(e,t,i),null):a===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Nt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,i,o,a){return this}insert(e,t,i){return new Nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nv(this.data.getIterator())}getIteratorFrom(e){return new nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(this.comparator(o,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new gn([])}unionWith(e){let t=new Et(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new S0("Invalid base64 string: "+a):a}}(e);return new Lt(t)}static fromUint8Array(e){const t=function(o){let a="";for(let c=0;c<o.length;++c)a+=String.fromCharCode(o[c]);return a}(e);return new Lt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const nx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vi(n){if(Ue(!!n,39018),typeof n=="string"){let e=0;const t=nx.exec(n);if(Ue(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lt(n.seconds),nanos:lt(n.nanos)}}function lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Mi(n){return typeof n=="string"?Lt.fromBase64String(n):Lt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="server_timestamp",A0="__type__",x0="__previous_value__",k0="__local_write_time__";function up(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[A0])===null||t===void 0?void 0:t.stringValue)===C0}function id(n){const e=n.mapValue.fields[x0];return up(e)?id(e):e}function pl(n){const e=Vi(n.mapValue.fields[k0].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t,i,o,a,c,h,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const Oc="(default)";class ml{constructor(e,t){this.projectId=e,this.database=t||Oc}static empty(){return new ml("","")}get isDefaultDatabase(){return this.database===Oc}isEqual(e){return e instanceof ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="__type__",ix="__max__",uc={mapValue:{}},P0="__vector__",Vc="value";function Fi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?up(n)?4:ox(n)?9007199254740991:sx(n)?10:11:Ee(28295,{value:n})}function fr(n,e){if(n===e)return!0;const t=Fi(n);if(t!==Fi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return pl(n).isEqual(pl(e));case 3:return function(o,a){if(typeof o.timestampValue=="string"&&typeof a.timestampValue=="string"&&o.timestampValue.length===a.timestampValue.length)return o.timestampValue===a.timestampValue;const c=Vi(o.timestampValue),h=Vi(a.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,a){return Mi(o.bytesValue).isEqual(Mi(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,a){return lt(o.geoPointValue.latitude)===lt(a.geoPointValue.latitude)&&lt(o.geoPointValue.longitude)===lt(a.geoPointValue.longitude)}(n,e);case 2:return function(o,a){if("integerValue"in o&&"integerValue"in a)return lt(o.integerValue)===lt(a.integerValue);if("doubleValue"in o&&"doubleValue"in a){const c=lt(o.doubleValue),h=lt(a.doubleValue);return c===h?Lc(c)===Lc(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return jo(n.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return function(o,a){const c=o.mapValue.fields||{},h=a.mapValue.fields||{};if(tv(c)!==tv(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!fr(c[p],h[p])))return!1;return!0}(n,e);default:return Ee(52216,{left:n})}}function gl(n,e){return(n.values||[]).find(t=>fr(t,e))!==void 0}function Uo(n,e){if(n===e)return 0;const t=Fi(n),i=Fi(e);if(t!==i)return Ae(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return function(a,c){const h=lt(a.integerValue||a.doubleValue),p=lt(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return rv(n.timestampValue,e.timestampValue);case 4:return rv(pl(n),pl(e));case 5:return Cf(n.stringValue,e.stringValue);case 6:return function(a,c){const h=Mi(a),p=Mi(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const h=a.split("/"),p=c.split("/");for(let g=0;g<h.length&&g<p.length;g++){const _=Ae(h[g],p[g]);if(_!==0)return _}return Ae(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const h=Ae(lt(a.latitude),lt(c.latitude));return h!==0?h:Ae(lt(a.longitude),lt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return iv(n.arrayValue,e.arrayValue);case 10:return function(a,c){var h,p,g,_;const T=a.fields||{},E=c.fields||{},x=(h=T[Vc])===null||h===void 0?void 0:h.arrayValue,R=(p=E[Vc])===null||p===void 0?void 0:p.arrayValue,O=Ae(((g=x?.values)===null||g===void 0?void 0:g.length)||0,((_=R?.values)===null||_===void 0?void 0:_.length)||0);return O!==0?O:iv(x,R)}(n.mapValue,e.mapValue);case 11:return function(a,c){if(a===uc.mapValue&&c===uc.mapValue)return 0;if(a===uc.mapValue)return 1;if(c===uc.mapValue)return-1;const h=a.fields||{},p=Object.keys(h),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const E=Cf(p[T],_[T]);if(E!==0)return E;const x=Uo(h[p[T]],g[_[T]]);if(x!==0)return x}return Ae(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Ee(23264,{le:t})}}function rv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);const t=Vi(n),i=Vi(e),o=Ae(t.seconds,i.seconds);return o!==0?o:Ae(t.nanos,i.nanos)}function iv(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const a=Uo(t[o],i[o]);if(a)return a}return Ae(t.length,i.length)}function Bo(n){return Af(n)}function Af(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Vi(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Mi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ge.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const a of t.values||[])o?o=!1:i+=",",i+=Af(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",a=!0;for(const c of i)a?a=!1:o+=",",o+=`${c}:${Af(t.fields[c])}`;return o+"}"}(n.mapValue):Ee(61005,{value:n})}function _c(n){switch(Fi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=id(n);return e?16+_c(e):16;case 5:return 2*n.stringValue.length;case 6:return Mi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,a)=>o+_c(a),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return $i(i.fields,(a,c)=>{o+=a.length+_c(c)}),o}(n.mapValue);default:throw Ee(13486,{value:n})}}function sv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xf(n){return!!n&&"integerValue"in n}function cp(n){return!!n&&"arrayValue"in n}function ov(n){return!!n&&"nullValue"in n}function av(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wc(n){return!!n&&"mapValue"in n}function sx(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[R0])===null||t===void 0?void 0:t.stringValue)===P0}function il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $i(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=il(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ox(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ix}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!wc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=il(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=h.popLast()}c?i[h.lastSegment()]=il(c):o.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,i,o)}delete(e){const t=this.field(e.popLast());wc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];wc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){$i(t,(o,a)=>e[o]=a);for(const o of i)delete e[o]}clone(){return new an(il(this.value))}}function b0(n){const e=[];return $i(n.fields,(t,i)=>{const o=new Dt([t]);if(wc(i)){const a=b0(i.mapValue).fields;if(a.length===0)e.push(o);else for(const c of a)e.push(o.child(c))}else e.push(o)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,a,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=a,this.data=c,this.documentState=h}static newInvalidDocument(e){return new $t(e,0,Ie.min(),Ie.min(),Ie.min(),an.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,Ie.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,Ie.min(),Ie.min(),an.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,Ie.min(),Ie.min(),an.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.position=e,this.inclusive=t}}function lv(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const a=e[o],c=n.position[o];if(a.field.isKeyField()?i=ge.comparator(ge.fromName(c.referenceValue),t.key):i=Uo(c,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function uv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t="asc"){this.field=e,this.dir=t}}function ax(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{}class pt extends N0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new ux(e,t,i):t==="array-contains"?new hx(e,i):t==="in"?new fx(e,i):t==="not-in"?new px(e,i):t==="array-contains-any"?new mx(e,i):new pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new cx(e,i):new dx(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Uo(t,this.value)):t!==null&&Fi(this.value)===Fi(t)&&this.matchesComparison(Uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends N0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Wn(e,t)}matches(e){return D0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function D0(n){return n.op==="and"}function L0(n){return lx(n)&&D0(n)}function lx(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}function kf(n){if(n instanceof pt)return n.field.canonicalString()+n.op.toString()+Bo(n.value);if(L0(n))return n.filters.map(e=>kf(e)).join(",");{const e=n.filters.map(t=>kf(t)).join(",");return`${n.op}(${e})`}}function O0(n,e){return n instanceof pt?function(i,o){return o instanceof pt&&i.op===o.op&&i.field.isEqual(o.field)&&fr(i.value,o.value)}(n,e):n instanceof Wn?function(i,o){return o instanceof Wn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((a,c,h)=>a&&O0(c,o.filters[h]),!0):!1}(n,e):void Ee(19439)}function V0(n){return n instanceof pt?function(t){return`${t.field.canonicalString()} ${t.op} ${Bo(t.value)}`}(n):n instanceof Wn?function(t){return t.op.toString()+" {"+t.getFilters().map(V0).join(" ,")+"}"}(n):"Filter"}class ux extends pt{constructor(e,t,i){super(e,t,i),this.key=ge.fromName(i.referenceValue)}matches(e){const t=ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class cx extends pt{constructor(e,t){super(e,"in",t),this.keys=M0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class dx extends pt{constructor(e,t){super(e,"not-in",t),this.keys=M0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function M0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>ge.fromName(i.referenceValue))}class hx extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cp(t)&&gl(t.arrayValue,this.value)}}class fx extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&gl(this.value.arrayValue,t)}}class px extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gl(this.value.arrayValue,t)}}class mx extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>gl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,t=null,i=[],o=[],a=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=a,this.startAt=c,this.endAt=h,this.Pe=null}}function cv(n,e=null,t=[],i=[],o=null,a=null,c=null){return new gx(n,e,t,i,o,a,c)}function dp(n){const e=Se(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>kf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),rd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Bo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Bo(i)).join(",")),e.Pe=t}return e.Pe}function hp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ax(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!O0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uv(n.startAt,e.startAt)&&uv(n.endAt,e.endAt)}function Rf(n){return ge.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t=null,i=[],o=[],a=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=a,this.limitType=c,this.startAt=h,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function yx(n,e,t,i,o,a,c,h){return new bl(n,e,t,i,o,a,c,h)}function sd(n){return new bl(n)}function dv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function F0(n){return n.collectionGroup!==null}function sl(n){const e=Se(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Et(Dt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(h=h.add(g.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Fc(a,i))}),t.has(Dt.keyField().canonicalString())||e.Te.push(new Fc(Dt.keyField(),i))}return e.Te}function lr(n){const e=Se(n);return e.Ie||(e.Ie=vx(e,sl(n))),e.Ie}function vx(n,e){if(n.limitType==="F")return cv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const a=o.dir==="desc"?"asc":"desc";return new Fc(o.field,a)});const t=n.endAt?new Mc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Mc(n.startAt.position,n.startAt.inclusive):null;return cv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Pf(n,e){const t=n.filters.concat([e]);return new bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bf(n,e,t){return new bl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function od(n,e){return hp(lr(n),lr(e))&&n.limitType===e.limitType}function j0(n){return`${dp(lr(n))}|lt:${n.limitType}`}function Ro(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>V0(o)).join(", ")}]`),rd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Bo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Bo(o)).join(",")),`Target(${i})`}(lr(n))}; limitType=${n.limitType})`}function ad(n,e){return e.isFoundDocument()&&function(i,o){const a=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ge.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(n,e)&&function(i,o){for(const a of sl(i))if(!a.field.isKeyField()&&o.data.field(a.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const a of i.filters)if(!a.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,h,p){const g=lv(c,h,p);return c.inclusive?g<=0:g<0}(i.startAt,sl(i),o)||i.endAt&&!function(c,h,p){const g=lv(c,h,p);return c.inclusive?g>=0:g>0}(i.endAt,sl(i),o))}(n,e)}function _x(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function U0(n){return(e,t)=>{let i=!1;for(const o of sl(n)){const a=wx(o,e,t);if(a!==0)return a;i=i||o.field.isKeyField()}return 0}}function wx(n,e,t){const i=n.field.isKeyField()?ge.comparator(e.key,t.key):function(a,c,h){const p=c.data.field(a),g=h.data.field(a);return p!==null&&g!==null?Uo(p,g):Ee(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,a]of i)if(this.equalsFn(o,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return void(o[a]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,(t,i)=>{for(const[o,a]of i)e(o,a)})}isEmpty(){return I0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=new nt(ge.comparator);function Kr(){return Ex}const B0=new nt(ge.comparator);function Za(...n){let e=B0;for(const t of n)e=e.insert(t.key,t);return e}function z0(n){let e=B0;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ws(){return ol()}function $0(){return ol()}function ol(){return new bs(n=>n.toString(),(n,e)=>n.isEqual(e))}const Tx=new nt(ge.comparator),Ix=new Et(ge.comparator);function Pe(...n){let e=Ix;for(const t of n)e=e.add(t);return e}const Sx=new Et(Ae);function Cx(){return Sx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function G0(n){return{integerValue:""+n}}function Ax(n,e){return Z1(e)?G0(e):fp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this._=void 0}}function xx(n,e,t){return n instanceof yl?function(o,a){const c={fields:{[A0]:{stringValue:C0},[k0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return a&&up(a)&&(a=id(a)),a&&(c.fields[x0]=a),{mapValue:c}}(t,e):n instanceof vl?q0(n,e):n instanceof _l?W0(n,e):function(o,a){const c=H0(o,a),h=hv(c)+hv(o.Ee);return xf(c)&&xf(o.Ee)?G0(h):fp(o.serializer,h)}(n,e)}function kx(n,e,t){return n instanceof vl?q0(n,e):n instanceof _l?W0(n,e):t}function H0(n,e){return n instanceof jc?function(i){return xf(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class yl extends ld{}class vl extends ld{constructor(e){super(),this.elements=e}}function q0(n,e){const t=K0(e);for(const i of n.elements)t.some(o=>fr(o,i))||t.push(i);return{arrayValue:{values:t}}}class _l extends ld{constructor(e){super(),this.elements=e}}function W0(n,e){let t=K0(e);for(const i of n.elements)t=t.filter(o=>!fr(o,i));return{arrayValue:{values:t}}}class jc extends ld{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function hv(n){return lt(n.integerValue||n.doubleValue)}function K0(n){return cp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,t){this.field=e,this.transform=t}}function Px(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof vl&&o instanceof vl||i instanceof _l&&o instanceof _l?jo(i.elements,o.elements,fr):i instanceof jc&&o instanceof jc?fr(i.Ee,o.Ee):i instanceof yl&&o instanceof yl}(n.transform,e.transform)}class bx{constructor(e,t){this.version=e,this.transformResults=t}}class Jt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ec(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ud{}function Q0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cd(n.key,Jt.none()):new Nl(n.key,n.data,Jt.none());{const t=n.data,i=an.empty();let o=new Et(Dt.comparator);for(let a of e.fields)if(!o.has(a)){let c=t.field(a);c===null&&a.length>1&&(a=a.popLast(),c=t.field(a)),c===null?i.delete(a):i.set(a,c),o=o.add(a)}return new Gi(n.key,i,new gn(o.toArray()),Jt.none())}}function Nx(n,e,t){n instanceof Nl?function(o,a,c){const h=o.value.clone(),p=pv(o.fieldTransforms,a,c.transformResults);h.setAll(p),a.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Gi?function(o,a,c){if(!Ec(o.precondition,a))return void a.convertToUnknownDocument(c.version);const h=pv(o.fieldTransforms,a,c.transformResults),p=a.data;p.setAll(J0(o)),p.setAll(h),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,a,c){a.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function al(n,e,t,i){return n instanceof Nl?function(a,c,h,p){if(!Ec(a.precondition,c))return h;const g=a.value.clone(),_=mv(a.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,i):n instanceof Gi?function(a,c,h,p){if(!Ec(a.precondition,c))return h;const g=mv(a.fieldTransforms,p,c),_=c.data;return _.setAll(J0(a)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(T=>T.field))}(n,e,t,i):function(a,c,h){return Ec(a.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function Dx(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),a=H0(i.transform,o||null);a!=null&&(t===null&&(t=an.empty()),t.set(i.field,a))}return t||null}function fv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&jo(i,o,(a,c)=>Px(a,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Nl extends ud{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gi extends ud{constructor(e,t,i,o,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function J0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function pv(n,e,t){const i=new Map;Ue(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let o=0;o<t.length;o++){const a=n[o],c=a.transform,h=e.data.field(a.field);i.set(a.field,kx(c,h,t[o]))}return i}function mv(n,e,t){const i=new Map;for(const o of n){const a=o.transform,c=t.data.field(o.field);i.set(o.field,xx(a,c,e))}return i}class cd extends ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lx extends ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const a=this.mutations[o];a.key.isEqual(e.key)&&Nx(a,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=al(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=al(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=$0();return this.mutations.forEach(o=>{const a=e.get(o.key),c=a.overlayedDocument;let h=this.applyToLocalView(c,a.mutatedFields);h=t.has(o.key)?null:h;const p=Q0(c,h);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ie.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,(t,i)=>fv(t,i))&&jo(this.baseMutations,e.baseMutations,(t,i)=>fv(t,i))}}class pp{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ue(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let o=function(){return Tx}();const a=e.mutations;for(let c=0;c<a.length;c++)o=o.insert(a[c].key,i[c].version);return new pp(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Le;function Fx(n){switch(n){case K.OK:return Ee(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function Y0(n){if(n===void 0)return Wr("GRPC error has no .code"),K.UNKNOWN;switch(n){case ft.OK:return K.OK;case ft.CANCELLED:return K.CANCELLED;case ft.UNKNOWN:return K.UNKNOWN;case ft.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case ft.INTERNAL:return K.INTERNAL;case ft.UNAVAILABLE:return K.UNAVAILABLE;case ft.UNAUTHENTICATED:return K.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case ft.NOT_FOUND:return K.NOT_FOUND;case ft.ALREADY_EXISTS:return K.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return K.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case ft.ABORTED:return K.ABORTED;case ft.OUT_OF_RANGE:return K.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return K.UNIMPLEMENTED;case ft.DATA_LOSS:return K.DATA_LOSS;default:return Ee(39323,{code:n})}}(Le=ft||(ft={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx=new Ni([4294967295,4294967295],0);function gv(n){const e=_0().encode(n),t=new d0;return t.update(e),new Uint8Array(t.digest())}function yv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ni([t,i],0),new Ni([o,a],0)]}class mp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new el(`Invalid padding: ${t}`);if(i<0)throw new el(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new el(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ni.fromNumber(this.fe)}pe(e,t,i){let o=e.add(t.multiply(Ni.fromNumber(i)));return o.compare(jx)===1&&(o=new Ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=gv(e),[i,o]=yv(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(i,o,a);if(!this.ye(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new mp(a,o,t);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.fe===0)return;const t=gv(e),[i,o]=yv(t);for(let a=0;a<this.hashCount;a++){const c=this.pe(i,o,a);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t,i,o,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Dl.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dd(Ie.min(),o,new nt(Ae),Kr(),Pe())}}class Dl{constructor(e,t,i,o,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dl(i,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t,i,o){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=o}}class X0{constructor(e,t){this.targetId=e,this.De=t}}class Z0{constructor(e,t,i=Lt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class vv{constructor(){this.ve=0,this.Ce=_v(),this.Fe=Lt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Pe(),t=Pe(),i=Pe();return this.Ce.forEach((o,a)=>{switch(a){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ee(38017,{changeType:a})}}),new Dl(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=_v()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Ux{constructor(e){this.We=e,this.Ge=new Map,this.ze=Kr(),this.je=cc(),this.Je=cc(),this.He=new nt(Ae)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,o)=>{this.nt(o)&&t(o)})}it(e){const t=e.targetId,i=e.De.count,o=this.st(t);if(o){const a=o.target;if(Rf(a))if(i===0){const c=new ge(a.path);this.Xe(t,c,$t.newNoDocument(c,Ie.min()))}else Ue(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const h=this._t(e),p=h?this.ut(h,e,c):1;if(p!==0){this.rt(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:a=0}=t;let c,h;try{c=Mi(i).toUint8Array()}catch(p){if(p instanceof S0)return Li("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new mp(c,o,a)}catch(p){return Li(p instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.fe===0?null:h}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let o=0;return i.forEach(a=>{const c=this.We.lt(),h=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,a,null),o++)}),o}Pt(e){const t=new Map;this.Ge.forEach((a,c)=>{const h=this.st(c);if(h){if(a.current&&Rf(h.target)){const p=new ge(h.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,$t.newNoDocument(p,e))}a.Ne&&(t.set(c,a.Le()),a.ke())}});let i=Pe();this.Je.forEach((a,c)=>{let h=!0;c.forEachWhile(p=>{const g=this.st(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(a))}),this.ze.forEach((a,c)=>c.setReadTime(e));const o=new dd(e,t,this.He,this.ze,i);return this.ze=Kr(),this.je=cc(),this.Je=cc(),this.He=new nt(Ae),o}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const o=this.tt(e);this.It(e,t)?o.qe(t,1):o.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new vv,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Et(Ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Et(Ae),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vv),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function cc(){return new nt(ge.comparator)}function _v(){return new nt(ge.comparator)}const Bx={asc:"ASCENDING",desc:"DESCENDING"},zx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$x={and:"AND",or:"OR"};class Gx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Nf(n,e){return n.useProto3Json||rd(e)?e:{value:e}}function Uc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ew(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Hx(n,e){return Uc(n,e.toTimestamp())}function ur(n){return Ue(!!n,49232),Ie.fromTimestamp(function(t){const i=Vi(t);return new Je(i.seconds,i.nanos)}(n))}function gp(n,e){return Df(n,e).canonicalString()}function Df(n,e){const t=function(o){return new We(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function tw(n){const e=We.fromString(n);return Ue(ow(e),10190,{key:e.toString()}),e}function Lf(n,e){return gp(n.databaseId,e.path)}function af(n,e){const t=tw(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ge(rw(t))}function nw(n,e){return gp(n.databaseId,e)}function qx(n){const e=tw(n);return e.length===4?We.emptyPath():rw(e)}function Of(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rw(n){return Ue(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function wv(n,e,t){return{name:Lf(n,e),fields:t.value.mapValue.fields}}function Wx(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ee(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],a=function(g,_){return g.useProto3Json?(Ue(_===void 0||typeof _=="string",58123),Lt.fromBase64String(_||"")):(Ue(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Lt.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(g){const _=g.code===void 0?K.UNKNOWN:Y0(g.code);return new oe(_,g.message||"")}(c);t=new Z0(i,o,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=af(n,i.document.name),a=ur(i.document.updateTime),c=i.document.createTime?ur(i.document.createTime):Ie.min(),h=new an({mapValue:{fields:i.document.fields}}),p=$t.newFoundDocument(o,a,c,h),g=i.targetIds||[],_=i.removedTargetIds||[];t=new Tc(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=af(n,i.document),a=i.readTime?ur(i.readTime):Ie.min(),c=$t.newNoDocument(o,a),h=i.removedTargetIds||[];t=new Tc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=af(n,i.document),a=i.removedTargetIds||[];t=new Tc([],a,o,null)}else{if(!("filter"in e))return Ee(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:a}=i,c=new Mx(o,a),h=i.targetId;t=new X0(h,c)}}return t}function Kx(n,e){let t;if(e instanceof Nl)t={update:wv(n,e.key,e.value)};else if(e instanceof cd)t={delete:Lf(n,e.key)};else if(e instanceof Gi)t={update:wv(n,e.key,e.data),updateMask:rk(e.fieldMask)};else{if(!(e instanceof Lx))return Ee(16599,{Rt:e.type});t={verify:Lf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const h=c.transform;if(h instanceof yl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof vl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof _l)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof jc)return{fieldPath:c.field.canonicalString(),increment:h.Ee};throw Ee(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,a){return a.updateTime!==void 0?{updateTime:Hx(o,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ee(27497)}(n,e.precondition)),t}function Qx(n,e){return n&&n.length>0?(Ue(e!==void 0,14353),n.map(t=>function(o,a){let c=o.updateTime?ur(o.updateTime):ur(a);return c.isEqual(Ie.min())&&(c=ur(a)),new bx(c,o.transformResults||[])}(t,e))):[]}function Jx(n,e){return{documents:[nw(n,e.path)]}}function Yx(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=nw(n,o);const a=function(g){if(g.length!==0)return sw(Wn.create(g,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const c=function(g){if(g.length!==0)return g.map(_=>function(E){return{field:Po(E.field),direction:ek(E.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=Nf(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{Vt:t,parent:o}}function Xx(n){let e=qx(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ue(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=function(T){const E=iw(T);return E instanceof Wn&&L0(E)?E.getFilters():[E]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(E=>function(R){return new Fc(bo(R.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(T){let E;return E=typeof T=="object"?T.value:T,rd(E)?null:E}(t.limit));let p=null;t.startAt&&(p=function(T){const E=!!T.before,x=T.values||[];return new Mc(x,E)}(t.startAt));let g=null;return t.endAt&&(g=function(T){const E=!T.before,x=T.values||[];return new Mc(x,E)}(t.endAt)),yx(e,o,c,a,h,"F",p,g)}function Zx(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iw(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=bo(t.unaryFilter.field);return pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bo(t.unaryFilter.field);return pt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bo(t.unaryFilter.field);return pt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(n):n.fieldFilter!==void 0?function(t){return pt.create(bo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Wn.create(t.compositeFilter.filters.map(i=>iw(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(t.compositeFilter.op))}(n):Ee(30097,{filter:n})}function ek(n){return Bx[n]}function tk(n){return zx[n]}function nk(n){return $x[n]}function Po(n){return{fieldPath:n.canonicalString()}}function bo(n){return Dt.fromServerFormat(n.fieldPath)}function sw(n){return n instanceof pt?function(t){if(t.op==="=="){if(av(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NAN"}};if(ov(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(av(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NAN"}};if(ov(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(t.field),op:tk(t.op),value:t.value}}}(n):n instanceof Wn?function(t){const i=t.getFilters().map(o=>sw(o));return i.length===1?i[0]:{compositeFilter:{op:nk(t.op),filters:i}}}(n):Ee(54877,{filter:n})}function rk(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ow(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t,i,o,a=Ie.min(),c=Ie.min(),h=Lt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.gt=e}}function sk(n){const e=Xx({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(){this.Dn=new ak}addToCollectionParentIndex(e,t){return this.Dn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(Oi.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(Oi.min())}updateCollectionGroup(e,t,i){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class ak{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Et(We.comparator),a=!o.has(i);return this.index[t]=o.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Et(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aw=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(aw,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new zo(0)}static ur(){return new zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="LruGarbageCollector",lk=1048576;function Iv([n,e],[t,i]){const o=Ae(n,t);return o===0?Ae(e,i):o}class uk{constructor(e){this.Tr=e,this.buffer=new Et(Iv),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Iv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ck{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(Tv,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yo(t)?ue(Tv,"Ignoring IndexedDB error during garbage collection: ",t):await Jo(t)}await this.Rr(3e5)})}}class dk{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(nd.ue);const i=new uk(t);return this.Vr.forEachTarget(e,o=>i.Er(o.sequenceNumber)).next(()=>this.Vr.gr(e,o=>i.Er(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Ev)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ev):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,o,a,c,h,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,h=Date.now(),this.removeTargets(e,i,t))).next(T=>(a=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(g=Date.now(),ko()<=Re.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${a} targets in `+(p-h)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:a,documentsRemoved:T})))}}function hk(n,e){return new dk(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.changes=new bs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Q.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&al(i.mutation,o,gn.empty(),Je.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Pe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Pe()){const o=ws();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(a=>{let c=Za();return a.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=ws();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Pe()))}populateOverlays(e,t,i){const o=[];return i.forEach(a=>{t.has(a)||o.push(a)}),this.documentOverlayCache.getOverlays(e,o).next(a=>{a.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,i,o){let a=Kr();const c=ol(),h=function(){return ol()}();return t.forEach((p,g)=>{const _=i.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof Gi)?a=a.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),al(_.mutation,g,_.mutation.getFieldMask(),Je.now())):c.set(g.key,gn.empty())}),this.recalculateAndSaveOverlays(e,a).next(p=>(p.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>{var T;return h.set(g,new pk(_,(T=c.get(g))!==null&&T!==void 0?T:null))}),h))}recalculateAndSaveOverlays(e,t){const i=ol();let o=new nt((c,h)=>c-h),a=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||gn.empty();_=h.applyToLocalView(g,_),i.set(p,_);const T=(o.get(h.batchId)||Pe()).add(p);o=o.insert(h.batchId,T)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),g=p.key,_=p.value,T=$0();_.forEach(E=>{if(!a.has(E)){const x=Q0(t.get(E),i.get(E));x!==null&&T.set(E,x),a=a.add(E)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return Q.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return ge.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):F0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(a=>{const c=o-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-a.size):Q.resolve(ws());let h=fl,p=a;return c.next(g=>Q.forEach(g,(_,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),a.get(_)?Q.resolve():this.remoteDocumentCache.getEntry(e,_).next(E=>{p=p.insert(_,E)}))).next(()=>this.populateOverlays(e,g,a)).next(()=>this.computeViews(e,p,g,Pe())).next(_=>({batchId:h,changes:z0(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ge(t)).next(i=>{let o=Za();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const a=t.collectionGroup;let c=Za();return this.indexManager.getCollectionParents(e,a).next(h=>Q.forEach(h,p=>{const g=function(T,E){return new bl(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(a));return this.getDocumentsMatchingCollectionQuery(e,g,i,o).next(_=>{_.forEach((T,E)=>{c=c.insert(T,E)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(a=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,o))).next(c=>{a.forEach((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,$t.newInvalidDocument(_)))});let h=Za();return c.forEach((p,g)=>{const _=a.get(p);_!==void 0&&al(_.mutation,g,gn.empty(),Je.now()),ad(t,g)&&(h=h.insert(p,g))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Q.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(o){return{id:o.id,version:o.version,createTime:ur(o.createTime)}}(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(o){return{name:o.name,query:sk(o.bundledQuery),readTime:ur(o.readTime)}}(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.overlays=new nt(ge.comparator),this.kr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ws();return Q.forEach(t,o=>this.getOverlay(e,o).next(a=>{a!==null&&i.set(o,a)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,a)=>{this.wt(e,t,a)}),Q.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.kr.get(i);return o!==void 0&&(o.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(i)),Q.resolve()}getOverlaysForCollection(e,t,i){const o=ws(),a=t.length+1,c=new ge(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===a&&p.largestBatchId>i&&o.set(p.getKey(),p)}return Q.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let a=new nt((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=a.get(g.largestBatchId);_===null&&(_=ws(),a=a.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const h=ws(),p=a.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>h.set(g,_)),!(h.size()>=o)););return Q.resolve(h)}wt(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.kr.get(o.largestBatchId).delete(i.key);this.kr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new Vx(t,i));let a=this.kr.get(t);a===void 0&&(a=Pe(),this.kr.set(t,a)),this.kr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.qr=new Et(xt.Qr),this.$r=new Et(xt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new xt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new xt(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){const t=new ge(new We([])),i=new xt(t,e),o=new xt(t,e+1),a=[];return this.$r.forEachInRange([i,o],c=>{this.Wr(c),a.push(c.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ge(new We([])),i=new xt(t,e),o=new xt(t,e+1);let a=Pe();return this.$r.forEachInRange([i,o],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new xt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ge.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||ge.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Et(xt.Qr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Ox(a,t,i,o);this.mutationQueue.push(c);for(const h of o)this.Yr=this.Yr.add(new xt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Q.resolve(c)}lookupMutationBatch(e,t){return Q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Xr(i),a=o<0?0:o;return Q.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?lp:this.er-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([i,o],c=>{const h=this.Zr(c.Hr);a.push(h)}),Q.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Et(Ae);return t.forEach(o=>{const a=new xt(o,0),c=new xt(o,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,c],h=>{i=i.add(h.Hr)})}),Q.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let a=i;ge.isDocumentKey(a)||(a=a.child(""));const c=new xt(new ge(a),0);let h=new Et(Ae);return this.Yr.forEachWhile(p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(h=h.add(p.Hr)),!0)},c),Q.resolve(this.ei(h))}ei(e){const t=[];return e.forEach(i=>{const o=this.Zr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ue(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Q.forEach(t.mutations,o=>{const a=new xt(o.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){const i=new xt(t,0),o=this.Yr.firstAfterOrEqual(i);return Q.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e){this.ni=e,this.docs=function(){return new nt(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),a=o?o.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Q.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Kr();return t.forEach(o=>{const a=this.docs.get(o);i=i.insert(o,a?a.document.mutableCopy():$t.newInvalidDocument(o))}),Q.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let a=Kr();const c=t.path,h=new ge(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Q1(K1(_),i)<=0||(o.has(_.key)||ad(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return Q.resolve(a)}getAllFromCollectionGroup(e,t,i,o){Ee(9500)}ri(e,t){return Q.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Ek(this)}getSize(e){return Q.resolve(this.size)}}class Ek extends fk{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Or.addEntry(e,o)):this.Or.removeEntry(i)}),Q.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.persistence=e,this.ii=new bs(t=>dp(t),hp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.si=0,this.oi=new yp,this.targetCount=0,this._i=zo.ar()}forEachTarget(e,t){return this.ii.forEach((i,o)=>t(o)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Q.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new zo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.hr(t),Q.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,i){let o=0;const a=[];return this.ii.forEach((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.ii.delete(c),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),Q.waitFor(a).next(()=>o)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return Q.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Q.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const o=this.persistence.referenceDelegate,a=[];return o&&t.forEach(c=>{a.push(o.markPotentiallyOrphaned(e,c))}),Q.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return Q.resolve(i)}containsKey(e,t){return Q.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this.ai={},this.overlays={},this.ui=new nd(0),this.ci=!1,this.ci=!0,this.li=new vk,this.referenceDelegate=e(this),this.hi=new Tk(this),this.indexManager=new ok,this.remoteDocumentCache=function(o){return new wk(o)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new ik(t),this.Ti=new gk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new _k(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new Ik(this.ui.next());return this.referenceDelegate.Ii(),i(o).next(a=>this.referenceDelegate.di(o).next(()=>a)).toPromise().then(a=>(o.raiseOnCommittedEvent(),a))}Ei(e,t){return Q.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}}class Ik extends Y1{constructor(e){super(),this.currentSequenceNumber=e}}class vp{constructor(e){this.persistence=e,this.Ai=new yp,this.Ri=null}static Vi(e){return new vp(e)}get mi(){if(this.Ri)return this.Ri;throw Ee(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Q.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(o=>this.mi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(a=>this.mi.add(a.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.mi,i=>{const o=ge.fromPath(i);return this.fi(e,o).next(a=>{a||t.removeEntry(o,Ie.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Q.or([()=>Q.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Bc{constructor(e,t){this.persistence=e,this.gi=new bs(i=>ex(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=hk(this,t)}static Vi(e,t){return new Bc(e,t)}Ii(){}di(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return Q.forEach(this.gi,(i,o)=>this.Sr(e,i,o).next(a=>a?Q.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),a=o.newChangeBuffer();return o.ri(e,c=>this.Sr(e,c,t).next(h=>{h||(i++,a.removeEntry(c,Ie.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Q.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_c(e.data.value)),t}Sr(e,t,i){return Q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.gi.get(t);return Q.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=o}static Es(e,t){let i=Pe(),o=Pe();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:o=o.add(a.doc.key)}return new _p(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return eS()?8:X1(Gt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,o){const a={result:null};return this.ps(e,t).next(c=>{a.result=c}).next(()=>{if(!a.result)return this.ys(e,t,o,i).next(c=>{a.result=c})}).next(()=>{if(a.result)return;const c=new Sk;return this.ws(e,t,c).next(h=>{if(a.result=h,this.Rs)return this.Ss(e,t,c,h.size)})}).next(()=>a.result)}Ss(e,t,i,o){return i.documentReadCount<this.Vs?(ko()<=Re.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(ko()<=Re.DEBUG&&ue("QueryEngine","Query:",Ro(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.fs*o?(ko()<=Re.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):Q.resolve())}ps(e,t){if(dv(t))return Q.resolve(null);let i=lr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=bf(t,null,"F"),i=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const c=Pe(...a);return this.gs.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const g=this.bs(t,h);return this.Ds(t,g,c,p.readTime)?this.ps(e,bf(t,null,"F")):this.vs(e,g,t,p)}))})))}ys(e,t,i,o){return dv(t)||o.isEqual(Ie.min())?Q.resolve(null):this.gs.getDocuments(e,i).next(a=>{const c=this.bs(t,a);return this.Ds(t,c,i,o)?Q.resolve(null):(ko()<=Re.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(t)),this.vs(e,c,t,W1(o,fl)).next(h=>h))})}bs(e,t){let i=new Et(U0(e));return t.forEach((o,a)=>{ad(e,a)&&(i=i.add(a))}),i}Ds(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(o)>0)}ws(e,t,i){return ko()<=Re.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.gs.getDocumentsMatchingQuery(e,t,Oi.min(),i)}vs(e,t,i,o){return this.gs.getDocumentsMatchingQuery(e,i,o).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="LocalStore",Ak=3e8;class xk{constructor(e,t,i,o){this.persistence=e,this.Cs=t,this.serializer=o,this.Fs=new nt(Ae),this.Ms=new bs(a=>dp(a),hp),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mk(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function kk(n,e,t,i){return new xk(n,e,t,i)}async function uw(n,e){const t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(a=>(o=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(a=>{const c=[],h=[];let p=Pe();for(const g of o){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of a){h.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(g=>({Bs:g,removedBatchIds:c,addedBatchIds:h}))})})}function Rk(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(h,p,g,_){const T=g.batch,E=T.keys();let x=Q.resolve();return E.forEach(R=>{x=x.next(()=>_.getEntry(p,R)).next(O=>{const V=g.docVersions.get(R);Ue(V!==null,48541),O.version.compareTo(V)<0&&(T.applyToRemoteDocument(O,g),O.isValidDocument()&&(O.setReadTime(g.commitVersion),_.addEntry(O)))})}),x.next(()=>h.mutationQueue.removeMutationBatch(p,T))}(t,i,e,a).next(()=>a.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=Pe();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(p=p.add(h.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function cw(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Pk(n,e){const t=Se(n),i=e.snapshotVersion;let o=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});o=t.Fs;const h=[];e.targetChanges.forEach((_,T)=>{const E=o.get(T);if(!E)return;h.push(t.hi.removeMatchingKeys(a,_.removedDocuments,T).next(()=>t.hi.addMatchingKeys(a,_.addedDocuments,T)));let x=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?x=x.withResumeToken(Lt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(_.resumeToken,i)),o=o.insert(T,x),function(O,V,$){return O.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=Ak?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(E,x,_)&&h.push(t.hi.updateTargetData(a,x))});let p=Kr(),g=Pe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))}),h.push(bk(a,c,e.documentUpdates).next(_=>{p=_.Ls,g=_.ks})),!i.isEqual(Ie.min())){const _=t.hi.getLastRemoteSnapshotVersion(a).next(T=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,i));h.push(_)}return Q.waitFor(h).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,p,g)).next(()=>p)}).then(a=>(t.Fs=o,a))}function bk(n,e,t){let i=Pe(),o=Pe();return t.forEach(a=>i=i.add(a)),e.getEntries(n,i).next(a=>{let c=Kr();return t.forEach((h,p)=>{const g=a.get(h);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Ie.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):ue(wp,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",p.version)}),{Ls:c,ks:o}})}function Nk(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=lp),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Dk(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.hi.getTargetData(i,e).next(a=>a?(o=a,Q.resolve(o)):t.hi.allocateTargetId(i).next(c=>(o=new xi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Fs.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function Vf(n,e,t){const i=Se(n),o=i.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Yo(c))throw c;ue(wp,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(o.target)}function Sv(n,e,t){const i=Se(n);let o=Ie.min(),a=Pe();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,_){const T=Se(p),E=T.Ms.get(_);return E!==void 0?Q.resolve(T.Fs.get(E)):T.hi.getTargetData(g,_)}(i,c,lr(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,h.targetId).next(p=>{a=p})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,e,t?o:Ie.min(),t?a:Pe())).next(h=>(Lk(i,_x(e),h),{documents:h,qs:a})))}function Lk(n,e,t){let i=n.xs.get(e)||Ie.min();t.forEach((o,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),n.xs.set(e,i)}class Cv{constructor(){this.activeTargetIds=Cx()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ok{constructor(){this.Fo=new Cv,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Cv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="ConnectivityMonitor";class xv{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(Av,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(Av,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc=null;function Mf(){return dc===null?dc=function(){return 268435456+Math.round(2147483648*Math.random())}():dc++,"0x"+dc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="RestConnection",Mk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fk{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${o}`,this.Ko=this.databaseId.database===Oc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Wo(e,t,i,o,a){const c=Mf(),h=this.Go(e,t.toUriEncodedString());ue(lf,`Sending RPC '${e}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,o,a);const{host:g}=new URL(h),_=qo(g);return this.jo(e,h,p,i,_).then(T=>(ue(lf,`Received RPC '${e}' ${c}: `,T),T),T=>{throw Li(lf,`RPC '${e}' ${c} failed with error: `,T,"url: ",h,"request:",i),T})}Jo(e,t,i,o,a,c){return this.Wo(e,t,i,o,a)}zo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,a)=>e[a]=o),i&&i.headers.forEach((o,a)=>e[a]=o)}Go(e,t){const i=Mk[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class Uk extends Fk{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,o,a){const c=Mf();return new Promise((h,p)=>{const g=new h0;g.setWithCredentials(!0),g.listenOnce(f0.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case vc.NO_ERROR:const T=g.getResponseJson();ue(Bt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),h(T);break;case vc.TIMEOUT:ue(Bt,`RPC '${e}' ${c} timed out`),p(new oe(K.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:const E=g.getStatus();if(ue(Bt,`RPC '${e}' ${c} failed with status:`,E,"response text:",g.getResponseText()),E>0){let x=g.getResponseJson();Array.isArray(x)&&(x=x[0]);const R=x?.error;if(R&&R.status&&R.message){const O=function($){const Z=$.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(Z)>=0?Z:K.UNKNOWN}(R.status);p(new oe(O,R.message))}else p(new oe(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new oe(K.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{c_:e,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ue(Bt,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(o);ue(Bt,`RPC '${e}' ${c} sending request:`,o),g.send(t,"POST",_,i,15)})}P_(e,t,i){const o=Mf(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=g0(),h=m0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=a.join("");ue(Bt,`Creating RPC '${e}' stream ${o}: ${_}`,p);const T=c.createWebChannel(_,p);this.T_(T);let E=!1,x=!1;const R=new jk({Ho:V=>{x?ue(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(E||(ue(Bt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),E=!0),ue(Bt,`RPC '${e}' stream ${o} sending:`,V),T.send(V))},Yo:()=>T.close()}),O=(V,$,Z)=>{V.listen($,W=>{try{Z(W)}catch(te){setTimeout(()=>{throw te},0)}})};return O(T,Xa.EventType.OPEN,()=>{x||(ue(Bt,`RPC '${e}' stream ${o} transport opened.`),R.s_())}),O(T,Xa.EventType.CLOSE,()=>{x||(x=!0,ue(Bt,`RPC '${e}' stream ${o} transport closed`),R.__(),this.I_(T))}),O(T,Xa.EventType.ERROR,V=>{x||(x=!0,Li(Bt,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),R.__(new oe(K.UNAVAILABLE,"The operation could not be completed")))}),O(T,Xa.EventType.MESSAGE,V=>{var $;if(!x){const Z=V.data[0];Ue(!!Z,16349);const W=Z,te=W?.error||(($=W[0])===null||$===void 0?void 0:$.error);if(te){ue(Bt,`RPC '${e}' stream ${o} received error:`,te);const ae=te.status;let se=function(C){const N=ft[C];if(N!==void 0)return Y0(N)}(ae),b=te.message;se===void 0&&(se=K.INTERNAL,b="Unknown error status: "+ae+" with message "+te.message),x=!0,R.__(new oe(se,b)),T.close()}else ue(Bt,`RPC '${e}' stream ${o} received:`,Z),R.a_(Z)}}),O(h,p0.STAT_EVENT,V=>{V.stat===Sf.PROXY?ue(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===Sf.NOPROXY&&ue(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{R.o_()},0),R}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n){return new Gx(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t,i=1e3,o=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="PersistentStream";class hw{constructor(e,t,i,o,a,c,h,p){this.Fi=e,this.w_=i,this.S_=o,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new dw(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.b_===t&&this.W_(i,o)},i=>{e(()=>{const o=new oe(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(o)})})}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(o=>{i(()=>this.G_(o))}),this.stream.onMessage(o=>{i(()=>++this.C_==1?this.j_(o):this.onNext(o))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ue(kv,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ue(kv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bk extends hw{constructor(e,t,i,o,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=Wx(this.serializer,e),i=function(a){if(!("targetChange"in a))return Ie.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Ie.min():c.readTime?ur(c.readTime):Ie.min()}(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Of(this.serializer),t.addTarget=function(a,c){let h;const p=c.target;if(h=Rf(p)?{documents:Jx(a,p)}:{query:Yx(a,p).Vt},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=ew(a,c.resumeToken);const g=Nf(a,c.expectedCount);g!==null&&(h.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ie.min())>0){h.readTime=Uc(a,c.snapshotVersion.toTimestamp());const g=Nf(a,c.expectedCount);g!==null&&(h.expectedCount=g)}return h}(this.serializer,e);const i=Zx(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Of(this.serializer),t.removeTarget=e,this.k_(t)}}class zk extends hw{constructor(e,t,i,o,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=Qx(e.writeResults,e.commitTime),i=ur(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Of(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Kx(this.serializer,i))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{}class Gk extends $k{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ra=!1}ia(){if(this.ra)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Wo(e,Df(t,i),o,a,c)).catch(a=>{throw a.name==="FirebaseError"?(a.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(K.UNKNOWN,a.toString())})}Jo(e,t,i,o,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Jo(e,Df(t,i),o,c,h,a)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe(K.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Hk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Wr(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class qk{constructor(e,t,i,o,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{Ns(this)&&(ue(ks,"Restarting streams for network reachability change."),await async function(p){const g=Se(p);g.Ia.add(4),await Ll(g),g.Aa.set("Unknown"),g.Ia.delete(4),await fd(g)}(this))})}),this.Aa=new Hk(i,o)}}async function fd(n){if(Ns(n))for(const e of n.da)await e(!0)}async function Ll(n){for(const e of n.da)await e(!1)}function fw(n,e){const t=Se(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Sp(t)?Ip(t):Xo(t).x_()&&Tp(t,e))}function Ep(n,e){const t=Se(n),i=Xo(t);t.Ta.delete(e),i.x_()&&pw(t,e),t.Ta.size===0&&(i.x_()?i.B_():Ns(t)&&t.Aa.set("Unknown"))}function Tp(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xo(n).H_(e)}function pw(n,e){n.Ra.$e(e),Xo(n).Y_(e)}function Ip(n){n.Ra=new Ux({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),Xo(n).start(),n.Aa.aa()}function Sp(n){return Ns(n)&&!Xo(n).M_()&&n.Ta.size>0}function Ns(n){return Se(n).Ia.size===0}function mw(n){n.Ra=void 0}async function Wk(n){n.Aa.set("Online")}async function Kk(n){n.Ta.forEach((e,t)=>{Tp(n,e)})}async function Qk(n,e){mw(n),Sp(n)?(n.Aa.la(e),Ip(n)):n.Aa.set("Unknown")}async function Jk(n,e,t){if(n.Aa.set("Online"),e instanceof Z0&&e.state===2&&e.cause)try{await async function(o,a){const c=a.cause;for(const h of a.targetIds)o.Ta.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ta.delete(h),o.Ra.removeTarget(h))}(n,e)}catch(i){ue(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await zc(n,i)}else if(e instanceof Tc?n.Ra.Ye(e):e instanceof X0?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ie.min()))try{const i=await cw(n.localStore);t.compareTo(i)>=0&&await function(a,c){const h=a.Ra.Pt(c);return h.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=a.Ta.get(g);_&&a.Ta.set(g,_.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,g)=>{const _=a.Ta.get(p);if(!_)return;a.Ta.set(p,_.withResumeToken(Lt.EMPTY_BYTE_STRING,_.snapshotVersion)),pw(a,p);const T=new xi(_.target,p,g,_.sequenceNumber);Tp(a,T)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){ue(ks,"Failed to raise snapshot:",i),await zc(n,i)}}async function zc(n,e,t){if(!Yo(e))throw e;n.Ia.add(1),await Ll(n),n.Aa.set("Offline"),t||(t=()=>cw(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(ks,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await fd(n)})}function gw(n,e){return e().catch(t=>zc(n,t,e))}async function pd(n){const e=Se(n),t=ji(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:lp;for(;Yk(e);)try{const o=await Nk(e.localStore,i);if(o===null){e.Pa.length===0&&t.B_();break}i=o.batchId,Xk(e,o)}catch(o){await zc(e,o)}yw(e)&&vw(e)}function Yk(n){return Ns(n)&&n.Pa.length<10}function Xk(n,e){n.Pa.push(e);const t=ji(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function yw(n){return Ns(n)&&!ji(n).M_()&&n.Pa.length>0}function vw(n){ji(n).start()}async function Zk(n){ji(n).na()}async function eR(n){const e=ji(n);for(const t of n.Pa)e.X_(t.mutations)}async function tR(n,e,t){const i=n.Pa.shift(),o=pp.from(i,e,t);await gw(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await pd(n)}async function nR(n,e){e&&ji(n).Z_&&await async function(i,o){if(function(c){return Fx(c)&&c!==K.ABORTED}(o.code)){const a=i.Pa.shift();ji(i).N_(),await gw(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,o)),await pd(i)}}(n,e),yw(n)&&vw(n)}async function Rv(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),ue(ks,"RemoteStore received new credentials");const i=Ns(t);t.Ia.add(3),await Ll(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await fd(t)}async function rR(n,e){const t=Se(n);e?(t.Ia.delete(2),await fd(t)):e||(t.Ia.add(2),await Ll(t),t.Aa.set("Unknown"))}function Xo(n){return n.Va||(n.Va=function(t,i,o){const a=Se(t);return a.ia(),new Bk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Zo:Wk.bind(null,n),e_:Kk.bind(null,n),n_:Qk.bind(null,n),J_:Jk.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Sp(n)?Ip(n):n.Aa.set("Unknown")):(await n.Va.stop(),mw(n))})),n.Va}function ji(n){return n.ma||(n.ma=function(t,i,o){const a=Se(t);return a.ia(),new zk(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,o)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Zk.bind(null,n),n_:nR.bind(null,n),ea:eR.bind(null,n),ta:tR.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await pd(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(ks,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t,i,o,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=a,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,a){const c=Date.now()+i,h=new Cp(e,t,c,o,a);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ap(n,e){if(Wr("AsyncQueue",`${e}: ${n}`),Yo(n))return new oe(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ge.comparator(t.key,i.key):(t,i)=>ge.comparator(t.key,i.key),this.keyedMap=Za(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,a=i.getNext().key;if(!o.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Mo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.fa=new nt(ge.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ee(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}}class $o{constructor(e,t,i,o,a,c,h,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,o,a){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new $o(e,t,Mo.emptySet(t),c,i,o,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&od(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class sR{constructor(){this.queries=bv(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const o=Se(t),a=o.queries;o.queries=bv(),a.forEach((c,h)=>{for(const p of h.wa)p.onError(i)})})(this,new oe(K.ABORTED,"Firestore shutting down"))}}function bv(){return new bs(n=>j0(n),od)}async function xp(n,e){const t=Se(n);let i=3;const o=e.query;let a=t.queries.get(o);a?!a.Sa()&&e.ba()&&(i=2):(a=new iR,i=e.ba()?0:1);try{switch(i){case 0:a.ya=await t.onListen(o,!0);break;case 1:a.ya=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=Ap(c,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Rp(t)}async function kp(n,e){const t=Se(n),i=e.query;let o=3;const a=t.queries.get(i);if(a){const c=a.wa.indexOf(e);c>=0&&(a.wa.splice(c,1),a.wa.length===0?o=e.ba()?0:1:!a.Sa()&&e.ba()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function oR(n,e){const t=Se(n);let i=!1;for(const o of e){const a=o.query,c=t.queries.get(a);if(c){for(const h of c.wa)h.Ca(o)&&(i=!0);c.ya=o}}i&&Rp(t)}function aR(n,e,t){const i=Se(n),o=i.queries.get(e);if(o)for(const a of o.wa)a.onError(t);i.queries.delete(e)}function Rp(n){n.Da.forEach(e=>{e.next()})}var Ff,Nv;(Nv=Ff||(Ff={})).Fa="default",Nv.Cache="cache";class Pp{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new $o(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=$o.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.key=e}}class ww{constructor(e){this.key=e}}class lR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Pe(),this.mutatedKeys=Pe(),this.Xa=U0(e),this.eu=new Mo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new Pv,o=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,T)=>{const E=o.get(_),x=ad(this.query,T)?T:null,R=!!E&&this.mutatedKeys.has(E.key),O=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let V=!1;E&&x?E.data.isEqual(x.data)?R!==O&&(i.track({type:3,doc:x}),V=!0):this.iu(E,x)||(i.track({type:2,doc:x}),V=!0,(p&&this.Xa(x,p)>0||g&&this.Xa(x,g)<0)&&(h=!0)):!E&&x?(i.track({type:0,doc:x}),V=!0):E&&!x&&(i.track({type:1,doc:E}),V=!0,(p||g)&&(h=!0)),V&&(x?(c=c.add(x),a=O?a.add(_):a.delete(_)):(c=c.delete(_),a=a.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:h,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((_,T)=>function(x,R){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{At:V})}};return O(x)-O(R)}(_.type,T.type)||this.Xa(_.doc,T.doc)),this.su(i),o=o!=null&&o;const h=t&&!o?this.ou():[],p=this.Za.size===0&&this.current&&!o?1:0,g=p!==this.Ya;return this.Ya=p,c.length!==0||g?{snapshot:new $o(this.query,e.eu,a,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Pv,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Pe(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new ww(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new _w(i))}),t}uu(e){this.Ha=e.qs,this.Za=Pe();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return $o.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const bp="SyncEngine";class uR{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class cR{constructor(e){this.key=e,this.lu=!1}}class dR{constructor(e,t,i,o,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new bs(h=>j0(h),od),this.Tu=new Map,this.Iu=new Set,this.du=new nt(ge.comparator),this.Eu=new Map,this.Au=new yp,this.Ru={},this.Vu=new Map,this.mu=zo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function hR(n,e,t=!0){const i=Aw(n);let o;const a=i.Pu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),o=a.view.cu()):o=await Ew(i,e,t,!0),o}async function fR(n,e){const t=Aw(n);await Ew(t,e,!0,!1)}async function Ew(n,e,t,i){const o=await Dk(n.localStore,lr(e)),a=o.targetId,c=n.sharedClientState.addLocalQueryTarget(a,t);let h;return i&&(h=await pR(n,e,a,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&fw(n.remoteStore,o),h}async function pR(n,e,t,i,o){n.gu=(T,E,x)=>async function(O,V,$,Z){let W=V.view.nu($);W.Ds&&(W=await Sv(O.localStore,V.query,!1).then(({documents:b})=>V.view.nu(b,W)));const te=Z&&Z.targetChanges.get(V.targetId),ae=Z&&Z.targetMismatches.get(V.targetId)!=null,se=V.view.applyChanges(W,O.isPrimaryClient,te,ae);return Lv(O,V.targetId,se._u),se.snapshot}(n,T,E,x);const a=await Sv(n.localStore,e,!0),c=new lR(e,a.qs),h=c.nu(a.documents),p=Dl.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),g=c.applyChanges(h,n.isPrimaryClient,p);Lv(n,t,g._u);const _=new uR(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function mR(n,e,t){const i=Se(n),o=i.Pu.get(e),a=i.Tu.get(o.targetId);if(a.length>1)return i.Tu.set(o.targetId,a.filter(c=>!od(c,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Vf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&Ep(i.remoteStore,o.targetId),jf(i,o.targetId)}).catch(Jo)):(jf(i,o.targetId),await Vf(i.localStore,o.targetId,!0))}async function gR(n,e){const t=Se(n),i=t.Pu.get(e),o=t.Tu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ep(t.remoteStore,i.targetId))}async function yR(n,e,t){const i=SR(n);try{const o=await function(c,h){const p=Se(c),g=Je.now(),_=h.reduce((x,R)=>x.add(R.key),Pe());let T,E;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>{let R=Kr(),O=Pe();return p.Os.getEntries(x,_).next(V=>{R=V,R.forEach(($,Z)=>{Z.isValidDocument()||(O=O.add($))})}).next(()=>p.localDocuments.getOverlayedDocuments(x,R)).next(V=>{T=V;const $=[];for(const Z of h){const W=Dx(Z,T.get(Z.key).overlayedDocument);W!=null&&$.push(new Gi(Z.key,W,b0(W.value.mapValue),Jt.exists(!0)))}return p.mutationQueue.addMutationBatch(x,g,$,h)}).next(V=>{E=V;const $=V.applyToLocalDocumentSet(T,O);return p.documentOverlayCache.saveOverlays(x,V.batchId,$)})}).then(()=>({batchId:E.batchId,changes:z0(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,h,p){let g=c.Ru[c.currentUser.toKey()];g||(g=new nt(Ae)),g=g.insert(h,p),c.Ru[c.currentUser.toKey()]=g}(i,o.batchId,t),await Ol(i,o.changes),await pd(i.remoteStore)}catch(o){const a=Ap(o,"Failed to persist write");t.reject(a)}}async function Tw(n,e){const t=Se(n);try{const i=await Pk(t.localStore,e);e.targetChanges.forEach((o,a)=>{const c=t.Eu.get(a);c&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.lu=!0:o.modifiedDocuments.size>0?Ue(c.lu,14607):o.removedDocuments.size>0&&(Ue(c.lu,42227),c.lu=!1))}),await Ol(t,i,e)}catch(i){await Jo(i)}}function Dv(n,e,t){const i=Se(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Pu.forEach((a,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)}),function(c,h){const p=Se(c);p.onlineState=h;let g=!1;p.queries.forEach((_,T)=>{for(const E of T.wa)E.va(h)&&(g=!0)}),g&&Rp(p)}(i.eventManager,e),o.length&&i.hu.J_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function vR(n,e,t){const i=Se(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Eu.get(e),a=o&&o.key;if(a){let c=new nt(ge.comparator);c=c.insert(a,$t.newNoDocument(a,Ie.min()));const h=Pe().add(a),p=new dd(Ie.min(),new Map,new nt(Ae),c,h);await Tw(i,p),i.du=i.du.remove(a),i.Eu.delete(e),Np(i)}else await Vf(i.localStore,e,!1).then(()=>jf(i,e,t)).catch(Jo)}async function _R(n,e){const t=Se(n),i=e.batch.batchId;try{const o=await Rk(t.localStore,e);Sw(t,i,null),Iw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ol(t,o)}catch(o){await Jo(o)}}async function wR(n,e,t){const i=Se(n);try{const o=await function(c,h){const p=Se(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,h).next(T=>(Ue(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(g,T))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(i.localStore,e);Sw(i,e,t),Iw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ol(i,o)}catch(o){await Jo(o)}}function Iw(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function Sw(n,e,t){const i=Se(n);let o=i.Ru[i.currentUser.toKey()];if(o){const a=o.get(e);a&&(t?a.reject(t):a.resolve(),o=o.remove(e)),i.Ru[i.currentUser.toKey()]=o}}function jf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||Cw(n,i)})}function Cw(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ep(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Np(n))}function Lv(n,e,t){for(const i of t)i instanceof _w?(n.Au.addReference(i.key,e),ER(n,i)):i instanceof ww?(ue(bp,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||Cw(n,i.key)):Ee(19791,{yu:i})}function ER(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ue(bp,"New document in limbo: "+t),n.Iu.add(i),Np(n))}function Np(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ge(We.fromString(e)),i=n.mu.next();n.Eu.set(i,new cR(t)),n.du=n.du.insert(t,i),fw(n.remoteStore,new xi(lr(sd(t.path)),i,"TargetPurposeLimboResolution",nd.ue))}}async function Ol(n,e,t){const i=Se(n),o=[],a=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((h,p)=>{c.push(i.gu(p,e,t).then(g=>{var _;if((g||t)&&i.isPrimaryClient){const T=g?!g.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(g){o.push(g);const T=_p.Es(p.targetId,g);a.push(T)}}))}),await Promise.all(c),i.hu.J_(o),await async function(p,g){const _=Se(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>Q.forEach(g,E=>Q.forEach(E.Is,x=>_.persistence.referenceDelegate.addReference(T,E.targetId,x)).next(()=>Q.forEach(E.ds,x=>_.persistence.referenceDelegate.removeReference(T,E.targetId,x)))))}catch(T){if(!Yo(T))throw T;ue(wp,"Failed to update sequence numbers: "+T)}for(const T of g){const E=T.targetId;if(!T.fromCache){const x=_.Fs.get(E),R=x.snapshotVersion,O=x.withLastLimboFreeSnapshotVersion(R);_.Fs=_.Fs.insert(E,O)}}}(i.localStore,a))}async function TR(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){ue(bp,"User change. New user:",e.toKey());const i=await uw(t.localStore,e);t.currentUser=e,function(a,c){a.Vu.forEach(h=>{h.forEach(p=>{p.reject(new oe(K.CANCELLED,c))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ol(t,i.Bs)}}function IR(n,e){const t=Se(n),i=t.Eu.get(e);if(i&&i.lu)return Pe().add(i.key);{let o=Pe();const a=t.Tu.get(e);if(!a)return o;for(const c of a){const h=t.Pu.get(c);o=o.unionWith(h.view.tu)}return o}}function Aw(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vR.bind(null,e),e.hu.J_=oR.bind(null,e.eventManager),e.hu.pu=aR.bind(null,e.eventManager),e}function SR(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_R.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wR.bind(null,e),e}class $c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return kk(this.persistence,new Ck,e.initialUser,this.serializer)}Du(e){return new lw(vp.Vi,this.serializer)}bu(e){return new Ok}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$c.provider={build:()=>new $c};class CR extends $c{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ue(this.persistence.referenceDelegate instanceof Bc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ck(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new lw(i=>Bc.Vi(i,t),this.serializer)}}class Uf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Dv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=TR.bind(null,this.syncEngine),await rR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sR}()}createDatastore(e){const t=hd(e.databaseInfo.databaseId),i=function(a){return new Uk(a)}(e.databaseInfo);return function(a,c,h,p){return new Gk(a,c,h,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,a,c,h){return new qk(i,o,a,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>Dv(this.syncEngine,t,0),function(){return xv.C()?new xv:new Vk}())}createSyncEngine(e,t){return function(o,a,c,h,p,g,_){const T=new dR(o,a,c,h,p,g);return _&&(T.fu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const a=Se(o);ue(ks,"RemoteStore shutting down."),a.Ia.add(5),await Ll(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Uf.provider={build:()=>new Uf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="FirestoreClient";class AR{constructor(e,t,i,o,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=zt.UNAUTHENTICATED,this.clientId=ap.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async c=>{ue(Ui,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ue(Ui,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ap(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function cf(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Ui,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await uw(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>{Li("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(o=>{Li("Terminating Firestore due to IndexedDb database deletion failed",o)})}),n._offlineComponents=e}async function Ov(n,e){n.asyncQueue.verifyOperationInProgress();const t=await xR(n);ue(Ui,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Rv(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Rv(e.remoteStore,o)),n._onlineComponents=e}async function xR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Ui,"Using user provided OfflineComponentProvider");try{await cf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Li("Error using user provided cache. Falling back to memory cache: "+t),await cf(n,new $c)}}else ue(Ui,"Using default OfflineComponentProvider"),await cf(n,new CR(void 0));return n._offlineComponents}async function xw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Ui,"Using user provided OnlineComponentProvider"),await Ov(n,n._uninitializedComponentsProvider._online)):(ue(Ui,"Using default OnlineComponentProvider"),await Ov(n,new Uf))),n._onlineComponents}function kR(n){return xw(n).then(e=>e.syncEngine)}async function Gc(n){const e=await xw(n),t=e.eventManager;return t.onListen=hR.bind(null,e.syncEngine),t.onUnlisten=mR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=fR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gR.bind(null,e.syncEngine),t}function RR(n,e,t={}){const i=new zr;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,h,p,g){const _=new Dp({next:E=>{_.Ou(),c.enqueueAndForget(()=>kp(a,T));const x=E.docs.has(h);!x&&E.fromCache?g.reject(new oe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&E.fromCache&&p&&p.source==="server"?g.reject(new oe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(E)},error:E=>g.reject(E)}),T=new Pp(sd(h.path),_,{includeMetadataChanges:!0,ka:!0});return xp(a,T)}(await Gc(n),n.asyncQueue,e,t,i)),i.promise}function PR(n,e,t={}){const i=new zr;return n.asyncQueue.enqueueAndForget(async()=>function(a,c,h,p,g){const _=new Dp({next:E=>{_.Ou(),c.enqueueAndForget(()=>kp(a,T)),E.fromCache&&p.source==="server"?g.reject(new oe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(E)},error:E=>g.reject(E)}),T=new Pp(h,_,{includeMetadataChanges:!0,ka:!0});return xp(a,T)}(await Gc(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="firestore.googleapis.com",Mv=!0;class Fv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rw,this.ssl=Mv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lk)throw new oe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class md{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new M1;switch(i.type){case"firstParty":return new B1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new oe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Vv.get(t);i&&(ue("ComponentProvider","Removing Datastore"),Vv.delete(t),i.terminate())}(this),Promise.resolve()}}function bR(n,e,t,i={}){var o;n=Qt(n,md);const a=qo(e),c=n._getSettings(),h=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;a&&(w_(`https://${p}`),E_("Firestore",!0)),c.host!==Rw&&c.host!==p&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:p,ssl:a,emulatorOptions:i});if(!Is(g,h)&&(n._setSettings(g),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=zt.MOCK_USER;else{_=HI(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new oe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new zt(E)}n._authCredentials=new F1(new v0(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class it{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new it(this.firestore,e,this._key)}toJSON(){return{type:it._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Pl(t,it._jsonSchema))return new it(e,i||null,new ge(We.fromString(t.referencePath)))}}it._jsonSchemaVersion="firestore/documentReference/1.0",it._jsonSchema={type:mt("string",it._jsonSchemaVersion),referencePath:mt("string")};class Di extends Ds{constructor(e,t,i){super(e,t,sd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new it(this.firestore,null,new ge(e))}withConverter(e){return new Di(this.firestore,e,this._path)}}function jr(n,e,...t){if(n=ct(n),w0("collection","path",e),n instanceof md){const i=We.fromString(e,...t);return Yy(i),new Di(n,null,i)}{if(!(n instanceof it||n instanceof Di))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return Yy(i),new Di(n.firestore,null,i)}}function ut(n,e,...t){if(n=ct(n),arguments.length===1&&(e=ap.newId()),w0("doc","path",e),n instanceof md){const i=We.fromString(e,...t);return Jy(i),new it(n,null,new ge(i))}{if(!(n instanceof it||n instanceof Di))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return Jy(i),new it(n.firestore,n instanceof Di?n.converter:null,new ge(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="AsyncQueue";class Uv{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new dw(this,"async_queue_retry"),this.oc=()=>{const i=uf();i&&ue(jv,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new zr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Yo(e))throw e;ue(jv,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Wr("INTERNAL UNHANDLED ERROR: ",Bv(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const o=Cp.createAndSchedule(this,e,t,i,a=>this.lc(a));return this.ec.push(o),o}ac(){this.tc&&Ee(47125,{hc:Bv(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Bv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zv(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const a of i)if(a in o&&typeof o[a]=="function")return!0;return!1}(n,["next","error","complete"])}class pr extends md{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Uv,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uv(e),this._firestoreClient=void 0,await e}}}function NR(n,e){const t=typeof n=="object"?n:C_(),i=typeof n=="string"?n:Oc,o=Jf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const a=$I("firestore");a&&bR(o,...a)}return o}function Vl(n){if(n._terminated)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||DR(n),n._firestoreClient}function DR(n){var e,t,i;const o=n._freezeSettings(),a=function(h,p,g,_){return new rx(h,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,kw(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new AR(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const p=h?._online.build();return{_offline:h?._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(Lt.fromBase64String(e))}catch(t){throw new oe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kn(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pl(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:mt("string",kn._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cr._jsonSchemaVersion}}static fromJSON(e){if(Pl(e,cr._jsonSchema))return new cr(e.latitude,e.longitude)}}cr._jsonSchemaVersion="firestore/geoPoint/1.0",cr._jsonSchema={type:mt("string",cr._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pl(e,dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new dr(e.vectorValues);throw new oe(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}dr._jsonSchemaVersion="firestore/vectorValue/1.0",dr._jsonSchema={type:mt("string",dr._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=/^__.*__$/;class OR{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nl(e,this.data,t,this.fieldTransforms)}}class Pw{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Gi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ec:n})}}class Lp{constructor(e,t,i,o,a,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.fc(e),o}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Rc({path:i,mc:!1});return o.Ac(),o}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Hc(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(bw(this.Ec)&&LR.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class VR{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hd(e)}Dc(e,t,i,o=!1){return new Lp({Ec:e,methodName:t,bc:i,path:Dt.emptyPath(),mc:!1,Sc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fl(n){const e=n._freezeSettings(),t=hd(n._databaseId);return new VR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Op(n,e,t,i,o,a={}){const c=n.Dc(a.merge||a.mergeFields?2:0,e,t,o);Mp("Data must be an object, but it was:",c,i);const h=Lw(i,c);let p,g;if(a.merge)p=new gn(c.fieldMask),g=c.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const E=Bf(e,T,t);if(!c.contains(E))throw new oe(K.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);Vw(_,E)||_.push(E)}p=new gn(_),g=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,g=c.fieldTransforms;return new OR(new an(h),p,g)}class yd extends gd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yd}}class Vp extends gd{_toFieldTransform(e){return new Rx(e.path,new yl)}isEqual(e){return e instanceof Vp}}function Nw(n,e,t,i){const o=n.Dc(1,e,t);Mp("Data must be an object, but it was:",o,i);const a=[],c=an.empty();$i(i,(p,g)=>{const _=Fp(e,p,t);g=ct(g);const T=o.gc(_);if(g instanceof yd)a.push(_);else{const E=jl(g,T);E!=null&&(a.push(_),c.set(_,E))}});const h=new gn(a);return new Pw(c,h,o.fieldTransforms)}function Dw(n,e,t,i,o,a){const c=n.Dc(1,e,t),h=[Bf(e,i,t)],p=[o];if(a.length%2!=0)throw new oe(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)h.push(Bf(e,a[E])),p.push(a[E+1]);const g=[],_=an.empty();for(let E=h.length-1;E>=0;--E)if(!Vw(g,h[E])){const x=h[E];let R=p[E];R=ct(R);const O=c.gc(x);if(R instanceof yd)g.push(x);else{const V=jl(R,O);V!=null&&(g.push(x),_.set(x,V))}}const T=new gn(g);return new Pw(_,T,c.fieldTransforms)}function MR(n,e,t,i=!1){return jl(t,n.Dc(i?4:3,e))}function jl(n,e){if(Ow(n=ct(n)))return Mp("Unsupported field value:",e,n),Lw(n,e);if(n instanceof gd)return function(i,o){if(!bw(o.Ec))throw o.wc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.wc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(o);a&&o.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,o){const a=[];let c=0;for(const h of i){let p=jl(h,o.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),a.push(p),c++}return{arrayValue:{values:a}}}(n,e)}return function(i,o){if((i=ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Ax(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Je.fromDate(i);return{timestampValue:Uc(o.serializer,a)}}if(i instanceof Je){const a=new Je(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Uc(o.serializer,a)}}if(i instanceof cr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof kn)return{bytesValue:ew(o.serializer,i._byteString)};if(i instanceof it){const a=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(a))throw o.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:gp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof dr)return function(c,h){return{mapValue:{fields:{[R0]:{stringValue:P0},[Vc]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw h.wc("VectorValues must only contain numeric values.");return fp(h.serializer,g)})}}}}}}(i,o);throw o.wc(`Unsupported field value: ${td(i)}`)}(n,e)}function Lw(n,e){const t={};return I0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$i(n,(i,o)=>{const a=jl(o,e.Vc(i));a!=null&&(t[i]=a)}),{mapValue:{fields:t}}}function Ow(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Je||n instanceof cr||n instanceof kn||n instanceof it||n instanceof gd||n instanceof dr)}function Mp(n,e,t){if(!Ow(t)||!E0(t)){const i=td(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Bf(n,e,t){if((e=ct(e))instanceof Ml)return e._internalPath;if(typeof e=="string")return Fp(n,e);throw Hc("Field path arguments must be of type string or ",n,!1,void 0,t)}const FR=new RegExp("[~\\*/\\[\\]]");function Fp(n,e,t){if(e.search(FR)>=0)throw Hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ml(...e.split("."))._internalPath}catch{throw Hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hc(n,e,t,i,o){const a=i&&!i.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(a||c)&&(p+=" (found",a&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new oe(K.INVALID_ARGUMENT,h+n+p)}function Vw(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t,i,o,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new it(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jR extends Mw{data(){return super.data()}}function jp(n,e){return typeof e=="string"?Fp(n,e):e instanceof Ml?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Up{}class UR extends Up{}function ki(n,e,...t){let i=[];e instanceof Up&&i.push(e),i=i.concat(t),function(a){const c=a.filter(p=>p instanceof Bp).length,h=a.filter(p=>p instanceof vd).length;if(c>1||c>0&&h>0)throw new oe(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)n=o._apply(n);return n}class vd extends UR{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new vd(e,t,i)}_apply(e){const t=this._parse(e);return jw(e._query,t),new Ds(e.firestore,e.converter,Pf(e._query,t))}_parse(e){const t=Fl(e.firestore);return function(a,c,h,p,g,_,T){let E;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new oe(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Gv(T,_);const R=[];for(const O of T)R.push($v(p,a,O));E={arrayValue:{values:R}}}else E=$v(p,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Gv(T,_),E=MR(h,c,T,_==="in"||_==="not-in");return pt.create(g,_,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function mn(n,e,t){const i=e,o=jp("where",n);return vd._create(o,i,t)}class Bp extends Up{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bp(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,a){let c=o;const h=a.getFlattenedFilters();for(const p of h)jw(c,p),c=Pf(c,p)}(e._query,t),new Ds(e.firestore,e.converter,Pf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function $v(n,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new oe(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F0(e)&&t.indexOf("/")!==-1)throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(We.fromString(t));if(!ge.isDocumentKey(i))throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return sv(n,new ge(i))}if(t instanceof it)return sv(n,t._key);throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${td(t)}.`)}function Gv(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jw(n,e){const t=function(o,a){for(const c of o)for(const h of c.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BR{convertValue(e,t="none"){switch(Fi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return $i(e,(o,a)=>{i[o]=this.convertValue(a,t)}),i}convertVectorValue(e){var t,i,o;const a=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[Vc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>lt(c.doubleValue));return new dr(a)}convertGeoPoint(e){return new cr(lt(e.latitude),lt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=id(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(pl(e));default:return null}}convertTimestamp(e){const t=Vi(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=We.fromString(e);Ue(ow(i),9688,{name:e});const o=new ml(i.get(1),i.get(3)),a=new ge(i.popFirst(5));return o.isEqual(t)||Wr(`Document ${a} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class tl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Es extends Mw{constructor(e,t,i,o,a,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(jp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Es._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Es._jsonSchemaVersion="firestore/documentSnapshot/1.0",Es._jsonSchema={type:mt("string",Es._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class Ic extends Es{data(e={}){return super.data(e)}}class Ts{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new tl(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Ic(this._firestore,this._userDataWriter,i.key,i,new tl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,a){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(h=>{const p=new Ic(o._firestore,o._userDataWriter,h.doc.key,h.doc,new tl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const p=new Ic(o._firestore,o._userDataWriter,h.doc.key,h.doc,new tl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return h.type!==0&&(g=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),_=c.indexOf(h.doc.key)),{type:zR(h.type),doc:p,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ts._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ap.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),o.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n){n=Qt(n,it);const e=Qt(n.firestore,pr);return RR(Vl(e),n._key).then(t=>zw(e,n,t))}Ts._jsonSchemaVersion="firestore/querySnapshot/1.0",Ts._jsonSchema={type:mt("string",Ts._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class $p extends BR{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new it(this.firestore,null,t)}}function Hv(n){n=Qt(n,Ds);const e=Qt(n.firestore,pr),t=Vl(e),i=new $p(e);return Fw(n._query),PR(t,n._query).then(o=>new Ts(e,i,n,o))}function Uw(n,e,t){n=Qt(n,it);const i=Qt(n.firestore,pr),o=zp(n.converter,e,t);return Ul(i,[Op(Fl(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Jt.none())])}function $r(n,e,t,...i){n=Qt(n,it);const o=Qt(n.firestore,pr),a=Fl(o);let c;return c=typeof(e=ct(e))=="string"||e instanceof Ml?Dw(a,"updateDoc",n._key,e,t,i):Nw(a,"updateDoc",n._key,e),Ul(o,[c.toMutation(n._key,Jt.exists(!0))])}function qv(n){return Ul(Qt(n.firestore,pr),[new cd(n._key,Jt.none())])}function Bw(n,e){const t=Qt(n.firestore,pr),i=ut(n),o=zp(n.converter,e);return Ul(t,[Op(Fl(n.firestore),"addDoc",i._key,o,n.converter!==null,{}).toMutation(i._key,Jt.exists(!1))]).then(()=>i)}function Qr(n,...e){var t,i,o;n=ct(n);let a={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||zv(e[c])||(a=e[c++]);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(zv(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[c+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,g,_;if(n instanceof it)g=Qt(n.firestore,pr),_=sd(n._key.path),p={next:T=>{e[c]&&e[c](zw(g,n,T))},error:e[c+1],complete:e[c+2]};else{const T=Qt(n,Ds);g=Qt(T.firestore,pr),_=T._query;const E=new $p(g);p={next:x=>{e[c]&&e[c](new Ts(g,E,T,x))},error:e[c+1],complete:e[c+2]},Fw(n._query)}return function(E,x,R,O){const V=new Dp(O),$=new Pp(x,V,R);return E.asyncQueue.enqueueAndForget(async()=>xp(await Gc(E),$)),()=>{V.Ou(),E.asyncQueue.enqueueAndForget(async()=>kp(await Gc(E),$))}}(Vl(g),_,h,p)}function Ul(n,e){return function(i,o){const a=new zr;return i.asyncQueue.enqueueAndForget(async()=>yR(await kR(i),o,a)),a.promise}(Vl(n),e)}function zw(n,e,t){const i=t.docs.get(e._key),o=new $p(n);return new Es(n,o,e._key,i,new tl(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Fl(e)}set(e,t,i){this._verifyNotCommitted();const o=df(e,this._firestore),a=zp(o.converter,t,i),c=Op(this._dataReader,"WriteBatch.set",o._key,a,o.converter!==null,i);return this._mutations.push(c.toMutation(o._key,Jt.none())),this}update(e,t,i,...o){this._verifyNotCommitted();const a=df(e,this._firestore);let c;return c=typeof(t=ct(t))=="string"||t instanceof Ml?Dw(this._dataReader,"WriteBatch.update",a._key,t,i,o):Nw(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Jt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=df(e,this._firestore);return this._mutations=this._mutations.concat(new cd(t._key,Jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function df(n,e){if((n=ct(n)).firestore!==e)throw new oe(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function qc(){return new Vp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(n){return Vl(n=Qt(n,pr)),new GR(n,e=>Ul(n,e))}(function(e,t=!0){(function(o){Qo=o})(Wo),Fo(new Ss("firestore",(i,{instanceIdentifier:o,options:a})=>{const c=i.getProvider("app").getImmediate(),h=new pr(new j1(i.getProvider("auth-internal")),new z1(c,i.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new oe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ml(g.options.projectId,_)}(c,o),c);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),bi(Hy,qy,e),bi(Hy,qy,"esm2017")})();const HR={apiKey:"AIzaSyAtHGfl2GwWOaNO5GlJbwYP8U10lNSnz68",authDomain:"smite2pbsimulator.firebaseapp.com",projectId:"smite2pbsimulator",storageBucket:"smite2pbsimulator.appspot.com",messagingSenderId:"1019891524633",appId:"1:1019891524633:web:43b4556d609bed2c03f688"},Gw=S_(HR),je=NR(Gw),yr=R1(Gw);X_(yr,n=>{n?console.log("User signed in with UID:",n.uid):console.log("User is signed out.")});const Bl=()=>{const[n]=Rl(yr),[e,t]=F.useState(null),[i,o]=F.useState(!0),[a,c]=F.useState(null);return F.useEffect(()=>{if(!n){t(null),o(!1);return}const h=ut(je,"users",n.uid),p=Qr(h,g=>{g.exists()?t({id:g.id,...g.data()}):c("User profile not found in the database."),o(!1)},g=>{c("Failed to fetch user profile."),o(!1)});return()=>p()},[n]),{user:n,userProfile:e,loading:i,error:a}},ll=[{id:33,name:"Aladdin",image:"https://wiki.smite2.com/images/thumb/GodCard_Aladdin.png/720px-GodCard_Aladdin.png?87e68",roles:["Jungle","Mid","Carry"],skins:[""],voiceLine:"",position:"center 25%"},{id:11,name:"Agni",image:"https://wiki.smite2.com/images/thumb/GodCard_Agni.png/720px-GodCard_Agni.png?87e68",roles:["Mid","Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:27,name:"Achilles",image:"https://wiki.smite2.com/images/thumb/GodCard_Achilles.png/720px-GodCard_Achilles.png?3ef24",roles:["Solo","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:28,name:"Amaterasu",image:"https://wiki.smite2.com/images/thumb/GodCard_Amaterasu.png/720px-GodCard_Amaterasu.png?dad20",roles:["Solo","Jungle"],skins:[""],voiceLine:"",position:"center 25%"},{id:42,name:"Anhur",image:"https://wiki.smite2.com/images/thumb/GodCard_Anhur.png/720px-GodCard_Anhur.png?dad20",roles:["Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:13,name:"Anubis",image:"https://wiki.smite2.com/images/thumb/GodCard_Anubis.png/720px-GodCard_Anubis.png?7859a",roles:["Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:63,name:"Aphrodite",image:"https://wiki.smite2.com/images/thumb/GodCard_Aphrodite.png/720px-GodCard_Aphrodite.png?7859a",roles:["Support","Mid","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:43,name:"Apollo",image:"https://wiki.smite2.com/images/thumb/GodCard_Apollo.png/720px-GodCard_Apollo.png?184d1",roles:["Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:1,name:"Ares",image:"https://wiki.smite2.com/images/thumb/GodCard_Ares.png/720px-GodCard_Ares.png?7859a",roles:["Support","Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:44,name:"Artemis",image:"https://wiki.smite2.com/images/thumb/GodCard_Artemis.png/720px-GodCard_Artemis.png?ac80c",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:2,name:"Athena",image:"https://wiki.smite2.com/images/thumb/GodCard_Athena.png/360px-GodCard_Athena.png?b6c55",roles:["Support","Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:34,name:"Awilix",image:"https://wiki.smite2.com/images/thumb/GodCard_Awilix.png/720px-GodCard_Awilix.png?381d1",roles:["Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:3,name:"Bacchus",image:"https://wiki.smite2.com/images/thumb/GodCard_Bacchus.png/720px-GodCard_Bacchus.png?b6c55",roles:["Support","Solo"],skins:[""],voiceLine:"",position:"center 25%"},{id:64,name:"Baron Samedi",image:"https://wiki.smite2.com/images/thumb/GodCard_Baron_Samedi.png/720px-GodCard_Baron_Samedi.png?75202",roles:["Support","Solo","Mid"],skins:[""],voiceLine:"",position:"center 10%"},{id:29,name:"Bellona",image:"https://wiki.smite2.com/images/thumb/GodCard_Bellona.png/720px-GodCard_Bellona.png?b6c55",roles:["Solo","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:4,name:"Cabrakan",image:"https://wiki.smite2.com/images/thumb/GodCard_Cabrakan.png/720px-GodCard_Cabrakan.png?381d1",roles:["Solo","Jungle","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:5,name:"Cerberus",image:"https://wiki.smite2.com/images/thumb/GodCard_Cerberus.png/720px-GodCard_Cerberus.png?ac80c",roles:["Solo","Support"],skins:[""],voiceLine:"",position:"center 30%"},{id:45,name:"Cernunnos",image:"https://wiki.smite2.com/images/thumb/GodCard_Cernunnos.png/720px-GodCard_Cernunnos.png?ac80c",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:30,name:"Chaac",image:"https://wiki.smite2.com/images/thumb/GodCard_Chaac.png/720px-GodCard_Chaac.png?381d1",roles:["Solo","Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:46,name:"Cupid",image:"https://wiki.smite2.com/images/thumb/GodCard_Cupid.png/720px-GodCard_Cupid.png?ac80c",roles:["Carry","Support"],skins:[""],voiceLine:"",position:"center 25%"},{id:47,name:"Danzaburou",image:"https://wiki.smite2.com/images/thumb/GodCard_Danzaburou.png/720px-GodCard_Danzaburou.png?75202",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:35,name:"Fenrir",image:"https://wiki.smite2.com/images/thumb/GodCard_Fenrir.png/720px-GodCard_Fenrir.png?87e68",roles:["Jungle","Support","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:70,name:"Ganesha",image:"https://wiki.smite2.com/images/thumb/GodCard_Ganesha.png/720px-GodCard_Ganesha.png?57532",roles:["Support","Solo"],skins:[""],voiceLine:"",position:"center 25%"},{id:7,name:"Geb",image:"https://wiki.smite2.com/images/thumb/GodCard_Geb.png/720px-GodCard_Geb.png?ac80c",roles:["Support","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:31,name:"Guan Yu",image:"https://wiki.smite2.com/images/thumb/GodCard_Guan_Yu.png/720px-GodCard_Guan_Yu.png?ac80c",roles:["Solo","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:65,name:"Hades",image:"https://wiki.smite2.com/images/thumb/GodCard_Hades.png/720px-GodCard_Hades.png?75202",roles:["Solo","Support","Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:66,name:"Hecate",image:"https://wiki.smite2.com/images/thumb/GodCard_Hecate.png/720px-GodCard_Hecate.png?75202",roles:["Support","Mid"],skins:[""],voiceLine:"",position:"center 10%"},{id:57,name:"Hercules",image:"https://wiki.smite2.com/images/thumb/GodCard_Hercules.png/720px-GodCard_Hercules.png?75202",roles:["Solo","Support","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:32,name:"Mulan",image:"https://wiki.smite2.com/images/thumb/GodCard_Hua_Mulan.png/720px-GodCard_Hua_Mulan.png?87e68",roles:["Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:60,name:"Hun Batz",image:"https://wiki.smite2.com/images/thumb/GodCard_Hun_Batz.png/720px-GodCard_Hun_Batz.png?cc9cb",roles:["Jungle","Support","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:48,name:"Izanami",image:"https://wiki.smite2.com/images/thumb/GodCard_Izanami.png/720px-GodCard_Izanami.png?87e68",roles:["Carry"],skins:[""],voiceLine:"",position:"center 25%"},{id:49,name:"Jing Wei",image:"https://wiki.smite2.com/images/thumb/GodCard_Jing_Wei.png/720px-GodCard_Jing_Wei.png?87e68",roles:["Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:36,name:"Kali",image:"https://wiki.smite2.com/images/thumb/GodCard_Kali.png/720px-GodCard_Kali.png?cc9cb",roles:["Jungle","Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:8,name:"Khepri",image:"https://wiki.smite2.com/images/thumb/GodCard_Khepri.png/720px-GodCard_Khepri.png?cc9cb",roles:["Support"],skins:[""],voiceLine:"",position:"center 35%"},{id:18,name:"Kukulkan",image:"https://wiki.smite2.com/images/thumb/GodCard_Kukulkan.png/720px-GodCard_Kukulkan.png?cc9cb",roles:["Mid"],skins:[""],voiceLine:"",position:"center 30%"},{id:37,name:"Loki",image:"https://wiki.smite2.com/images/thumb/GodCard_Loki.png/720px-GodCard_Loki.png?cc9cb",roles:["Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:50,name:"Medusa",image:"https://wiki.smite2.com/images/thumb/GodCard_Medusa.png/720px-GodCard_Medusa.png?e757b",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 30%"},{id:38,name:"Mercury",image:"https://wiki.smite2.com/images/thumb/GodCard_Mercury.png/720px-GodCard_Mercury.png?7520c",roles:["Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:19,name:"Merlin",image:"https://wiki.smite2.com/images/thumb/GodCard_Merlin.png/720px-GodCard_Merlin.png?544c9",roles:["Mid","Solo"],skins:[""],voiceLine:"",position:"center 15%"},{id:67,name:"Mordred",image:"https://wiki.smite2.com/images/thumb/GodCard_Mordred.png/720px-GodCard_Mordred.png?b6c55",roles:["Solo","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:51,name:"Neith",image:"https://wiki.smite2.com/images/thumb/GodCard_Neith.png/720px-GodCard_Neith.png?e757b",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 25%"},{id:39,name:"Nemesis",image:"https://wiki.smite2.com/images/thumb/GodCard_Nemesis.png/720px-GodCard_Nemesis.png?87e68",roles:["Jungle","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:20,name:"Nu Wa",image:"https://wiki.smite2.com/images/thumb/GodCard_Nu_Wa.png/720px-GodCard_Nu_Wa.png?75202",roles:["Mid","Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:58,name:"Odin",image:"https://wiki.smite2.com/images/thumb/GodCard_Odin.png/720px-GodCard_Odin.png?87e68",roles:["Solo","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:61,name:"Pele",image:"https://wiki.smite2.com/images/thumb/GodCard_Pele.png/720px-GodCard_Pele.png?cc9cb",roles:["Jungle","Mid","Carry","Solo"],skins:[""],voiceLine:"",position:"center 25%"},{id:21,name:"Poseidon",image:"https://wiki.smite2.com/images/thumb/GodCard_Poseidon.png/720px-GodCard_Poseidon.png?dcbb5",roles:["Mid","Carry","Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:68,name:"Princess Bari",image:"https://wiki.smite2.com/images/thumb/GodCard_Princess_Bari.png/720px-GodCard_Princess_Bari.png?cc9cb",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:55,name:"Ra",image:"https://wiki.smite2.com/images/thumb/GodCard_Ra.png/720px-GodCard_Ra.png?b6c55",roles:["Mid","Solo"],skins:[""],voiceLine:"",position:"center 15%"},{id:52,name:"Rama",image:"https://wiki.smite2.com/images/thumb/GodCard_Rama.png/720px-GodCard_Rama.png?cc9cb",roles:["Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:23,name:"Scylla",image:"https://wiki.smite2.com/images/thumb/GodCard_Scylla.png/720px-GodCard_Scylla.png?c2048",roles:["Mid"],skins:[""],voiceLine:"",position:"center 25%"},{id:9,name:"Sobek",image:"https://wiki.smite2.com/images/thumb/GodCard_Sobek.png/720px-GodCard_Sobek.png?b6c55",roles:["Support","Solo"],skins:[""],voiceLine:"",position:"center 25%"},{id:24,name:"Sol",image:"https://wiki.smite2.com/images/thumb/GodCard_Sol.png/720px-GodCard_Sol.png?cc9cb",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:59,name:"Sun Wukong",image:"https://via.placeholder.com/100",roles:["Solo","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:40,name:"Susano",image:"https://wiki.smite2.com/images/thumb/GodCard_Susano.png/720px-GodCard_Susano.png?dcbb5",roles:["Jungle","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:41,name:"Thanatos",image:"https://wiki.smite2.com/images/thumb/GodCard_Thanatos.png/720px-GodCard_Thanatos.png?c2048",roles:["Jungle","Solo"],skins:[""],voiceLine:"",position:"center 15%"},{id:69,name:"The Morrigan",image:"https://wiki.smite2.com/images/thumb/GodCard_The_Morrigan.png/720px-GodCard_The_Morrigan.png?75202",roles:["Carry","Mid","Support","Solo","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:62,name:"Thor",image:"https://wiki.smite2.com/images/thumb/GodCard_Thor.png/720px-GodCard_Thor.png?e757b",roles:["Jungle","Solo","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:53,name:"Ullr",image:"https://wiki.smite2.com/images/thumb/GodCard_Ullr.png/720px-GodCard_Ullr.png?55475",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:56,name:"Vulcan",image:"https://wiki.smite2.com/images/thumb/GodCard_Vulcan.png/720px-GodCard_Vulcan.png?cc9cb",roles:["Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:54,name:"Yemoja",image:"https://wiki.smite2.com/images/thumb/GodCard_Yemoja.png/720px-GodCard_Yemoja.png?75202",roles:["Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:10,name:"Ymir",image:"https://wiki.smite2.com/images/thumb/GodCard_Ymir.png/720px-GodCard_Ymir.png?7859a",roles:["Support","Solo","Jungle"],skins:[""],voiceLine:"",position:"center 10%"},{id:26,name:"Zeus",image:"https://wiki.smite2.com/images/thumb/GodCard_Zeus.png/720px-GodCard_Zeus.png?75202",roles:["Mid","Carry"],skins:[""],voiceLine:"",position:"center 15%"}],qR=()=>{const[n,e]=F.useState(!1),[t,i]=F.useState(.3),[o,a]=F.useState(new Map),c=g=>{if(n)return;let _=o.get(g);if(_)_.currentTime=0,_.volume=t,_.play().catch(T=>{console.error("Error playing audio:",T)});else{const T=g.replace(/ /g,"%20");_=new Audio(`${T}.ogg`),_.preload="auto",_.volume=t,a(x=>new Map(x).set(g,_));const E=()=>{_.currentTime=0,_.volume=t,_.play().catch(x=>{console.error("Error playing audio:",x)})};_.readyState>=2?E():(_.addEventListener("loadeddata",E,{once:!0}),_.addEventListener("canplaythrough",E,{once:!0}))}},h=g=>{i(g),o.forEach(_=>{_.volume=g})},p=()=>{e(g=>!g)};return F.useEffect(()=>{o.forEach(g=>{g.volume=n?0:t})},[n,t,o]),{isMuted:n,volume:t,playAudio:c,handleVolumeChange:h,toggleMute:p}},Hw=F.createContext(null),_d=()=>{const n=F.useContext(Hw);if(!n)throw new Error("useAudioContext must be used within an AudioProvider");return n},Gp=({children:n})=>{const e=qR(),t=F.useRef(!1),i=F.useCallback(()=>{if(t.current)return;t.current=!0;const a=new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=");a.volume=0,a.play().catch(()=>{}),console.log("Audio unlocked")},[]),o={...e,unlockAudio:i};return S.jsx(Hw.Provider,{value:o,children:n})},hf=["A","B","B","A","A","B","B","A","A","B"],WR=({mode:n})=>{const[e]=F.useState(ll),[t,i]=F.useState("BAN"),[o,a]=F.useState("A"),[c,h]=F.useState([]),[p,g]=F.useState({A:Array(5).fill(null),B:Array(5).fill(null)}),[_,T]=F.useState({A:Array(3).fill(null),B:Array(3).fill(null)}),{playAudio:E}=_d();return{mode:n,characters:e,phase:t,currentTeam:o,picks:p,bans:_,handleCharacterSelect:W=>{if(E(W.name),n!=="freedom")if(h(te=>[...te,{picks:p,bans:_,phase:t,currentTeam:o}]),t==="BAN")T(te=>{const ae={...te},se=[...te[o]],b=se.findIndex(C=>C===null);if(b!==-1)se[b]=W;else return te;return ae[o]=se,ae.A.filter(Boolean).length+ae.B.filter(Boolean).length>=6?(i("PICK"),a(hf[0])):a(C=>C==="A"?"B":"A"),ae});else{const te=p.A.filter(Boolean).length+p.B.filter(Boolean).length;g(se=>{const b={...se},A=[...b[o]],C=A.findIndex(N=>N===null);return C!==-1&&(A[C]=W),b[o]=A,b});const ae=te+1;ae<hf.length&&a(hf[ae])}},handleDragStart:(W,te)=>{W.dataTransfer.setData("characterId",te.id.toString())},handleDragOver:W=>{W.preventDefault()},handleDrop:(W,te,ae,se)=>{const b=parseInt(W.dataTransfer.getData("characterId")),A=e.find(C=>C.id===b);A&&(E(A.name),ae==="ban"?T(C=>({...C,[te]:[...C[te].slice(0,se),A,...C[te].slice(se+1)]})):g(C=>({...C,[te]:[...C[te].slice(0,se),A,...C[te].slice(se+1)]})))},handleUndo:()=>{if(c.length>0){const W=c.pop();W&&(g(W.picks),T(W.bans),i(W.phase),a(W.currentTeam))}},handleClear:()=>{g({A:Array(5).fill(null),B:Array(5).fill(null)}),T({A:Array(3).fill(null),B:Array(3).fill(null)}),i("BAN"),a("A"),h([])}}},KR=({initialState:n,draftId:e,currentUser:t})=>{const[i]=F.useState(ll),{playAudio:o}=_d(),a=F.useRef(n),[c,h]=F.useState(n?.status||"lobby"),[p,g]=F.useState({A:[],B:[]}),[_,T]=F.useState({A:[],B:[]}),[E,x]=F.useState(!1),[R,O]=F.useState(null);F.useEffect(()=>{if(!n||!t){x(!1);return}h(n.status);const W=C=>{const N=n[C==="A"?"teamA":"teamB"],L=Object.values(N.players).map(P=>P.pick).filter(Boolean),j=n.bans[C];return{picks:L,bans:j}},te=W("A"),ae=W("B"),se=C=>C.map(N=>ll.find(L=>L.name===N)||null);g({A:se(te.picks),B:se(ae.picks)}),T({A:se(te.bans),B:se(ae.bans)});const{pickOrder:b,currentPickIndex:A}=n;if(n.status==="banning"||n.status==="picking")if(A<b.length){const C=b[A];O(C),x(t.uid===C.uid)}else x(!1),O(null);else x(!1),O(null);a.current=n},[n,t,o]);const V=async W=>{if(!E||!e||!R)return;const te=ut(je,"drafts",e),{status:ae,pickOrder:se,currentPickIndex:b}=n,A=se[b],C={};if(ae==="banning"){const L=A.team,j=L==="teamA"?"bans.A":"bans.B";C[j]=[...n.bans[L.slice(-1)],W.name]}else if(ae==="picking"){A.team;const L=`teamA.players.${A.uid}`;C[`${L}.pick`]=W.name,C[`${L}.hasPicked`]=!0}const N=b+1;C.currentPickIndex=N,ae==="banning"&&N>=se.filter(L=>L.type==="ban").length?C.status="picking":ae==="picking"&&N>=se.length&&(C.status="complete"),await $r(te,C)},$=async()=>{if(!e)return;const W=ut(je,"drafts",e);await $r(W,{status:"lobby",pickOrder:[],currentPickIndex:0,teamA:{name:"Team A",captain:null,players:{}},teamB:{name:"Team B",captain:null,players:{}},bans:{A:[],B:[]},picks:{A:[],B:[]},availableGods:ll.map(te=>te.name)})},Z=async()=>{if(!e||!t)return;const W=ut(je,"drafts",e),te=await $R(W);if(!te.exists())return;const ae=te.data(),se={};ae.teamA.players[t.uid]?(delete ae.teamA.players[t.uid],se["teamA.players"]=ae.teamA.players,ae.teamA.captain===t.uid&&(se["teamA.captain"]=null)):ae.teamB.players[t.uid]&&(delete ae.teamB.players[t.uid],se["teamB.players"]=ae.teamB.players,ae.teamB.captain===t.uid&&(se["teamB.captain"]=null)),Object.keys(se).length>0&&await $r(W,se)};return{mode:"standard",characters:i,phase:c,currentTeam:R?R.team==="teamA"?"A":"B":"",picks:p,bans:_,isMyTurn:E,handleCharacterSelect:V,handleReset:$,handleLeave:Z,handleDragStart:()=>{},handleDragOver:()=>{},handleDragLeave:()=>{},handleDrop:()=>{},handleStandardDrop:()=>{},handleUndo:()=>{},handleClear:()=>{}}},qw=F.createContext(null),Ls=()=>{const n=F.useContext(qw);if(!n)throw new Error("useDraftContext must be used within a DraftProvider");return n},Hp=({children:n,mode:e,initialState:t,draftId:i,currentUser:o,teamAName:a,teamBName:c,teamAColor:h,teamBColor:p})=>{const _={...i?KR({initialState:t,draftId:i,currentUser:o}):WR({mode:e}),draftId:i,initialState:t,currentUser:o,teamAName:a,teamBName:c,teamAColor:h,teamBColor:p};return S.jsx(qw.Provider,{value:_,children:n})},QR=()=>{const{isMuted:n,toggleMute:e,volume:t,handleVolumeChange:i}=_d();return S.jsxs("div",{className:"flex items-center gap-2.5",children:[S.jsx("button",{onClick:e,className:"text-2xl",children:n?"🔇":"🔊"}),S.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:t,onChange:o=>i(parseFloat(o.target.value)),className:"w-24"})]})},Ww=({user:n,userProfile:e})=>{const[t,i]=F.useState(!1),[o,a]=F.useState(!1),c=Rn(),h=()=>{Z_(yr),c("/")},p=()=>{navigator.clipboard.writeText(n.uid),a(!0),setTimeout(()=>a(!1),2e3)};return S.jsxs("div",{className:"relative",children:[S.jsxs("button",{onClick:()=>i(!t),className:"flex items-center gap-2 text-white font-bold py-2 px-4 rounded focus:outline-none",children:[S.jsx("span",{children:e?.displayName||n.email}),S.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${t?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),t&&S.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-gray-700 rounded-md shadow-lg z-10",children:S.jsxs("div",{className:"py-1",children:[S.jsxs("div",{className:"px-4 py-2",children:[S.jsx("span",{className:"text-sm text-gray-400",children:"Player ID"}),S.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[S.jsx("input",{type:"text",value:n.uid,readOnly:!0,className:"w-full bg-gray-800 text-white text-xs rounded px-2 py-1 focus:outline-none"}),S.jsx("button",{onClick:p,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-2 rounded text-xs",children:o?"Copied!":"Copy"})]})]}),S.jsx("div",{className:"border-t border-gray-600 my-1"}),S.jsx("button",{onClick:()=>c("/profile"),className:"block w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-600",children:"Profile"}),S.jsx("button",{onClick:h,className:"block w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-600",children:"Logout"})]})})]})},JR=()=>{const{user:n,userProfile:e}=Bl(),t=Rn();return S.jsxs("div",{className:"bg-dark-blue flex justify-between items-center px-5 border-b-2 border-light-blue shadow-lg",children:[S.jsx("div",{className:"flex-1"}),S.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center",children:[S.jsx("div",{className:"text-2xl font-bold tracking-[2px] text-gold text-center text-shadow-[0_0_10px_rgba(255,215,0,0.5)]",children:"SMITE 2 PICK/BAN SIMULATOR"}),S.jsxs("div",{className:"flex items-center gap-2.5",children:[S.jsx("div",{className:"text-chaos text-2xl text-shadow-border-glow",children:"BETA - NOT FINAL"}),S.jsx(QR,{})]})]}),S.jsx("div",{className:"flex-1 flex justify-end",children:n&&e?S.jsx(Ww,{user:n,userProfile:e}):S.jsx("button",{onClick:()=>t("/login"),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Login"})})]})};function YR({mode:n,onModeChange:e}){return S.jsxs("div",{className:"bg-gray-800 rounded-full p-1 relative flex cursor-pointer w-52",children:[S.jsx("div",{className:`flex-1 flex items-center justify-center z-10 font-bold transition-colors duration-300 text-lg ${n==="standard"?"text-white":"text-gray-400"}`,onClick:()=>e("standard"),children:"Pick/Ban"}),S.jsx("div",{className:`flex-1 flex items-center justify-center z-10 font-bold transition-colors duration-300 text-lg ${n==="freedom"?"text-white":"text-gray-400"}`,onClick:()=>e("freedom"),children:"Free"}),S.jsx("div",{className:`absolute top-1 left-1 w-1/2 h-[calc(100%-8px)] rounded-full transition-transform duration-300 ${n==="freedom"?"transform translate-x-[calc(100%-8px)] bg-red-500":"bg-teal-500"}`})]})}const Wv=({initialName:n,onNameChange:e,team:t})=>{const i=F.useRef(null);F.useEffect(()=>{i.current&&i.current.textContent!==n&&(i.current.textContent=n)},[n]);const o=a=>{e(a.currentTarget.textContent||"")};return S.jsx("div",{className:`text-2xl font-bold uppercase tracking-wider mb-1 p-1 rounded-md outline-none transition-all duration-200 bg-black/20 border border-white/10 hover:bg-black/30 hover:border-white/20 focus:bg-black/40 focus:shadow-[0_0_0_1px_var(--light-blue)] focus:border-light-blue ${t==="A"?"text-order shadow-[0_0_5px_rgba(0,204,255,0.5)]":"text-chaos shadow-[0_0_5px_rgba(255,51,102,0.5)]"}`,contentEditable:"true",suppressContentEditableWarning:!0,spellCheck:"false",ref:i,onInput:o})},XR=({teamAName:n,teamBName:e,onTeamANameChange:t,onTeamBNameChange:i,teamAColor:o,teamBColor:a,mode:c,setMode:h})=>{const{handleUndo:p,handleClear:g,currentTeam:_,phase:T,draftId:E,handleReset:x,handleLeave:R}=Ls(),O=Rn(),V=!!E,$=async()=>{R&&await R(),O("/")};return S.jsxs("div",{className:"flex justify-center items-center py-2.5 px-5 bg-black/50 border-b border-light-blue shadow-[0_2px_10px_rgba(0,204,255,0.3)] relative z-20 flex-wrap gap-[30px]",children:[S.jsxs("div",{className:"flex flex-col items-center w-1/6",children:[S.jsx(Wv,{initialName:n,onNameChange:t,team:"A"}),S.jsx("div",{className:"text-sm font-bold uppercase tracking-wider text-order",children:"1ST PICK"})]}),!V&&S.jsx(YR,{mode:c,onModeChange:h}),S.jsxs("div",{className:"flex justify-center items-center w-52 mx-auto relative z-10 gap-4",children:[V?S.jsxs(S.Fragment,{children:[S.jsx("button",{className:"bg-gray-700 text-white border border-gray-500 rounded-full py-2 px-5 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-gray-500 hover:border-gray-400",onClick:$,children:"LEAVE"}),S.jsx("button",{className:"bg-red-700 text-white border border-red-500 rounded-full py-2 px-5 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-red-500 hover:border-red-400",onClick:x,children:"RESET"})]}):S.jsxs(S.Fragment,{children:[S.jsx("button",{className:"bg-gray-700 text-white border border-gray-500 rounded-full py-2 px-5 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-gray-500 hover:border-gray-400",onClick:p,children:"UNDO"}),S.jsx("button",{className:"bg-red-700 text-white border border-red-500 rounded-full py-2 px-5 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-red-500 hover:border-red-400",onClick:g,children:"CLEAR"})]}),S.jsx("button",{className:"bg-blue-700 text-white border border-blue-500 rounded-full py-2 px-5 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-blue-500 hover:border-blue-400",onClick:()=>O("/final-teams"),children:"FINAL TEAMS"})]}),S.jsx("div",{className:"bg-black/70 p-4 rounded-full text-center border border-light-blue shadow-border-glow text-2xl flex justify-center items-center",children:c==="standard"?S.jsxs(S.Fragment,{children:["Current Phase -"," ",S.jsx("span",{className:`turn-text ${_==="A"?"text-teal-400":"text-red-500"}`,style:{color:_==="A"?o:a},children:_==="A"?`${n.toUpperCase()}`:`${e.toUpperCase()}`})," ","-"," ",S.jsx("span",{className:`phase-text ${T==="BAN"?"text-red-500 shadow-[0_0_5px_rgba(255,51,51,0.5)] font-bold":"text-teal-400 font-bold"}`,children:T})]}):S.jsx("span",{children:"Free Mode - Drag any god to any position"})}),S.jsxs("div",{className:"flex flex-col items-center w-1/6",children:[S.jsx(Wv,{initialName:e,onNameChange:i,team:"B"}),S.jsx("div",{className:"text-sm font-bold uppercase tracking-wider text-chaos",children:"2ND PICK"})]})]})},zl=n=>n.image,Wc=[{name:"All",classes:"bg-gray-600 text-white",borderColor:"border-transparent",textColor:"text-gold"},{name:"Jungle",classes:"bg-jungle text-black",borderColor:"border-jungle",textColor:"text-jungle"},{name:"Support",classes:"bg-support text-white",borderColor:"border-support",textColor:"text-support"},{name:"Carry",classes:"bg-carry text-white",borderColor:"border-carry",textColor:"text-carry"},{name:"Mid",classes:"bg-mid text-white",borderColor:"border-mid",textColor:"text-mid"},{name:"Solo",classes:"bg-solo text-white",borderColor:"border-solo",textColor:"text-solo"}],ZR=n=>{const e=Wc.find(t=>t.name===n);return e?e.borderColor:"border-transparent"},eP=n=>{const e=Wc.find(t=>t.name===n);return e?e.textColor:"text-gold"};function tP(){const{characters:n,picks:e,bans:t,mode:i,handleCharacterSelect:o,handleDragStart:a,isMyTurn:c}=Ls(),[h,p]=F.useState("All"),g=x=>{const R=[...e.A,...e.B],O=[...t.A,...t.B];return!R.some(V=>V?.id===x.id)&&!O.some(V=>V?.id===x.id)},_=n.filter(x=>h==null?!1:h==="All"?!0:x.roles.includes(h)),T=h==="All"?[..._].sort((x,R)=>x.name.localeCompare(R.name)):_,E=x=>{const R=c===void 0?!0:c;return g(x)&&R};return S.jsxs("div",{className:"flex-1 overflow-y-auto p-4 scroll-pt-2.5 scrollbar-custom",children:[S.jsx("div",{className:"flex justify-around mb-5",children:S.jsx("div",{className:"flex justify-center gap-2.5 md:flex-wrap",children:Wc.map(x=>{const R=Wc.find(V=>V.name===x.name),O=h===x.name;return S.jsx("button",{className:`py-2 px-4 rounded-md cursor-pointer transition-all duration-200 border-2 ${O?`${R?.classes} text-white shadow-[0_0_10px_var(--${x.name.toLowerCase()}-color)]`:`bg-gray-800/50 ${R?.borderColor} ${R?.textColor} hover:bg-gray-700/70`}`,onClick:()=>p(h===x.name?null:x.name),children:x.name},x.name)})})}),S.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-4 p-4 justify-center",children:T.map(x=>{const R=h==="All"?x.roles[0]:h||x.roles[0],O=E(x);return S.jsxs("div",{className:`bg-gray-700 rounded-md overflow-hidden transition-transform duration-200 flex flex-col border-3 ${ZR(R)} ${g(x)?"":"opacity-30 cursor-not-allowed"} ${O?"cursor-pointer hover:transform hover:-translate-y-px hover:scale-105":"cursor-not-allowed grayscale"}`,onClick:()=>O&&o(x),draggable:O,onDragStart:V=>O&&a(V,x),children:[S.jsx("img",{src:zl(x),alt:x.name}),S.jsxs("div",{className:"p-2 text-center bg-black/80 flex flex-col justify-center gap-0.5 flex-grow min-h-[3.5em]",children:[S.jsx("div",{className:"font-bold text-sm text-white leading-tight overflow-hidden",children:x.name}),S.jsx("div",{className:`text-xs ${eP(R)}`,children:R})]})]},x.id)})})]})}const nP=({bansA:n,bansB:e})=>{const{mode:t,handleDragOver:i,handleDragLeave:o,handleDrop:a,handleStandardDrop:c}=Ls(),h=(p,g)=>S.jsx("div",{className:`flex gap-2.5 ${p==="A"?"justify-start":"justify-end"}`,children:g.map((_,T)=>S.jsx("div",{className:"w-20 h-28 bg-black/50 border-2 border-red-500 rounded-md flex items-center justify-center",onDragOver:i,onDragLeave:o,onDrop:E=>t==="freedom"?a(E,p,"ban",T):c(E,p,"ban",T),children:_&&S.jsx("img",{src:zl(_),alt:_.name,className:"w-full h-full object-cover"})},T))});return S.jsxs("div",{className:"flex justify-between items-center p-4 bg-black/30 rounded-md mb-4",children:[h("A",n),S.jsx("div",{className:"text-2xl font-bold text-red-500",children:"BANS"}),h("B",e)]})},Kv=({team:n})=>{const{initialState:e,currentUser:t,draftId:i}=Ls();if(!e)return S.jsx("div",{className:"w-1/5",children:"Loading Team..."});const o=async E=>{if(!t||!i||!e)return;const x=e[a],R=x.players[t.uid],O=x.players[E];if(!R||!O||!R.pick||!O.pick){console.error("Both players must have picked a character to trade.");return}const V={from:t.uid,fromName:R.displayName,fromPick:R.pick,to:E,toName:O.displayName,toPick:O.pick,status:"pending"};await Bw(jr(je,"drafts",i,"tradeRequests"),V)},a=n==="A"?"teamA":"teamB",c=e[a],h=n==="A"?"border-order":"border-chaos",p=c.captain,g=Object.entries(c.players).map(([E,x])=>({uid:E,...x})),_=g.find(E=>E.uid===t?.uid),T=Array.from({length:5}).map((E,x)=>g[x]||null);return S.jsx("div",{className:"flex flex-col w-1/5 gap-2 py-2",children:T.map((E,x)=>{if(!E)return S.jsx("div",{className:`border-2 rounded-md h-full bg-black/30 ${h}`},x);const R=E.pick?{name:E.pick,image:zl({name:E.pick})}:null,O=E.uid===p,V=e.pickOrder[e.currentPickIndex]?.uid===E.uid,$=_?.pick&&R&&_.uid!==E.uid;return S.jsxs("div",{className:`border-2 rounded-md flex flex-col h-full justify-between overflow-hidden bg-black/30 relative ${h} ${V?"shadow-[0_0_15px_5px_#ffdf00]":""}`,children:[S.jsxs("div",{className:"text-center p-1 bg-black/50 flex justify-between items-center",children:[S.jsxs("div",{children:[S.jsx("p",{className:"font-bold text-white truncate",children:E.displayName}),O&&S.jsx("p",{className:"text-xs text-yellow-400",children:"Captain"})]}),$&&S.jsx("button",{onClick:()=>o(E.uid),className:"text-xs bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-2 rounded",children:"Trade"})]}),S.jsx("div",{className:"flex-grow flex items-center justify-center",children:R?S.jsx("img",{src:R.image,alt:R.name,className:"w-full h-full object-cover"}):S.jsx("div",{className:"text-4xl text-gray-500",children:"?"})}),R&&S.jsx("div",{className:"text-white text-lg bg-black/70 absolute bottom-0 left-0 right-0 text-center p-1",children:R.name})]},x)})})},rP=()=>{const{draftId:n,currentUser:e}=Ls(),[t,i]=F.useState([]);F.useEffect(()=>{if(!n||!e)return;const a=ki(jr(je,"drafts",n,"tradeRequests"),mn("to","==",e.uid),mn("status","==","pending")),c=Qr(a,h=>{i(h.docs.map(p=>({id:p.id,...p.data()})))});return()=>c()},[n,e]);const o=async(a,c)=>{if(!n)return;const h=t.find(_=>_.id===a);if(!h)return;const p=$w(je),g=ut(je,"drafts",n,"tradeRequests",a);if(c){const _=ut(je,"drafts",n),T=`teamA.players.${h.from}.pick`,E=`teamA.players.${h.to}.pick`;p.update(_,{[T]:h.toPick,[E]:h.fromPick}),p.update(g,{status:"accepted"})}else p.update(g,{status:"declined"});await p.commit()};return t.length===0?null:S.jsxs("div",{className:"absolute top-20 right-10 bg-gray-800 p-4 rounded-lg shadow-lg z-50",children:[S.jsx("h3",{className:"text-lg font-bold mb-2",children:"Incoming Trade Requests"}),t.map(a=>S.jsxs("div",{className:"p-2 border-b border-gray-700",children:[S.jsxs("p",{children:["From: ",a.fromName]}),S.jsxs("p",{children:["Your Pick: ",a.toPick]}),S.jsxs("p",{children:["Their Pick: ",a.fromPick]}),S.jsxs("div",{className:"flex gap-2 mt-2",children:[S.jsx("button",{onClick:()=>o(a.id,!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-2 rounded",children:"Accept"}),S.jsx("button",{onClick:()=>o(a.id,!1),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-2 rounded",children:"Decline"})]})]},a.id))]})},Kw=({teamAName:n,onTeamANameChange:e,teamBName:t,onTeamBNameChange:i,teamAColor:o,teamBColor:a,mode:c,setMode:h})=>{const{bans:p,picks:g}=Ls(),{unlockAudio:_}=_d();return F.useEffect(()=>{const T=()=>{_(),window.removeEventListener("click",T)};return window.addEventListener("click",T),()=>{window.removeEventListener("click",T)}},[_]),S.jsxs("div",{className:`bg-gradient-to-b from-dark-blue to-medium-blue text-white font-sans overflow-hidden flex flex-col h-screen ${c}`,children:[S.jsx(JR,{}),S.jsx(rP,{}),S.jsx(XR,{teamAName:n,onTeamANameChange:e,teamBName:t,onTeamBNameChange:i,teamAColor:o,teamBColor:a,mode:c,setMode:h}),S.jsxs("div",{className:"flex overflow-y-auto px-4 gap-4 h-full w-full relative",children:[S.jsx(Kv,{team:"A"}),S.jsxs("div",{className:"flex-1 flex flex-col",children:[S.jsx(nP,{bansA:p.A,bansB:p.B}),S.jsx("div",{className:"flex-1 bg-black/30 rounded-md overflow-y-auto flex flex-col border-2 border-light-blue shadow-[0_0_10px_rgba(0,204,255,0.3)] p-2.5 lg:p-4",children:S.jsx(tP,{})})]}),S.jsx(Kv,{team:"B"})]})]})},qp=()=>{const[n]=Rl(yr),[e,t]=F.useState([]),[i,o]=F.useState([]),[a,c]=F.useState(!0),[h,p]=F.useState(null),g=F.useCallback(O=>{const V=ki(jr(je,"friends"),mn("members","array-contains",O.uid));return Qr(V,async $=>{if(c(!0),$.empty){t([]),c(!1);return}const Z=$.docs.map(W=>W.data().members).flat().filter(W=>W!==O.uid);if(Z.length>0){const W=ki(jr(je,"users"),mn("uid","in",Z)),ae=(await Hv(W)).docs.map(se=>({id:se.id,...se.data()}));t(ae)}else t([]);c(!1)},()=>{p("Failed to fetch friends."),c(!1)})},[]),_=F.useCallback(O=>{const V=jr(je,"friendRequests"),$=ki(V,mn("recipientId","==",O.uid),mn("status","==","pending"));return Qr($,Z=>{o(Z.docs.map(W=>({id:W.id,...W.data()})))},()=>p("Failed to fetch friend requests."))},[]);return F.useEffect(()=>{if(n){const O=g(n),V=_(n);return()=>{O(),V()}}else t([]),o([]),c(!1)},[n,g,_]),{friends:e,incomingRequests:i,sendFriendRequest:async O=>{if(!n)return p("You must be logged in.");if(n.uid===O)return p("You can't send a request to yourself.");p(null);try{if((await Hv(ki(jr(je,"users"),mn("uid","==",O)))).empty)return p("User not found.");const Z=[n.uid,O].sort().join("_"),W=ut(je,"friendRequests",Z);await Uw(W,{id:Z,senderId:n.uid,senderEmail:n.email,recipientId:O,status:"pending",createdAt:qc()})}catch{p("Failed to send friend request.")}},acceptFriendRequest:async(O,V)=>{if(n)try{const $=$w(je),Z=[n.uid,V].sort().join("_"),W=ut(je,"friends",Z);$.set(W,{members:[n.uid,V],createdAt:qc()});const te=ut(je,"friendRequests",O);$.delete(te),await $.commit()}catch($){console.error("Error accepting friend request:",$),p("Failed to accept friend request.")}},declineFriendRequest:async O=>{try{await qv(ut(je,"friendRequests",O))}catch{p("Failed to decline friend request.")}},removeFriend:async O=>{if(!n)return p("You must be logged in.");try{const V=[n.uid,O].sort().join("_"),$=ut(je,"friends",V);await qv($)}catch{p("Failed to remove friend.")}},loading:a,error:h}},iP=({sendFriendRequest:n,error:e})=>{const[t,i]=F.useState(""),o=a=>{a.preventDefault(),t.trim()&&(n(t.trim()),i(""))};return S.jsxs("form",{onSubmit:o,className:"flex flex-col gap-2 mt-4",children:[S.jsx("input",{type:"text",value:t,onChange:a=>i(a.target.value),placeholder:"Enter friend's Player ID to send request",className:"p-2 rounded bg-gray-700 text-white border border-gray-600",required:!0}),S.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Send Friend Request"}),e&&S.jsx("p",{className:"text-red-500 mt-2",children:e})]})},Qw=({requests:n,acceptFriendRequest:e,declineFriendRequest:t})=>n.length===0?null:S.jsxs("div",{className:"mt-6 w-full max-w-md",children:[S.jsx("h2",{className:"text-2xl text-gold mb-4",children:"Incoming Requests"}),S.jsx("ul",{className:"bg-gray-900 p-4 rounded",children:n.map(i=>S.jsxs("li",{className:"flex justify-between items-center p-2 border-b border-gray-700",children:[S.jsx("span",{className:"text-white",children:i.senderEmail}),S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{onClick:()=>e(i.id,i.senderId),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-3 rounded",children:"Accept"}),S.jsx("button",{onClick:()=>t(i.id),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded",children:"Decline"})]})]},i.id))})]}),Jw=()=>{const{friends:n,incomingRequests:e,sendFriendRequest:t,acceptFriendRequest:i,declineFriendRequest:o,removeFriend:a,loading:c,error:h}=qp();return c?S.jsx("p",{className:"text-white",children:"Loading friends..."}):S.jsxs("div",{className:"mt-6 w-full max-w-md",children:[S.jsx(iP,{sendFriendRequest:t,error:h}),S.jsx(Qw,{requests:e,acceptFriendRequest:i,declineFriendRequest:o}),S.jsx("h2",{className:"text-2xl text-gold mb-4 mt-6",children:"Friends List"}),n.length===0?S.jsx("p",{className:"text-gray-400",children:"You have no friends yet. Send a request to add one!"}):S.jsx("ul",{className:"bg-gray-900 p-4 rounded",children:n.map(p=>S.jsxs("li",{className:"flex justify-between items-center p-2 border-b border-gray-700",children:[S.jsx("span",{className:"text-white",children:p.email}),S.jsx("button",{onClick:()=>a(p.uid),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded",children:"Remove"})]},p.id))})]})},sP=()=>{const[n]=Rl(yr),[e,t]=F.useState([]),[i,o]=F.useState(!0),[a,c]=F.useState(null);return F.useEffect(()=>{if(!n){t([]),o(!1);return}o(!0);const h=jr(je,"drafts"),p=ki(h,mn("blueTeamUser.uid","==",n.uid),mn("redTeamUser","==",null)),g=Qr(p,_=>{const T=_.docs.map(E=>({id:E.id,...E.data()}));t(T),o(!1)},_=>{c("Failed to fetch user drafts."),o(!1)});return()=>g()},[n]),{userDrafts:e,loading:i,error:a}};function Yw(n){if(!n||!n.seconds)return"just now";const e=new Date,t=new Date(n.seconds*1e3),i=Math.floor((e.getTime()-t.getTime())/1e3);if(i<60)return`${i} seconds ago`;const o=Math.floor(i/60);if(o<60)return`${o} minutes ago`;const a=Math.floor(o/60);return a<24?`${a} hours ago`:`${Math.floor(a/24)} days ago`}const oP=()=>{const{userDrafts:n,loading:e,error:t}=sP(),i=Rn();return e?S.jsx("p",{className:"text-white",children:"Loading your drafts..."}):t?S.jsx("p",{className:"text-red-500",children:t}):n.length===0?null:S.jsxs("div",{className:"mt-6 w-full max-w-md",children:[S.jsx("h2",{className:"text-2xl text-gold mb-4",children:"Your Active Drafts"}),S.jsx("ul",{className:"bg-gray-900 p-4 rounded",children:n.map(o=>S.jsxs("li",{className:"flex justify-between items-center p-2 border-b border-gray-700",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-white",children:o.draftName}),S.jsx("p",{className:"text-gray-400 text-sm",children:Yw(o.createdAt)})]}),S.jsx("button",{onClick:()=>i(`/draft/${o.id}`),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded",children:"Rejoin"})]},o.id))})]})},aP=()=>{const[n]=Rl(yr),{friends:e}=qp(),[t,i]=F.useState([]),[o,a]=F.useState(!0),[c,h]=F.useState(null);return F.useEffect(()=>{if(!n||e.length===0){i([]),a(!1);return}a(!0);const p=e.map(x=>x.uid),g=jr(je,"drafts"),_=ki(g,mn("blueTeamUser.uid","in",p),mn("redTeamUser","==",null)),T=ki(g,mn("redTeamUser.uid","in",p),mn("blueTeamUser","==",null)),E=Qr(_,x=>{const R=x.docs.map(V=>({id:V.id,...V.data()})),O=Qr(T,V=>{const $=V.docs.map(te=>({id:te.id,...te.data()})),W=[...R,...$].filter((te,ae,se)=>ae===se.findIndex(b=>b.id===te.id));i(W),a(!1)},V=>{h("Failed to fetch friend drafts (red team)."),a(!1)});return()=>O()},x=>{h("Failed to fetch friend drafts (blue team)."),a(!1)});return()=>{E()}},[n,e]),{friendDrafts:t,loading:o,error:c}},lP=()=>{const{friendDrafts:n,loading:e,error:t}=aP(),i=Rn();return e?S.jsx("p",{className:"text-white",children:"Loading friend drafts..."}):t?S.jsx("p",{className:"text-red-500",children:t}):n.length===0?S.jsx("p",{className:"text-gray-400",children:"No active drafts from your friends."}):S.jsxs("div",{className:"mt-6 w-full max-w-md",children:[S.jsx("h2",{className:"text-2xl text-gold mb-4",children:"Join a Friend's Draft"}),S.jsx("ul",{className:"bg-gray-900 p-4 rounded",children:n.map(o=>S.jsxs("li",{className:"flex justify-between items-center p-2 border-b border-gray-700",children:[S.jsxs("div",{children:[S.jsx("span",{className:"text-white",children:o.draftName}),S.jsxs("p",{className:"text-gray-400 text-sm",children:["Hosted by ",o.blueTeamUser.name," - ",Yw(o.createdAt)]})]}),S.jsx("button",{onClick:()=>i(`/draft/${o.id}`),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-3 rounded",children:"Join"})]},o.id))})]})},uP=()=>{const n=Rn(),{user:e,userProfile:t}=Bl(),{incomingRequests:i,acceptFriendRequest:o,declineFriendRequest:a}=qp(),c=async()=>{if(!e||!t){alert("You must be logged in and have a profile to create an online draft.");return}if(!t.displayName){alert("Please set a display name in your profile before creating a draft."),n("/profile");return}const h=prompt("Enter a name for your draft lobby:",`${t.displayName}'s Draft`);if(h)try{const p={draftName:h,status:"lobby",pickOrder:[],currentPickIndex:0,teamA:{name:"Team A",captain:null,players:{}},teamB:{name:"Team B",captain:null,players:{}},bans:{A:[],B:[]},picks:{A:[],B:[]},availableGods:ll.map(_=>_.name),createdAt:qc(),hostId:e.uid},g=await Bw(jr(je,"drafts"),p);n(`/lobby/${g.id}`)}catch(p){console.error("Error creating online draft: ",p),alert("Failed to create online draft. Please try again.")}};return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-800 p-4",children:[S.jsx("div",{className:"absolute top-4 right-4",children:e&&t?S.jsx(Ww,{user:e,userProfile:t}):S.jsx("button",{onClick:()=>n("/login"),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Login"})}),S.jsxs("div",{className:"text-center",children:[S.jsx("h1",{className:"text-4xl font-bold tracking-[2px] text-gold mb-4 text-shadow-[0_0_10px_rgba(255,215,0,0.5)]",children:"SMITE 2 PICK/BAN SIMULATOR"}),S.jsx("div",{className:"text-chaos text-2xl text-shadow-border-glow mb-8",children:"BETA - NOT FINAL"}),S.jsxs("div",{className:"flex gap-4 justify-center",children:[S.jsx("button",{onClick:()=>n("/local"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded",children:"1-Player Draft"}),S.jsx("button",{onClick:c,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-4 px-8 rounded",children:"2-Player Draft"})]})]}),e&&S.jsxs("div",{className:"mt-8 w-full max-w-md",children:[S.jsx(oP,{}),S.jsx(lP,{}),S.jsx(Qw,{requests:i,acceptFriendRequest:o,declineFriendRequest:a}),S.jsx(Jw,{})]})]})},cP=({player:n,teamColor:e})=>S.jsxs("div",{className:"text-center",children:[S.jsx("img",{src:zl({name:n.pick}),alt:n.pick,className:"w-24 h-24 rounded-full object-cover border-4",style:{borderColor:e}}),S.jsx("p",{className:"text-lg font-semibold mt-2",children:n.pick}),S.jsx("p",{className:"text-md text-gray-400",children:n.displayName})]}),Qv=({teamName:n,teamColor:e,players:t,bans:i})=>S.jsxs("div",{className:"w-1/2 p-4",children:[S.jsx("h2",{className:"text-3xl font-bold mb-6 text-center",style:{color:e},children:n}),S.jsxs("div",{className:"mb-8",children:[S.jsx("h3",{className:"text-xl font-semibold mb-4 text-center",children:"BANS"}),S.jsx("div",{className:"flex flex-wrap gap-4 justify-center",children:i.length>0?i.map(o=>S.jsxs("div",{className:"text-center",children:[S.jsx("img",{src:zl({}),alt:o,className:"w-16 h-16 rounded-md object-cover grayscale"}),S.jsx("p",{className:"text-sm",children:o})]},o)):S.jsx("p",{children:"No bans."})})]}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-semibold mb-4 text-center",children:"PICKS"}),S.jsx("div",{className:"flex flex-wrap gap-6 justify-center",children:t.length>0?t.map(o=>S.jsx(cP,{player:o,teamColor:e},o.uid)):S.jsx("p",{children:"No picks."})})]})]}),dP=()=>{const{initialState:n}=Ls();if(!n)return S.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:"Loading Final Teams Data..."});const{teamA:e,teamB:t,bans:i}=n,o=Object.entries(e.players).map(([c,h])=>({uid:c,...h})),a=Object.entries(t.players).map(([c,h])=>({uid:c,...h}));return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-4",children:[S.jsx("h1",{className:"text-5xl font-bold mb-10",children:"Final Rosters"}),S.jsxs("div",{className:"flex w-full max-w-6xl bg-gray-800 rounded-lg shadow-lg p-8",children:[S.jsx(Qv,{teamName:e.name||"Team A",teamColor:"#1abc9c",players:o,bans:i.A}),S.jsx("div",{className:"border-l-2 border-gray-600 mx-4"}),S.jsx(Qv,{teamName:t.name||"Team B",teamColor:"#ff6666",players:a,bans:i.B})]})]})},hP=()=>{const n=Rn(),[e,t]=F.useState(""),[i,o]=F.useState(""),[a,c]=F.useState(null),h=async p=>{p.preventDefault(),c(null);try{await gA(yr,e,i),n("/")}catch(g){c(g.message)}};return S.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-800 text-white",children:S.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-900 rounded-lg shadow-lg",children:[S.jsx("h1",{className:"text-2xl font-bold text-center text-gold",children:"Login"}),S.jsxs("form",{onSubmit:h,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block mb-2 text-sm font-bold text-gray-400",children:"Email"}),S.jsx("input",{type:"email",value:e,onChange:p=>t(p.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block mb-2 text-sm font-bold text-gray-400",children:"Password"}),S.jsx("input",{type:"password",value:i,onChange:p=>o(p.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),a&&S.jsx("p",{className:"text-red-500 text-xs italic",children:a}),S.jsx("button",{type:"submit",className:"w-full py-2 px-4 font-bold text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-blue-500",children:"Login"})]}),S.jsxs("p",{className:"text-sm text-center text-gray-400",children:["Don't have an account?"," ",S.jsx(Jc,{to:"/signup",className:"font-bold text-gold hover:underline",children:"Sign Up"})]})]})})},fP=()=>{const n=Rn(),[e,t]=F.useState(""),[i,o]=F.useState(""),[a,c]=F.useState(""),[h,p]=F.useState(""),[g,_]=F.useState(null),T=async E=>{if(E.preventDefault(),!e.trim()){_("Display name is required.");return}if(a!==h){_("Passwords do not match.");return}_(null);try{const R=(await mA(yr,i,a)).user;await Uw(ut(je,"users",R.uid),{uid:R.uid,email:R.email,displayName:e.trim(),friends:[],createdAt:qc()}),n("/")}catch(x){_(x.message)}};return S.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-800 text-white",children:S.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-900 rounded-lg shadow-lg",children:[S.jsx("h1",{className:"text-2xl font-bold text-center text-gold",children:"Create Account"}),S.jsxs("form",{onSubmit:T,className:"space-y-6",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block mb-2 text-sm font-bold text-gray-400",children:"Display Name"}),S.jsx("input",{type:"text",value:e,onChange:E=>t(E.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block mb-2 text-sm font-bold text-gray-400",children:"Email"}),S.jsx("input",{type:"email",value:i,onChange:E=>o(E.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block mb-2 text-sm font-bold text-gray-400",children:"Password"}),S.jsx("input",{type:"password",value:a,onChange:E=>c(E.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block mb-2 text-sm font-bold text-gray-400",children:"Confirm Password"}),S.jsx("input",{type:"password",value:h,onChange:E=>p(E.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),g&&S.jsx("p",{className:"text-red-500 text-xs italic",children:g}),S.jsx("button",{type:"submit",className:"w-full py-2 px-4 font-bold text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-green-500",children:"Sign Up"})]}),S.jsxs("p",{className:"text-sm text-center text-gray-400",children:["Already have an account?"," ",S.jsx(Jc,{to:"/login",className:"font-bold text-gold hover:underline",children:"Login"})]})]})})},pP=()=>{const{user:n,userProfile:e,loading:t}=Bl(),[i,o]=F.useState(""),[a,c]=F.useState(!1),[h,p]=F.useState(null),g=Rn();F.useEffect(()=>{e?.displayName&&o(e.displayName)},[e]);const _=()=>{Z_(yr),g("/")},T=async()=>{if(!n||!i.trim()){p("Display name cannot be empty.");return}p(null);try{const E=ut(je,"users",n.uid);await $r(E,{displayName:i.trim()}),c(!1)}catch{p("Failed to update display name.")}};return t?S.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-800 text-white",children:"Loading profile..."}):n?S.jsx("div",{className:"flex flex-col items-center min-h-screen bg-gray-800 p-4 text-white",children:S.jsxs("div",{className:"w-full max-w-4xl",children:[S.jsxs("div",{className:"flex justify-between items-center mb-8",children:[S.jsx("button",{onClick:()=>g("/"),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"← Back to Home"}),S.jsx("h1",{className:"text-4xl text-gold",children:"Your Profile"}),S.jsx("button",{onClick:_,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"Logout"})]}),S.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg",children:[S.jsx("h2",{className:"text-2xl mb-4",children:"User Information"}),S.jsxs("div",{className:"space-y-4",children:[S.jsxs("p",{children:[S.jsx("span",{className:"font-bold",children:"Email:"})," ",n.email]}),S.jsxs("div",{children:[S.jsx("span",{className:"font-bold",children:"Display Name:"}),a?S.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[S.jsx("input",{type:"text",value:i,onChange:E=>o(E.target.value),className:"p-2 rounded bg-gray-700 text-white border border-gray-600"}),S.jsx("button",{onClick:T,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Save"}),S.jsx("button",{onClick:()=>c(!1),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"})]}):S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("span",{children:e?.displayName||"Not set"}),S.jsx("button",{onClick:()=>c(!0),className:"text-sm text-blue-400 hover:underline",children:"Edit"})]}),h&&S.jsx("p",{className:"text-red-500 mt-2",children:h})]})]})]}),S.jsx("div",{className:"mt-8",children:S.jsx(Jw,{})})]})}):S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-800 text-white",children:[S.jsx("p",{children:"You must be logged in to view this page."}),S.jsx("button",{onClick:()=>g("/login"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Login"})]})},mP=()=>{const{draftId:n}=o_(),e=Rn(),{user:t,userProfile:i}=Bl(),[o,a]=Sc.useState(null);Sc.useEffect(()=>{if(!n)return;const _=Qr(ut(je,"drafts",n),T=>{if(T.exists()){const E=T.data();a(E),E.status!=="lobby"&&e(`/draft/${n}`)}else console.error("Draft not found!"),e("/")});return()=>_()},[n,e]);const c=async()=>{if(!n||!o)return;const{teamA:_,teamB:T}=o;let{captainA:E,captainB:x}={captainA:_.captain,captainB:T.captain};if(!E&&Object.keys(_.players).length>0&&(E=Object.keys(_.players)[0]),!x&&Object.keys(T.players).length>0&&(x=Object.keys(T.players)[0]),!E||!x){alert("Both teams must have at least one player to start the draft.");return}const R=[{type:"ban",team:"teamA",uid:E},{type:"ban",team:"teamB",uid:x},{type:"ban",team:"teamA",uid:E},{type:"ban",team:"teamB",uid:x},{type:"ban",team:"teamA",uid:E},{type:"ban",team:"teamB",uid:x},{type:"pick",team:"teamA",uid:E},{type:"pick",team:"teamB",uid:x}],O=ut(je,"drafts",n);await $r(O,{status:"banning","teamA.captain":E,"teamB.captain":x,pickOrder:R,currentPickIndex:0})},h=async _=>{if(!n||!t||!i)return;const T=`${_}.players.${t.uid}`;await $r(ut(je,"drafts",n),{[T]:{displayName:i.displayName,pick:null,hasPicked:!1}})},p=async _=>{if(!n||!t)return;const T=`${_}.captain`;await $r(ut(je,"drafts",n),{[T]:t.uid})};if(!o||!t||!i)return S.jsx("div",{children:"Loading Lobby..."});const g=_=>{const T=o[_],E=Object.entries(T.players).map(([R,O])=>({uid:R,...O})),x=E.some(R=>R.uid===t.uid);return S.jsxs("div",{className:"w-1/2 p-4",children:[S.jsx("h2",{className:"text-2xl font-bold mb-2",children:T.name}),E.map(R=>S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx("p",{children:R.displayName}),T.captain===R.uid&&S.jsx("span",{className:"text-yellow-400",children:"(Captain)"})]},R.uid)),!x&&Object.keys(T.players).length<5&&S.jsx("button",{onClick:()=>h(_),className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded",children:"Join Team"}),x&&!T.captain&&S.jsx("button",{onClick:()=>p(_),className:"mt-2 bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded",children:"Become Captain"})]})};return S.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-4",children:[S.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Draft Lobby: ",o.draftName]}),S.jsxs("div",{className:"flex w-full max-w-4xl justify-around",children:[g("teamA"),g("teamB")]}),o.hostId===t.uid&&o.status==="lobby"&&S.jsx("button",{onClick:c,className:"mt-8 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Start Draft"})]})},gP=()=>{const[n,e]=F.useState("standard"),[t,i]=F.useState("ORDER"),[o,a]=F.useState("CHAOS");return S.jsx(Gp,{children:S.jsx(Hp,{mode:n,teamAName:t,teamBName:o,teamAColor:"#1abc9c",teamBColor:"#ff6666",children:S.jsx(Kw,{teamAName:t,onTeamANameChange:i,teamBName:o,onTeamBNameChange:a,teamAColor:"#1abc9c",teamBColor:"#ff6666",mode:n,setMode:e})})})},yP=({draftId:n,draftData:e,user:t,userProfile:i})=>{const o=async a=>{if(!t||!i)return;const c=i.displayName;if(!c){alert("Please set a display name in your profile before joining a draft.");return}const h=a==="blue"?"blueTeamUser":"redTeamUser";await $r(ut(je,"drafts",n),{[h]:{uid:t.uid,name:c}})};return S.jsxs("div",{className:"flex gap-4",children:[!e.blueTeamUser&&S.jsx("button",{onClick:()=>o("blue"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Join Blue Team"}),!e.redTeamUser&&S.jsx("button",{onClick:()=>o("red"),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"Join Red Team"})]})},vP=()=>{const{draftId:n}=o_(),[e,t]=F.useState(null),{user:i,userProfile:o}=Bl(),a=Rn(),c=Sc.useRef();if(F.useEffect(()=>{if(!n)return;const E=ut(je,"drafts",n),x=Qr(E,R=>{R.exists()?t(R.data()):(console.error("Draft not found!"),a("/"))});return()=>x()},[n,a]),F.useEffect(()=>{if(c.current&&e&&i){const E=e.blueTeamUser?.uid===i.uid;e.redTeamUser?.uid,i.uid;const x=E?c.current.redTeamUser:c.current.blueTeamUser,R=e.redTeamUser;if(x&&!R){const O=(E?c.current.redTeamUser.name:c.current.blueTeamUser.name)||"The other player";alert(`${O} has left the draft.`)}}c.current=e},[e,i]),!e||!i)return S.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-800 text-white",children:"Loading Online Draft..."});const h=e.blueTeamUser?.uid===i.uid||e.redTeamUser?.uid===i.uid,p=e.blueTeamUser?e.blueTeamUser.name:"ORDER",g=e.redTeamUser?e.redTeamUser.name:"CHAOS";return S.jsx(Gp,{children:S.jsxs(Hp,{mode:e.mode,initialState:e,draftId:n,currentUser:i,teamAName:p,teamBName:g,teamAColor:"#1abc9c",teamBColor:"#ff6666",children:[S.jsx(Kw,{teamAName:p,onTeamANameChange:()=>{},teamBName:g,onTeamBNameChange:()=>{},teamAColor:"#1abc9c",teamBColor:"#ff6666",mode:e.mode,setMode:E=>$r(ut(je,"drafts",n),{mode:E})}),!h&&S.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:S.jsx(yP,{draftId:n,draftData:e,user:i,userProfile:o})})]})})};function _P(){return S.jsxs(tI,{children:[S.jsx(Vr,{path:"/",element:S.jsx(uP,{})}),S.jsx(Vr,{path:"/local",element:S.jsx(gP,{})}),S.jsx(Vr,{path:"/draft/:draftId",element:S.jsx(vP,{})}),S.jsx(Vr,{path:"/lobby/:draftId",element:S.jsx(mP,{})}),S.jsx(Vr,{path:"/login",element:S.jsx(hP,{})}),S.jsx(Vr,{path:"/signup",element:S.jsx(fP,{})}),S.jsx(Vr,{path:"/profile",element:S.jsx(pP,{})}),S.jsx(Vr,{path:"/final-teams",element:S.jsxs(Gp,{children:[" ",S.jsx(Hp,{mode:"standard",teamAName:"ORDER",teamBName:"CHAOS",teamAColor:"#1abc9c",teamBColor:"#ff6666",children:S.jsx(dP,{})})]})})]})}const wP=cT.createRoot(document.getElementById("root")),EP=()=>{const[n,e,t]=Rl(yr);return e?S.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:"Authenticating..."}):t?S.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:S.jsxs("p",{children:["Authentication Error: ",t.message]})}):S.jsx(_P,{})};wP.render(S.jsx(Sc.StrictMode,{children:S.jsx(CI,{children:S.jsx(EP,{})})}));
