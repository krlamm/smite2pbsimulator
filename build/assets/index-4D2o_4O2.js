(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function jE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hp={exports:{}},iu={},Gp={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function aA(){if(Qv)return De;Qv=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function E(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,N={};function L(B,Y,de){this.props=B,this.context=Y,this.refs=N,this.updater=de||S}L.prototype.isReactComponent={},L.prototype.setState=function(B,Y){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Y,"setState")},L.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function U(){}U.prototype=L.prototype;function q(B,Y,de){this.props=B,this.context=Y,this.refs=N,this.updater=de||S}var G=q.prototype=new U;G.constructor=q,A(G,L.prototype),G.isPureReactComponent=!0;var Q=Array.isArray,Z=Object.prototype.hasOwnProperty,ie={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function k(B,Y,de){var Ae,we={},Re=null,je=null;if(Y!=null)for(Ae in Y.ref!==void 0&&(je=Y.ref),Y.key!==void 0&&(Re=""+Y.key),Y)Z.call(Y,Ae)&&!D.hasOwnProperty(Ae)&&(we[Ae]=Y[Ae]);var be=arguments.length-2;if(be===1)we.children=de;else if(1<be){for(var nt=Array(be),Mt=0;Mt<be;Mt++)nt[Mt]=arguments[Mt+2];we.children=nt}if(B&&B.defaultProps)for(Ae in be=B.defaultProps,be)we[Ae]===void 0&&(we[Ae]=be[Ae]);return{$$typeof:n,type:B,key:Re,ref:je,props:we,_owner:ie.current}}function x(B,Y){return{$$typeof:n,type:B.type,key:Y,ref:B.ref,props:B.props,_owner:B._owner}}function R(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function O(B){var Y={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(de){return Y[de]})}var V=/\/+/g;function b(B,Y){return typeof B=="object"&&B!==null&&B.key!=null?O(""+B.key):Y.toString(36)}function ke(B,Y,de,Ae,we){var Re=typeof B;(Re==="undefined"||Re==="boolean")&&(B=null);var je=!1;if(B===null)je=!0;else switch(Re){case"string":case"number":je=!0;break;case"object":switch(B.$$typeof){case n:case e:je=!0}}if(je)return je=B,we=we(je),B=Ae===""?"."+b(je,0):Ae,Q(we)?(de="",B!=null&&(de=B.replace(V,"$&/")+"/"),ke(we,Y,de,"",function(Mt){return Mt})):we!=null&&(R(we)&&(we=x(we,de+(!we.key||je&&je.key===we.key?"":(""+we.key).replace(V,"$&/")+"/")+B)),Y.push(we)),1;if(je=0,Ae=Ae===""?".":Ae+":",Q(B))for(var be=0;be<B.length;be++){Re=B[be];var nt=Ae+b(Re,be);je+=ke(Re,Y,de,nt,we)}else if(nt=E(B),typeof nt=="function")for(B=nt.call(B),be=0;!(Re=B.next()).done;)Re=Re.value,nt=Ae+b(Re,be++),je+=ke(Re,Y,de,nt,we);else if(Re==="object")throw Y=String(B),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return je}function ve(B,Y,de){if(B==null)return B;var Ae=[],we=0;return ke(B,Ae,"","",function(Re){return Y.call(de,Re,we++)}),Ae}function Ke(B){if(B._status===-1){var Y=B._result;Y=Y(),Y.then(function(de){(B._status===0||B._status===-1)&&(B._status=1,B._result=de)},function(de){(B._status===0||B._status===-1)&&(B._status=2,B._result=de)}),B._status===-1&&(B._status=0,B._result=Y)}if(B._status===1)return B._result.default;throw B._result}var We={current:null},se={transition:null},pe={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:se,ReactCurrentOwner:ie};function ae(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:ve,forEach:function(B,Y,de){ve(B,function(){Y.apply(this,arguments)},de)},count:function(B){var Y=0;return ve(B,function(){Y++}),Y},toArray:function(B){return ve(B,function(Y){return Y})||[]},only:function(B){if(!R(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},De.Component=L,De.Fragment=t,De.Profiler=s,De.PureComponent=q,De.StrictMode=r,De.Suspense=f,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,De.act=ae,De.cloneElement=function(B,Y,de){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Ae=A({},B.props),we=B.key,Re=B.ref,je=B._owner;if(Y!=null){if(Y.ref!==void 0&&(Re=Y.ref,je=ie.current),Y.key!==void 0&&(we=""+Y.key),B.type&&B.type.defaultProps)var be=B.type.defaultProps;for(nt in Y)Z.call(Y,nt)&&!D.hasOwnProperty(nt)&&(Ae[nt]=Y[nt]===void 0&&be!==void 0?be[nt]:Y[nt])}var nt=arguments.length-2;if(nt===1)Ae.children=de;else if(1<nt){be=Array(nt);for(var Mt=0;Mt<nt;Mt++)be[Mt]=arguments[Mt+2];Ae.children=be}return{$$typeof:n,type:B.type,key:we,ref:Re,props:Ae,_owner:je}},De.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},De.createElement=k,De.createFactory=function(B){var Y=k.bind(null,B);return Y.type=B,Y},De.createRef=function(){return{current:null}},De.forwardRef=function(B){return{$$typeof:h,render:B}},De.isValidElement=R,De.lazy=function(B){return{$$typeof:y,_payload:{_status:-1,_result:B},_init:Ke}},De.memo=function(B,Y){return{$$typeof:p,type:B,compare:Y===void 0?null:Y}},De.startTransition=function(B){var Y=se.transition;se.transition={};try{B()}finally{se.transition=Y}},De.unstable_act=ae,De.useCallback=function(B,Y){return We.current.useCallback(B,Y)},De.useContext=function(B){return We.current.useContext(B)},De.useDebugValue=function(){},De.useDeferredValue=function(B){return We.current.useDeferredValue(B)},De.useEffect=function(B,Y){return We.current.useEffect(B,Y)},De.useId=function(){return We.current.useId()},De.useImperativeHandle=function(B,Y,de){return We.current.useImperativeHandle(B,Y,de)},De.useInsertionEffect=function(B,Y){return We.current.useInsertionEffect(B,Y)},De.useLayoutEffect=function(B,Y){return We.current.useLayoutEffect(B,Y)},De.useMemo=function(B,Y){return We.current.useMemo(B,Y)},De.useReducer=function(B,Y,de){return We.current.useReducer(B,Y,de)},De.useRef=function(B){return We.current.useRef(B)},De.useState=function(B){return We.current.useState(B)},De.useSyncExternalStore=function(B,Y,de){return We.current.useSyncExternalStore(B,Y,de)},De.useTransition=function(){return We.current.useTransition()},De.version="18.3.1",De}var Yv;function ag(){return Yv||(Yv=1,Gp.exports=aA()),Gp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jv;function lA(){if(Jv)return iu;Jv=1;var n=ag(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,p){var y,v={},E=null,S=null;p!==void 0&&(E=""+p),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(S=f.ref);for(y in f)r.call(f,y)&&!a.hasOwnProperty(y)&&(v[y]=f[y]);if(h&&h.defaultProps)for(y in f=h.defaultProps,f)v[y]===void 0&&(v[y]=f[y]);return{$$typeof:e,type:h,key:E,ref:S,props:v,_owner:s.current}}return iu.Fragment=t,iu.jsx=l,iu.jsxs=l,iu}var Xv;function uA(){return Xv||(Xv=1,Hp.exports=lA()),Hp.exports}var T=uA(),j=ag();const fr=jE(j);var Rh={},qp={exports:{}},wn={},Kp={exports:{}},Qp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zv;function cA(){return Zv||(Zv=1,function(n){function e(se,pe){var ae=se.length;se.push(pe);e:for(;0<ae;){var B=ae-1>>>1,Y=se[B];if(0<s(Y,pe))se[B]=pe,se[ae]=Y,ae=B;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var pe=se[0],ae=se.pop();if(ae!==pe){se[0]=ae;e:for(var B=0,Y=se.length,de=Y>>>1;B<de;){var Ae=2*(B+1)-1,we=se[Ae],Re=Ae+1,je=se[Re];if(0>s(we,ae))Re<Y&&0>s(je,we)?(se[B]=je,se[Re]=ae,B=Re):(se[B]=we,se[Ae]=ae,B=Ae);else if(Re<Y&&0>s(je,ae))se[B]=je,se[Re]=ae,B=Re;else break e}}return pe}function s(se,pe){var ae=se.sortIndex-pe.sortIndex;return ae!==0?ae:se.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],p=[],y=1,v=null,E=3,S=!1,A=!1,N=!1,L=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(se){for(var pe=t(p);pe!==null;){if(pe.callback===null)r(p);else if(pe.startTime<=se)r(p),pe.sortIndex=pe.expirationTime,e(f,pe);else break;pe=t(p)}}function Q(se){if(N=!1,G(se),!A)if(t(f)!==null)A=!0,Ke(Z);else{var pe=t(p);pe!==null&&We(Q,pe.startTime-se)}}function Z(se,pe){A=!1,N&&(N=!1,U(k),k=-1),S=!0;var ae=E;try{for(G(pe),v=t(f);v!==null&&(!(v.expirationTime>pe)||se&&!O());){var B=v.callback;if(typeof B=="function"){v.callback=null,E=v.priorityLevel;var Y=B(v.expirationTime<=pe);pe=n.unstable_now(),typeof Y=="function"?v.callback=Y:v===t(f)&&r(f),G(pe)}else r(f);v=t(f)}if(v!==null)var de=!0;else{var Ae=t(p);Ae!==null&&We(Q,Ae.startTime-pe),de=!1}return de}finally{v=null,E=ae,S=!1}}var ie=!1,D=null,k=-1,x=5,R=-1;function O(){return!(n.unstable_now()-R<x)}function V(){if(D!==null){var se=n.unstable_now();R=se;var pe=!0;try{pe=D(!0,se)}finally{pe?b():(ie=!1,D=null)}}else ie=!1}var b;if(typeof q=="function")b=function(){q(V)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ve=ke.port2;ke.port1.onmessage=V,b=function(){ve.postMessage(null)}}else b=function(){L(V,0)};function Ke(se){D=se,ie||(ie=!0,b())}function We(se,pe){k=L(function(){se(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){A||S||(A=!0,Ke(Z))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(se){switch(E){case 1:case 2:case 3:var pe=3;break;default:pe=E}var ae=E;E=pe;try{return se()}finally{E=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,pe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ae=E;E=se;try{return pe()}finally{E=ae}},n.unstable_scheduleCallback=function(se,pe,ae){var B=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?B+ae:B):ae=B,se){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ae+Y,se={id:y++,callback:pe,priorityLevel:se,startTime:ae,expirationTime:Y,sortIndex:-1},ae>B?(se.sortIndex=ae,e(p,se),t(f)===null&&se===t(p)&&(N?(U(k),k=-1):N=!0,We(Q,ae-B))):(se.sortIndex=Y,e(f,se),A||S||(A=!0,Ke(Z))),se},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(se){var pe=E;return function(){var ae=E;E=pe;try{return se.apply(this,arguments)}finally{E=ae}}}}(Qp)),Qp}var e0;function hA(){return e0||(e0=1,Kp.exports=cA()),Kp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function dA(){if(t0)return wn;t0=1;var n=ag(),e=hA();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},v={};function E(i){return f.call(v,i)?!0:f.call(y,i)?!1:p.test(i)?v[i]=!0:(y[i]=!0,!1)}function S(i,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function A(i,o,u,d){if(o===null||typeof o>"u"||S(i,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function N(i,o,u,d,m,_,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=_,this.removeEmptyString=I}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){L[i]=new N(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];L[o]=new N(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){L[i]=new N(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){L[i]=new N(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){L[i]=new N(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){L[i]=new N(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){L[i]=new N(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){L[i]=new N(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){L[i]=new N(i,5,!1,i.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function q(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(U,q);L[o]=new N(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(U,q);L[o]=new N(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(U,q);L[o]=new N(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){L[i]=new N(i,1,!1,i.toLowerCase(),null,!1,!1)}),L.xlinkHref=new N("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){L[i]=new N(i,1,!1,i.toLowerCase(),null,!0,!0)});function G(i,o,u,d){var m=L.hasOwnProperty(o)?L[o]:null;(m!==null?m.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(A(o,u,m,d)&&(u=null),d||m===null?E(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,d=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,d?i.setAttributeNS(d,o,u):i.setAttribute(o,u))))}var Q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),ie=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),Ke=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),se=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,B;function Y(i){if(B===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+i}var de=!1;function Ae(i,o){if(!i||de)return"";de=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(H){var d=H}Reflect.construct(i,[],o)}else{try{o.call()}catch(H){d=H}i.call(o.prototype)}else{try{throw Error()}catch(H){d=H}i()}}catch(H){if(H&&d&&typeof H.stack=="string"){for(var m=H.stack.split(`
`),_=d.stack.split(`
`),I=m.length-1,P=_.length-1;1<=I&&0<=P&&m[I]!==_[P];)P--;for(;1<=I&&0<=P;I--,P--)if(m[I]!==_[P]){if(I!==1||P!==1)do if(I--,P--,0>P||m[I]!==_[P]){var M=`
`+m[I].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=I&&0<=P);break}}}finally{de=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?Y(i):""}function we(i){switch(i.tag){case 5:return Y(i.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return i=Ae(i.type,!1),i;case 11:return i=Ae(i.type.render,!1),i;case 1:return i=Ae(i.type,!0),i;default:return""}}function Re(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case ie:return"Portal";case x:return"Profiler";case k:return"StrictMode";case b:return"Suspense";case ke:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case O:return(i.displayName||"Context")+".Consumer";case R:return(i._context.displayName||"Context")+".Provider";case V:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ve:return o=i.displayName||null,o!==null?o:Re(i.type)||"Memo";case Ke:o=i._payload,i=i._init;try{return Re(i(o))}catch{}}return null}function je(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(o);case 8:return o===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function be(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function nt(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Mt(i){var o=nt(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),d=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(I){d=""+I,_.call(this,I)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(I){d=""+I},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Hr(i){i._valueTracker||(i._valueTracker=Mt(i))}function Ro(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return i&&(d=nt(i)?i.checked?"true":"false":i.value),i=d,i!==u?(o.setValue(i),!0):!1}function xi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Rs(i,o){var u=o.checked;return ae({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Po(i,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=be(o.value!=null?o.value:u),i._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function cl(i,o){o=o.checked,o!=null&&G(i,"checked",o,!1)}function hl(i,o){cl(i,o);var u=be(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(d==="submit"||d==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?bo(i,o.type,u):o.hasOwnProperty("defaultValue")&&bo(i,o.type,be(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function pc(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function bo(i,o,u){(o!=="number"||xi(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Gr=Array.isArray;function qr(i,o,u,d){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&d&&(i[u].defaultSelected=!0)}else{for(u=""+be(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,d&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function dl(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function No(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Gr(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:be(u)}}function Do(i,o){var u=be(o.value),d=be(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),d!=null&&(i.defaultValue=""+d)}function fl(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Pt(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bt(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Pt(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Kr,pl=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,d,m)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Kr=Kr||document.createElement("div"),Kr.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Kr.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Ri(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bs=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(i){bs.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Ps[o]=Ps[i]})});function ml(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Ps.hasOwnProperty(i)&&Ps[i]?(""+o).trim():o+"px"}function gl(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,m=ml(u,o[u],d);u==="float"&&(u="cssFloat"),d?i.setProperty(u,m):i[u]=m}}var _l=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yl(i,o){if(o){if(_l[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function vl(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ns=null;function Oo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Lo=null,Vn=null,yr=null;function Mo(i){if(i=$l(i)){if(typeof Lo!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Wc(o),Lo(i.stateNode,i.type,o))}}function vr(i){Vn?yr?yr.push(i):yr=[i]:Vn=i}function wl(){if(Vn){var i=Vn,o=yr;if(yr=Vn=null,Mo(i),o)for(i=0;i<o.length;i++)Mo(o[i])}}function Ds(i,o){return i(o)}function El(){}var Qr=!1;function Tl(i,o,u){if(Qr)return i(o,u);Qr=!0;try{return Ds(i,o,u)}finally{Qr=!1,(Vn!==null||yr!==null)&&(El(),wl())}}function _t(i,o){var u=i.stateNode;if(u===null)return null;var d=Wc(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Vo=!1;if(h)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){Vo=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{Vo=!1}function Os(i,o,u,d,m,_,I,P,M){var H=Array.prototype.slice.call(arguments,3);try{o.apply(u,H)}catch(te){this.onError(te)}}var Ls=!1,Fo=null,Jn=!1,Il=null,vf={onError:function(i){Ls=!0,Fo=i}};function jo(i,o,u,d,m,_,I,P,M){Ls=!1,Fo=null,Os.apply(vf,arguments)}function mc(i,o,u,d,m,_,I,P,M){if(jo.apply(this,arguments),Ls){if(Ls){var H=Fo;Ls=!1,Fo=null}else throw Error(t(198));Jn||(Jn=!0,Il=H)}}function Xn(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Ms(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Zn(i){if(Xn(i)!==i)throw Error(t(188))}function gc(i){var o=i.alternate;if(!o){if(o=Xn(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,d=o;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return Zn(m),i;if(_===d)return Zn(m),o;_=_.sibling}throw Error(t(188))}if(u.return!==d.return)u=m,d=_;else{for(var I=!1,P=m.child;P;){if(P===u){I=!0,u=m,d=_;break}if(P===d){I=!0,d=m,u=_;break}P=P.sibling}if(!I){for(P=_.child;P;){if(P===u){I=!0,u=_,d=m;break}if(P===d){I=!0,d=_,u=m;break}P=P.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==d)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Cl(i){return i=gc(i),i!==null?Uo(i):null}function Uo(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Uo(i);if(o!==null)return o;i=i.sibling}return null}var Bo=e.unstable_scheduleCallback,Sl=e.unstable_cancelCallback,_c=e.unstable_shouldYield,wf=e.unstable_requestPaint,rt=e.unstable_now,yc=e.unstable_getCurrentPriorityLevel,Vs=e.unstable_ImmediatePriority,Pi=e.unstable_UserBlockingPriority,Fn=e.unstable_NormalPriority,Al=e.unstable_LowPriority,vc=e.unstable_IdlePriority,Fs=null,An=null;function wc(i){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(Fs,i,void 0,(i.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:Tc,kl=Math.log,Ec=Math.LN2;function Tc(i){return i>>>=0,i===0?32:31-(kl(i)/Ec|0)|0}var zo=64,$o=4194304;function bi(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function js(i,o){var u=i.pendingLanes;if(u===0)return 0;var d=0,m=i.suspendedLanes,_=i.pingedLanes,I=u&268435455;if(I!==0){var P=I&~m;P!==0?d=bi(P):(_&=I,_!==0&&(d=bi(_)))}else I=u&~m,I!==0?d=bi(I):_!==0&&(d=bi(_));if(d===0)return 0;if(o!==0&&o!==d&&(o&m)===0&&(m=d&-d,_=o&-o,m>=_||m===16&&(_&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=d;0<o;)u=31-ln(o),m=1<<u,d|=i[u],o&=~m;return d}function Ef(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yr(i,o){for(var u=i.suspendedLanes,d=i.pingedLanes,m=i.expirationTimes,_=i.pendingLanes;0<_;){var I=31-ln(_),P=1<<I,M=m[I];M===-1?((P&u)===0||(P&d)!==0)&&(m[I]=Ef(P,o)):M<=o&&(i.expiredLanes|=P),_&=~P}}function kn(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Us(){var i=zo;return zo<<=1,(zo&4194240)===0&&(zo=64),i}function Ni(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Di(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-ln(o),i[o]=u}function et(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var d=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-ln(u),_=1<<m;o[m]=0,d[m]=-1,i[m]=-1,u&=~_}}function Oi(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var d=31-ln(u),m=1<<d;m&o|i[d]&o&&(i[d]|=o),u&=~m}}var Fe=0;function Li(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ic,Wo,Cc,Sc,Ac,xl=!1,wr=[],Ht=null,er=null,tr=null,Mi=new Map,jn=new Map,Er=[],Tf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kc(i,o){switch(i){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":Mi.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":jn.delete(o.pointerId)}}function fn(i,o,u,d,m,_){return i===null||i.nativeEvent!==_?(i={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:_,targetContainers:[m]},o!==null&&(o=$l(o),o!==null&&Wo(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function If(i,o,u,d,m){switch(o){case"focusin":return Ht=fn(Ht,i,o,u,d,m),!0;case"dragenter":return er=fn(er,i,o,u,d,m),!0;case"mouseover":return tr=fn(tr,i,o,u,d,m),!0;case"pointerover":var _=m.pointerId;return Mi.set(_,fn(Mi.get(_)||null,i,o,u,d,m)),!0;case"gotpointercapture":return _=m.pointerId,jn.set(_,fn(jn.get(_)||null,i,o,u,d,m)),!0}return!1}function xc(i){var o=Hs(i.target);if(o!==null){var u=Xn(o);if(u!==null){if(o=u.tag,o===13){if(o=Ms(u),o!==null){i.blockedOn=o,Ac(i.priority,function(){Cc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Jr(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Ho(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var d=new u.constructor(u.type,u);Ns=d,u.target.dispatchEvent(d),Ns=null}else return o=$l(u),o!==null&&Wo(o),i.blockedOn=u,!1;o.shift()}return!0}function Bs(i,o,u){Jr(i)&&u.delete(o)}function Rc(){xl=!1,Ht!==null&&Jr(Ht)&&(Ht=null),er!==null&&Jr(er)&&(er=null),tr!==null&&Jr(tr)&&(tr=null),Mi.forEach(Bs),jn.forEach(Bs)}function nr(i,o){i.blockedOn===o&&(i.blockedOn=null,xl||(xl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Rc)))}function rr(i){function o(m){return nr(m,i)}if(0<wr.length){nr(wr[0],i);for(var u=1;u<wr.length;u++){var d=wr[u];d.blockedOn===i&&(d.blockedOn=null)}}for(Ht!==null&&nr(Ht,i),er!==null&&nr(er,i),tr!==null&&nr(tr,i),Mi.forEach(o),jn.forEach(o),u=0;u<Er.length;u++)d=Er[u],d.blockedOn===i&&(d.blockedOn=null);for(;0<Er.length&&(u=Er[0],u.blockedOn===null);)xc(u),u.blockedOn===null&&Er.shift()}var Xr=Q.ReactCurrentBatchConfig,Vi=!0;function ct(i,o,u,d){var m=Fe,_=Xr.transition;Xr.transition=null;try{Fe=1,Rl(i,o,u,d)}finally{Fe=m,Xr.transition=_}}function Cf(i,o,u,d){var m=Fe,_=Xr.transition;Xr.transition=null;try{Fe=4,Rl(i,o,u,d)}finally{Fe=m,Xr.transition=_}}function Rl(i,o,u,d){if(Vi){var m=Ho(i,o,u,d);if(m===null)Lf(i,o,d,zs,u),kc(i,d);else if(If(m,i,o,u,d))d.stopPropagation();else if(kc(i,d),o&4&&-1<Tf.indexOf(i)){for(;m!==null;){var _=$l(m);if(_!==null&&Ic(_),_=Ho(i,o,u,d),_===null&&Lf(i,o,d,zs,u),_===m)break;m=_}m!==null&&d.stopPropagation()}else Lf(i,o,d,null,u)}}var zs=null;function Ho(i,o,u,d){if(zs=null,i=Oo(d),i=Hs(i),i!==null)if(o=Xn(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Ms(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return zs=i,null}function Pl(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yc()){case Vs:return 1;case Pi:return 4;case Fn:case Al:return 16;case vc:return 536870912;default:return 16}default:return 16}}var xn=null,Go=null,pn=null;function bl(){if(pn)return pn;var i,o=Go,u=o.length,d,m="value"in xn?xn.value:xn.textContent,_=m.length;for(i=0;i<u&&o[i]===m[i];i++);var I=u-i;for(d=1;d<=I&&o[u-d]===m[_-d];d++);return pn=m.slice(i,1<d?1-d:void 0)}function qo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Tr(){return!0}function Nl(){return!1}function Gt(i){function o(u,d,m,_,I){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=_,this.target=I,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(u=i[P],this[P]=u?u(_):_[P]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Tr:Nl,this.isPropagationStopped=Nl,this}return ae(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),o}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=Gt(ir),Ir=ae({},ir,{view:0,detail:0}),Sf=Gt(Ir),Qo,Zr,Fi,$s=ae({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Fi&&(Fi&&i.type==="mousemove"?(Qo=i.screenX-Fi.screenX,Zr=i.screenY-Fi.screenY):Zr=Qo=0,Fi=i),Qo)},movementY:function(i){return"movementY"in i?i.movementY:Zr}}),Yo=Gt($s),Dl=ae({},$s,{dataTransfer:0}),Pc=Gt(Dl),Jo=ae({},Ir,{relatedTarget:0}),Xo=Gt(Jo),bc=ae({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),ei=Gt(bc),Nc=ae({},ir,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Dc=Gt(Nc),Oc=ae({},ir,{data:0}),Ol=Gt(Oc),Zo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mc(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Lc[i])?!!o[i]:!1}function Cr(){return Mc}var c=ae({},Ir,{key:function(i){if(i.key){var o=Zo[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=qo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?un[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(i){return i.type==="keypress"?qo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?qo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),g=Gt(c),w=ae({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C=Gt(w),z=ae({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr}),K=Gt(z),oe=ae({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ye=Gt(oe),Nt=ae({},$s,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=Gt(Nt),Vt=[9,13,27,32],Tt=h&&"CompositionEvent"in window,Un=null;h&&"documentMode"in document&&(Un=document.documentMode);var Rn=h&&"TextEvent"in window&&!Un,Ws=h&&(!Tt||Un&&8<Un&&11>=Un),ea=" ",$_=!1;function W_(i,o){switch(i){case"keyup":return Vt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ta=!1;function i1(i,o){switch(i){case"compositionend":return H_(o);case"keypress":return o.which!==32?null:($_=!0,ea);case"textInput":return i=o.data,i===ea&&$_?null:i;default:return null}}function s1(i,o){if(ta)return i==="compositionend"||!Tt&&W_(i,o)?(i=bl(),pn=Go=xn=null,ta=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ws&&o.locale!=="ko"?null:o.data;default:return null}}var o1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G_(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!o1[i.type]:o==="textarea"}function q_(i,o,u,d){vr(d),o=Bc(o,"onChange"),0<o.length&&(u=new Ko("onChange","change",null,u,d),i.push({event:u,listeners:o}))}var Ll=null,Ml=null;function a1(i){hy(i,0)}function Vc(i){var o=oa(i);if(Ro(o))return i}function l1(i,o){if(i==="change")return o}var K_=!1;if(h){var Af;if(h){var kf="oninput"in document;if(!kf){var Q_=document.createElement("div");Q_.setAttribute("oninput","return;"),kf=typeof Q_.oninput=="function"}Af=kf}else Af=!1;K_=Af&&(!document.documentMode||9<document.documentMode)}function Y_(){Ll&&(Ll.detachEvent("onpropertychange",J_),Ml=Ll=null)}function J_(i){if(i.propertyName==="value"&&Vc(Ml)){var o=[];q_(o,Ml,i,Oo(i)),Tl(a1,o)}}function u1(i,o,u){i==="focusin"?(Y_(),Ll=o,Ml=u,Ll.attachEvent("onpropertychange",J_)):i==="focusout"&&Y_()}function c1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Vc(Ml)}function h1(i,o){if(i==="click")return Vc(o)}function d1(i,o){if(i==="input"||i==="change")return Vc(o)}function f1(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var sr=typeof Object.is=="function"?Object.is:f1;function Vl(i,o){if(sr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!f.call(o,m)||!sr(i[m],o[m]))return!1}return!0}function X_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Z_(i,o){var u=X_(i);i=0;for(var d;u;){if(u.nodeType===3){if(d=i+u.textContent.length,i<=o&&d>=o)return{node:u,offset:o-i};i=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=X_(u)}}function ey(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ey(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function ty(){for(var i=window,o=xi();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=xi(i.document)}return o}function xf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function p1(i){var o=ty(),u=i.focusedElem,d=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&ey(u.ownerDocument.documentElement,u)){if(d!==null&&xf(u)){if(o=d.start,i=d.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,_=Math.min(d.start,m);d=d.end===void 0?_:Math.min(d.end,m),!i.extend&&_>d&&(m=d,d=_,_=m),m=Z_(u,_);var I=Z_(u,d);m&&I&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),_>d?(i.addRange(o),i.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var m1=h&&"documentMode"in document&&11>=document.documentMode,na=null,Rf=null,Fl=null,Pf=!1;function ny(i,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Pf||na==null||na!==xi(d)||(d=na,"selectionStart"in d&&xf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Fl&&Vl(Fl,d)||(Fl=d,d=Bc(Rf,"onSelect"),0<d.length&&(o=new Ko("onSelect","select",null,o,u),i.push({event:o,listeners:d}),o.target=na)))}function Fc(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var ra={animationend:Fc("Animation","AnimationEnd"),animationiteration:Fc("Animation","AnimationIteration"),animationstart:Fc("Animation","AnimationStart"),transitionend:Fc("Transition","TransitionEnd")},bf={},ry={};h&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function jc(i){if(bf[i])return bf[i];if(!ra[i])return i;var o=ra[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in ry)return bf[i]=o[u];return i}var iy=jc("animationend"),sy=jc("animationiteration"),oy=jc("animationstart"),ay=jc("transitionend"),ly=new Map,uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ji(i,o){ly.set(i,o),a(o,[i])}for(var Nf=0;Nf<uy.length;Nf++){var Df=uy[Nf],g1=Df.toLowerCase(),_1=Df[0].toUpperCase()+Df.slice(1);ji(g1,"on"+_1)}ji(iy,"onAnimationEnd"),ji(sy,"onAnimationIteration"),ji(oy,"onAnimationStart"),ji("dblclick","onDoubleClick"),ji("focusin","onFocus"),ji("focusout","onBlur"),ji(ay,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y1=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function cy(i,o,u){var d=i.type||"unknown-event";i.currentTarget=u,mc(d,o,void 0,i),i.currentTarget=null}function hy(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var d=i[u],m=d.event;d=d.listeners;e:{var _=void 0;if(o)for(var I=d.length-1;0<=I;I--){var P=d[I],M=P.instance,H=P.currentTarget;if(P=P.listener,M!==_&&m.isPropagationStopped())break e;cy(m,P,H),_=M}else for(I=0;I<d.length;I++){if(P=d[I],M=P.instance,H=P.currentTarget,P=P.listener,M!==_&&m.isPropagationStopped())break e;cy(m,P,H),_=M}}}if(Jn)throw i=Il,Jn=!1,Il=null,i}function ot(i,o){var u=o[Bf];u===void 0&&(u=o[Bf]=new Set);var d=i+"__bubble";u.has(d)||(dy(o,i,2,!1),u.add(d))}function Of(i,o,u){var d=0;o&&(d|=4),dy(u,i,d,o)}var Uc="_reactListening"+Math.random().toString(36).slice(2);function Ul(i){if(!i[Uc]){i[Uc]=!0,r.forEach(function(u){u!=="selectionchange"&&(y1.has(u)||Of(u,!1,i),Of(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Uc]||(o[Uc]=!0,Of("selectionchange",!1,o))}}function dy(i,o,u,d){switch(Pl(o)){case 1:var m=ct;break;case 4:m=Cf;break;default:m=Rl}u=m.bind(null,o,u,i),m=void 0,!Vo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function Lf(i,o,u,d,m){var _=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var I=d.tag;if(I===3||I===4){var P=d.stateNode.containerInfo;if(P===m||P.nodeType===8&&P.parentNode===m)break;if(I===4)for(I=d.return;I!==null;){var M=I.tag;if((M===3||M===4)&&(M=I.stateNode.containerInfo,M===m||M.nodeType===8&&M.parentNode===m))return;I=I.return}for(;P!==null;){if(I=Hs(P),I===null)return;if(M=I.tag,M===5||M===6){d=_=I;continue e}P=P.parentNode}}d=d.return}Tl(function(){var H=_,te=Oo(u),ne=[];e:{var ee=ly.get(i);if(ee!==void 0){var ce=Ko,me=i;switch(i){case"keypress":if(qo(u)===0)break e;case"keydown":case"keyup":ce=g;break;case"focusin":me="focus",ce=Xo;break;case"focusout":me="blur",ce=Xo;break;case"beforeblur":case"afterblur":ce=Xo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Pc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=K;break;case iy:case sy:case oy:ce=ei;break;case ay:ce=Ye;break;case"scroll":ce=Sf;break;case"wheel":ce=Ue;break;case"copy":case"cut":case"paste":ce=Dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=C}var ge=(o&4)!==0,yt=!ge&&i==="scroll",$=ge?ee!==null?ee+"Capture":null:ee;ge=[];for(var F=H,W;F!==null;){W=F;var re=W.stateNode;if(W.tag===5&&re!==null&&(W=re,$!==null&&(re=_t(F,$),re!=null&&ge.push(Bl(F,re,W)))),yt)break;F=F.return}0<ge.length&&(ee=new ce(ee,me,null,u,te),ne.push({event:ee,listeners:ge}))}}if((o&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",ee&&u!==Ns&&(me=u.relatedTarget||u.fromElement)&&(Hs(me)||me[ti]))break e;if((ce||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ce?(me=u.relatedTarget||u.toElement,ce=H,me=me?Hs(me):null,me!==null&&(yt=Xn(me),me!==yt||me.tag!==5&&me.tag!==6)&&(me=null)):(ce=null,me=H),ce!==me)){if(ge=Yo,re="onMouseLeave",$="onMouseEnter",F="mouse",(i==="pointerout"||i==="pointerover")&&(ge=C,re="onPointerLeave",$="onPointerEnter",F="pointer"),yt=ce==null?ee:oa(ce),W=me==null?ee:oa(me),ee=new ge(re,F+"leave",ce,u,te),ee.target=yt,ee.relatedTarget=W,re=null,Hs(te)===H&&(ge=new ge($,F+"enter",me,u,te),ge.target=W,ge.relatedTarget=yt,re=ge),yt=re,ce&&me)t:{for(ge=ce,$=me,F=0,W=ge;W;W=ia(W))F++;for(W=0,re=$;re;re=ia(re))W++;for(;0<F-W;)ge=ia(ge),F--;for(;0<W-F;)$=ia($),W--;for(;F--;){if(ge===$||$!==null&&ge===$.alternate)break t;ge=ia(ge),$=ia($)}ge=null}else ge=null;ce!==null&&fy(ne,ee,ce,ge,!1),me!==null&&yt!==null&&fy(ne,yt,me,ge,!0)}}e:{if(ee=H?oa(H):window,ce=ee.nodeName&&ee.nodeName.toLowerCase(),ce==="select"||ce==="input"&&ee.type==="file")var _e=l1;else if(G_(ee))if(K_)_e=d1;else{_e=c1;var Te=u1}else(ce=ee.nodeName)&&ce.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(_e=h1);if(_e&&(_e=_e(i,H))){q_(ne,_e,u,te);break e}Te&&Te(i,ee,H),i==="focusout"&&(Te=ee._wrapperState)&&Te.controlled&&ee.type==="number"&&bo(ee,"number",ee.value)}switch(Te=H?oa(H):window,i){case"focusin":(G_(Te)||Te.contentEditable==="true")&&(na=Te,Rf=H,Fl=null);break;case"focusout":Fl=Rf=na=null;break;case"mousedown":Pf=!0;break;case"contextmenu":case"mouseup":case"dragend":Pf=!1,ny(ne,u,te);break;case"selectionchange":if(m1)break;case"keydown":case"keyup":ny(ne,u,te)}var Ie;if(Tt)e:{switch(i){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else ta?W_(i,u)&&(xe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(xe="onCompositionStart");xe&&(Ws&&u.locale!=="ko"&&(ta||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&ta&&(Ie=bl()):(xn=te,Go="value"in xn?xn.value:xn.textContent,ta=!0)),Te=Bc(H,xe),0<Te.length&&(xe=new Ol(xe,i,null,u,te),ne.push({event:xe,listeners:Te}),Ie?xe.data=Ie:(Ie=H_(u),Ie!==null&&(xe.data=Ie)))),(Ie=Rn?i1(i,u):s1(i,u))&&(H=Bc(H,"onBeforeInput"),0<H.length&&(te=new Ol("onBeforeInput","beforeinput",null,u,te),ne.push({event:te,listeners:H}),te.data=Ie))}hy(ne,o)})}function Bl(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Bc(i,o){for(var u=o+"Capture",d=[];i!==null;){var m=i,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=_t(i,u),_!=null&&d.unshift(Bl(i,_,m)),_=_t(i,o),_!=null&&d.push(Bl(i,_,m))),i=i.return}return d}function ia(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function fy(i,o,u,d,m){for(var _=o._reactName,I=[];u!==null&&u!==d;){var P=u,M=P.alternate,H=P.stateNode;if(M!==null&&M===d)break;P.tag===5&&H!==null&&(P=H,m?(M=_t(u,_),M!=null&&I.unshift(Bl(u,M,P))):m||(M=_t(u,_),M!=null&&I.push(Bl(u,M,P)))),u=u.return}I.length!==0&&i.push({event:o,listeners:I})}var v1=/\r\n?/g,w1=/\u0000|\uFFFD/g;function py(i){return(typeof i=="string"?i:""+i).replace(v1,`
`).replace(w1,"")}function zc(i,o,u){if(o=py(o),py(i)!==o&&u)throw Error(t(425))}function $c(){}var Mf=null,Vf=null;function Ff(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var jf=typeof setTimeout=="function"?setTimeout:void 0,E1=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,T1=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(i){return my.resolve(null).then(i).catch(I1)}:jf;function I1(i){setTimeout(function(){throw i})}function Uf(i,o){var u=o,d=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){i.removeChild(m),rr(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);rr(o)}function Ui(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function gy(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var sa=Math.random().toString(36).slice(2),Sr="__reactFiber$"+sa,zl="__reactProps$"+sa,ti="__reactContainer$"+sa,Bf="__reactEvents$"+sa,C1="__reactListeners$"+sa,S1="__reactHandles$"+sa;function Hs(i){var o=i[Sr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ti]||u[Sr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=gy(i);i!==null;){if(u=i[Sr])return u;i=gy(i)}return o}i=u,u=i.parentNode}return null}function $l(i){return i=i[Sr]||i[ti],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function oa(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Wc(i){return i[zl]||null}var zf=[],aa=-1;function Bi(i){return{current:i}}function at(i){0>aa||(i.current=zf[aa],zf[aa]=null,aa--)}function it(i,o){aa++,zf[aa]=i.current,i.current=o}var zi={},en=Bi(zi),mn=Bi(!1),Gs=zi;function la(i,o){var u=i.type.contextTypes;if(!u)return zi;var d=i.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in u)m[_]=o[_];return d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function gn(i){return i=i.childContextTypes,i!=null}function Hc(){at(mn),at(en)}function _y(i,o,u){if(en.current!==zi)throw Error(t(168));it(en,o),it(mn,u)}function yy(i,o,u){var d=i.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(t(108,je(i)||"Unknown",m));return ae({},u,d)}function Gc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||zi,Gs=en.current,it(en,i),it(mn,mn.current),!0}function vy(i,o,u){var d=i.stateNode;if(!d)throw Error(t(169));u?(i=yy(i,o,Gs),d.__reactInternalMemoizedMergedChildContext=i,at(mn),at(en),it(en,i)):at(mn),it(mn,u)}var ni=null,qc=!1,$f=!1;function wy(i){ni===null?ni=[i]:ni.push(i)}function A1(i){qc=!0,wy(i)}function $i(){if(!$f&&ni!==null){$f=!0;var i=0,o=Fe;try{var u=ni;for(Fe=1;i<u.length;i++){var d=u[i];do d=d(!0);while(d!==null)}ni=null,qc=!1}catch(m){throw ni!==null&&(ni=ni.slice(i+1)),Bo(Vs,$i),m}finally{Fe=o,$f=!1}}return null}var ua=[],ca=0,Kc=null,Qc=0,Bn=[],zn=0,qs=null,ri=1,ii="";function Ks(i,o){ua[ca++]=Qc,ua[ca++]=Kc,Kc=i,Qc=o}function Ey(i,o,u){Bn[zn++]=ri,Bn[zn++]=ii,Bn[zn++]=qs,qs=i;var d=ri;i=ii;var m=32-ln(d)-1;d&=~(1<<m),u+=1;var _=32-ln(o)+m;if(30<_){var I=m-m%5;_=(d&(1<<I)-1).toString(32),d>>=I,m-=I,ri=1<<32-ln(o)+m|u<<m|d,ii=_+i}else ri=1<<_|u<<m|d,ii=i}function Wf(i){i.return!==null&&(Ks(i,1),Ey(i,1,0))}function Hf(i){for(;i===Kc;)Kc=ua[--ca],ua[ca]=null,Qc=ua[--ca],ua[ca]=null;for(;i===qs;)qs=Bn[--zn],Bn[zn]=null,ii=Bn[--zn],Bn[zn]=null,ri=Bn[--zn],Bn[zn]=null}var Pn=null,bn=null,ht=!1,or=null;function Ty(i,o){var u=Gn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Iy(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Pn=i,bn=Ui(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Pn=i,bn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=qs!==null?{id:ri,overflow:ii}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Gn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Pn=i,bn=null,!0):!1;default:return!1}}function Gf(i){return(i.mode&1)!==0&&(i.flags&128)===0}function qf(i){if(ht){var o=bn;if(o){var u=o;if(!Iy(i,o)){if(Gf(i))throw Error(t(418));o=Ui(u.nextSibling);var d=Pn;o&&Iy(i,o)?Ty(d,u):(i.flags=i.flags&-4097|2,ht=!1,Pn=i)}}else{if(Gf(i))throw Error(t(418));i.flags=i.flags&-4097|2,ht=!1,Pn=i}}}function Cy(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Pn=i}function Yc(i){if(i!==Pn)return!1;if(!ht)return Cy(i),ht=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Ff(i.type,i.memoizedProps)),o&&(o=bn)){if(Gf(i))throw Sy(),Error(t(418));for(;o;)Ty(i,o),o=Ui(o.nextSibling)}if(Cy(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){bn=Ui(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}bn=null}}else bn=Pn?Ui(i.stateNode.nextSibling):null;return!0}function Sy(){for(var i=bn;i;)i=Ui(i.nextSibling)}function ha(){bn=Pn=null,ht=!1}function Kf(i){or===null?or=[i]:or.push(i)}var k1=Q.ReactCurrentBatchConfig;function Wl(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var d=u.stateNode}if(!d)throw Error(t(147,i));var m=d,_=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(I){var P=m.refs;I===null?delete P[_]:P[_]=I},o._stringRef=_,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Jc(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Ay(i){var o=i._init;return o(i._payload)}function ky(i){function o($,F){if(i){var W=$.deletions;W===null?($.deletions=[F],$.flags|=16):W.push(F)}}function u($,F){if(!i)return null;for(;F!==null;)o($,F),F=F.sibling;return null}function d($,F){for($=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function m($,F){return $=Ji($,F),$.index=0,$.sibling=null,$}function _($,F,W){return $.index=W,i?(W=$.alternate,W!==null?(W=W.index,W<F?($.flags|=2,F):W):($.flags|=2,F)):($.flags|=1048576,F)}function I($){return i&&$.alternate===null&&($.flags|=2),$}function P($,F,W,re){return F===null||F.tag!==6?(F=jp(W,$.mode,re),F.return=$,F):(F=m(F,W),F.return=$,F)}function M($,F,W,re){var _e=W.type;return _e===D?te($,F,W.props.children,re,W.key):F!==null&&(F.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ke&&Ay(_e)===F.type)?(re=m(F,W.props),re.ref=Wl($,F,W),re.return=$,re):(re=Eh(W.type,W.key,W.props,null,$.mode,re),re.ref=Wl($,F,W),re.return=$,re)}function H($,F,W,re){return F===null||F.tag!==4||F.stateNode.containerInfo!==W.containerInfo||F.stateNode.implementation!==W.implementation?(F=Up(W,$.mode,re),F.return=$,F):(F=m(F,W.children||[]),F.return=$,F)}function te($,F,W,re,_e){return F===null||F.tag!==7?(F=no(W,$.mode,re,_e),F.return=$,F):(F=m(F,W),F.return=$,F)}function ne($,F,W){if(typeof F=="string"&&F!==""||typeof F=="number")return F=jp(""+F,$.mode,W),F.return=$,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Z:return W=Eh(F.type,F.key,F.props,null,$.mode,W),W.ref=Wl($,null,F),W.return=$,W;case ie:return F=Up(F,$.mode,W),F.return=$,F;case Ke:var re=F._init;return ne($,re(F._payload),W)}if(Gr(F)||pe(F))return F=no(F,$.mode,W,null),F.return=$,F;Jc($,F)}return null}function ee($,F,W,re){var _e=F!==null?F.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return _e!==null?null:P($,F,""+W,re);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Z:return W.key===_e?M($,F,W,re):null;case ie:return W.key===_e?H($,F,W,re):null;case Ke:return _e=W._init,ee($,F,_e(W._payload),re)}if(Gr(W)||pe(W))return _e!==null?null:te($,F,W,re,null);Jc($,W)}return null}function ce($,F,W,re,_e){if(typeof re=="string"&&re!==""||typeof re=="number")return $=$.get(W)||null,P(F,$,""+re,_e);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Z:return $=$.get(re.key===null?W:re.key)||null,M(F,$,re,_e);case ie:return $=$.get(re.key===null?W:re.key)||null,H(F,$,re,_e);case Ke:var Te=re._init;return ce($,F,W,Te(re._payload),_e)}if(Gr(re)||pe(re))return $=$.get(W)||null,te(F,$,re,_e,null);Jc(F,re)}return null}function me($,F,W,re){for(var _e=null,Te=null,Ie=F,xe=F=0,Ut=null;Ie!==null&&xe<W.length;xe++){Ie.index>xe?(Ut=Ie,Ie=null):Ut=Ie.sibling;var Ge=ee($,Ie,W[xe],re);if(Ge===null){Ie===null&&(Ie=Ut);break}i&&Ie&&Ge.alternate===null&&o($,Ie),F=_(Ge,F,xe),Te===null?_e=Ge:Te.sibling=Ge,Te=Ge,Ie=Ut}if(xe===W.length)return u($,Ie),ht&&Ks($,xe),_e;if(Ie===null){for(;xe<W.length;xe++)Ie=ne($,W[xe],re),Ie!==null&&(F=_(Ie,F,xe),Te===null?_e=Ie:Te.sibling=Ie,Te=Ie);return ht&&Ks($,xe),_e}for(Ie=d($,Ie);xe<W.length;xe++)Ut=ce(Ie,$,xe,W[xe],re),Ut!==null&&(i&&Ut.alternate!==null&&Ie.delete(Ut.key===null?xe:Ut.key),F=_(Ut,F,xe),Te===null?_e=Ut:Te.sibling=Ut,Te=Ut);return i&&Ie.forEach(function(Xi){return o($,Xi)}),ht&&Ks($,xe),_e}function ge($,F,W,re){var _e=pe(W);if(typeof _e!="function")throw Error(t(150));if(W=_e.call(W),W==null)throw Error(t(151));for(var Te=_e=null,Ie=F,xe=F=0,Ut=null,Ge=W.next();Ie!==null&&!Ge.done;xe++,Ge=W.next()){Ie.index>xe?(Ut=Ie,Ie=null):Ut=Ie.sibling;var Xi=ee($,Ie,Ge.value,re);if(Xi===null){Ie===null&&(Ie=Ut);break}i&&Ie&&Xi.alternate===null&&o($,Ie),F=_(Xi,F,xe),Te===null?_e=Xi:Te.sibling=Xi,Te=Xi,Ie=Ut}if(Ge.done)return u($,Ie),ht&&Ks($,xe),_e;if(Ie===null){for(;!Ge.done;xe++,Ge=W.next())Ge=ne($,Ge.value,re),Ge!==null&&(F=_(Ge,F,xe),Te===null?_e=Ge:Te.sibling=Ge,Te=Ge);return ht&&Ks($,xe),_e}for(Ie=d($,Ie);!Ge.done;xe++,Ge=W.next())Ge=ce(Ie,$,xe,Ge.value,re),Ge!==null&&(i&&Ge.alternate!==null&&Ie.delete(Ge.key===null?xe:Ge.key),F=_(Ge,F,xe),Te===null?_e=Ge:Te.sibling=Ge,Te=Ge);return i&&Ie.forEach(function(oA){return o($,oA)}),ht&&Ks($,xe),_e}function yt($,F,W,re){if(typeof W=="object"&&W!==null&&W.type===D&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case Z:e:{for(var _e=W.key,Te=F;Te!==null;){if(Te.key===_e){if(_e=W.type,_e===D){if(Te.tag===7){u($,Te.sibling),F=m(Te,W.props.children),F.return=$,$=F;break e}}else if(Te.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===Ke&&Ay(_e)===Te.type){u($,Te.sibling),F=m(Te,W.props),F.ref=Wl($,Te,W),F.return=$,$=F;break e}u($,Te);break}else o($,Te);Te=Te.sibling}W.type===D?(F=no(W.props.children,$.mode,re,W.key),F.return=$,$=F):(re=Eh(W.type,W.key,W.props,null,$.mode,re),re.ref=Wl($,F,W),re.return=$,$=re)}return I($);case ie:e:{for(Te=W.key;F!==null;){if(F.key===Te)if(F.tag===4&&F.stateNode.containerInfo===W.containerInfo&&F.stateNode.implementation===W.implementation){u($,F.sibling),F=m(F,W.children||[]),F.return=$,$=F;break e}else{u($,F);break}else o($,F);F=F.sibling}F=Up(W,$.mode,re),F.return=$,$=F}return I($);case Ke:return Te=W._init,yt($,F,Te(W._payload),re)}if(Gr(W))return me($,F,W,re);if(pe(W))return ge($,F,W,re);Jc($,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,F!==null&&F.tag===6?(u($,F.sibling),F=m(F,W),F.return=$,$=F):(u($,F),F=jp(W,$.mode,re),F.return=$,$=F),I($)):u($,F)}return yt}var da=ky(!0),xy=ky(!1),Xc=Bi(null),Zc=null,fa=null,Qf=null;function Yf(){Qf=fa=Zc=null}function Jf(i){var o=Xc.current;at(Xc),i._currentValue=o}function Xf(i,o,u){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===u)break;i=i.return}}function pa(i,o){Zc=i,Qf=fa=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(_n=!0),i.firstContext=null)}function $n(i){var o=i._currentValue;if(Qf!==i)if(i={context:i,memoizedValue:o,next:null},fa===null){if(Zc===null)throw Error(t(308));fa=i,Zc.dependencies={lanes:0,firstContext:i}}else fa=fa.next=i;return o}var Qs=null;function Zf(i){Qs===null?Qs=[i]:Qs.push(i)}function Ry(i,o,u,d){var m=o.interleaved;return m===null?(u.next=u,Zf(o)):(u.next=m.next,m.next=u),o.interleaved=u,si(i,d)}function si(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Wi=!1;function ep(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Py(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function oi(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Hi(i,o,u){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(He&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,si(i,u)}return m=d.interleaved,m===null?(o.next=o,Zf(d)):(o.next=m.next,m.next=o),d.interleaved=o,si(i,u)}function eh(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Oi(i,u)}}function by(i,o){var u=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?m=_=I:_=_.next=I,u=u.next}while(u!==null);_===null?m=_=o:_=_.next=o}else m=_=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:d.shared,effects:d.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function th(i,o,u,d){var m=i.updateQueue;Wi=!1;var _=m.firstBaseUpdate,I=m.lastBaseUpdate,P=m.shared.pending;if(P!==null){m.shared.pending=null;var M=P,H=M.next;M.next=null,I===null?_=H:I.next=H,I=M;var te=i.alternate;te!==null&&(te=te.updateQueue,P=te.lastBaseUpdate,P!==I&&(P===null?te.firstBaseUpdate=H:P.next=H,te.lastBaseUpdate=M))}if(_!==null){var ne=m.baseState;I=0,te=H=M=null,P=_;do{var ee=P.lane,ce=P.eventTime;if((d&ee)===ee){te!==null&&(te=te.next={eventTime:ce,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var me=i,ge=P;switch(ee=o,ce=u,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){ne=me.call(ce,ne,ee);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,ee=typeof me=="function"?me.call(ce,ne,ee):me,ee==null)break e;ne=ae({},ne,ee);break e;case 2:Wi=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,ee=m.effects,ee===null?m.effects=[P]:ee.push(P))}else ce={eventTime:ce,lane:ee,tag:P.tag,payload:P.payload,callback:P.callback,next:null},te===null?(H=te=ce,M=ne):te=te.next=ce,I|=ee;if(P=P.next,P===null){if(P=m.shared.pending,P===null)break;ee=P,P=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);if(te===null&&(M=ne),m.baseState=M,m.firstBaseUpdate=H,m.lastBaseUpdate=te,o=m.shared.interleaved,o!==null){m=o;do I|=m.lane,m=m.next;while(m!==o)}else _===null&&(m.shared.lanes=0);Xs|=I,i.lanes=I,i.memoizedState=ne}}function Ny(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var d=i[o],m=d.callback;if(m!==null){if(d.callback=null,d=u,typeof m!="function")throw Error(t(191,m));m.call(d)}}}var Hl={},Ar=Bi(Hl),Gl=Bi(Hl),ql=Bi(Hl);function Ys(i){if(i===Hl)throw Error(t(174));return i}function tp(i,o){switch(it(ql,o),it(Gl,i),it(Ar,Hl),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:bt(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=bt(o,i)}at(Ar),it(Ar,o)}function ma(){at(Ar),at(Gl),at(ql)}function Dy(i){Ys(ql.current);var o=Ys(Ar.current),u=bt(o,i.type);o!==u&&(it(Gl,i),it(Ar,u))}function np(i){Gl.current===i&&(at(Ar),at(Gl))}var dt=Bi(0);function nh(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var rp=[];function ip(){for(var i=0;i<rp.length;i++)rp[i]._workInProgressVersionPrimary=null;rp.length=0}var rh=Q.ReactCurrentDispatcher,sp=Q.ReactCurrentBatchConfig,Js=0,ft=null,Dt=null,Ft=null,ih=!1,Kl=!1,Ql=0,x1=0;function tn(){throw Error(t(321))}function op(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!sr(i[u],o[u]))return!1;return!0}function ap(i,o,u,d,m,_){if(Js=_,ft=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,rh.current=i===null||i.memoizedState===null?N1:D1,i=u(d,m),Kl){_=0;do{if(Kl=!1,Ql=0,25<=_)throw Error(t(301));_+=1,Ft=Dt=null,o.updateQueue=null,rh.current=O1,i=u(d,m)}while(Kl)}if(rh.current=ah,o=Dt!==null&&Dt.next!==null,Js=0,Ft=Dt=ft=null,ih=!1,o)throw Error(t(300));return i}function lp(){var i=Ql!==0;return Ql=0,i}function kr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?ft.memoizedState=Ft=i:Ft=Ft.next=i,Ft}function Wn(){if(Dt===null){var i=ft.alternate;i=i!==null?i.memoizedState:null}else i=Dt.next;var o=Ft===null?ft.memoizedState:Ft.next;if(o!==null)Ft=o,Dt=i;else{if(i===null)throw Error(t(310));Dt=i,i={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ft===null?ft.memoizedState=Ft=i:Ft=Ft.next=i}return Ft}function Yl(i,o){return typeof o=="function"?o(i):o}function up(i){var o=Wn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=Dt,m=d.baseQueue,_=u.pending;if(_!==null){if(m!==null){var I=m.next;m.next=_.next,_.next=I}d.baseQueue=m=_,u.pending=null}if(m!==null){_=m.next,d=d.baseState;var P=I=null,M=null,H=_;do{var te=H.lane;if((Js&te)===te)M!==null&&(M=M.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),d=H.hasEagerState?H.eagerState:i(d,H.action);else{var ne={lane:te,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};M===null?(P=M=ne,I=d):M=M.next=ne,ft.lanes|=te,Xs|=te}H=H.next}while(H!==null&&H!==_);M===null?I=d:M.next=P,sr(d,o.memoizedState)||(_n=!0),o.memoizedState=d,o.baseState=I,o.baseQueue=M,u.lastRenderedState=d}if(i=u.interleaved,i!==null){m=i;do _=m.lane,ft.lanes|=_,Xs|=_,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function cp(i){var o=Wn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var d=u.dispatch,m=u.pending,_=o.memoizedState;if(m!==null){u.pending=null;var I=m=m.next;do _=i(_,I.action),I=I.next;while(I!==m);sr(_,o.memoizedState)||(_n=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,d]}function Oy(){}function Ly(i,o){var u=ft,d=Wn(),m=o(),_=!sr(d.memoizedState,m);if(_&&(d.memoizedState=m,_n=!0),d=d.queue,hp(Fy.bind(null,u,d,i),[i]),d.getSnapshot!==o||_||Ft!==null&&Ft.memoizedState.tag&1){if(u.flags|=2048,Jl(9,Vy.bind(null,u,d,m,o),void 0,null),jt===null)throw Error(t(349));(Js&30)!==0||My(u,o,m)}return m}function My(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ft.updateQueue,o===null?(o={lastEffect:null,stores:null},ft.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Vy(i,o,u,d){o.value=u,o.getSnapshot=d,jy(o)&&Uy(i)}function Fy(i,o,u){return u(function(){jy(o)&&Uy(i)})}function jy(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!sr(i,u)}catch{return!0}}function Uy(i){var o=si(i,1);o!==null&&cr(o,i,1,-1)}function By(i){var o=kr();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:i},o.queue=i,i=i.dispatch=b1.bind(null,ft,i),[o.memoizedState,i]}function Jl(i,o,u,d){return i={tag:i,create:o,destroy:u,deps:d,next:null},o=ft.updateQueue,o===null?(o={lastEffect:null,stores:null},ft.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(d=u.next,u.next=i,i.next=d,o.lastEffect=i)),i}function zy(){return Wn().memoizedState}function sh(i,o,u,d){var m=kr();ft.flags|=i,m.memoizedState=Jl(1|o,u,void 0,d===void 0?null:d)}function oh(i,o,u,d){var m=Wn();d=d===void 0?null:d;var _=void 0;if(Dt!==null){var I=Dt.memoizedState;if(_=I.destroy,d!==null&&op(d,I.deps)){m.memoizedState=Jl(o,u,_,d);return}}ft.flags|=i,m.memoizedState=Jl(1|o,u,_,d)}function $y(i,o){return sh(8390656,8,i,o)}function hp(i,o){return oh(2048,8,i,o)}function Wy(i,o){return oh(4,2,i,o)}function Hy(i,o){return oh(4,4,i,o)}function Gy(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function qy(i,o,u){return u=u!=null?u.concat([i]):null,oh(4,4,Gy.bind(null,o,i),u)}function dp(){}function Ky(i,o){var u=Wn();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&op(o,d[1])?d[0]:(u.memoizedState=[i,o],i)}function Qy(i,o){var u=Wn();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&op(o,d[1])?d[0]:(i=i(),u.memoizedState=[i,o],i)}function Yy(i,o,u){return(Js&21)===0?(i.baseState&&(i.baseState=!1,_n=!0),i.memoizedState=u):(sr(u,o)||(u=Us(),ft.lanes|=u,Xs|=u,i.baseState=!0),o)}function R1(i,o){var u=Fe;Fe=u!==0&&4>u?u:4,i(!0);var d=sp.transition;sp.transition={};try{i(!1),o()}finally{Fe=u,sp.transition=d}}function Jy(){return Wn().memoizedState}function P1(i,o,u){var d=Qi(i);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},Xy(i))Zy(o,u);else if(u=Ry(i,o,u,d),u!==null){var m=hn();cr(u,i,d,m),ev(u,o,d)}}function b1(i,o,u){var d=Qi(i),m={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(Xy(i))Zy(o,m);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var I=o.lastRenderedState,P=_(I,u);if(m.hasEagerState=!0,m.eagerState=P,sr(P,I)){var M=o.interleaved;M===null?(m.next=m,Zf(o)):(m.next=M.next,M.next=m),o.interleaved=m;return}}catch{}finally{}u=Ry(i,o,m,d),u!==null&&(m=hn(),cr(u,i,d,m),ev(u,o,d))}}function Xy(i){var o=i.alternate;return i===ft||o!==null&&o===ft}function Zy(i,o){Kl=ih=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function ev(i,o,u){if((u&4194240)!==0){var d=o.lanes;d&=i.pendingLanes,u|=d,o.lanes=u,Oi(i,u)}}var ah={readContext:$n,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useInsertionEffect:tn,useLayoutEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useMutableSource:tn,useSyncExternalStore:tn,useId:tn,unstable_isNewReconciler:!1},N1={readContext:$n,useCallback:function(i,o){return kr().memoizedState=[i,o===void 0?null:o],i},useContext:$n,useEffect:$y,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,sh(4194308,4,Gy.bind(null,o,i),u)},useLayoutEffect:function(i,o){return sh(4194308,4,i,o)},useInsertionEffect:function(i,o){return sh(4,2,i,o)},useMemo:function(i,o){var u=kr();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var d=kr();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},d.queue=i,i=i.dispatch=P1.bind(null,ft,i),[d.memoizedState,i]},useRef:function(i){var o=kr();return i={current:i},o.memoizedState=i},useState:By,useDebugValue:dp,useDeferredValue:function(i){return kr().memoizedState=i},useTransition:function(){var i=By(!1),o=i[0];return i=R1.bind(null,i[1]),kr().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var d=ft,m=kr();if(ht){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),jt===null)throw Error(t(349));(Js&30)!==0||My(d,o,u)}m.memoizedState=u;var _={value:u,getSnapshot:o};return m.queue=_,$y(Fy.bind(null,d,_,i),[i]),d.flags|=2048,Jl(9,Vy.bind(null,d,_,u,o),void 0,null),u},useId:function(){var i=kr(),o=jt.identifierPrefix;if(ht){var u=ii,d=ri;u=(d&~(1<<32-ln(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=Ql++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=x1++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},D1={readContext:$n,useCallback:Ky,useContext:$n,useEffect:hp,useImperativeHandle:qy,useInsertionEffect:Wy,useLayoutEffect:Hy,useMemo:Qy,useReducer:up,useRef:zy,useState:function(){return up(Yl)},useDebugValue:dp,useDeferredValue:function(i){var o=Wn();return Yy(o,Dt.memoizedState,i)},useTransition:function(){var i=up(Yl)[0],o=Wn().memoizedState;return[i,o]},useMutableSource:Oy,useSyncExternalStore:Ly,useId:Jy,unstable_isNewReconciler:!1},O1={readContext:$n,useCallback:Ky,useContext:$n,useEffect:hp,useImperativeHandle:qy,useInsertionEffect:Wy,useLayoutEffect:Hy,useMemo:Qy,useReducer:cp,useRef:zy,useState:function(){return cp(Yl)},useDebugValue:dp,useDeferredValue:function(i){var o=Wn();return Dt===null?o.memoizedState=i:Yy(o,Dt.memoizedState,i)},useTransition:function(){var i=cp(Yl)[0],o=Wn().memoizedState;return[i,o]},useMutableSource:Oy,useSyncExternalStore:Ly,useId:Jy,unstable_isNewReconciler:!1};function ar(i,o){if(i&&i.defaultProps){o=ae({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function fp(i,o,u,d){o=i.memoizedState,u=u(d,o),u=u==null?o:ae({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var lh={isMounted:function(i){return(i=i._reactInternals)?Xn(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var d=hn(),m=Qi(i),_=oi(d,m);_.payload=o,u!=null&&(_.callback=u),o=Hi(i,_,m),o!==null&&(cr(o,i,m,d),eh(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var d=hn(),m=Qi(i),_=oi(d,m);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=Hi(i,_,m),o!==null&&(cr(o,i,m,d),eh(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=hn(),d=Qi(i),m=oi(u,d);m.tag=2,o!=null&&(m.callback=o),o=Hi(i,m,d),o!==null&&(cr(o,i,d,u),eh(o,i,d))}};function tv(i,o,u,d,m,_,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,_,I):o.prototype&&o.prototype.isPureReactComponent?!Vl(u,d)||!Vl(m,_):!0}function nv(i,o,u){var d=!1,m=zi,_=o.contextType;return typeof _=="object"&&_!==null?_=$n(_):(m=gn(o)?Gs:en.current,d=o.contextTypes,_=(d=d!=null)?la(i,m):zi),o=new o(u,_),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=lh,i.stateNode=o,o._reactInternals=i,d&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=_),o}function rv(i,o,u,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==i&&lh.enqueueReplaceState(o,o.state,null)}function pp(i,o,u,d){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},ep(i);var _=o.contextType;typeof _=="object"&&_!==null?m.context=$n(_):(_=gn(o)?Gs:en.current,m.context=la(i,_)),m.state=i.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(fp(i,o,_,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&lh.enqueueReplaceState(m,m.state,null),th(i,u,m,d),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function ga(i,o){try{var u="",d=o;do u+=we(d),d=d.return;while(d);var m=u}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:o,stack:m,digest:null}}function mp(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function gp(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var L1=typeof WeakMap=="function"?WeakMap:Map;function iv(i,o,u){u=oi(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){mh||(mh=!0,bp=d),gp(i,o)},u}function sv(i,o,u){u=oi(-1,u),u.tag=3;var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;u.payload=function(){return d(m)},u.callback=function(){gp(i,o)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){gp(i,o),typeof d!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),u}function ov(i,o,u){var d=i.pingCache;if(d===null){d=i.pingCache=new L1;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(m.add(u),i=Q1.bind(null,i,o,u),o.then(i,i))}function av(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function lv(i,o,u,d,m){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=oi(-1,1),o.tag=2,Hi(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var M1=Q.ReactCurrentOwner,_n=!1;function cn(i,o,u,d){o.child=i===null?xy(o,null,u,d):da(o,i.child,u,d)}function uv(i,o,u,d,m){u=u.render;var _=o.ref;return pa(o,m),d=ap(i,o,u,d,_,m),u=lp(),i!==null&&!_n?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,ai(i,o,m)):(ht&&u&&Wf(o),o.flags|=1,cn(i,o,d,m),o.child)}function cv(i,o,u,d,m){if(i===null){var _=u.type;return typeof _=="function"&&!Fp(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,hv(i,o,_,d,m)):(i=Eh(u.type,null,d,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(_=i.child,(i.lanes&m)===0){var I=_.memoizedProps;if(u=u.compare,u=u!==null?u:Vl,u(I,d)&&i.ref===o.ref)return ai(i,o,m)}return o.flags|=1,i=Ji(_,d),i.ref=o.ref,i.return=o,o.child=i}function hv(i,o,u,d,m){if(i!==null){var _=i.memoizedProps;if(Vl(_,d)&&i.ref===o.ref)if(_n=!1,o.pendingProps=d=_,(i.lanes&m)!==0)(i.flags&131072)!==0&&(_n=!0);else return o.lanes=i.lanes,ai(i,o,m)}return _p(i,o,u,d,m)}function dv(i,o,u){var d=o.pendingProps,m=d.children,_=i!==null?i.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(ya,Nn),Nn|=u;else{if((u&1073741824)===0)return i=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,it(ya,Nn),Nn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=_!==null?_.baseLanes:u,it(ya,Nn),Nn|=d}else _!==null?(d=_.baseLanes|u,o.memoizedState=null):d=u,it(ya,Nn),Nn|=d;return cn(i,o,m,u),o.child}function fv(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function _p(i,o,u,d,m){var _=gn(u)?Gs:en.current;return _=la(o,_),pa(o,m),u=ap(i,o,u,d,_,m),d=lp(),i!==null&&!_n?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,ai(i,o,m)):(ht&&d&&Wf(o),o.flags|=1,cn(i,o,u,m),o.child)}function pv(i,o,u,d,m){if(gn(u)){var _=!0;Gc(o)}else _=!1;if(pa(o,m),o.stateNode===null)ch(i,o),nv(o,u,d),pp(o,u,d,m),d=!0;else if(i===null){var I=o.stateNode,P=o.memoizedProps;I.props=P;var M=I.context,H=u.contextType;typeof H=="object"&&H!==null?H=$n(H):(H=gn(u)?Gs:en.current,H=la(o,H));var te=u.getDerivedStateFromProps,ne=typeof te=="function"||typeof I.getSnapshotBeforeUpdate=="function";ne||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(P!==d||M!==H)&&rv(o,I,d,H),Wi=!1;var ee=o.memoizedState;I.state=ee,th(o,d,I,m),M=o.memoizedState,P!==d||ee!==M||mn.current||Wi?(typeof te=="function"&&(fp(o,u,te,d),M=o.memoizedState),(P=Wi||tv(o,u,P,d,ee,M,H))?(ne||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=M),I.props=d,I.state=M,I.context=H,d=P):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{I=o.stateNode,Py(i,o),P=o.memoizedProps,H=o.type===o.elementType?P:ar(o.type,P),I.props=H,ne=o.pendingProps,ee=I.context,M=u.contextType,typeof M=="object"&&M!==null?M=$n(M):(M=gn(u)?Gs:en.current,M=la(o,M));var ce=u.getDerivedStateFromProps;(te=typeof ce=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(P!==ne||ee!==M)&&rv(o,I,d,M),Wi=!1,ee=o.memoizedState,I.state=ee,th(o,d,I,m);var me=o.memoizedState;P!==ne||ee!==me||mn.current||Wi?(typeof ce=="function"&&(fp(o,u,ce,d),me=o.memoizedState),(H=Wi||tv(o,u,H,d,ee,me,M)||!1)?(te||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(d,me,M),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(d,me,M)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||P===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=me),I.props=d,I.state=me,I.context=M,d=H):(typeof I.componentDidUpdate!="function"||P===i.memoizedProps&&ee===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&ee===i.memoizedState||(o.flags|=1024),d=!1)}return yp(i,o,u,d,_,m)}function yp(i,o,u,d,m,_){fv(i,o);var I=(o.flags&128)!==0;if(!d&&!I)return m&&vy(o,u,!1),ai(i,o,_);d=o.stateNode,M1.current=o;var P=I&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,i!==null&&I?(o.child=da(o,i.child,null,_),o.child=da(o,null,P,_)):cn(i,o,P,_),o.memoizedState=d.state,m&&vy(o,u,!0),o.child}function mv(i){var o=i.stateNode;o.pendingContext?_y(i,o.pendingContext,o.pendingContext!==o.context):o.context&&_y(i,o.context,!1),tp(i,o.containerInfo)}function gv(i,o,u,d,m){return ha(),Kf(m),o.flags|=256,cn(i,o,u,d),o.child}var vp={dehydrated:null,treeContext:null,retryLane:0};function wp(i){return{baseLanes:i,cachePool:null,transitions:null}}function _v(i,o,u){var d=o.pendingProps,m=dt.current,_=!1,I=(o.flags&128)!==0,P;if((P=I)||(P=i!==null&&i.memoizedState===null?!1:(m&2)!==0),P?(_=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),it(dt,m&1),i===null)return qf(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=d.children,i=d.fallback,_?(d=o.mode,_=o.child,I={mode:"hidden",children:I},(d&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=I):_=Th(I,d,0,null),i=no(i,d,u,null),_.return=o,i.return=o,_.sibling=i,o.child=_,o.child.memoizedState=wp(u),o.memoizedState=vp,i):Ep(o,I));if(m=i.memoizedState,m!==null&&(P=m.dehydrated,P!==null))return V1(i,o,I,d,P,m,u);if(_){_=d.fallback,I=o.mode,m=i.child,P=m.sibling;var M={mode:"hidden",children:d.children};return(I&1)===0&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=M,o.deletions=null):(d=Ji(m,M),d.subtreeFlags=m.subtreeFlags&14680064),P!==null?_=Ji(P,_):(_=no(_,I,u,null),_.flags|=2),_.return=o,d.return=o,d.sibling=_,o.child=d,d=_,_=o.child,I=i.child.memoizedState,I=I===null?wp(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},_.memoizedState=I,_.childLanes=i.childLanes&~u,o.memoizedState=vp,d}return _=i.child,i=_.sibling,d=Ji(_,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=d,o.memoizedState=null,d}function Ep(i,o){return o=Th({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function uh(i,o,u,d){return d!==null&&Kf(d),da(o,i.child,null,u),i=Ep(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function V1(i,o,u,d,m,_,I){if(u)return o.flags&256?(o.flags&=-257,d=mp(Error(t(422))),uh(i,o,I,d)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(_=d.fallback,m=o.mode,d=Th({mode:"visible",children:d.children},m,0,null),_=no(_,m,I,null),_.flags|=2,d.return=o,_.return=o,d.sibling=_,o.child=d,(o.mode&1)!==0&&da(o,i.child,null,I),o.child.memoizedState=wp(I),o.memoizedState=vp,_);if((o.mode&1)===0)return uh(i,o,I,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var P=d.dgst;return d=P,_=Error(t(419)),d=mp(_,d,void 0),uh(i,o,I,d)}if(P=(I&i.childLanes)!==0,_n||P){if(d=jt,d!==null){switch(I&-I){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|I))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,si(i,m),cr(d,i,m,-1))}return Vp(),d=mp(Error(t(421))),uh(i,o,I,d)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=Y1.bind(null,i),m._reactRetry=o,null):(i=_.treeContext,bn=Ui(m.nextSibling),Pn=o,ht=!0,or=null,i!==null&&(Bn[zn++]=ri,Bn[zn++]=ii,Bn[zn++]=qs,ri=i.id,ii=i.overflow,qs=o),o=Ep(o,d.children),o.flags|=4096,o)}function yv(i,o,u){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Xf(i.return,o,u)}function Tp(i,o,u,d,m){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=u,_.tailMode=m)}function vv(i,o,u){var d=o.pendingProps,m=d.revealOrder,_=d.tail;if(cn(i,o,d.children,u),d=dt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&yv(i,u,o);else if(i.tag===19)yv(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}d&=1}if(it(dt,d),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&nh(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Tp(o,!1,m,u,_);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&nh(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}Tp(o,!0,u,null,_);break;case"together":Tp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ch(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ai(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Xs|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Ji(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ji(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function F1(i,o,u){switch(o.tag){case 3:mv(o),ha();break;case 5:Dy(o);break;case 1:gn(o.type)&&Gc(o);break;case 4:tp(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,m=o.memoizedProps.value;it(Xc,d._currentValue),d._currentValue=m;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(it(dt,dt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?_v(i,o,u):(it(dt,dt.current&1),i=ai(i,o,u),i!==null?i.sibling:null);it(dt,dt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(i.flags&128)!==0){if(d)return vv(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),it(dt,dt.current),d)break;return null;case 22:case 23:return o.lanes=0,dv(i,o,u)}return ai(i,o,u)}var wv,Ip,Ev,Tv;wv=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Ip=function(){},Ev=function(i,o,u,d){var m=i.memoizedProps;if(m!==d){i=o.stateNode,Ys(Ar.current);var _=null;switch(u){case"input":m=Rs(i,m),d=Rs(i,d),_=[];break;case"select":m=ae({},m,{value:void 0}),d=ae({},d,{value:void 0}),_=[];break;case"textarea":m=dl(i,m),d=dl(i,d),_=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(i.onclick=$c)}yl(u,d);var I;u=null;for(H in m)if(!d.hasOwnProperty(H)&&m.hasOwnProperty(H)&&m[H]!=null)if(H==="style"){var P=m[H];for(I in P)P.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(s.hasOwnProperty(H)?_||(_=[]):(_=_||[]).push(H,null));for(H in d){var M=d[H];if(P=m?.[H],d.hasOwnProperty(H)&&M!==P&&(M!=null||P!=null))if(H==="style")if(P){for(I in P)!P.hasOwnProperty(I)||M&&M.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in M)M.hasOwnProperty(I)&&P[I]!==M[I]&&(u||(u={}),u[I]=M[I])}else u||(_||(_=[]),_.push(H,u)),u=M;else H==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,P=P?P.__html:void 0,M!=null&&P!==M&&(_=_||[]).push(H,M)):H==="children"?typeof M!="string"&&typeof M!="number"||(_=_||[]).push(H,""+M):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(s.hasOwnProperty(H)?(M!=null&&H==="onScroll"&&ot("scroll",i),_||P===M||(_=[])):(_=_||[]).push(H,M))}u&&(_=_||[]).push("style",u);var H=_;(o.updateQueue=H)&&(o.flags|=4)}},Tv=function(i,o,u,d){u!==d&&(o.flags|=4)};function Xl(i,o){if(!ht)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function nn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,d=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=d,i.childLanes=u,o}function j1(i,o,u){var d=o.pendingProps;switch(Hf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(o),null;case 1:return gn(o.type)&&Hc(),nn(o),null;case 3:return d=o.stateNode,ma(),at(mn),at(en),ip(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(Yc(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,or!==null&&(Op(or),or=null))),Ip(i,o),nn(o),null;case 5:np(o);var m=Ys(ql.current);if(u=o.type,i!==null&&o.stateNode!=null)Ev(i,o,u,d,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(t(166));return nn(o),null}if(i=Ys(Ar.current),Yc(o)){d=o.stateNode,u=o.type;var _=o.memoizedProps;switch(d[Sr]=o,d[zl]=_,i=(o.mode&1)!==0,u){case"dialog":ot("cancel",d),ot("close",d);break;case"iframe":case"object":case"embed":ot("load",d);break;case"video":case"audio":for(m=0;m<jl.length;m++)ot(jl[m],d);break;case"source":ot("error",d);break;case"img":case"image":case"link":ot("error",d),ot("load",d);break;case"details":ot("toggle",d);break;case"input":Po(d,_),ot("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!_.multiple},ot("invalid",d);break;case"textarea":No(d,_),ot("invalid",d)}yl(u,_),m=null;for(var I in _)if(_.hasOwnProperty(I)){var P=_[I];I==="children"?typeof P=="string"?d.textContent!==P&&(_.suppressHydrationWarning!==!0&&zc(d.textContent,P,i),m=["children",P]):typeof P=="number"&&d.textContent!==""+P&&(_.suppressHydrationWarning!==!0&&zc(d.textContent,P,i),m=["children",""+P]):s.hasOwnProperty(I)&&P!=null&&I==="onScroll"&&ot("scroll",d)}switch(u){case"input":Hr(d),pc(d,_,!0);break;case"textarea":Hr(d),fl(d);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(d.onclick=$c)}d=m,o.updateQueue=d,d!==null&&(o.flags|=4)}else{I=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Pt(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof d.is=="string"?i=I.createElement(u,{is:d.is}):(i=I.createElement(u),u==="select"&&(I=i,d.multiple?I.multiple=!0:d.size&&(I.size=d.size))):i=I.createElementNS(i,u),i[Sr]=o,i[zl]=d,wv(i,o,!1,!1),o.stateNode=i;e:{switch(I=vl(u,d),u){case"dialog":ot("cancel",i),ot("close",i),m=d;break;case"iframe":case"object":case"embed":ot("load",i),m=d;break;case"video":case"audio":for(m=0;m<jl.length;m++)ot(jl[m],i);m=d;break;case"source":ot("error",i),m=d;break;case"img":case"image":case"link":ot("error",i),ot("load",i),m=d;break;case"details":ot("toggle",i),m=d;break;case"input":Po(i,d),m=Rs(i,d),ot("invalid",i);break;case"option":m=d;break;case"select":i._wrapperState={wasMultiple:!!d.multiple},m=ae({},d,{value:void 0}),ot("invalid",i);break;case"textarea":No(i,d),m=dl(i,d),ot("invalid",i);break;default:m=d}yl(u,m),P=m;for(_ in P)if(P.hasOwnProperty(_)){var M=P[_];_==="style"?gl(i,M):_==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&pl(i,M)):_==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&Ri(i,M):typeof M=="number"&&Ri(i,""+M):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?M!=null&&_==="onScroll"&&ot("scroll",i):M!=null&&G(i,_,M,I))}switch(u){case"input":Hr(i),pc(i,d,!1);break;case"textarea":Hr(i),fl(i);break;case"option":d.value!=null&&i.setAttribute("value",""+be(d.value));break;case"select":i.multiple=!!d.multiple,_=d.value,_!=null?qr(i,!!d.multiple,_,!1):d.defaultValue!=null&&qr(i,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=$c)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return nn(o),null;case 6:if(i&&o.stateNode!=null)Tv(i,o,i.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(t(166));if(u=Ys(ql.current),Ys(Ar.current),Yc(o)){if(d=o.stateNode,u=o.memoizedProps,d[Sr]=o,(_=d.nodeValue!==u)&&(i=Pn,i!==null))switch(i.tag){case 3:zc(d.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&zc(d.nodeValue,u,(i.mode&1)!==0)}_&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[Sr]=o,o.stateNode=d}return nn(o),null;case 13:if(at(dt),d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ht&&bn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Sy(),ha(),o.flags|=98560,_=!1;else if(_=Yc(o),d!==null&&d.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Sr]=o}else ha(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;nn(o),_=!1}else or!==null&&(Op(or),or=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(i!==null&&i.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(dt.current&1)!==0?Ot===0&&(Ot=3):Vp())),o.updateQueue!==null&&(o.flags|=4),nn(o),null);case 4:return ma(),Ip(i,o),i===null&&Ul(o.stateNode.containerInfo),nn(o),null;case 10:return Jf(o.type._context),nn(o),null;case 17:return gn(o.type)&&Hc(),nn(o),null;case 19:if(at(dt),_=o.memoizedState,_===null)return nn(o),null;if(d=(o.flags&128)!==0,I=_.rendering,I===null)if(d)Xl(_,!1);else{if(Ot!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(I=nh(i),I!==null){for(o.flags|=128,Xl(_,!1),d=I.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)_=u,i=d,_.flags&=14680066,I=_.alternate,I===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=I.childLanes,_.lanes=I.lanes,_.child=I.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=I.memoizedProps,_.memoizedState=I.memoizedState,_.updateQueue=I.updateQueue,_.type=I.type,i=I.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return it(dt,dt.current&1|2),o.child}i=i.sibling}_.tail!==null&&rt()>va&&(o.flags|=128,d=!0,Xl(_,!1),o.lanes=4194304)}else{if(!d)if(i=nh(I),i!==null){if(o.flags|=128,d=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Xl(_,!0),_.tail===null&&_.tailMode==="hidden"&&!I.alternate&&!ht)return nn(o),null}else 2*rt()-_.renderingStartTime>va&&u!==1073741824&&(o.flags|=128,d=!0,Xl(_,!1),o.lanes=4194304);_.isBackwards?(I.sibling=o.child,o.child=I):(u=_.last,u!==null?u.sibling=I:o.child=I,_.last=I)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=rt(),o.sibling=null,u=dt.current,it(dt,d?u&1|2:u&1),o):(nn(o),null);case 22:case 23:return Mp(),d=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(Nn&1073741824)!==0&&(nn(o),o.subtreeFlags&6&&(o.flags|=8192)):nn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function U1(i,o){switch(Hf(o),o.tag){case 1:return gn(o.type)&&Hc(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ma(),at(mn),at(en),ip(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return np(o),null;case 13:if(at(dt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ha()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return at(dt),null;case 4:return ma(),null;case 10:return Jf(o.type._context),null;case 22:case 23:return Mp(),null;case 24:return null;default:return null}}var hh=!1,rn=!1,B1=typeof WeakSet=="function"?WeakSet:Set,fe=null;function _a(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){mt(i,o,d)}else u.current=null}function Cp(i,o,u){try{u()}catch(d){mt(i,o,d)}}var Iv=!1;function z1(i,o){if(Mf=Vi,i=ty(),xf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var I=0,P=-1,M=-1,H=0,te=0,ne=i,ee=null;t:for(;;){for(var ce;ne!==u||m!==0&&ne.nodeType!==3||(P=I+m),ne!==_||d!==0&&ne.nodeType!==3||(M=I+d),ne.nodeType===3&&(I+=ne.nodeValue.length),(ce=ne.firstChild)!==null;)ee=ne,ne=ce;for(;;){if(ne===i)break t;if(ee===u&&++H===m&&(P=I),ee===_&&++te===d&&(M=I),(ce=ne.nextSibling)!==null)break;ne=ee,ee=ne.parentNode}ne=ce}u=P===-1||M===-1?null:{start:P,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(Vf={focusedElem:i,selectionRange:u},Vi=!1,fe=o;fe!==null;)if(o=fe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,fe=i;else for(;fe!==null;){o=fe;try{var me=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,yt=me.memoizedState,$=o.stateNode,F=$.getSnapshotBeforeUpdate(o.elementType===o.type?ge:ar(o.type,ge),yt);$.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var W=o.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){mt(o,o.return,re)}if(i=o.sibling,i!==null){i.return=o.return,fe=i;break}fe=o.return}return me=Iv,Iv=!1,me}function Zl(i,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&i)===i){var _=m.destroy;m.destroy=void 0,_!==void 0&&Cp(o,u,_)}m=m.next}while(m!==d)}}function dh(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Sp(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Cv(i){var o=i.alternate;o!==null&&(i.alternate=null,Cv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Sr],delete o[zl],delete o[Bf],delete o[C1],delete o[S1])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Sv(i){return i.tag===5||i.tag===3||i.tag===4}function Av(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Sv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ap(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=$c));else if(d!==4&&(i=i.child,i!==null))for(Ap(i,o,u),i=i.sibling;i!==null;)Ap(i,o,u),i=i.sibling}function kp(i,o,u){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(d!==4&&(i=i.child,i!==null))for(kp(i,o,u),i=i.sibling;i!==null;)kp(i,o,u),i=i.sibling}var qt=null,lr=!1;function Gi(i,o,u){for(u=u.child;u!==null;)kv(i,o,u),u=u.sibling}function kv(i,o,u){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(Fs,u)}catch{}switch(u.tag){case 5:rn||_a(u,o);case 6:var d=qt,m=lr;qt=null,Gi(i,o,u),qt=d,lr=m,qt!==null&&(lr?(i=qt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):qt.removeChild(u.stateNode));break;case 18:qt!==null&&(lr?(i=qt,u=u.stateNode,i.nodeType===8?Uf(i.parentNode,u):i.nodeType===1&&Uf(i,u),rr(i)):Uf(qt,u.stateNode));break;case 4:d=qt,m=lr,qt=u.stateNode.containerInfo,lr=!0,Gi(i,o,u),qt=d,lr=m;break;case 0:case 11:case 14:case 15:if(!rn&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var _=m,I=_.destroy;_=_.tag,I!==void 0&&((_&2)!==0||(_&4)!==0)&&Cp(u,o,I),m=m.next}while(m!==d)}Gi(i,o,u);break;case 1:if(!rn&&(_a(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(P){mt(u,o,P)}Gi(i,o,u);break;case 21:Gi(i,o,u);break;case 22:u.mode&1?(rn=(d=rn)||u.memoizedState!==null,Gi(i,o,u),rn=d):Gi(i,o,u);break;default:Gi(i,o,u)}}function xv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new B1),o.forEach(function(d){var m=J1.bind(null,i,d);u.has(d)||(u.add(d),d.then(m,m))})}}function ur(i,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];try{var _=i,I=o,P=I;e:for(;P!==null;){switch(P.tag){case 5:qt=P.stateNode,lr=!1;break e;case 3:qt=P.stateNode.containerInfo,lr=!0;break e;case 4:qt=P.stateNode.containerInfo,lr=!0;break e}P=P.return}if(qt===null)throw Error(t(160));kv(_,I,m),qt=null,lr=!1;var M=m.alternate;M!==null&&(M.return=null),m.return=null}catch(H){mt(m,o,H)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Rv(o,i),o=o.sibling}function Rv(i,o){var u=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ur(o,i),xr(i),d&4){try{Zl(3,i,i.return),dh(3,i)}catch(ge){mt(i,i.return,ge)}try{Zl(5,i,i.return)}catch(ge){mt(i,i.return,ge)}}break;case 1:ur(o,i),xr(i),d&512&&u!==null&&_a(u,u.return);break;case 5:if(ur(o,i),xr(i),d&512&&u!==null&&_a(u,u.return),i.flags&32){var m=i.stateNode;try{Ri(m,"")}catch(ge){mt(i,i.return,ge)}}if(d&4&&(m=i.stateNode,m!=null)){var _=i.memoizedProps,I=u!==null?u.memoizedProps:_,P=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{P==="input"&&_.type==="radio"&&_.name!=null&&cl(m,_),vl(P,I);var H=vl(P,_);for(I=0;I<M.length;I+=2){var te=M[I],ne=M[I+1];te==="style"?gl(m,ne):te==="dangerouslySetInnerHTML"?pl(m,ne):te==="children"?Ri(m,ne):G(m,te,ne,H)}switch(P){case"input":hl(m,_);break;case"textarea":Do(m,_);break;case"select":var ee=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var ce=_.value;ce!=null?qr(m,!!_.multiple,ce,!1):ee!==!!_.multiple&&(_.defaultValue!=null?qr(m,!!_.multiple,_.defaultValue,!0):qr(m,!!_.multiple,_.multiple?[]:"",!1))}m[zl]=_}catch(ge){mt(i,i.return,ge)}}break;case 6:if(ur(o,i),xr(i),d&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,_=i.memoizedProps;try{m.nodeValue=_}catch(ge){mt(i,i.return,ge)}}break;case 3:if(ur(o,i),xr(i),d&4&&u!==null&&u.memoizedState.isDehydrated)try{rr(o.containerInfo)}catch(ge){mt(i,i.return,ge)}break;case 4:ur(o,i),xr(i);break;case 13:ur(o,i),xr(i),m=i.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(Pp=rt())),d&4&&xv(i);break;case 22:if(te=u!==null&&u.memoizedState!==null,i.mode&1?(rn=(H=rn)||te,ur(o,i),rn=H):ur(o,i),xr(i),d&8192){if(H=i.memoizedState!==null,(i.stateNode.isHidden=H)&&!te&&(i.mode&1)!==0)for(fe=i,te=i.child;te!==null;){for(ne=fe=te;fe!==null;){switch(ee=fe,ce=ee.child,ee.tag){case 0:case 11:case 14:case 15:Zl(4,ee,ee.return);break;case 1:_a(ee,ee.return);var me=ee.stateNode;if(typeof me.componentWillUnmount=="function"){d=ee,u=ee.return;try{o=d,me.props=o.memoizedProps,me.state=o.memoizedState,me.componentWillUnmount()}catch(ge){mt(d,u,ge)}}break;case 5:_a(ee,ee.return);break;case 22:if(ee.memoizedState!==null){Nv(ne);continue}}ce!==null?(ce.return=ee,fe=ce):Nv(ne)}te=te.sibling}e:for(te=null,ne=i;;){if(ne.tag===5){if(te===null){te=ne;try{m=ne.stateNode,H?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(P=ne.stateNode,M=ne.memoizedProps.style,I=M!=null&&M.hasOwnProperty("display")?M.display:null,P.style.display=ml("display",I))}catch(ge){mt(i,i.return,ge)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=H?"":ne.memoizedProps}catch(ge){mt(i,i.return,ge)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===i)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===i)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===i)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:ur(o,i),xr(i),d&4&&xv(i);break;case 21:break;default:ur(o,i),xr(i)}}function xr(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Sv(u)){var d=u;break e}u=u.return}throw Error(t(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(Ri(m,""),d.flags&=-33);var _=Av(i);kp(i,_,m);break;case 3:case 4:var I=d.stateNode.containerInfo,P=Av(i);Ap(i,P,I);break;default:throw Error(t(161))}}catch(M){mt(i,i.return,M)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function $1(i,o,u){fe=i,Pv(i)}function Pv(i,o,u){for(var d=(i.mode&1)!==0;fe!==null;){var m=fe,_=m.child;if(m.tag===22&&d){var I=m.memoizedState!==null||hh;if(!I){var P=m.alternate,M=P!==null&&P.memoizedState!==null||rn;P=hh;var H=rn;if(hh=I,(rn=M)&&!H)for(fe=m;fe!==null;)I=fe,M=I.child,I.tag===22&&I.memoizedState!==null?Dv(m):M!==null?(M.return=I,fe=M):Dv(m);for(;_!==null;)fe=_,Pv(_),_=_.sibling;fe=m,hh=P,rn=H}bv(i)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,fe=_):bv(i)}}function bv(i){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:rn||dh(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!rn)if(u===null)d.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:ar(o.type,u.memoizedProps);d.componentDidUpdate(m,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&Ny(o,_,d);break;case 3:var I=o.updateQueue;if(I!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Ny(o,I,u)}break;case 5:var P=o.stateNode;if(u===null&&o.flags&4){u=P;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var H=o.alternate;if(H!==null){var te=H.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&rr(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}rn||o.flags&512&&Sp(o)}catch(ee){mt(o,o.return,ee)}}if(o===i){fe=null;break}if(u=o.sibling,u!==null){u.return=o.return,fe=u;break}fe=o.return}}function Nv(i){for(;fe!==null;){var o=fe;if(o===i){fe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,fe=u;break}fe=o.return}}function Dv(i){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{dh(4,o)}catch(M){mt(o,u,M)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(M){mt(o,m,M)}}var _=o.return;try{Sp(o)}catch(M){mt(o,_,M)}break;case 5:var I=o.return;try{Sp(o)}catch(M){mt(o,I,M)}}}catch(M){mt(o,o.return,M)}if(o===i){fe=null;break}var P=o.sibling;if(P!==null){P.return=o.return,fe=P;break}fe=o.return}}var W1=Math.ceil,fh=Q.ReactCurrentDispatcher,xp=Q.ReactCurrentOwner,Hn=Q.ReactCurrentBatchConfig,He=0,jt=null,It=null,Kt=0,Nn=0,ya=Bi(0),Ot=0,eu=null,Xs=0,ph=0,Rp=0,tu=null,yn=null,Pp=0,va=1/0,li=null,mh=!1,bp=null,qi=null,gh=!1,Ki=null,_h=0,nu=0,Np=null,yh=-1,vh=0;function hn(){return(He&6)!==0?rt():yh!==-1?yh:yh=rt()}function Qi(i){return(i.mode&1)===0?1:(He&2)!==0&&Kt!==0?Kt&-Kt:k1.transition!==null?(vh===0&&(vh=Us()),vh):(i=Fe,i!==0||(i=window.event,i=i===void 0?16:Pl(i.type)),i)}function cr(i,o,u,d){if(50<nu)throw nu=0,Np=null,Error(t(185));Di(i,u,d),((He&2)===0||i!==jt)&&(i===jt&&((He&2)===0&&(ph|=u),Ot===4&&Yi(i,Kt)),vn(i,d),u===1&&He===0&&(o.mode&1)===0&&(va=rt()+500,qc&&$i()))}function vn(i,o){var u=i.callbackNode;Yr(i,o);var d=js(i,i===jt?Kt:0);if(d===0)u!==null&&Sl(u),i.callbackNode=null,i.callbackPriority=0;else if(o=d&-d,i.callbackPriority!==o){if(u!=null&&Sl(u),o===1)i.tag===0?A1(Lv.bind(null,i)):wy(Lv.bind(null,i)),T1(function(){(He&6)===0&&$i()}),u=null;else{switch(Li(d)){case 1:u=Vs;break;case 4:u=Pi;break;case 16:u=Fn;break;case 536870912:u=vc;break;default:u=Fn}u=$v(u,Ov.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function Ov(i,o){if(yh=-1,vh=0,(He&6)!==0)throw Error(t(327));var u=i.callbackNode;if(wa()&&i.callbackNode!==u)return null;var d=js(i,i===jt?Kt:0);if(d===0)return null;if((d&30)!==0||(d&i.expiredLanes)!==0||o)o=wh(i,d);else{o=d;var m=He;He|=2;var _=Vv();(jt!==i||Kt!==o)&&(li=null,va=rt()+500,eo(i,o));do try{q1();break}catch(P){Mv(i,P)}while(!0);Yf(),fh.current=_,He=m,It!==null?o=0:(jt=null,Kt=0,o=Ot)}if(o!==0){if(o===2&&(m=kn(i),m!==0&&(d=m,o=Dp(i,m))),o===1)throw u=eu,eo(i,0),Yi(i,d),vn(i,rt()),u;if(o===6)Yi(i,d);else{if(m=i.current.alternate,(d&30)===0&&!H1(m)&&(o=wh(i,d),o===2&&(_=kn(i),_!==0&&(d=_,o=Dp(i,_))),o===1))throw u=eu,eo(i,0),Yi(i,d),vn(i,rt()),u;switch(i.finishedWork=m,i.finishedLanes=d,o){case 0:case 1:throw Error(t(345));case 2:to(i,yn,li);break;case 3:if(Yi(i,d),(d&130023424)===d&&(o=Pp+500-rt(),10<o)){if(js(i,0)!==0)break;if(m=i.suspendedLanes,(m&d)!==d){hn(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=jf(to.bind(null,i,yn,li),o);break}to(i,yn,li);break;case 4:if(Yi(i,d),(d&4194240)===d)break;for(o=i.eventTimes,m=-1;0<d;){var I=31-ln(d);_=1<<I,I=o[I],I>m&&(m=I),d&=~_}if(d=m,d=rt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*W1(d/1960))-d,10<d){i.timeoutHandle=jf(to.bind(null,i,yn,li),d);break}to(i,yn,li);break;case 5:to(i,yn,li);break;default:throw Error(t(329))}}}return vn(i,rt()),i.callbackNode===u?Ov.bind(null,i):null}function Dp(i,o){var u=tu;return i.current.memoizedState.isDehydrated&&(eo(i,o).flags|=256),i=wh(i,o),i!==2&&(o=yn,yn=u,o!==null&&Op(o)),i}function Op(i){yn===null?yn=i:yn.push.apply(yn,i)}function H1(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var m=u[d],_=m.getSnapshot;m=m.value;try{if(!sr(_(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Yi(i,o){for(o&=~Rp,o&=~ph,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-ln(o),d=1<<u;i[u]=-1,o&=~d}}function Lv(i){if((He&6)!==0)throw Error(t(327));wa();var o=js(i,0);if((o&1)===0)return vn(i,rt()),null;var u=wh(i,o);if(i.tag!==0&&u===2){var d=kn(i);d!==0&&(o=d,u=Dp(i,d))}if(u===1)throw u=eu,eo(i,0),Yi(i,o),vn(i,rt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,to(i,yn,li),vn(i,rt()),null}function Lp(i,o){var u=He;He|=1;try{return i(o)}finally{He=u,He===0&&(va=rt()+500,qc&&$i())}}function Zs(i){Ki!==null&&Ki.tag===0&&(He&6)===0&&wa();var o=He;He|=1;var u=Hn.transition,d=Fe;try{if(Hn.transition=null,Fe=1,i)return i()}finally{Fe=d,Hn.transition=u,He=o,(He&6)===0&&$i()}}function Mp(){Nn=ya.current,at(ya)}function eo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,E1(u)),It!==null)for(u=It.return;u!==null;){var d=u;switch(Hf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Hc();break;case 3:ma(),at(mn),at(en),ip();break;case 5:np(d);break;case 4:ma();break;case 13:at(dt);break;case 19:at(dt);break;case 10:Jf(d.type._context);break;case 22:case 23:Mp()}u=u.return}if(jt=i,It=i=Ji(i.current,null),Kt=Nn=o,Ot=0,eu=null,Rp=ph=Xs=0,yn=tu=null,Qs!==null){for(o=0;o<Qs.length;o++)if(u=Qs[o],d=u.interleaved,d!==null){u.interleaved=null;var m=d.next,_=u.pending;if(_!==null){var I=_.next;_.next=m,d.next=I}u.pending=d}Qs=null}return i}function Mv(i,o){do{var u=It;try{if(Yf(),rh.current=ah,ih){for(var d=ft.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}ih=!1}if(Js=0,Ft=Dt=ft=null,Kl=!1,Ql=0,xp.current=null,u===null||u.return===null){Ot=1,eu=o,It=null;break}e:{var _=i,I=u.return,P=u,M=o;if(o=Kt,P.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var H=M,te=P,ne=te.tag;if((te.mode&1)===0&&(ne===0||ne===11||ne===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ce=av(I);if(ce!==null){ce.flags&=-257,lv(ce,I,P,_,o),ce.mode&1&&ov(_,H,o),o=ce,M=H;var me=o.updateQueue;if(me===null){var ge=new Set;ge.add(M),o.updateQueue=ge}else me.add(M);break e}else{if((o&1)===0){ov(_,H,o),Vp();break e}M=Error(t(426))}}else if(ht&&P.mode&1){var yt=av(I);if(yt!==null){(yt.flags&65536)===0&&(yt.flags|=256),lv(yt,I,P,_,o),Kf(ga(M,P));break e}}_=M=ga(M,P),Ot!==4&&(Ot=2),tu===null?tu=[_]:tu.push(_),_=I;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var $=iv(_,M,o);by(_,$);break e;case 1:P=M;var F=_.type,W=_.stateNode;if((_.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(qi===null||!qi.has(W)))){_.flags|=65536,o&=-o,_.lanes|=o;var re=sv(_,P,o);by(_,re);break e}}_=_.return}while(_!==null)}jv(u)}catch(_e){o=_e,It===u&&u!==null&&(It=u=u.return);continue}break}while(!0)}function Vv(){var i=fh.current;return fh.current=ah,i===null?ah:i}function Vp(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),jt===null||(Xs&268435455)===0&&(ph&268435455)===0||Yi(jt,Kt)}function wh(i,o){var u=He;He|=2;var d=Vv();(jt!==i||Kt!==o)&&(li=null,eo(i,o));do try{G1();break}catch(m){Mv(i,m)}while(!0);if(Yf(),He=u,fh.current=d,It!==null)throw Error(t(261));return jt=null,Kt=0,Ot}function G1(){for(;It!==null;)Fv(It)}function q1(){for(;It!==null&&!_c();)Fv(It)}function Fv(i){var o=zv(i.alternate,i,Nn);i.memoizedProps=i.pendingProps,o===null?jv(i):It=o,xp.current=null}function jv(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=j1(u,o,Nn),u!==null){It=u;return}}else{if(u=U1(u,o),u!==null){u.flags&=32767,It=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Ot=6,It=null;return}}if(o=o.sibling,o!==null){It=o;return}It=o=i}while(o!==null);Ot===0&&(Ot=5)}function to(i,o,u){var d=Fe,m=Hn.transition;try{Hn.transition=null,Fe=1,K1(i,o,u,d)}finally{Hn.transition=m,Fe=d}return null}function K1(i,o,u,d){do wa();while(Ki!==null);if((He&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=u.lanes|u.childLanes;if(et(i,_),i===jt&&(It=jt=null,Kt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||gh||(gh=!0,$v(Fn,function(){return wa(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=Hn.transition,Hn.transition=null;var I=Fe;Fe=1;var P=He;He|=4,xp.current=null,z1(i,u),Rv(u,i),p1(Vf),Vi=!!Mf,Vf=Mf=null,i.current=u,$1(u),wf(),He=P,Fe=I,Hn.transition=_}else i.current=u;if(gh&&(gh=!1,Ki=i,_h=m),_=i.pendingLanes,_===0&&(qi=null),wc(u.stateNode),vn(i,rt()),o!==null)for(d=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],d(m.value,{componentStack:m.stack,digest:m.digest});if(mh)throw mh=!1,i=bp,bp=null,i;return(_h&1)!==0&&i.tag!==0&&wa(),_=i.pendingLanes,(_&1)!==0?i===Np?nu++:(nu=0,Np=i):nu=0,$i(),null}function wa(){if(Ki!==null){var i=Li(_h),o=Hn.transition,u=Fe;try{if(Hn.transition=null,Fe=16>i?16:i,Ki===null)var d=!1;else{if(i=Ki,Ki=null,_h=0,(He&6)!==0)throw Error(t(331));var m=He;for(He|=4,fe=i.current;fe!==null;){var _=fe,I=_.child;if((fe.flags&16)!==0){var P=_.deletions;if(P!==null){for(var M=0;M<P.length;M++){var H=P[M];for(fe=H;fe!==null;){var te=fe;switch(te.tag){case 0:case 11:case 15:Zl(8,te,_)}var ne=te.child;if(ne!==null)ne.return=te,fe=ne;else for(;fe!==null;){te=fe;var ee=te.sibling,ce=te.return;if(Cv(te),te===H){fe=null;break}if(ee!==null){ee.return=ce,fe=ee;break}fe=ce}}}var me=_.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var yt=ge.sibling;ge.sibling=null,ge=yt}while(ge!==null)}}fe=_}}if((_.subtreeFlags&2064)!==0&&I!==null)I.return=_,fe=I;else e:for(;fe!==null;){if(_=fe,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Zl(9,_,_.return)}var $=_.sibling;if($!==null){$.return=_.return,fe=$;break e}fe=_.return}}var F=i.current;for(fe=F;fe!==null;){I=fe;var W=I.child;if((I.subtreeFlags&2064)!==0&&W!==null)W.return=I,fe=W;else e:for(I=F;fe!==null;){if(P=fe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:dh(9,P)}}catch(_e){mt(P,P.return,_e)}if(P===I){fe=null;break e}var re=P.sibling;if(re!==null){re.return=P.return,fe=re;break e}fe=P.return}}if(He=m,$i(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(Fs,i)}catch{}d=!0}return d}finally{Fe=u,Hn.transition=o}}return!1}function Uv(i,o,u){o=ga(u,o),o=iv(i,o,1),i=Hi(i,o,1),o=hn(),i!==null&&(Di(i,1,o),vn(i,o))}function mt(i,o,u){if(i.tag===3)Uv(i,i,u);else for(;o!==null;){if(o.tag===3){Uv(o,i,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(qi===null||!qi.has(d))){i=ga(u,i),i=sv(o,i,1),o=Hi(o,i,1),i=hn(),o!==null&&(Di(o,1,i),vn(o,i));break}}o=o.return}}function Q1(i,o,u){var d=i.pingCache;d!==null&&d.delete(o),o=hn(),i.pingedLanes|=i.suspendedLanes&u,jt===i&&(Kt&u)===u&&(Ot===4||Ot===3&&(Kt&130023424)===Kt&&500>rt()-Pp?eo(i,0):Rp|=u),vn(i,o)}function Bv(i,o){o===0&&((i.mode&1)===0?o=1:(o=$o,$o<<=1,($o&130023424)===0&&($o=4194304)));var u=hn();i=si(i,o),i!==null&&(Di(i,o,u),vn(i,u))}function Y1(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),Bv(i,u)}function J1(i,o){var u=0;switch(i.tag){case 13:var d=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=i.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(o),Bv(i,u)}var zv;zv=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||mn.current)_n=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return _n=!1,F1(i,o,u);_n=(i.flags&131072)!==0}else _n=!1,ht&&(o.flags&1048576)!==0&&Ey(o,Qc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;ch(i,o),i=o.pendingProps;var m=la(o,en.current);pa(o,u),m=ap(null,o,d,i,m,u);var _=lp();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,gn(d)?(_=!0,Gc(o)):_=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,ep(o),m.updater=lh,o.stateNode=m,m._reactInternals=o,pp(o,d,i,u),o=yp(null,o,d,!0,_,u)):(o.tag=0,ht&&_&&Wf(o),cn(null,o,m,u),o=o.child),o;case 16:d=o.elementType;e:{switch(ch(i,o),i=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=Z1(d),i=ar(d,i),m){case 0:o=_p(null,o,d,i,u);break e;case 1:o=pv(null,o,d,i,u);break e;case 11:o=uv(null,o,d,i,u);break e;case 14:o=cv(null,o,d,ar(d.type,i),u);break e}throw Error(t(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:ar(d,m),_p(i,o,d,m,u);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:ar(d,m),pv(i,o,d,m,u);case 3:e:{if(mv(o),i===null)throw Error(t(387));d=o.pendingProps,_=o.memoizedState,m=_.element,Py(i,o),th(o,d,null,u);var I=o.memoizedState;if(d=I.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){m=ga(Error(t(423)),o),o=gv(i,o,d,u,m);break e}else if(d!==m){m=ga(Error(t(424)),o),o=gv(i,o,d,u,m);break e}else for(bn=Ui(o.stateNode.containerInfo.firstChild),Pn=o,ht=!0,or=null,u=xy(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ha(),d===m){o=ai(i,o,u);break e}cn(i,o,d,u)}o=o.child}return o;case 5:return Dy(o),i===null&&qf(o),d=o.type,m=o.pendingProps,_=i!==null?i.memoizedProps:null,I=m.children,Ff(d,m)?I=null:_!==null&&Ff(d,_)&&(o.flags|=32),fv(i,o),cn(i,o,I,u),o.child;case 6:return i===null&&qf(o),null;case 13:return _v(i,o,u);case 4:return tp(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=da(o,null,d,u):cn(i,o,d,u),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:ar(d,m),uv(i,o,d,m,u);case 7:return cn(i,o,o.pendingProps,u),o.child;case 8:return cn(i,o,o.pendingProps.children,u),o.child;case 12:return cn(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,_=o.memoizedProps,I=m.value,it(Xc,d._currentValue),d._currentValue=I,_!==null)if(sr(_.value,I)){if(_.children===m.children&&!mn.current){o=ai(i,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var P=_.dependencies;if(P!==null){I=_.child;for(var M=P.firstContext;M!==null;){if(M.context===d){if(_.tag===1){M=oi(-1,u&-u),M.tag=2;var H=_.updateQueue;if(H!==null){H=H.shared;var te=H.pending;te===null?M.next=M:(M.next=te.next,te.next=M),H.pending=M}}_.lanes|=u,M=_.alternate,M!==null&&(M.lanes|=u),Xf(_.return,u,o),P.lanes|=u;break}M=M.next}}else if(_.tag===10)I=_.type===o.type?null:_.child;else if(_.tag===18){if(I=_.return,I===null)throw Error(t(341));I.lanes|=u,P=I.alternate,P!==null&&(P.lanes|=u),Xf(I,u,o),I=_.sibling}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===o){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}cn(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,pa(o,u),m=$n(m),d=d(m),o.flags|=1,cn(i,o,d,u),o.child;case 14:return d=o.type,m=ar(d,o.pendingProps),m=ar(d.type,m),cv(i,o,d,m,u);case 15:return hv(i,o,o.type,o.pendingProps,u);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:ar(d,m),ch(i,o),o.tag=1,gn(d)?(i=!0,Gc(o)):i=!1,pa(o,u),nv(o,d,m),pp(o,d,m,u),yp(null,o,d,!0,i,u);case 19:return vv(i,o,u);case 22:return dv(i,o,u)}throw Error(t(156,o.tag))};function $v(i,o){return Bo(i,o)}function X1(i,o,u,d){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(i,o,u,d){return new X1(i,o,u,d)}function Fp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Z1(i){if(typeof i=="function")return Fp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===V)return 11;if(i===ve)return 14}return 2}function Ji(i,o){var u=i.alternate;return u===null?(u=Gn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Eh(i,o,u,d,m,_){var I=2;if(d=i,typeof i=="function")Fp(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case D:return no(u.children,m,_,o);case k:I=8,m|=8;break;case x:return i=Gn(12,u,o,m|2),i.elementType=x,i.lanes=_,i;case b:return i=Gn(13,u,o,m),i.elementType=b,i.lanes=_,i;case ke:return i=Gn(19,u,o,m),i.elementType=ke,i.lanes=_,i;case We:return Th(u,m,_,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:I=10;break e;case O:I=9;break e;case V:I=11;break e;case ve:I=14;break e;case Ke:I=16,d=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Gn(I,u,o,m),o.elementType=i,o.type=d,o.lanes=_,o}function no(i,o,u,d){return i=Gn(7,i,d,o),i.lanes=u,i}function Th(i,o,u,d){return i=Gn(22,i,d,o),i.elementType=We,i.lanes=u,i.stateNode={isHidden:!1},i}function jp(i,o,u){return i=Gn(6,i,null,o),i.lanes=u,i}function Up(i,o,u){return o=Gn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function eA(i,o,u,d,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ni(0),this.expirationTimes=Ni(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Bp(i,o,u,d,m,_,I,P,M){return i=new eA(i,o,u,P,M),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Gn(3,null,null,o),i.current=_,_.stateNode=i,_.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},ep(_),i}function tA(i,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:d==null?null:""+d,children:i,containerInfo:o,implementation:u}}function Wv(i){if(!i)return zi;i=i._reactInternals;e:{if(Xn(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(gn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(gn(u))return yy(i,u,o)}return o}function Hv(i,o,u,d,m,_,I,P,M){return i=Bp(u,d,!0,i,m,_,I,P,M),i.context=Wv(null),u=i.current,d=hn(),m=Qi(u),_=oi(d,m),_.callback=o??null,Hi(u,_,m),i.current.lanes=m,Di(i,m,d),vn(i,d),i}function Ih(i,o,u,d){var m=o.current,_=hn(),I=Qi(m);return u=Wv(u),o.context===null?o.context=u:o.pendingContext=u,o=oi(_,I),o.payload={element:i},d=d===void 0?null:d,d!==null&&(o.callback=d),i=Hi(m,o,I),i!==null&&(cr(i,m,I,_),eh(i,m,I)),I}function Ch(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Gv(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function zp(i,o){Gv(i,o),(i=i.alternate)&&Gv(i,o)}function nA(){return null}var qv=typeof reportError=="function"?reportError:function(i){console.error(i)};function $p(i){this._internalRoot=i}Sh.prototype.render=$p.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Ih(i,o,null,null)},Sh.prototype.unmount=$p.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Zs(function(){Ih(null,i,null,null)}),o[ti]=null}};function Sh(i){this._internalRoot=i}Sh.prototype.unstable_scheduleHydration=function(i){if(i){var o=Sc();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Er.length&&o!==0&&o<Er[u].priority;u++);Er.splice(u,0,i),u===0&&xc(i)}};function Wp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ah(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Kv(){}function rA(i,o,u,d,m){if(m){if(typeof d=="function"){var _=d;d=function(){var H=Ch(I);_.call(H)}}var I=Hv(o,d,i,0,null,!1,!1,"",Kv);return i._reactRootContainer=I,i[ti]=I.current,Ul(i.nodeType===8?i.parentNode:i),Zs(),I}for(;m=i.lastChild;)i.removeChild(m);if(typeof d=="function"){var P=d;d=function(){var H=Ch(M);P.call(H)}}var M=Bp(i,0,!1,null,null,!1,!1,"",Kv);return i._reactRootContainer=M,i[ti]=M.current,Ul(i.nodeType===8?i.parentNode:i),Zs(function(){Ih(o,M,u,d)}),M}function kh(i,o,u,d,m){var _=u._reactRootContainer;if(_){var I=_;if(typeof m=="function"){var P=m;m=function(){var M=Ch(I);P.call(M)}}Ih(o,I,i,m)}else I=rA(u,o,i,m,d);return Ch(I)}Ic=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=bi(o.pendingLanes);u!==0&&(Oi(o,u|1),vn(o,rt()),(He&6)===0&&(va=rt()+500,$i()))}break;case 13:Zs(function(){var d=si(i,1);if(d!==null){var m=hn();cr(d,i,1,m)}}),zp(i,1)}},Wo=function(i){if(i.tag===13){var o=si(i,134217728);if(o!==null){var u=hn();cr(o,i,134217728,u)}zp(i,134217728)}},Cc=function(i){if(i.tag===13){var o=Qi(i),u=si(i,o);if(u!==null){var d=hn();cr(u,i,o,d)}zp(i,o)}},Sc=function(){return Fe},Ac=function(i,o){var u=Fe;try{return Fe=i,o()}finally{Fe=u}},Lo=function(i,o,u){switch(o){case"input":if(hl(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==i&&d.form===i.form){var m=Wc(d);if(!m)throw Error(t(90));Ro(d),hl(d,m)}}}break;case"textarea":Do(i,u);break;case"select":o=u.value,o!=null&&qr(i,!!u.multiple,o,!1)}},Ds=Lp,El=Zs;var iA={usingClientEntryPoint:!1,Events:[$l,oa,Wc,vr,wl,Lp]},ru={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sA={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Cl(i),i===null?null:i.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||nA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xh.isDisabled&&xh.supportsFiber)try{Fs=xh.inject(sA),An=xh}catch{}}return wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iA,wn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(o))throw Error(t(200));return tA(i,o,null,u)},wn.createRoot=function(i,o){if(!Wp(i))throw Error(t(299));var u=!1,d="",m=qv;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=Bp(i,1,!1,null,null,u,!1,d,m),i[ti]=o.current,Ul(i.nodeType===8?i.parentNode:i),new $p(o)},wn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Cl(o),i=i===null?null:i.stateNode,i},wn.flushSync=function(i){return Zs(i)},wn.hydrate=function(i,o,u){if(!Ah(o))throw Error(t(200));return kh(null,i,o,!0,u)},wn.hydrateRoot=function(i,o,u){if(!Wp(i))throw Error(t(405));var d=u!=null&&u.hydratedSources||null,m=!1,_="",I=qv;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),o=Hv(o,null,i,1,u??null,m,!1,_,I),i[ti]=o.current,Ul(i),d)for(i=0;i<d.length;i++)u=d[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new Sh(o)},wn.render=function(i,o,u){if(!Ah(o))throw Error(t(200));return kh(null,i,o,!1,u)},wn.unmountComponentAtNode=function(i){if(!Ah(i))throw Error(t(40));return i._reactRootContainer?(Zs(function(){kh(null,null,i,!1,function(){i._reactRootContainer=null,i[ti]=null})}),!0):!1},wn.unstable_batchedUpdates=Lp,wn.unstable_renderSubtreeIntoContainer=function(i,o,u,d){if(!Ah(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return kh(i,o,u,!1,d)},wn.version="18.3.1-next-f1338f8080-20240426",wn}var n0;function fA(){if(n0)return qp.exports;n0=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qp.exports=dA(),qp.exports}var r0;function pA(){if(r0)return Rh;r0=1;var n=fA();return Rh.createRoot=n.createRoot,Rh.hydrateRoot=n.hydrateRoot,Rh}var mA=pA();const gA=jE(mA);var su={},i0;function _A(){if(i0)return su;i0=1,Object.defineProperty(su,"__esModule",{value:!0}),su.parse=l,su.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function l(E,S){const A=new a,N=E.length;if(N<2)return A;const L=S?.decode||y;let U=0;do{const q=E.indexOf("=",U);if(q===-1)break;const G=E.indexOf(";",U),Q=G===-1?N:G;if(q>Q){U=E.lastIndexOf(";",q-1)+1;continue}const Z=h(E,U,q),ie=f(E,q,Z),D=E.slice(Z,ie);if(A[D]===void 0){let k=h(E,q+1,Q),x=f(E,Q,k);const R=L(E.slice(k,x));A[D]=R}U=Q+1}while(U<N);return A}function h(E,S,A){do{const N=E.charCodeAt(S);if(N!==32&&N!==9)return S}while(++S<A);return A}function f(E,S,A){for(;S>A;){const N=E.charCodeAt(--S);if(N!==32&&N!==9)return S+1}return A}function p(E,S,A){const N=A?.encode||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const L=N(S);if(!e.test(L))throw new TypeError(`argument val is invalid: ${S}`);let U=E+"="+L;if(!A)return U;if(A.maxAge!==void 0){if(!Number.isInteger(A.maxAge))throw new TypeError(`option maxAge is invalid: ${A.maxAge}`);U+="; Max-Age="+A.maxAge}if(A.domain){if(!t.test(A.domain))throw new TypeError(`option domain is invalid: ${A.domain}`);U+="; Domain="+A.domain}if(A.path){if(!r.test(A.path))throw new TypeError(`option path is invalid: ${A.path}`);U+="; Path="+A.path}if(A.expires){if(!v(A.expires)||!Number.isFinite(A.expires.valueOf()))throw new TypeError(`option expires is invalid: ${A.expires}`);U+="; Expires="+A.expires.toUTCString()}if(A.httpOnly&&(U+="; HttpOnly"),A.secure&&(U+="; Secure"),A.partitioned&&(U+="; Partitioned"),A.priority)switch(typeof A.priority=="string"?A.priority.toLowerCase():void 0){case"low":U+="; Priority=Low";break;case"medium":U+="; Priority=Medium";break;case"high":U+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${A.priority}`)}if(A.sameSite)switch(typeof A.sameSite=="string"?A.sameSite.toLowerCase():A.sameSite){case!0:case"strict":U+="; SameSite=Strict";break;case"lax":U+="; SameSite=Lax";break;case"none":U+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${A.sameSite}`)}return U}function y(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function v(E){return s.call(E)==="[object Date]"}return su}_A();var s0="popstate";function yA(n={}){function e(r,s){let{pathname:a,search:l,hash:h}=r.location;return _m("",{pathname:a,search:l,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:xu(s)}return wA(e,t,null,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vA(){return Math.random().toString(36).substring(2,10)}function o0(n,e){return{usr:n.state,key:n.key,idx:e}}function _m(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ka(e):e,state:t,key:e&&e.key||r||vA()}}function xu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ka(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function wA(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,h="POP",f=null,p=y();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function y(){return(l.state||{idx:null}).idx}function v(){h="POP";let L=y(),U=L==null?null:L-p;p=L,f&&f({action:h,location:N.location,delta:U})}function E(L,U){h="PUSH";let q=_m(N.location,L,U);p=y()+1;let G=o0(q,p),Q=N.createHref(q);try{l.pushState(G,"",Q)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;s.location.assign(Q)}a&&f&&f({action:h,location:N.location,delta:1})}function S(L,U){h="REPLACE";let q=_m(N.location,L,U);p=y();let G=o0(q,p),Q=N.createHref(q);l.replaceState(G,"",Q),a&&f&&f({action:h,location:N.location,delta:0})}function A(L){return EA(L)}let N={get action(){return h},get location(){return n(s,l)},listen(L){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(s0,v),f=L,()=>{s.removeEventListener(s0,v),f=null}},createHref(L){return e(s,L)},createURL:A,encodeLocation(L){let U=A(L);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:E,replace:S,go(L){return l.go(L)}};return N}function EA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:xu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function UE(n,e,t="/"){return TA(n,e,t,!1)}function TA(n,e,t,r){let s=typeof e=="string"?Ka(e):e,a=wi(s.pathname||"/",t);if(a==null)return null;let l=BE(n);IA(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let p=OA(a);h=NA(l[f],p,r)}return h}function BE(n,e=[],t=[],r=""){let s=(a,l,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(pt(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length));let p=gi([r,f.relativePath]),y=t.concat(f);a.children&&a.children.length>0&&(pt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),BE(a.children,e,y,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:PA(p,a.index),routesMeta:y})};return n.forEach((a,l)=>{if(a.path===""||!a.path?.includes("?"))s(a,l);else for(let h of zE(a.path))s(a,l,h)}),e}function zE(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=zE(r.join("/")),h=[];return h.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&h.push(...l),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function IA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var CA=/^:[\w-]+$/,SA=3,AA=2,kA=1,xA=10,RA=-2,a0=n=>n==="*";function PA(n,e){let t=n.split("/"),r=t.length;return t.some(a0)&&(r+=RA),e&&(r+=AA),t.filter(s=>!a0(s)).reduce((s,a)=>s+(CA.test(a)?SA:a===""?kA:xA),r)}function bA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function NA(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,y=a==="/"?e:e.slice(a.length)||"/",v=Xh({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},y),E=f.route;if(!v&&p&&t&&!r[r.length-1].route.index&&(v=Xh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!v)return null;Object.assign(s,v.params),l.push({params:s,pathname:gi([a,v.pathname]),pathnameBase:FA(gi([a,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(a=gi([a,v.pathnameBase]))}return l}function Xh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=DA(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:v},E)=>{if(y==="*"){let A=h[E]||"";l=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const S=h[E];return v&&!S?p[y]=void 0:p[y]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:n}}function DA(n,e=!1,t=!0){Vr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function wi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function LA(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Ka(n):n;return{pathname:t?t.startsWith("/")?t:MA(t,e):e,search:jA(r),hash:UA(s)}}function MA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Yp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $E(n){let e=VA(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function WE(n,e,t,r=!1){let s;typeof n=="string"?s=Ka(n):(s={...n},pt(!s.pathname||!s.pathname.includes("?"),Yp("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),Yp("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),Yp("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,h;if(l==null)h=t;else{let v=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),v-=1;s.pathname=E.join("/")}h=v>=0?e[v]:"/"}let f=LA(s,h),p=l&&l!=="/"&&l.endsWith("/"),y=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||y)&&(f.pathname+="/"),f}var gi=n=>n.join("/").replace(/\/\/+/g,"/"),FA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,UA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function BA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var HE=["POST","PUT","PATCH","DELETE"];new Set(HE);var zA=["GET",...HE];new Set(zA);var Qa=j.createContext(null);Qa.displayName="DataRouter";var Od=j.createContext(null);Od.displayName="DataRouterState";var GE=j.createContext({isTransitioning:!1});GE.displayName="ViewTransition";var $A=j.createContext(new Map);$A.displayName="Fetchers";var WA=j.createContext(null);WA.displayName="Await";var Ur=j.createContext(null);Ur.displayName="Navigation";var $u=j.createContext(null);$u.displayName="Location";var Br=j.createContext({outlet:null,matches:[],isDataRoute:!1});Br.displayName="Route";var lg=j.createContext(null);lg.displayName="RouteError";function HA(n,{relative:e}={}){pt(Wu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(Ur),{hash:s,pathname:a,search:l}=Hu(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:gi([t,a])),r.createHref({pathname:h,search:l,hash:s})}function Wu(){return j.useContext($u)!=null}function _r(){return pt(Wu(),"useLocation() may be used only in the context of a <Router> component."),j.useContext($u).location}var qE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KE(n){j.useContext(Ur).static||j.useLayoutEffect(n)}function Qn(){let{isDataRoute:n}=j.useContext(Br);return n?ik():GA()}function GA(){pt(Wu(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Qa),{basename:e,navigator:t}=j.useContext(Ur),{matches:r}=j.useContext(Br),{pathname:s}=_r(),a=JSON.stringify($E(r)),l=j.useRef(!1);return KE(()=>{l.current=!0}),j.useCallback((f,p={})=>{if(Vr(l.current,qE),!l.current)return;if(typeof f=="number"){t.go(f);return}let y=WE(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:gi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,a,s,n])}j.createContext(null);function QE(){let{matches:n}=j.useContext(Br),e=n[n.length-1];return e?e.params:{}}function Hu(n,{relative:e}={}){let{matches:t}=j.useContext(Br),{pathname:r}=_r(),s=JSON.stringify($E(t));return j.useMemo(()=>WE(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function qA(n,e){return YE(n,e)}function YE(n,e,t,r){pt(Wu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=j.useContext(Ur),{matches:a}=j.useContext(Br),l=a[a.length-1],h=l?l.params:{},f=l?l.pathname:"/",p=l?l.pathnameBase:"/",y=l&&l.route;{let U=y&&y.path||"";JE(f,!y||U.endsWith("*")||U.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${U}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${U}"> to <Route path="${U==="/"?"*":`${U}/*`}">.`)}let v=_r(),E;if(e){let U=typeof e=="string"?Ka(e):e;pt(p==="/"||U.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${U.pathname}" was given in the \`location\` prop.`),E=U}else E=v;let S=E.pathname||"/",A=S;if(p!=="/"){let U=p.replace(/^\//,"").split("/");A="/"+S.replace(/^\//,"").split("/").slice(U.length).join("/")}let N=UE(n,{pathname:A});Vr(y||N!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Vr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=XA(N&&N.map(U=>Object.assign({},U,{params:Object.assign({},h,U.params),pathname:gi([p,s.encodeLocation?s.encodeLocation(U.pathname).pathname:U.pathname]),pathnameBase:U.pathnameBase==="/"?p:gi([p,s.encodeLocation?s.encodeLocation(U.pathnameBase).pathname:U.pathnameBase])})),a,t,r);return e&&L?j.createElement($u.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},L):L}function KA(){let n=rk(),e=BA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:a},"ErrorBoundary")," or"," ",j.createElement("code",{style:a},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,l)}var QA=j.createElement(KA,null),YA=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?j.createElement(Br.Provider,{value:this.props.routeContext},j.createElement(lg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function JA({routeContext:n,match:e,children:t}){let r=j.useContext(Qa);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Br.Provider,{value:n},t)}function XA(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,a=t?.errors;if(a!=null){let f=s.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);pt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,f+1))}let l=!1,h=-1;if(t)for(let f=0;f<s.length;f++){let p=s[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=f),p.route.id){let{loaderData:y,errors:v}=t,E=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||E){l=!0,h>=0?s=s.slice(0,h+1):s=[s[0]];break}}}return s.reduceRight((f,p,y)=>{let v,E=!1,S=null,A=null;t&&(v=a&&p.route.id?a[p.route.id]:void 0,S=p.route.errorElement||QA,l&&(h<0&&y===0?(JE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,A=null):h===y&&(E=!0,A=p.route.hydrateFallbackElement||null)));let N=e.concat(s.slice(0,y+1)),L=()=>{let U;return v?U=S:E?U=A:p.route.Component?U=j.createElement(p.route.Component,null):p.route.element?U=p.route.element:U=f,j.createElement(JA,{match:p,routeContext:{outlet:f,matches:N,isDataRoute:t!=null},children:U})};return t&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?j.createElement(YA,{location:t.location,revalidation:t.revalidation,component:S,error:v,children:L(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):L()},null)}function ug(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZA(n){let e=j.useContext(Qa);return pt(e,ug(n)),e}function ek(n){let e=j.useContext(Od);return pt(e,ug(n)),e}function tk(n){let e=j.useContext(Br);return pt(e,ug(n)),e}function cg(n){let e=tk(n),t=e.matches[e.matches.length-1];return pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function nk(){return cg("useRouteId")}function rk(){let n=j.useContext(lg),e=ek("useRouteError"),t=cg("useRouteError");return n!==void 0?n:e.errors?.[t]}function ik(){let{router:n}=ZA("useNavigate"),e=cg("useNavigate"),t=j.useRef(!1);return KE(()=>{t.current=!0}),j.useCallback(async(s,a={})=>{Vr(t.current,qE),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var l0={};function JE(n,e,t){!e&&!l0[n]&&(l0[n]=!0,Vr(!1,t))}j.memo(sk);function sk({routes:n,future:e,state:t}){return YE(n,void 0,t,e)}function ui(n){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ok({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1}){pt(!Wu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof t=="string"&&(t=Ka(t));let{pathname:f="/",search:p="",hash:y="",state:v=null,key:E="default"}=t,S=j.useMemo(()=>{let A=wi(f,l);return A==null?null:{location:{pathname:A,search:p,hash:y,state:v,key:E},navigationType:r}},[l,f,p,y,v,E,r]);return Vr(S!=null,`<Router basename="${l}"> is not able to match the URL "${f}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:j.createElement(Ur.Provider,{value:h},j.createElement($u.Provider,{children:e,value:S}))}function ak({children:n,location:e}){return qA(ym(n),e)}function ym(n,e=[]){let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let a=[...e,s];if(r.type===j.Fragment){t.push.apply(t,ym(r.props.children,a));return}pt(r.type===ui,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=ym(r.props.children,a)),t.push(l)}),t}var jh="get",Uh="application/x-www-form-urlencoded";function Ld(n){return n!=null&&typeof n.tagName=="string"}function lk(n){return Ld(n)&&n.tagName.toLowerCase()==="button"}function uk(n){return Ld(n)&&n.tagName.toLowerCase()==="form"}function ck(n){return Ld(n)&&n.tagName.toLowerCase()==="input"}function hk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function dk(n,e){return n.button===0&&(!e||e==="_self")&&!hk(n)}var Ph=null;function fk(){if(Ph===null)try{new FormData(document.createElement("form"),0),Ph=!1}catch{Ph=!0}return Ph}var pk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jp(n){return n!=null&&!pk.has(n)?(Vr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uh}"`),null):n}function mk(n,e){let t,r,s,a,l;if(uk(n)){let h=n.getAttribute("action");r=h?wi(h,e):null,t=n.getAttribute("method")||jh,s=Jp(n.getAttribute("enctype"))||Uh,a=new FormData(n)}else if(lk(n)||ck(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(r=f?wi(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||jh,s=Jp(n.getAttribute("formenctype"))||Jp(h.getAttribute("enctype"))||Uh,a=new FormData(h,n),!fk()){let{name:p,type:y,value:v}=n;if(y==="image"){let E=p?`${p}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else p&&a.append(p,v)}}else{if(Ld(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=jh,r=null,s=Uh,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}function hg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function gk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _k(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function yk(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await gk(a,t);return l.links?l.links():[]}return[]}));return Tk(r.flat(1).filter(_k).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function u0(n,e,t,r,s,a){let l=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,h=(f,p)=>t[p].pathname!==f.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==f.params["*"];return a==="assets"?e.filter((f,p)=>l(f,p)||h(f,p)):a==="data"?e.filter((f,p)=>{let y=r.routes[f.route.id];if(!y||!y.hasLoader)return!1;if(l(f,p)||h(f,p))return!0;if(f.route.shouldRevalidate){let v=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function vk(n,e,{includeHydrateFallback:t}={}){return wk(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function wk(n){return[...new Set(n)]}function Ek(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Tk(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(Ek(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ik=new Set([100,101,204,205]);function Ck(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&wi(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function XE(){let n=j.useContext(Qa);return hg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Sk(){let n=j.useContext(Od);return hg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var dg=j.createContext(void 0);dg.displayName="FrameworkContext";function ZE(){let n=j.useContext(dg);return hg(n,"You must render this element inside a <HydratedRouter> element"),n}function Ak(n,e){let t=j.useContext(dg),[r,s]=j.useState(!1),[a,l]=j.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:p,onMouseLeave:y,onTouchStart:v}=e,E=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let N=U=>{U.forEach(q=>{l(q.isIntersecting)})},L=new IntersectionObserver(N,{threshold:.5});return E.current&&L.observe(E.current),()=>{L.disconnect()}}},[n]),j.useEffect(()=>{if(r){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[r]);let S=()=>{s(!0)},A=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:ou(h,S),onBlur:ou(f,A),onMouseEnter:ou(p,S),onMouseLeave:ou(y,A),onTouchStart:ou(v,S)}]:[!1,E,{}]}function ou(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function kk({page:n,...e}){let{router:t}=XE(),r=j.useMemo(()=>UE(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(Rk,{page:n,matches:r,...e}):null}function xk(n){let{manifest:e,routeModules:t}=ZE(),[r,s]=j.useState([]);return j.useEffect(()=>{let a=!1;return yk(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function Rk({page:n,matches:e,...t}){let r=_r(),{manifest:s,routeModules:a}=ZE(),{basename:l}=XE(),{loaderData:h,matches:f}=Sk(),p=j.useMemo(()=>u0(n,e,f,s,r,"data"),[n,e,f,s,r]),y=j.useMemo(()=>u0(n,e,f,s,r,"assets"),[n,e,f,s,r]),v=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let A=new Set,N=!1;if(e.forEach(U=>{let q=s.routes[U.route.id];!q||!q.hasLoader||(!p.some(G=>G.route.id===U.route.id)&&U.route.id in h&&a[U.route.id]?.shouldRevalidate||q.hasClientLoader?N=!0:A.add(U.route.id))}),A.size===0)return[];let L=Ck(n,l);return N&&A.size>0&&L.searchParams.set("_routes",e.filter(U=>A.has(U.route.id)).map(U=>U.route.id).join(",")),[L.pathname+L.search]},[l,h,r,s,p,e,n,a]),E=j.useMemo(()=>vk(y,s),[y,s]),S=xk(y);return j.createElement(j.Fragment,null,v.map(A=>j.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),E.map(A=>j.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),S.map(({key:A,link:N})=>j.createElement("link",{key:A,...N})))}function Pk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var eT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eT&&(window.__reactRouterVersion="7.6.3")}catch{}function bk({basename:n,children:e,window:t}){let r=j.useRef();r.current==null&&(r.current=yA({window:t,v5Compat:!0}));let s=r.current,[a,l]=j.useState({action:s.action,location:s.location}),h=j.useCallback(f=>{j.startTransition(()=>l(f))},[l]);return j.useLayoutEffect(()=>s.listen(h),[s,h]),j.createElement(ok,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:s})}var tT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Md=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:h,target:f,to:p,preventScrollReset:y,viewTransition:v,...E},S){let{basename:A}=j.useContext(Ur),N=typeof p=="string"&&tT.test(p),L,U=!1;if(typeof p=="string"&&N&&(L=p,eT))try{let x=new URL(window.location.href),R=p.startsWith("//")?new URL(x.protocol+p):new URL(p),O=wi(R.pathname,A);R.origin===x.origin&&O!=null?p=O+R.search+R.hash:U=!0}catch{Vr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let q=HA(p,{relative:s}),[G,Q,Z]=Ak(r,E),ie=Lk(p,{replace:l,state:h,target:f,preventScrollReset:y,relative:s,viewTransition:v});function D(x){e&&e(x),x.defaultPrevented||ie(x)}let k=j.createElement("a",{...E,...Z,href:L||q,onClick:U||a?e:D,ref:Pk(S,Q),target:f,"data-discover":!N&&t==="render"?"true":void 0});return G&&!N?j.createElement(j.Fragment,null,k,j.createElement(kk,{page:q})):k});Md.displayName="Link";var Nk=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:h,children:f,...p},y){let v=Hu(l,{relative:p.relative}),E=_r(),S=j.useContext(Od),{navigator:A,basename:N}=j.useContext(Ur),L=S!=null&&Uk(v)&&h===!0,U=A.encodeLocation?A.encodeLocation(v).pathname:v.pathname,q=E.pathname,G=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(q=q.toLowerCase(),G=G?G.toLowerCase():null,U=U.toLowerCase()),G&&N&&(G=wi(G,N)||G);const Q=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let Z=q===U||!s&&q.startsWith(U)&&q.charAt(Q)==="/",ie=G!=null&&(G===U||!s&&G.startsWith(U)&&G.charAt(U.length)==="/"),D={isActive:Z,isPending:ie,isTransitioning:L},k=Z?e:void 0,x;typeof r=="function"?x=r(D):x=[r,Z?"active":null,ie?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(D):a;return j.createElement(Md,{...p,"aria-current":k,className:x,ref:y,style:R,to:l,viewTransition:h},typeof f=="function"?f(D):f)});Nk.displayName="NavLink";var Dk=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=jh,action:h,onSubmit:f,relative:p,preventScrollReset:y,viewTransition:v,...E},S)=>{let A=Fk(),N=jk(h,{relative:p}),L=l.toLowerCase()==="get"?"get":"post",U=typeof h=="string"&&tT.test(h),q=G=>{if(f&&f(G),G.defaultPrevented)return;G.preventDefault();let Q=G.nativeEvent.submitter,Z=Q?.getAttribute("formmethod")||l;A(Q||G.currentTarget,{fetcherKey:e,method:Z,navigate:t,replace:s,state:a,relative:p,preventScrollReset:y,viewTransition:v})};return j.createElement("form",{ref:S,method:L,action:N,onSubmit:r?f:q,...E,"data-discover":!U&&n==="render"?"true":void 0})});Dk.displayName="Form";function Ok(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nT(n){let e=j.useContext(Qa);return pt(e,Ok(n)),e}function Lk(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l}={}){let h=Qn(),f=_r(),p=Hu(n,{relative:a});return j.useCallback(y=>{if(dk(y,e)){y.preventDefault();let v=t!==void 0?t:xu(f)===xu(p);h(n,{replace:v,state:r,preventScrollReset:s,relative:a,viewTransition:l})}},[f,h,p,t,r,e,n,s,a,l])}var Mk=0,Vk=()=>`__${String(++Mk)}__`;function Fk(){let{router:n}=nT("useSubmit"),{basename:e}=j.useContext(Ur),t=nk();return j.useCallback(async(r,s={})=>{let{action:a,method:l,encType:h,formData:f,body:p}=mk(r,e);if(s.navigate===!1){let y=s.fetcherKey||Vk();await n.fetch(y,t,s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||l,formEncType:s.encType||h,flushSync:s.flushSync})}else await n.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:f,body:p,formMethod:s.method||l,formEncType:s.encType||h,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function jk(n,{relative:e}={}){let{basename:t}=j.useContext(Ur),r=j.useContext(Br);pt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Hu(n||".",{relative:e})},l=_r();if(n==null){a.search=l.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(y=>y==="")){h.delete("index"),f.filter(v=>v).forEach(v=>h.append("index",v));let y=h.toString();a.search=y?`?${y}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:gi([t,a.pathname])),xu(a)}function Uk(n,e={}){let t=j.useContext(GE);pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nT("useViewTransitionState"),s=Hu(n,{relative:e.relative});if(!t.isTransitioning)return!1;let a=wi(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=wi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Xh(s.pathname,l)!=null||Xh(s.pathname,a)!=null}[...Ik];const Bk=()=>{};var c0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=function(n,e){if(!n)throw Ya(e)},Ya=function(n){return new Error("Firebase Database ("+rT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},zk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],h=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},fg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,h=l?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,y=a>>2,v=(a&3)<<4|h>>4;let E=(h&15)<<2|p>>6,S=p&63;f||(S=64,l||(E=64)),r.push(t[y],t[v],t[E],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(iT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],h=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const v=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||h==null||p==null||v==null)throw new $k;const E=a<<2|h>>4;if(r.push(E),p!==64){const S=h<<4&240|p>>2;if(r.push(S),v!==64){const A=p<<6&192|v;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $k extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sT=function(n){const e=iT(n);return fg.encodeByteArray(e,!0)},Zh=function(n){return sT(n).replace(/\./g,"")},ed=function(n){try{return fg.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){return oT(void 0,n)}function oT(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!Hk(t)||(n[t]=oT(n[t],e[t]));return n}function Hk(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=()=>Gk().__FIREBASE_DEFAULTS__,Kk=()=>{if(typeof process>"u"||typeof c0>"u")return;const n=c0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Qk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ed(n[1]);return e&&JSON.parse(e)},Vd=()=>{try{return Bk()||qk()||Kk()||Qk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},aT=n=>{var e,t;return(t=(e=Vd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},lT=n=>{const e=aT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},uT=()=>{var n;return(n=Vd())===null||n===void 0?void 0:n.config},cT=n=>{var e;return(e=Vd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Zh(JSON.stringify(t)),Zh(JSON.stringify(l)),""].join(".")}const _u={};function Yk(){const n={prod:[],emulator:[]};for(const e of Object.keys(_u))_u[e]?n.emulator.push(e):n.prod.push(e);return n}function Jk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let h0=!1;function mg(n,e){if(typeof window>"u"||typeof document>"u"||!Cs(window.location.host)||_u[n]===e||_u[n]||h0)return;_u[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=Yk().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{h0=!0,l()},E}function y(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=Jk(r),S=t("text"),A=document.getElementById(S)||document.createElement("span"),N=t("learnmore"),L=document.getElementById(N)||document.createElement("a"),U=t("preprendIcon"),q=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const G=E.element;h(G),y(L,N);const Q=p();f(q,U),G.append(q,A,L,Q),document.body.appendChild(G)}a?(A.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function Xk(){var n;const e=(n=Vd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Zk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ex(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tx(){const n=an();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nx(){return rT.NODE_ADMIN===!0}function rx(){return!Xk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ix(){try{return typeof indexedDB=="object"}catch{return!1}}function sx(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="FirebaseError";class ki extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ox,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?ax(a,r):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new ki(s,h,r)}}function ax(n,e){return n.replace(lx,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const lx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n){return JSON.parse(n)}function Yt(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=function(n){let e={},t={},r={},s="";try{const a=n.split(".");e=Ru(ed(a[0])||""),t=Ru(ed(a[1])||""),s=a[2],r=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:r,signature:s}},ux=function(n){const e=fT(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},cx=function(n){const e=fT(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Fa(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function td(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function nd(n,e,t){const r={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=e.call(t,n[s],s,n));return r}function ps(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(d0(a)&&d0(l)){if(!ps(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function d0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function du(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)r[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)r[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const E=r[v-3]^r[v-8]^r[v-14]^r[v-16];r[v]=(E<<1|E>>>31)&4294967295}let s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],h=this.chain_[3],f=this.chain_[4],p,y;for(let v=0;v<80;v++){v<40?v<20?(p=h^a&(l^h),y=1518500249):(p=a^l^h,y=1859775393):v<60?(p=a&l|h&(a|l),y=2400959708):(p=a^l^h,y=3395469782);const E=(s<<5|s>>>27)+p+f+y+r[v]&4294967295;f=h,h=l,l=(a<<30|a>>>2)&4294967295,a=s,s=E}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const r=t-this.blockSize;let s=0;const a=this.buf_;let l=this.inbuf_;for(;s<t;){if(l===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(a[l]=e.charCodeAt(s),++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}else for(;s<t;)if(a[l]=e[s],++l,++s,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let a=24;a>=0;a-=8)e[r]=this.chain_[s]>>a&255,++r;return e}}function dx(n,e){const t=new fx(n,e);return t.subscribe.bind(t)}class fx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");px(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Xp),s.error===void 0&&(s.error=Xp),s.complete===void 0&&(s.complete=Xp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function px(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Xp(){}function ja(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);if(s>=55296&&s<=56319){const a=s-55296;r++,le(r<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(r)-56320;s=65536+(a<<10)+l}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Fd=function(n){let e=0;for(let t=0;t<n.length;t++){const r=n.charCodeAt(t);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(n){return n&&n._delegate?n._delegate:n}class ms{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new hi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yx(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const l=this.instances.get(s);return l&&e(l,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_x(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _x(n){return n===ro?void 0:n}function yx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gx(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Oe||(Oe={}));const wx={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},Ex=Oe.INFO,Tx={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},Ix=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Tx[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jd{constructor(e){this.name=e,this._logLevel=Ex,this._logHandler=Ix,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const Cx=(n,e)=>e.some(t=>n instanceof t);let f0,p0;function Sx(){return f0||(f0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ax(){return p0||(p0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pT=new WeakMap,vm=new WeakMap,mT=new WeakMap,Zp=new WeakMap,_g=new WeakMap;function kx(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(os(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&pT.set(t,n)}).catch(()=>{}),_g.set(e,n),e}function xx(n){if(vm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});vm.set(n,e)}let wm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||mT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return os(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Rx(n){wm=n(wm)}function Px(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(em(this),e,...t);return mT.set(r,e.sort?e.sort():[e]),os(r)}:Ax().includes(n)?function(...e){return n.apply(em(this),e),os(pT.get(this))}:function(...e){return os(n.apply(em(this),e))}}function bx(n){return typeof n=="function"?Px(n):(n instanceof IDBTransaction&&xx(n),Cx(n,Sx())?new Proxy(n,wm):n)}function os(n){if(n instanceof IDBRequest)return kx(n);if(Zp.has(n))return Zp.get(n);const e=bx(n);return e!==n&&(Zp.set(n,e),_g.set(e,n)),e}const em=n=>_g.get(n);function Nx(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),h=os(l);return r&&l.addEventListener("upgradeneeded",f=>{r(os(l.result),f.oldVersion,f.newVersion,os(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}const Dx=["get","getKey","getAll","getAllKeys","count"],Ox=["put","add","delete","clear"],tm=new Map;function m0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(tm.get(e))return tm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=Ox.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Dx.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[t](...h),s&&f.done]))[0]};return tm.set(e,a),a}Rx(n=>({...n,get:(e,t,r)=>m0(e,t)||n.get(e,t,r),has:(e,t)=>!!m0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Mx(n){const e=n.getComponent();return e?.type==="VERSION"}const Em="@firebase/app",g0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new jd("@firebase/app"),Vx="@firebase/app-compat",Fx="@firebase/analytics-compat",jx="@firebase/analytics",Ux="@firebase/app-check-compat",Bx="@firebase/app-check",zx="@firebase/auth",$x="@firebase/auth-compat",Wx="@firebase/database",Hx="@firebase/data-connect",Gx="@firebase/database-compat",qx="@firebase/functions",Kx="@firebase/functions-compat",Qx="@firebase/installations",Yx="@firebase/installations-compat",Jx="@firebase/messaging",Xx="@firebase/messaging-compat",Zx="@firebase/performance",eR="@firebase/performance-compat",tR="@firebase/remote-config",nR="@firebase/remote-config-compat",rR="@firebase/storage",iR="@firebase/storage-compat",sR="@firebase/firestore",oR="@firebase/ai",aR="@firebase/firestore-compat",lR="firebase",uR="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="[DEFAULT]",cR={[Em]:"fire-core",[Vx]:"fire-core-compat",[jx]:"fire-analytics",[Fx]:"fire-analytics-compat",[Bx]:"fire-app-check",[Ux]:"fire-app-check-compat",[zx]:"fire-auth",[$x]:"fire-auth-compat",[Wx]:"fire-rtdb",[Hx]:"fire-data-connect",[Gx]:"fire-rtdb-compat",[qx]:"fire-fn",[Kx]:"fire-fn-compat",[Qx]:"fire-iid",[Yx]:"fire-iid-compat",[Jx]:"fire-fcm",[Xx]:"fire-fcm-compat",[Zx]:"fire-perf",[eR]:"fire-perf-compat",[tR]:"fire-rc",[nR]:"fire-rc-compat",[rR]:"fire-gcs",[iR]:"fire-gcs-compat",[sR]:"fire-fst",[aR]:"fire-fst-compat",[oR]:"fire-vertex","fire-js":"fire-js",[lR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Map,hR=new Map,Im=new Map;function _0(n,e){try{n.container.addComponent(e)}catch(t){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ho(n){const e=n.name;if(Im.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;Im.set(e,n);for(const t of rd.values())_0(t,n);for(const t of hR.values())_0(t,n);return!0}function Ud(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Dn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new Gu("app","Firebase",dR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ms("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo=uR;function gT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Tm,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw as.create("bad-app-name",{appName:String(s)});if(t||(t=uT()),!t)throw as.create("no-options");const a=rd.get(s);if(a){if(ps(t,a.options)&&ps(r,a.config))return a;throw as.create("duplicate-app",{appName:s})}const l=new vx(s);for(const f of Im.values())l.addComponent(f);const h=new fR(t,r,l);return rd.set(s,h),h}function yg(n=Tm){const e=rd.get(n);if(!e&&n===Tm&&uT())return gT();if(!e)throw as.create("no-app",{appName:n});return e}function br(n,e,t){var r;let s=(r=cR[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const a=s.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const h=[`Unable to register library "${s}" with version "${e}":`];a&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(h.join(" "));return}ho(new ms(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="firebase-heartbeat-database",mR=1,Pu="firebase-heartbeat-store";let nm=null;function _T(){return nm||(nm=Nx(pR,mR,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pu)}catch(t){console.warn(t)}}}}).catch(n=>{throw as.create("idb-open",{originalErrorMessage:n.message})})),nm}async function gR(n){try{const t=(await _T()).transaction(Pu),r=await t.objectStore(Pu).get(yT(n));return await t.done,r}catch(e){if(e instanceof ki)Ei.warn(e.message);else{const t=as.create("idb-get",{originalErrorMessage:e?.message});Ei.warn(t.message)}}}async function y0(n,e){try{const r=(await _T()).transaction(Pu,"readwrite");await r.objectStore(Pu).put(e,yT(n)),await r.done}catch(t){if(t instanceof ki)Ei.warn(t.message);else{const r=as.create("idb-set",{originalErrorMessage:t?.message});Ei.warn(r.message)}}}function yT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=1024,yR=30;class vR{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ER(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=v0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>yR){const l=TR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=v0(),{heartbeatsToSend:r,unsentEntries:s}=wR(this._heartbeatsCache.heartbeats),a=Zh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ei.warn(t),""}}}function v0(){return new Date().toISOString().substring(0,10)}function wR(n,e=_R){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),w0(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),w0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class ER{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ix()?sx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return y0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return y0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function w0(n){return Zh(JSON.stringify({version:2,heartbeats:n})).length}function TR(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(n){ho(new ms("platform-logger",e=>new Lx(e),"PRIVATE")),ho(new ms("heartbeat",e=>new vR(e),"PRIVATE")),br(Em,g0,n),br(Em,g0,"esm2017"),br("fire-js","")}IR("");function vg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function vT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const CR=vT,wT=new Gu("auth","Firebase",vT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new jd("@firebase/auth");function SR(n,...e){id.logLevel<=Oe.WARN&&id.warn(`Auth (${Eo}): ${n}`,...e)}function Bh(n,...e){id.logLevel<=Oe.ERROR&&id.error(`Auth (${Eo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(n,...e){throw wg(n,...e)}function Nr(n,...e){return wg(n,...e)}function ET(n,e,t){const r=Object.assign(Object.assign({},CR()),{[e]:t});return new Gu("auth","Firebase",r).create(e,{appName:n.name})}function _i(n){return ET(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return wT.create(n,...e)}function Se(n,e,...t){if(!n)throw wg(e,...t)}function fi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Bh(e),new Error(e)}function Ti(n,e){n||fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function AR(){return E0()==="http:"||E0()==="https:"}function E0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AR()||ex()||"connection"in navigator)?navigator.onLine:!0}function xR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ti(t>e,"Short delay should be less than long delay!"),this.isMobile=gg()||dT()}get(){return kR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(n,e){Ti(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bR=new qu(3e4,6e4);function Ss(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function As(n,e,t,r,s={}){return IT(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Ja(Object.assign({key:n.config.apiKey},l)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:f},a);return Zk()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Cs(n.emulatorConfig.host)&&(p.credentials="include"),TT.fetch()(await CT(n,n.config.apiHost,t,h),p)})}async function IT(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},RR),e);try{const s=new DR(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw bh(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw bh(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw bh(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw bh(n,"user-disabled",l);const y=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw ET(n,y,p);mr(n,y)}}catch(s){if(s instanceof ki)throw s;mr(n,"network-request-failed",{message:String(s)})}}async function Ku(n,e,t,r,s={}){const a=await As(n,e,t,r,s);return"mfaPendingCredential"in a&&mr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function CT(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?Eg(n.config,s):`${n.config.apiScheme}://${s}`;return PR.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function NR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Nr(this.auth,"network-request-failed")),bR.get())})}}function bh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Nr(n,e,r);return s.customData._tokenResponse=t,s}function T0(n){return n!==void 0&&n.enterprise!==void 0}class OR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function LR(n,e){return As(n,"GET","/v2/recaptchaConfig",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(n,e){return As(n,"POST","/v1/accounts:delete",e)}async function sd(n,e){return As(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VR(n,e=!1){const t=Ze(n),r=await t.getIdToken(e),s=Tg(r);Se(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a?.sign_in_provider;return{claims:s,token:r,authTime:yu(rm(s.auth_time)),issuedAtTime:yu(rm(s.iat)),expirationTime:yu(rm(s.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function rm(n){return Number(n)*1e3}function Tg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const s=ed(t);return s?JSON.parse(s):(Bh("Failed to decode base64 JWT payload"),null)}catch(s){return Bh("Caught error parsing JWT payload as JSON",s?.toString()),null}}function I0(n){const e=Tg(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ki&&FR(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function FR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=yu(this.lastLoginAt),this.creationTime=yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function od(n){var e;const t=n.auth,r=await n.getIdToken(),s=await bu(n,sd(t,{idToken:r}));Se(s?.users.length,t,"internal-error");const a=s.users[0];n._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?ST(a.providerUserInfo):[],h=BR(n.providerData,l),f=n.isAnonymous,p=!(n.email&&a.passwordHash)&&!h?.length,y=f?p:!1,v={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Sm(a.createdAt,a.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function UR(n){const e=Ze(n);await od(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BR(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ST(n){return n.map(e=>{var{providerId:t}=e,r=vg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(n,e){const t=await IT(n,{},async()=>{const r=Ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await CT(n,s,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return n.emulatorConfig&&Cs(n.emulatorConfig.host)&&(f.credentials="include"),TT.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $R(n,e){return As(n,"POST","/v2/accounts:revokeToken",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):I0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=I0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await zR(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new Na;return r&&(Se(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(Se(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(Se(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Na,this.toJSON())}_performRefresh(){return fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,a=vg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Sm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await bu(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VR(this,e)}reload(){return UR(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await od(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await bu(this,MR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,a,l,h,f,p,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,E=(s=t.email)!==null&&s!==void 0?s:void 0,S=(a=t.phoneNumber)!==null&&a!==void 0?a:void 0,A=(l=t.photoURL)!==null&&l!==void 0?l:void 0,N=(h=t.tenantId)!==null&&h!==void 0?h:void 0,L=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,U=(p=t.createdAt)!==null&&p!==void 0?p:void 0,q=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:G,emailVerified:Q,isAnonymous:Z,providerData:ie,stsTokenManager:D}=t;Se(G&&D,e,"internal-error");const k=Na.fromJSON(this.name,D);Se(typeof G=="string",e,"internal-error"),Zi(v,e.name),Zi(E,e.name),Se(typeof Q=="boolean",e,"internal-error"),Se(typeof Z=="boolean",e,"internal-error"),Zi(S,e.name),Zi(A,e.name),Zi(N,e.name),Zi(L,e.name),Zi(U,e.name),Zi(q,e.name);const x=new dr({uid:G,auth:e,email:E,emailVerified:Q,displayName:v,isAnonymous:Z,photoURL:A,phoneNumber:S,tenantId:N,stsTokenManager:k,createdAt:U,lastLoginAt:q});return ie&&Array.isArray(ie)&&(x.providerData=ie.map(R=>Object.assign({},R))),L&&(x._redirectEventId=L),x}static async _fromIdTokenResponse(e,t,r=!1){const s=new Na;s.updateFromServerResponse(t);const a=new dr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await od(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Se(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?ST(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!a?.length,h=new Na;h.updateFromIdToken(r);const f=new dr({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Sm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!a?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;function pi(n){Ti(n instanceof Function,"Expected a class definition");let e=C0.get(n);return e?(Ti(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,C0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}AT.type="NONE";const S0=AT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(n,e,t){return`firebase:${n}:${e}:${t}`}class Da{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=zh(this.userKey,s.apiKey,a),this.fullPersistenceKey=zh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sd(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Da(pi(S0),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||pi(S0);const l=zh(r,e.config.apiKey,e.name);let h=null;for(const p of t)try{const y=await p._get(l);if(y){let v;if(typeof y=="string"){const E=await sd(e,{idToken:y}).catch(()=>{});if(!E)break;v=await dr._fromGetAccountInfoResponse(e,E,y)}else v=dr._fromJSON(e,y);p!==a&&(h=v),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Da(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Da(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NT(e))return"Blackberry";if(DT(e))return"Webos";if(xT(e))return"Safari";if((e.includes("chrome/")||RT(e))&&!e.includes("edge/"))return"Chrome";if(bT(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function kT(n=an()){return/firefox\//i.test(n)}function xT(n=an()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RT(n=an()){return/crios\//i.test(n)}function PT(n=an()){return/iemobile/i.test(n)}function bT(n=an()){return/android/i.test(n)}function NT(n=an()){return/blackberry/i.test(n)}function DT(n=an()){return/webos/i.test(n)}function Ig(n=an()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function WR(n=an()){var e;return Ig(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HR(){return tx()&&document.documentMode===10}function OT(n=an()){return Ig(n)||bT(n)||DT(n)||NT(n)||/windows phone/i.test(n)||PT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n,e=[]){let t;switch(n){case"Browser":t=A0(an());break;case"Worker":t=`${A0(an())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Eo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(n,e={}){return As(n,"GET","/v2/passwordPolicy",Ss(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=6;class QR{constructor(e){var t,r,s,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:KR,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,a,l,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(s=f.containsLowercaseLetter)!==null&&s!==void 0?s:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new k0(this),this.idTokenSubscription=new k0(this),this.beforeStateQueue=new GR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pi(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await Da.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sd(this,{idToken:e}),r=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Dn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=s?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(s=f.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await od(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(_i(this));const t=e?Ze(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qR(this),t=new QR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $R(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pi(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Da.create(this,[pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&SR(`Error while retrieving App Check token: ${t.error}`),t?.token}}function To(n){return Ze(n)}class k0{constructor(e){this.auth=e,this.observer=null,this.addObserver=dx(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JR(n){Bd=n}function MT(n){return Bd.loadJS(n)}function XR(){return Bd.recaptchaEnterpriseScript}function ZR(){return Bd.gapiScript}function eP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class tP{constructor(){this.enterprise=new nP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class nP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const rP="recaptcha-enterprise",VT="NO_RECAPTCHA";class iP{constructor(e){this.type=rP,this.auth=To(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,h)=>{LR(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const p=new OR(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(f=>{h(f)})})}function s(a,l,h){const f=window.grecaptcha;T0(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(VT)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new tP().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(h=>{if(!t&&T0(window.grecaptcha))s(h,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=XR();f.length!==0&&(f+=h),MT(f).then(()=>{s(h,a,l)}).catch(p=>{l(p)})}}).catch(h=>{l(h)})})}}async function x0(n,e,t,r=!1,s=!1){const a=new iP(n);let l;if(s)l=VT;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,p=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return r?Object.assign(h,{captchaResp:l}):Object.assign(h,{captchaResponse:l}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Am(n,e,t,r,s){var a;if(!((a=n._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await x0(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await x0(n,e,t,t==="getOobCode");return r(n,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n,e){const t=Ud(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(ps(a,e??{}))return s;mr(s,"already-initialized")}return t.initialize({options:e})}function oP(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(pi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function aP(n,e,t){const r=To(n);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=FT(e),{host:l,port:h}=lP(e),f=h===null?"":`:${h}`,p={url:`${a}//${l}${f}/`},y=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(ps(p,r.config.emulator)&&ps(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Cs(l)?(pg(`${a}//${l}${f}`),mg("Auth",!0)):uP()}function FT(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function lP(n){const e=FT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:R0(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:R0(l)}}}function R0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function uP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fi("not implemented")}_getIdTokenResponse(e){return fi("not implemented")}_linkToIdToken(e,t){return fi("not implemented")}_getReauthenticationResolver(e){return fi("not implemented")}}async function cP(n,e){return As(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hP(n,e){return Ku(n,"POST","/v1/accounts:signInWithPassword",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(n,e){return Ku(n,"POST","/v1/accounts:signInWithEmailLink",Ss(n,e))}async function fP(n,e){return Ku(n,"POST","/v1/accounts:signInWithEmailLink",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends Cg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Nu(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Nu(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(e,t,"signInWithPassword",hP);case"emailLink":return dP(e,{email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Am(e,r,"signUpPassword",cP);case"emailLink":return fP(e,{idToken:t,email:this._email,oobCode:this._password});default:mr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(n,e){return Ku(n,"POST","/v1/accounts:signInWithIdp",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="http://localhost";class fo extends Cg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,a=vg(t,["providerId","signInMethod"]);if(!r||!s)return null;const l=new fo(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Oa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oa(e,t)}buildRequest(){const e={requestUri:pP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ja(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gP(n){const e=hu(du(n)).link,t=e?hu(du(e)).deep_link_id:null,r=hu(du(n)).deep_link_id;return(r?hu(du(r)).link:null)||r||t||e||n}class Sg{constructor(e){var t,r,s,a,l,h;const f=hu(du(e)),p=(t=f.apiKey)!==null&&t!==void 0?t:null,y=(r=f.oobCode)!==null&&r!==void 0?r:null,v=mP((s=f.mode)!==null&&s!==void 0?s:null);Se(p&&y&&v,"argument-error"),this.apiKey=p,this.operation=v,this.code=y,this.continueUrl=(a=f.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(l=f.lang)!==null&&l!==void 0?l:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=gP(e);try{return new Sg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.providerId=Xa.PROVIDER_ID}static credential(e,t){return Nu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Sg.parseLink(t);return Se(r,"argument-error"),Nu._fromEmailAndCode(e,r.code,r.tenantId)}}Xa.PROVIDER_ID="password";Xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends jT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Qu{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ts.credential(t,r)}catch{return null}}}ts.GOOGLE_SIGN_IN_METHOD="google.com";ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Qu{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.GITHUB_SIGN_IN_METHOD="github.com";ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Qu{constructor(){super("twitter.com")}static credential(e,t){return fo._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return rs.credential(t,r)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(n,e){return Ku(n,"POST","/v1/accounts:signUp",Ss(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await dr._fromIdTokenResponse(e,r,s),l=P0(r);return new po({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=P0(r);return new po({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function P0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad extends ki{constructor(e,t,r,s){var a;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ad.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new ad(e,t,r,s)}}function UT(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?ad._fromErrorAndOperation(n,a,e,r):a})}async function yP(n,e,t=!1){const r=await bu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return po._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(n,e,t=!1){const{auth:r}=n;if(Dn(r.app))return Promise.reject(_i(r));const s="reauthenticate";try{const a=await bu(n,UT(r,s,e,n),t);Se(a.idToken,r,"internal-error");const l=Tg(a.idToken);Se(l,r,"internal-error");const{sub:h}=l;return Se(n.uid===h,r,"user-mismatch"),po._forOperation(n,s,a)}catch(a){throw a?.code==="auth/user-not-found"&&mr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(n,e,t=!1){if(Dn(n.app))return Promise.reject(_i(n));const r="signIn",s=await UT(n,r,e),a=await po._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function wP(n,e){return BT(To(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zT(n){const e=To(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EP(n,e,t){if(Dn(n.app))return Promise.reject(_i(n));const r=To(n),l=await Am(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_P).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&zT(n),f}),h=await po._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(h.user),h}function TP(n,e,t){return Dn(n.app)?Promise.reject(_i(n)):wP(Ze(n),Xa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zT(n),r})}function IP(n,e,t,r){return Ze(n).onIdTokenChanged(e,t,r)}function CP(n,e,t){return Ze(n).beforeAuthStateChanged(e,t)}function Ag(n,e,t,r){return Ze(n).onAuthStateChanged(e,t,r)}function $T(n){return Ze(n).signOut()}const ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ld,"1"),this.storage.removeItem(ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=1e3,AP=10;class HT extends WT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=OT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);HR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,AP):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},SP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}HT.type="LOCAL";const kP=HT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT extends WT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}GT.type="SESSION";const qT=GT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new zd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const h=Array.from(l).map(async p=>p(t.origin,a)),f=await xP(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const p=kg("",20);s.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(E.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(){return window}function PP(n){Dr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}async function bP(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NP(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DP(){return KT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="firebaseLocalStorageDb",OP=1,ud="firebaseLocalStorage",YT="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $d(n,e){return n.transaction([ud],e?"readwrite":"readonly").objectStore(ud)}function LP(){const n=indexedDB.deleteDatabase(QT);return new Yu(n).toPromise()}function km(){const n=indexedDB.open(QT,OP);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ud,{keyPath:YT})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ud)?e(r):(r.close(),await LP(),e(await km()))})})}async function b0(n,e,t){const r=$d(n,!0).put({[YT]:e,value:t});return new Yu(r).toPromise()}async function MP(n,e){const t=$d(n,!1).get(e),r=await new Yu(t).toPromise();return r===void 0?null:r.value}function N0(n,e){const t=$d(n,!0).delete(e);return new Yu(t).toPromise()}const VP=800,FP=3;class JT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>FP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zd._getInstance(DP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await bP(),!this.activeServiceWorker)return;this.sender=new RP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await b0(e,ld,"1"),await N0(e,ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>b0(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>MP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>N0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=$d(s,!1).getAll();return new Yu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JT.type="LOCAL";const jP=JT;new qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(n,e){return e?pi(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends Cg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BP(n){return BT(n.auth,new xg(n),n.bypassAuthState)}function zP(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),vP(t,new xg(n),n.bypassAuthState)}async function $P(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),yP(t,new xg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XT{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BP;case"linkViaPopup":case"linkViaRedirect":return $P;case"reauthViaPopup":case"reauthViaRedirect":return zP;default:mr(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new qu(2e3,1e4);class Aa extends XT{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,WP.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="pendingRedirect",$h=new Map;class GP extends XT{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=$h.get(this.auth._key());if(!e){try{const r=await qP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qP(n,e){const t=YP(e),r=QP(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function KP(n,e){$h.set(n._key(),e)}function QP(n){return pi(n._redirectPersistence)}function YP(n){return zh(HP,n.config.apiKey,n.name)}async function JP(n,e,t=!1){if(Dn(n.app))return Promise.reject(_i(n));const r=To(n),s=UP(r,e),l=await new GP(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=10*60*1e3;class ZP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ZT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Nr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XP&&this.cachedEventUids.clear(),this.cachedEventUids.has(D0(e))}saveEventToCache(e){this.cachedEventUids.add(D0(e)),this.lastProcessedEventTime=Date.now()}}function D0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ZT({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function eb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZT(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(n,e={}){return As(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rb=/^https?/;async function ib(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tb(n);for(const t of e)try{if(sb(t))return}catch{}mr(n,"unauthorized-domain")}function sb(n){const e=Cm(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!rb.test(t))return!1;if(nb.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new qu(3e4,6e4);function O0(){const n=Dr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ab(n){return new Promise((e,t)=>{var r,s,a;function l(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),t(Nr(n,"network-request-failed"))},timeout:ob.get()})}if(!((s=(r=Dr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Dr().gapi)===null||a===void 0)&&a.load)l();else{const h=eP("iframefcb");return Dr()[h]=()=>{gapi.load?l():t(Nr(n,"network-request-failed"))},MT(`${ZR()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw Wh=null,e})}let Wh=null;function lb(n){return Wh=Wh||ab(n),Wh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new qu(5e3,15e3),cb="__/auth/iframe",hb="emulator/auth/iframe",db={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pb(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Eg(e,hb):`https://${n.config.authDomain}/${cb}`,r={apiKey:e.apiKey,appName:n.name,v:Eo},s=fb.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Ja(r).slice(1)}`}async function mb(n){const e=await lb(n),t=Dr().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:pb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:db,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=Nr(n,"network-request-failed"),h=Dr().setTimeout(()=>{a(l)},ub.get());function f(){Dr().clearTimeout(h),s(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_b=500,yb=600,vb="_blank",wb="http://localhost";class L0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Eb(n,e,t,r=_b,s=yb){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},gb),{width:r.toString(),height:s.toString(),top:a,left:l}),p=an().toLowerCase();t&&(h=RT(p)?vb:t),kT(p)&&(e=e||wb,f.scrollbars="yes");const y=Object.entries(f).reduce((E,[S,A])=>`${E}${S}=${A},`,"");if(WR(p)&&h!=="_self")return Tb(e||"",h),new L0(null);const v=window.open(e||"",h,y);Se(v,n,"popup-blocked");try{v.focus()}catch{}return new L0(v)}function Tb(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="__/auth/handler",Cb="emulator/auth/handler",Sb=encodeURIComponent("fac");async function M0(n,e,t,r,s,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Eo,eventId:s};if(e instanceof jT){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",td(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))l[y]=v}if(e instanceof Qu){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const f=await n._getAppCheckToken(),p=f?`#${Sb}=${encodeURIComponent(f)}`:"";return`${Ab(n)}?${Ja(h).slice(1)}${p}`}function Ab({config:n}){return n.emulator?Eg(n,Cb):`https://${n.authDomain}/${Ib}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="webStorageSupport";class kb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qT,this._completeRedirectFn=JP,this._overrideRedirectResult=KP}async _openPopup(e,t,r,s){var a;Ti((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await M0(e,t,r,Cm(),s);return Eb(e,l,kg())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await M0(e,t,r,Cm(),s);return PP(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ti(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await mb(e),r=new ZP(e);return t.register("authEvent",s=>(Se(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(im,{type:im},s=>{var a;const l=(a=s?.[0])===null||a===void 0?void 0:a[im];l!==void 0&&t(!!l),mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ib(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return OT()||xT()||Ig()}}const xb=kb;var V0="@firebase/auth",F0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bb(n){ho(new ms("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LT(n)},p=new YR(r,s,a,f);return oP(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ho(new ms("auth-internal",e=>{const t=To(e.getProvider("auth").getImmediate());return(r=>new Rb(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(V0,F0,Pb(n)),br(V0,F0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb=5*60,Db=cT("authIdTokenMaxAge")||Nb;let j0=null;const Ob=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Db)return;const s=t?.token;j0!==s&&(j0=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Lb(n=yg()){const e=Ud(n,"auth");if(e.isInitialized())return e.getImmediate();const t=sP(n,{popupRedirectResolver:xb,persistence:[jP,kP,qT]}),r=cT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Ob(a.toString());CP(t,l,()=>l(t.currentUser)),IP(t,h=>l(h))}}const s=aT("auth");return s&&aP(t,`http://${s}`),t}function Mb(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}JR({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=Nr("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",Mb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bb("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Vb(n,e,t,r){function s(a){return a instanceof t?a:new t(function(l){l(a)})}return new(t||(t=Promise))(function(a,l){function h(y){try{p(r.next(y))}catch(v){l(v)}}function f(y){try{p(r.throw(y))}catch(v){l(v)}}function p(y){y.done?a(y.value):s(y.value).then(h,f)}p((r=r.apply(n,[])).next())})}function Fb(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(p){return function(y){return f([p,y])}}function f(p){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,s=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){t.label=p[1];break}if(p[0]===6&&t.label<a[1]){t.label=a[1],a=p;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(p);break}a[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(y){p=[6,y],s=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ka=function(){return ka=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ka.apply(this,arguments)},eI=function(n){return{loading:n==null,value:n}},jb=function(){return function(n,e){switch(e.type){case"error":return ka(ka({},n),{error:e.error,loading:!1,value:void 0});case"reset":return eI(e.defaultValue);case"value":return ka(ka({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},Ub=function(n){var e=n?n():void 0,t=j.useReducer(jb(),eI(e)),r=t[0],s=t[1],a=j.useCallback(function(){var f=n?n():void 0;s({type:"reset",defaultValue:f})},[n]),l=j.useCallback(function(f){s({type:"error",error:f})},[]),h=j.useCallback(function(f){s({type:"value",value:f})},[]);return j.useMemo(function(){return{error:r.error,loading:r.loading,reset:a,setError:l,setValue:h,value:r.value}},[r.error,r.loading,a,l,h,r.value])},Wd=function(n,e){var t=Ub(function(){return n.currentUser}),r=t.error,s=t.loading,a=t.setError,l=t.setValue,h=t.value;return j.useEffect(function(){var f=Ag(n,function(p){return Vb(void 0,void 0,void 0,function(){var y;return Fb(this,function(v){switch(v.label){case 0:return[3,4];case 1:return v.trys.push([1,3,,4]),[4,e.onUserChanged(p)];case 2:return v.sent(),[3,4];case 3:return y=v.sent(),a(y),[3,4];case 4:return l(p),[2]}})})},a);return function(){f()}},[n]),[h,s,r]},Bb="firebase",zb="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(Bb,zb,"app");var U0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,tI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,k){function x(){}x.prototype=k.prototype,D.D=k.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(R,O,V){for(var b=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)b[ke-2]=arguments[ke];return k.prototype[O].apply(R,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,k,x){x||(x=0);var R=Array(16);if(typeof k=="string")for(var O=0;16>O;++O)R[O]=k.charCodeAt(x++)|k.charCodeAt(x++)<<8|k.charCodeAt(x++)<<16|k.charCodeAt(x++)<<24;else for(O=0;16>O;++O)R[O]=k[x++]|k[x++]<<8|k[x++]<<16|k[x++]<<24;k=D.g[0],x=D.g[1],O=D.g[2];var V=D.g[3],b=k+(V^x&(O^V))+R[0]+3614090360&4294967295;k=x+(b<<7&4294967295|b>>>25),b=V+(O^k&(x^O))+R[1]+3905402710&4294967295,V=k+(b<<12&4294967295|b>>>20),b=O+(x^V&(k^x))+R[2]+606105819&4294967295,O=V+(b<<17&4294967295|b>>>15),b=x+(k^O&(V^k))+R[3]+3250441966&4294967295,x=O+(b<<22&4294967295|b>>>10),b=k+(V^x&(O^V))+R[4]+4118548399&4294967295,k=x+(b<<7&4294967295|b>>>25),b=V+(O^k&(x^O))+R[5]+1200080426&4294967295,V=k+(b<<12&4294967295|b>>>20),b=O+(x^V&(k^x))+R[6]+2821735955&4294967295,O=V+(b<<17&4294967295|b>>>15),b=x+(k^O&(V^k))+R[7]+4249261313&4294967295,x=O+(b<<22&4294967295|b>>>10),b=k+(V^x&(O^V))+R[8]+1770035416&4294967295,k=x+(b<<7&4294967295|b>>>25),b=V+(O^k&(x^O))+R[9]+2336552879&4294967295,V=k+(b<<12&4294967295|b>>>20),b=O+(x^V&(k^x))+R[10]+4294925233&4294967295,O=V+(b<<17&4294967295|b>>>15),b=x+(k^O&(V^k))+R[11]+2304563134&4294967295,x=O+(b<<22&4294967295|b>>>10),b=k+(V^x&(O^V))+R[12]+1804603682&4294967295,k=x+(b<<7&4294967295|b>>>25),b=V+(O^k&(x^O))+R[13]+4254626195&4294967295,V=k+(b<<12&4294967295|b>>>20),b=O+(x^V&(k^x))+R[14]+2792965006&4294967295,O=V+(b<<17&4294967295|b>>>15),b=x+(k^O&(V^k))+R[15]+1236535329&4294967295,x=O+(b<<22&4294967295|b>>>10),b=k+(O^V&(x^O))+R[1]+4129170786&4294967295,k=x+(b<<5&4294967295|b>>>27),b=V+(x^O&(k^x))+R[6]+3225465664&4294967295,V=k+(b<<9&4294967295|b>>>23),b=O+(k^x&(V^k))+R[11]+643717713&4294967295,O=V+(b<<14&4294967295|b>>>18),b=x+(V^k&(O^V))+R[0]+3921069994&4294967295,x=O+(b<<20&4294967295|b>>>12),b=k+(O^V&(x^O))+R[5]+3593408605&4294967295,k=x+(b<<5&4294967295|b>>>27),b=V+(x^O&(k^x))+R[10]+38016083&4294967295,V=k+(b<<9&4294967295|b>>>23),b=O+(k^x&(V^k))+R[15]+3634488961&4294967295,O=V+(b<<14&4294967295|b>>>18),b=x+(V^k&(O^V))+R[4]+3889429448&4294967295,x=O+(b<<20&4294967295|b>>>12),b=k+(O^V&(x^O))+R[9]+568446438&4294967295,k=x+(b<<5&4294967295|b>>>27),b=V+(x^O&(k^x))+R[14]+3275163606&4294967295,V=k+(b<<9&4294967295|b>>>23),b=O+(k^x&(V^k))+R[3]+4107603335&4294967295,O=V+(b<<14&4294967295|b>>>18),b=x+(V^k&(O^V))+R[8]+1163531501&4294967295,x=O+(b<<20&4294967295|b>>>12),b=k+(O^V&(x^O))+R[13]+2850285829&4294967295,k=x+(b<<5&4294967295|b>>>27),b=V+(x^O&(k^x))+R[2]+4243563512&4294967295,V=k+(b<<9&4294967295|b>>>23),b=O+(k^x&(V^k))+R[7]+1735328473&4294967295,O=V+(b<<14&4294967295|b>>>18),b=x+(V^k&(O^V))+R[12]+2368359562&4294967295,x=O+(b<<20&4294967295|b>>>12),b=k+(x^O^V)+R[5]+4294588738&4294967295,k=x+(b<<4&4294967295|b>>>28),b=V+(k^x^O)+R[8]+2272392833&4294967295,V=k+(b<<11&4294967295|b>>>21),b=O+(V^k^x)+R[11]+1839030562&4294967295,O=V+(b<<16&4294967295|b>>>16),b=x+(O^V^k)+R[14]+4259657740&4294967295,x=O+(b<<23&4294967295|b>>>9),b=k+(x^O^V)+R[1]+2763975236&4294967295,k=x+(b<<4&4294967295|b>>>28),b=V+(k^x^O)+R[4]+1272893353&4294967295,V=k+(b<<11&4294967295|b>>>21),b=O+(V^k^x)+R[7]+4139469664&4294967295,O=V+(b<<16&4294967295|b>>>16),b=x+(O^V^k)+R[10]+3200236656&4294967295,x=O+(b<<23&4294967295|b>>>9),b=k+(x^O^V)+R[13]+681279174&4294967295,k=x+(b<<4&4294967295|b>>>28),b=V+(k^x^O)+R[0]+3936430074&4294967295,V=k+(b<<11&4294967295|b>>>21),b=O+(V^k^x)+R[3]+3572445317&4294967295,O=V+(b<<16&4294967295|b>>>16),b=x+(O^V^k)+R[6]+76029189&4294967295,x=O+(b<<23&4294967295|b>>>9),b=k+(x^O^V)+R[9]+3654602809&4294967295,k=x+(b<<4&4294967295|b>>>28),b=V+(k^x^O)+R[12]+3873151461&4294967295,V=k+(b<<11&4294967295|b>>>21),b=O+(V^k^x)+R[15]+530742520&4294967295,O=V+(b<<16&4294967295|b>>>16),b=x+(O^V^k)+R[2]+3299628645&4294967295,x=O+(b<<23&4294967295|b>>>9),b=k+(O^(x|~V))+R[0]+4096336452&4294967295,k=x+(b<<6&4294967295|b>>>26),b=V+(x^(k|~O))+R[7]+1126891415&4294967295,V=k+(b<<10&4294967295|b>>>22),b=O+(k^(V|~x))+R[14]+2878612391&4294967295,O=V+(b<<15&4294967295|b>>>17),b=x+(V^(O|~k))+R[5]+4237533241&4294967295,x=O+(b<<21&4294967295|b>>>11),b=k+(O^(x|~V))+R[12]+1700485571&4294967295,k=x+(b<<6&4294967295|b>>>26),b=V+(x^(k|~O))+R[3]+2399980690&4294967295,V=k+(b<<10&4294967295|b>>>22),b=O+(k^(V|~x))+R[10]+4293915773&4294967295,O=V+(b<<15&4294967295|b>>>17),b=x+(V^(O|~k))+R[1]+2240044497&4294967295,x=O+(b<<21&4294967295|b>>>11),b=k+(O^(x|~V))+R[8]+1873313359&4294967295,k=x+(b<<6&4294967295|b>>>26),b=V+(x^(k|~O))+R[15]+4264355552&4294967295,V=k+(b<<10&4294967295|b>>>22),b=O+(k^(V|~x))+R[6]+2734768916&4294967295,O=V+(b<<15&4294967295|b>>>17),b=x+(V^(O|~k))+R[13]+1309151649&4294967295,x=O+(b<<21&4294967295|b>>>11),b=k+(O^(x|~V))+R[4]+4149444226&4294967295,k=x+(b<<6&4294967295|b>>>26),b=V+(x^(k|~O))+R[11]+3174756917&4294967295,V=k+(b<<10&4294967295|b>>>22),b=O+(k^(V|~x))+R[2]+718787259&4294967295,O=V+(b<<15&4294967295|b>>>17),b=x+(V^(O|~k))+R[9]+3951481745&4294967295,D.g[0]=D.g[0]+k&4294967295,D.g[1]=D.g[1]+(O+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+V&4294967295}r.prototype.u=function(D,k){k===void 0&&(k=D.length);for(var x=k-this.blockSize,R=this.B,O=this.h,V=0;V<k;){if(O==0)for(;V<=x;)s(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<k;)if(R[O++]=D.charCodeAt(V++),O==this.blockSize){s(this,R),O=0;break}}else for(;V<k;)if(R[O++]=D[V++],O==this.blockSize){s(this,R),O=0;break}}this.h=O,this.o+=k},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var k=1;k<D.length-8;++k)D[k]=0;var x=8*this.o;for(k=D.length-8;k<D.length;++k)D[k]=x&255,x/=256;for(this.u(D),D=Array(16),k=x=0;4>k;++k)for(var R=0;32>R;R+=8)D[x++]=this.g[k]>>>R&255;return D};function a(D,k){var x=h;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=k(D)}function l(D,k){this.h=k;for(var x=[],R=!0,O=D.length-1;0<=O;O--){var V=D[O]|0;R&&V==k||(x[O]=V,R=!1)}this.g=x}var h={};function f(D){return-128<=D&&128>D?a(D,function(k){return new l([k|0],0>k?-1:0)}):new l([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return L(p(-D));for(var k=[],x=1,R=0;D>=x;R++)k[R]=D/x|0,x*=4294967296;return new l(k,0)}function y(D,k){if(D.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(D.charAt(0)=="-")return L(y(D.substring(1),k));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(k,8)),R=v,O=0;O<D.length;O+=8){var V=Math.min(8,D.length-O),b=parseInt(D.substring(O,O+V),k);8>V?(V=p(Math.pow(k,V)),R=R.j(V).add(p(b))):(R=R.j(x),R=R.add(p(b)))}return R}var v=f(0),E=f(1),S=f(16777216);n=l.prototype,n.m=function(){if(N(this))return-L(this).m();for(var D=0,k=1,x=0;x<this.g.length;x++){var R=this.i(x);D+=(0<=R?R:4294967296+R)*k,k*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(A(this))return"0";if(N(this))return"-"+L(this).toString(D);for(var k=p(Math.pow(D,6)),x=this,R="";;){var O=Q(x,k).g;x=U(x,O.j(k));var V=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=O,A(x))return V+R;for(;6>V.length;)V="0"+V;R=V+R}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function A(D){if(D.h!=0)return!1;for(var k=0;k<D.g.length;k++)if(D.g[k]!=0)return!1;return!0}function N(D){return D.h==-1}n.l=function(D){return D=U(this,D),N(D)?-1:A(D)?0:1};function L(D){for(var k=D.g.length,x=[],R=0;R<k;R++)x[R]=~D.g[R];return new l(x,~D.h).add(E)}n.abs=function(){return N(this)?L(this):this},n.add=function(D){for(var k=Math.max(this.g.length,D.g.length),x=[],R=0,O=0;O<=k;O++){var V=R+(this.i(O)&65535)+(D.i(O)&65535),b=(V>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);R=b>>>16,V&=65535,b&=65535,x[O]=b<<16|V}return new l(x,x[x.length-1]&-2147483648?-1:0)};function U(D,k){return D.add(L(k))}n.j=function(D){if(A(this)||A(D))return v;if(N(this))return N(D)?L(this).j(L(D)):L(L(this).j(D));if(N(D))return L(this.j(L(D)));if(0>this.l(S)&&0>D.l(S))return p(this.m()*D.m());for(var k=this.g.length+D.g.length,x=[],R=0;R<2*k;R++)x[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<D.g.length;O++){var V=this.i(R)>>>16,b=this.i(R)&65535,ke=D.i(O)>>>16,ve=D.i(O)&65535;x[2*R+2*O]+=b*ve,q(x,2*R+2*O),x[2*R+2*O+1]+=V*ve,q(x,2*R+2*O+1),x[2*R+2*O+1]+=b*ke,q(x,2*R+2*O+1),x[2*R+2*O+2]+=V*ke,q(x,2*R+2*O+2)}for(R=0;R<k;R++)x[R]=x[2*R+1]<<16|x[2*R];for(R=k;R<2*k;R++)x[R]=0;return new l(x,0)};function q(D,k){for(;(D[k]&65535)!=D[k];)D[k+1]+=D[k]>>>16,D[k]&=65535,k++}function G(D,k){this.g=D,this.h=k}function Q(D,k){if(A(k))throw Error("division by zero");if(A(D))return new G(v,v);if(N(D))return k=Q(L(D),k),new G(L(k.g),L(k.h));if(N(k))return k=Q(D,L(k)),new G(L(k.g),k.h);if(30<D.g.length){if(N(D)||N(k))throw Error("slowDivide_ only works with positive integers.");for(var x=E,R=k;0>=R.l(D);)x=Z(x),R=Z(R);var O=ie(x,1),V=ie(R,1);for(R=ie(R,2),x=ie(x,2);!A(R);){var b=V.add(R);0>=b.l(D)&&(O=O.add(x),V=b),R=ie(R,1),x=ie(x,1)}return k=U(D,O.j(k)),new G(O,k)}for(O=v;0<=D.l(k);){for(x=Math.max(1,Math.floor(D.m()/k.m())),R=Math.ceil(Math.log(x)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),V=p(x),b=V.j(k);N(b)||0<b.l(D);)x-=R,V=p(x),b=V.j(k);A(V)&&(V=E),O=O.add(V),D=U(D,b)}return new G(O,D)}n.A=function(D){return Q(this,D).h},n.and=function(D){for(var k=Math.max(this.g.length,D.g.length),x=[],R=0;R<k;R++)x[R]=this.i(R)&D.i(R);return new l(x,this.h&D.h)},n.or=function(D){for(var k=Math.max(this.g.length,D.g.length),x=[],R=0;R<k;R++)x[R]=this.i(R)|D.i(R);return new l(x,this.h|D.h)},n.xor=function(D){for(var k=Math.max(this.g.length,D.g.length),x=[],R=0;R<k;R++)x[R]=this.i(R)^D.i(R);return new l(x,this.h^D.h)};function Z(D){for(var k=D.g.length+1,x=[],R=0;R<k;R++)x[R]=D.i(R)<<1|D.i(R-1)>>>31;return new l(x,D.h)}function ie(D,k){var x=k>>5;k%=32;for(var R=D.g.length-x,O=[],V=0;V<R;V++)O[V]=0<k?D.i(V+x)>>>k|D.i(V+x+1)<<32-k:D.i(V+x);return new l(O,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tI=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,ls=l}).apply(typeof U0<"u"?U0:typeof self<"u"?self:typeof window<"u"?window:{});var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nI,fu,rI,Hh,xm,iI,sI,oI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nh=="object"&&Nh];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(c,g){if(g)e:{var w=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var z=c[C];if(!(z in w))break e;w=w[z]}c=c[c.length-1],C=w[c],g=g(C),g!=C&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function a(c,g){c instanceof String&&(c+="");var w=0,C=!1,z={next:function(){if(!C&&w<c.length){var K=w++;return{value:g(K,c[K]),done:!1}}return C=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(c){return c||function(){return a(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function y(c,g,w){return c.call.apply(c.bind,arguments)}function v(c,g,w){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,C),c.apply(g,z)}}return function(){return c.apply(g,arguments)}}function E(c,g,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,E.apply(null,arguments)}function S(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function A(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(C,z,K){for(var oe=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)oe[Ye-2]=arguments[Ye];return g.prototype[z].apply(C,oe)}}function N(c){const g=c.length;if(0<g){const w=Array(g);for(let C=0;C<g;C++)w[C]=c[C];return w}return[]}function L(c,g){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(f(C)){const z=c.length||0,K=C.length||0;c.length=z+K;for(let oe=0;oe<K;oe++)c[z+oe]=C[oe]}else c.push(C)}}class U{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function q(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var Z=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ie(c,g,w){for(const C in c)g.call(w,c[C],C,c)}function D(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function k(c){const g={};for(const w in c)g[w]=c[w];return g}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(c,g){let w,C;for(let z=1;z<arguments.length;z++){C=arguments[z];for(w in C)c[w]=C[w];for(let K=0;K<x.length;K++)w=x[K],Object.prototype.hasOwnProperty.call(C,w)&&(c[w]=C[w])}}function O(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function V(c){h.setTimeout(()=>{throw c},0)}function b(){var c=pe;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class ke{constructor(){this.h=this.g=null}add(g,w){const C=ve.get();C.set(g,w),this.h?this.h.next=C:this.g=C,this.h=C}}var ve=new U(()=>new Ke,c=>c.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let We,se=!1,pe=new ke,ae=()=>{const c=h.Promise.resolve(void 0);We=()=>{c.then(B)}};var B=()=>{for(var c;c=b();){try{c.h.call(c.g)}catch(w){V(w)}var g=ve;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}se=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};h.addEventListener("test",w,g),h.removeEventListener("test",w,g)}catch{}return c}();function we(c,g){if(de.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(Z){e:{try{Q(g.nodeName);var z=!0;break e}catch{}z=!1}z||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Re[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&we.aa.h.call(this)}}A(we,de);var Re={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),be=0;function nt(c,g,w,C,z){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!C,this.ha=z,this.key=++be,this.da=this.fa=!1}function Mt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hr(c){this.src=c,this.g={},this.h=0}Hr.prototype.add=function(c,g,w,C,z){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var oe=xi(c,g,C,z);return-1<oe?(g=c[oe],w||(g.fa=!1)):(g=new nt(g,this.src,K,!!C,z),g.fa=w,c.push(g)),g};function Ro(c,g){var w=g.type;if(w in c.g){var C=c.g[w],z=Array.prototype.indexOf.call(C,g,void 0),K;(K=0<=z)&&Array.prototype.splice.call(C,z,1),K&&(Mt(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function xi(c,g,w,C){for(var z=0;z<c.length;++z){var K=c[z];if(!K.da&&K.listener==g&&K.capture==!!w&&K.ha==C)return z}return-1}var Rs="closure_lm_"+(1e6*Math.random()|0),Po={};function cl(c,g,w,C,z){if(Array.isArray(g)){for(var K=0;K<g.length;K++)cl(c,g[K],w,C,z);return null}return w=fl(w),c&&c[je]?c.K(g,w,p(C)?!!C.capture:!1,z):hl(c,g,w,!1,C,z)}function hl(c,g,w,C,z,K){if(!g)throw Error("Invalid event type");var oe=p(z)?!!z.capture:!!z,Ye=No(c);if(Ye||(c[Rs]=Ye=new Hr(c)),w=Ye.add(g,w,C,oe,K),w.proxy)return w;if(C=pc(),w.proxy=C,C.src=c,C.listener=w,c.addEventListener)Ae||(z=oe),z===void 0&&(z=!1),c.addEventListener(g.toString(),C,z);else if(c.attachEvent)c.attachEvent(qr(g.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function pc(){function c(w){return g.call(c.src,c.listener,w)}const g=dl;return c}function bo(c,g,w,C,z){if(Array.isArray(g))for(var K=0;K<g.length;K++)bo(c,g[K],w,C,z);else C=p(C)?!!C.capture:!!C,w=fl(w),c&&c[je]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],w=xi(K,w,C,z),-1<w&&(Mt(K[w]),Array.prototype.splice.call(K,w,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=No(c))&&(g=c.g[g.toString()],c=-1,g&&(c=xi(g,w,C,z)),(w=-1<c?g[c]:null)&&Gr(w))}function Gr(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[je])Ro(g.i,c);else{var w=c.type,C=c.proxy;g.removeEventListener?g.removeEventListener(w,C,c.capture):g.detachEvent?g.detachEvent(qr(w),C):g.addListener&&g.removeListener&&g.removeListener(C),(w=No(g))?(Ro(w,c),w.h==0&&(w.src=null,g[Rs]=null)):Mt(c)}}}function qr(c){return c in Po?Po[c]:Po[c]="on"+c}function dl(c,g){if(c.da)c=!0;else{g=new we(g,this);var w=c.listener,C=c.ha||c.src;c.fa&&Gr(c),c=w.call(C,g)}return c}function No(c){return c=c[Rs],c instanceof Hr?c:null}var Do="__closure_events_fn_"+(1e9*Math.random()>>>0);function fl(c){return typeof c=="function"?c:(c[Do]||(c[Do]=function(g){return c.handleEvent(g)}),c[Do])}function Pt(){Y.call(this),this.i=new Hr(this),this.M=this,this.F=null}A(Pt,Y),Pt.prototype[je]=!0,Pt.prototype.removeEventListener=function(c,g,w,C){bo(this,c,g,w,C)};function bt(c,g){var w,C=c.F;if(C)for(w=[];C;C=C.F)w.push(C);if(c=c.M,C=g.type||g,typeof g=="string")g=new de(g,c);else if(g instanceof de)g.target=g.target||c;else{var z=g;g=new de(C,c),R(g,z)}if(z=!0,w)for(var K=w.length-1;0<=K;K--){var oe=g.g=w[K];z=Kr(oe,C,!0,g)&&z}if(oe=g.g=c,z=Kr(oe,C,!0,g)&&z,z=Kr(oe,C,!1,g)&&z,w)for(K=0;K<w.length;K++)oe=g.g=w[K],z=Kr(oe,C,!1,g)&&z}Pt.prototype.N=function(){if(Pt.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],C=0;C<w.length;C++)Mt(w[C]);delete c.g[g],c.h--}}this.F=null},Pt.prototype.K=function(c,g,w,C){return this.i.add(String(c),g,!1,w,C)},Pt.prototype.L=function(c,g,w,C){return this.i.add(String(c),g,!0,w,C)};function Kr(c,g,w,C){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var z=!0,K=0;K<g.length;++K){var oe=g[K];if(oe&&!oe.da&&oe.capture==w){var Ye=oe.listener,Nt=oe.ha||oe.src;oe.fa&&Ro(c.i,oe),z=Ye.call(Nt,C)!==!1&&z}}return z&&!C.defaultPrevented}function pl(c,g,w){if(typeof c=="function")w&&(c=E(c,w));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:h.setTimeout(c,g||0)}function Ri(c){c.g=pl(()=>{c.g=null,c.i&&(c.i=!1,Ri(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Ps extends Y{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ri(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(c){Y.call(this),this.h=c,this.g={}}A(bs,Y);var ml=[];function gl(c){ie(c.g,function(g,w){this.g.hasOwnProperty(w)&&Gr(g)},c),c.g={}}bs.prototype.N=function(){bs.aa.N.call(this),gl(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _l=h.JSON.stringify,yl=h.JSON.parse,vl=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Ns(){}Ns.prototype.h=null;function Oo(c){return c.h||(c.h=c.i())}function Lo(){}var Vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yr(){de.call(this,"d")}A(yr,de);function Mo(){de.call(this,"c")}A(Mo,de);var vr={},wl=null;function Ds(){return wl=wl||new Pt}vr.La="serverreachability";function El(c){de.call(this,vr.La,c)}A(El,de);function Qr(c){const g=Ds();bt(g,new El(g))}vr.STAT_EVENT="statevent";function Tl(c,g){de.call(this,vr.STAT_EVENT,c),this.stat=g}A(Tl,de);function _t(c){const g=Ds();bt(g,new Tl(g,c))}vr.Ma="timingevent";function Vo(c,g){de.call(this,vr.Ma,c),this.size=g}A(Vo,de);function Yn(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},g)}function Os(){this.g=!0}Os.prototype.xa=function(){this.g=!1};function Ls(c,g,w,C,z,K){c.info(function(){if(c.g)if(K)for(var oe="",Ye=K.split("&"),Nt=0;Nt<Ye.length;Nt++){var Ue=Ye[Nt].split("=");if(1<Ue.length){var Vt=Ue[0];Ue=Ue[1];var Tt=Vt.split("_");oe=2<=Tt.length&&Tt[1]=="type"?oe+(Vt+"="+Ue+"&"):oe+(Vt+"=redacted&")}}else oe=null;else oe=K;return"XMLHTTP REQ ("+C+") [attempt "+z+"]: "+g+`
`+w+`
`+oe})}function Fo(c,g,w,C,z,K,oe){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+z+"]: "+g+`
`+w+`
`+K+" "+oe})}function Jn(c,g,w,C){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+vf(c,w)+(C?" "+C:"")})}function Il(c,g){c.info(function(){return"TIMEOUT: "+g})}Os.prototype.info=function(){};function vf(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var C=w[c];if(!(2>C.length)){var z=C[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return _l(w)}catch{return g}}var jo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xn;function Ms(){}A(Ms,Ns),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Xn=new Ms;function Zn(c,g,w,C){this.j=c,this.i=g,this.l=w,this.R=C||1,this.U=new bs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gc}function gc(){this.i=null,this.g="",this.h=!1}var Cl={},Uo={};function Bo(c,g,w){c.L=1,c.v=Oi(kn(g)),c.m=w,c.P=!0,Sl(c,null)}function Sl(c,g){c.F=Date.now(),rt(c),c.A=kn(c.v);var w=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),Mi(w.i,"t",C),c.C=0,w=c.j.J,c.h=new gc,c.g=Oc(c.j,w?g:null,!c.m),0<c.O&&(c.M=new Ps(E(c.Y,c,c.g),c.O)),g=c.U,w=c.g,C=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(ml[0]=z.toString()),z=ml);for(var K=0;K<z.length;K++){var oe=cl(w,z[K],C||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=c.H?k(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Qr(),Ls(c.i,c.u,c.A,c.l,c.R,c.m)}Zn.prototype.ca=function(c){c=c.target;const g=this.M;g&&pn(c)==3?g.j():this.Y(c)},Zn.prototype.Y=function(c){try{if(c==this.g)e:{const Tt=pn(this.g);var g=this.g.Ba();const Un=this.g.Z();if(!(3>Tt)&&(Tt!=3||this.g&&(this.h.h||this.g.oa()||bl(this.g)))){this.J||Tt!=4||g==7||(g==8||0>=Un?Qr(3):Qr(2)),Vs(this);var w=this.g.Z();this.X=w;t:if(_c(this)){var C=bl(this.g);c="";var z=C.length,K=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),Pi(this);var oe="";break t}this.h.i=new h.TextDecoder}for(g=0;g<z;g++)this.h.h=!0,c+=this.h.i.decode(C[g],{stream:!(K&&g==z-1)});C.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=w==200,Fo(this.i,this.u,this.A,this.l,this.R,Tt,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ye,Nt=this.g;if((Ye=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Ye)){var Ue=Ye;break t}}Ue=null}if(w=Ue)Jn(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Al(this,w);else{this.o=!1,this.s=3,_t(12),Fn(this),Pi(this);break e}}if(this.P){w=!0;let Rn;for(;!this.J&&this.C<oe.length;)if(Rn=wf(this,oe),Rn==Uo){Tt==4&&(this.s=4,_t(14),w=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(Rn==Cl){this.s=4,_t(15),Jn(this.i,this.l,oe,"[Invalid Chunk]"),w=!1;break}else Jn(this.i,this.l,Rn,null),Al(this,Rn);if(_c(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tt!=4||oe.length!=0||this.h.h||(this.s=1,_t(16),w=!1),this.o=this.o&&w,!w)Jn(this.i,this.l,oe,"[Invalid Chunked Response]"),Fn(this),Pi(this);else if(0<oe.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Dl(Vt),Vt.M=!0,_t(11))}}else Jn(this.i,this.l,oe,null),Al(this,oe);Tt==4&&Fn(this),this.o&&!this.J&&(Tt==4?Xo(this.j,this):(this.o=!1,rt(this)))}else qo(this.g),w==400&&0<oe.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Fn(this),Pi(this)}}}catch{}finally{}};function _c(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function wf(c,g){var w=c.C,C=g.indexOf(`
`,w);return C==-1?Uo:(w=Number(g.substring(w,C)),isNaN(w)?Cl:(C+=1,C+w>g.length?Uo:(g=g.slice(C,C+w),c.C=C+w,g)))}Zn.prototype.cancel=function(){this.J=!0,Fn(this)};function rt(c){c.S=Date.now()+c.I,yc(c,c.I)}function yc(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Yn(E(c.ba,c),g)}function Vs(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Zn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(Il(this.i,this.A),this.L!=2&&(Qr(),_t(17)),Fn(this),this.s=2,Pi(this)):yc(this,this.S-c)};function Pi(c){c.j.G==0||c.J||Xo(c.j,c)}function Fn(c){Vs(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,gl(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function Al(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||ln(w.h,c))){if(!c.K&&ln(w.h,c)&&w.G==3){try{var C=w.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var z=C;if(z[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)Jo(w),ir(w);else break e;Yo(w),_t(18)}}else w.za=z[1],0<w.za-w.T&&37500>z[2]&&w.F&&w.v==0&&!w.C&&(w.C=Yn(E(w.Za,w),6e3));if(1>=wc(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ei(w,11)}else if((c.K||w.g==c)&&Jo(w),!q(g))for(z=w.Da.g.parse(g),g=0;g<z.length;g++){let Ue=z[g];if(w.T=Ue[0],Ue=Ue[1],w.G==2)if(Ue[0]=="c"){w.K=Ue[1],w.ia=Ue[2];const Vt=Ue[3];Vt!=null&&(w.la=Vt,w.j.info("VER="+w.la));const Tt=Ue[4];Tt!=null&&(w.Aa=Tt,w.j.info("SVER="+w.Aa));const Un=Ue[5];Un!=null&&typeof Un=="number"&&0<Un&&(C=1.5*Un,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const Rn=c.g;if(Rn){const Ws=Rn.g?Rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var K=C.h;K.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(kl(K,K.h),K.h=null))}if(C.D){const ea=Rn.g?Rn.g.getResponseHeader("X-HTTP-Session-Id"):null;ea&&(C.ya=ea,et(C.I,C.D,ea))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var oe=c;if(C.qa=Dc(C,C.J?C.ia:null,C.W),oe.K){Ec(C.h,oe);var Ye=oe,Nt=C.L;Nt&&(Ye.I=Nt),Ye.B&&(Vs(Ye),rt(Ye)),C.g=oe}else $s(C);0<w.i.length&&Ir(w)}else Ue[0]!="stop"&&Ue[0]!="close"||ei(w,7);else w.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?ei(w,7):Gt(w):Ue[0]!="noop"&&w.l&&w.l.ta(Ue),w.v=0)}}Qr(4)}catch{}}var vc=class{constructor(c,g){this.g=c,this.map=g}};function Fs(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function An(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wc(c){return c.h?1:c.g?c.g.size:0}function ln(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function kl(c,g){c.g?c.g.add(g):c.h=g}function Ec(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Fs.prototype.cancel=function(){if(this.i=Tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Tc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return N(c.i)}function zo(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var g=[],w=c.length,C=0;C<w;C++)g.push(c[C]);return g}g=[],w=0;for(C in c)g[w++]=c[C];return g}function $o(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const C in c)g[w++]=C;return g}}}function bi(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=$o(c),C=zo(c),z=C.length,K=0;K<z;K++)g.call(void 0,C[K],w&&w[K],c)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ef(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var C=c[w].indexOf("="),z=null;if(0<=C){var K=c[w].substring(0,C);z=c[w].substring(C+1)}else K=c[w];g(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Yr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Yr){this.h=c.h,Us(this,c.j),this.o=c.o,this.g=c.g,Ni(this,c.s),this.l=c.l;var g=c.i,w=new wr;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),Di(this,w),this.m=c.m}else c&&(g=String(c).match(js))?(this.h=!1,Us(this,g[1]||"",!0),this.o=Fe(g[2]||""),this.g=Fe(g[3]||"",!0),Ni(this,g[4]),this.l=Fe(g[5]||"",!0),Di(this,g[6]||"",!0),this.m=Fe(g[7]||"")):(this.h=!1,this.i=new wr(null,this.h))}Yr.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Li(g,Wo,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Li(g,Wo,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(Li(w,w.charAt(0)=="/"?Sc:Cc,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",Li(w,xl)),c.join("")};function kn(c){return new Yr(c)}function Us(c,g,w){c.j=w?Fe(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ni(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Di(c,g,w){g instanceof wr?(c.i=g,Er(c.i,c.h)):(w||(g=Li(g,Ac)),c.i=new wr(g,c.h))}function et(c,g,w){c.i.set(g,w)}function Oi(c){return et(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fe(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Li(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,Ic),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ic(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Wo=/[#\/\?@]/g,Cc=/[#\?:]/g,Sc=/[#\?]/g,Ac=/[#\?@]/g,xl=/#/g;function wr(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Ht(c){c.g||(c.g=new Map,c.h=0,c.i&&Ef(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}n=wr.prototype,n.add=function(c,g){Ht(this),this.i=null,c=jn(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function er(c,g){Ht(c),g=jn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function tr(c,g){return Ht(c),g=jn(c,g),c.g.has(g)}n.forEach=function(c,g){Ht(this),this.g.forEach(function(w,C){w.forEach(function(z){c.call(g,z,C,this)},this)},this)},n.na=function(){Ht(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let C=0;C<g.length;C++){const z=c[C];for(let K=0;K<z.length;K++)w.push(g[C])}return w},n.V=function(c){Ht(this);let g=[];if(typeof c=="string")tr(this,c)&&(g=g.concat(this.g.get(jn(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},n.set=function(c,g){return Ht(this),this.i=null,c=jn(this,c),tr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},n.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Mi(c,g,w){er(c,g),0<w.length&&(c.i=null,c.g.set(jn(c,g),N(w)),c.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var C=g[w];const K=encodeURIComponent(String(C)),oe=this.V(C);for(C=0;C<oe.length;C++){var z=K;oe[C]!==""&&(z+="="+encodeURIComponent(String(oe[C]))),c.push(z)}}return this.i=c.join("&")};function jn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Er(c,g){g&&!c.j&&(Ht(c),c.i=null,c.g.forEach(function(w,C){var z=C.toLowerCase();C!=z&&(er(this,C),Mi(this,z,w))},c)),c.j=g}function Tf(c,g){const w=new Os;if(h.Image){const C=new Image;C.onload=S(fn,w,"TestLoadImage: loaded",!0,g,C),C.onerror=S(fn,w,"TestLoadImage: error",!1,g,C),C.onabort=S(fn,w,"TestLoadImage: abort",!1,g,C),C.ontimeout=S(fn,w,"TestLoadImage: timeout",!1,g,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else g(!1)}function kc(c,g){const w=new Os,C=new AbortController,z=setTimeout(()=>{C.abort(),fn(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:C.signal}).then(K=>{clearTimeout(z),K.ok?fn(w,"TestPingServer: ok",!0,g):fn(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),fn(w,"TestPingServer: error",!1,g)})}function fn(c,g,w,C,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),C(w)}catch{}}function If(){this.g=new vl}function xc(c,g,w){const C=w||"";try{bi(c,function(z,K){let oe=z;p(z)&&(oe=_l(z)),g.push(C+K+"="+encodeURIComponent(oe))})}catch(z){throw g.push(C+"type="+encodeURIComponent("_badmap")),z}}function Jr(c){this.l=c.Ub||null,this.j=c.eb||!1}A(Jr,Ns),Jr.prototype.g=function(){return new Bs(this.l,this.j)},Jr.prototype.i=function(c){return function(){return c}}({});function Bs(c,g){Pt.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(Bs,Pt),n=Bs.prototype,n.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,rr(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||h).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nr(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,rr(this)),this.g&&(this.readyState=3,rr(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?nr(this):rr(this),this.readyState==3&&Rc(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,nr(this))},n.Qa=function(c){this.g&&(this.response=c,nr(this))},n.ga=function(){this.g&&nr(this)};function nr(c){c.readyState=4,c.l=null,c.j=null,c.v=null,rr(c)}n.setRequestHeader=function(c,g){this.u.append(c,g)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function rr(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Bs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Xr(c){let g="";return ie(c,function(w,C){g+=C,g+=":",g+=w,g+=`\r
`}),g}function Vi(c,g,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=Xr(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):et(c,g,w))}function ct(c){Pt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(ct,Pt);var Cf=/^https?$/i,Rl=["POST","PUT"];n=ct.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,g,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xn.g(),this.v=this.o?Oo(this.o):Oo(Xn),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){zs(this,K);return}if(c=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var z in C)w.set(z,C[z]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const K of C.keys())w.set(K,C.get(K));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(K=>K.toLowerCase()=="content-type"),z=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Rl,g,void 0))||C||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,oe]of w)this.g.setRequestHeader(K,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Go(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){zs(this,K)}};function zs(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Ho(c),xn(c)}function Ho(c){c.A||(c.A=!0,bt(c,"complete"),bt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,bt(this,"complete"),bt(this,"abort"),xn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xn(this,!0)),ct.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Pl(this):this.bb())},n.bb=function(){Pl(this)};function Pl(c){if(c.h&&typeof l<"u"&&(!c.v[1]||pn(c)!=4||c.Z()!=2)){if(c.u&&pn(c)==4)pl(c.Ea,0,c);else if(bt(c,"readystatechange"),pn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var C;if(C=oe===0){var z=String(c.D).match(js)[1]||null;!z&&h.self&&h.self.location&&(z=h.self.location.protocol.slice(0,-1)),C=!Cf.test(z?z.toLowerCase():"")}w=C}if(w)bt(c,"complete"),bt(c,"success");else{c.m=6;try{var K=2<pn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Ho(c)}}finally{xn(c)}}}}function xn(c,g){if(c.g){Go(c);const w=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||bt(c,"ready");try{w.onreadystatechange=C}catch{}}}function Go(c){c.I&&(h.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function pn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),yl(g)}};function bl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qo(c){const g={};c=(c.g&&2<=pn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(q(c[C]))continue;var w=O(c[C]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const K=g[z]||[];g[z]=K,K.push(w)}D(g,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function Nl(c){this.Aa=0,this.i=[],this.j=new Os,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Tr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Tr("baseRetryDelayMs",5e3,c),this.cb=Tr("retryDelaySeedMs",1e4,c),this.Wa=Tr("forwardChannelMaxRetries",2,c),this.wa=Tr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Fs(c&&c.concurrentRequestLimit),this.Da=new If,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Nl.prototype,n.la=8,n.G=1,n.connect=function(c,g,w,C){_t(0),this.W=c,this.H=g||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=Dc(this,null,this.W),Ir(this)};function Gt(c){if(Ko(c),c.G==3){var g=c.U++,w=kn(c.I);if(et(w,"SID",c.K),et(w,"RID",g),et(w,"TYPE","terminate"),Zr(c,w),g=new Zn(c,c.j,g),g.L=2,g.v=Oi(kn(w)),w=!1,h.navigator&&h.navigator.sendBeacon)try{w=h.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&h.Image&&(new Image().src=g.v,w=!0),w||(g.g=Oc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),rt(g)}Nc(c)}function ir(c){c.g&&(Dl(c),c.g.cancel(),c.g=null)}function Ko(c){ir(c),c.u&&(h.clearTimeout(c.u),c.u=null),Jo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function Ir(c){if(!An(c.h)&&!c.s){c.s=!0;var g=c.Ga;We||ae(),se||(We(),se=!0),pe.add(g,c),c.B=0}}function Sf(c,g){return wc(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Yn(E(c.Ga,c,g),bc(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new Zn(this,this.j,c);let K=this.o;if(this.S&&(K?(K=k(K),R(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=Fi(this,z,g),w=kn(this.I),et(w,"RID",c),et(w,"CVER",22),this.D&&et(w,"X-HTTP-Session-Id",this.D),Zr(this,w),K&&(this.O?g="headers="+encodeURIComponent(String(Xr(K)))+"&"+g:this.m&&Vi(w,this.m,K)),kl(this.h,z),this.Ua&&et(w,"TYPE","init"),this.P?(et(w,"$req",g),et(w,"SID","null"),z.T=!0,Bo(z,w,null)):Bo(z,w,g),this.G=2}}else this.G==3&&(c?Qo(this,c):this.i.length==0||An(this.h)||Qo(this))};function Qo(c,g){var w;g?w=g.l:w=c.U++;const C=kn(c.I);et(C,"SID",c.K),et(C,"RID",w),et(C,"AID",c.T),Zr(c,C),c.m&&c.o&&Vi(C,c.m,c.o),w=new Zn(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=Fi(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),kl(c.h,w),Bo(w,C,g)}function Zr(c,g){c.H&&ie(c.H,function(w,C){et(g,C,w)}),c.l&&bi({},function(w,C){et(g,C,w)})}function Fi(c,g,w){w=Math.min(c.i.length,w);var C=c.l?E(c.l.Na,c.l,c):null;e:{var z=c.i;let K=-1;for(;;){const oe=["count="+w];K==-1?0<w?(K=z[0].g,oe.push("ofs="+K)):K=0:oe.push("ofs="+K);let Ye=!0;for(let Nt=0;Nt<w;Nt++){let Ue=z[Nt].g;const Vt=z[Nt].map;if(Ue-=K,0>Ue)K=Math.max(0,z[Nt].g-100),Ye=!1;else try{xc(Vt,oe,"req"+Ue+"_")}catch{C&&C(Vt)}}if(Ye){C=oe.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,C}function $s(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;We||ae(),se||(We(),se=!0),pe.add(g,c),c.v=0}}function Yo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Yn(E(c.Fa,c),bc(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Pc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Yn(E(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),ir(this),Pc(this))};function Dl(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function Pc(c){c.g=new Zn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=kn(c.qa);et(g,"RID","rpc"),et(g,"SID",c.K),et(g,"AID",c.T),et(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&et(g,"TO",c.ja),et(g,"TYPE","xmlhttp"),Zr(c,g),c.m&&c.o&&Vi(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=Oi(kn(g)),w.m=null,w.P=!0,Sl(w,c)}n.Za=function(){this.C!=null&&(this.C=null,ir(this),Yo(this),_t(19))};function Jo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Xo(c,g){var w=null;if(c.g==g){Jo(c),Dl(c),c.g=null;var C=2}else if(ln(c.h,g))w=g.D,Ec(c.h,g),C=1;else return;if(c.G!=0){if(g.o)if(C==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var z=c.B;C=Ds(),bt(C,new Vo(C,w)),Ir(c)}else $s(c);else if(z=g.s,z==3||z==0&&0<g.X||!(C==1&&Sf(c,g)||C==2&&Yo(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),z){case 1:ei(c,5);break;case 4:ei(c,10);break;case 3:ei(c,6);break;default:ei(c,2)}}}function bc(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function ei(c,g){if(c.j.info("Error code "+g),g==2){var w=E(c.fb,c),C=c.Xa;const z=!C;C=new Yr(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Us(C,"https"),Oi(C),z?Tf(C.toString(),w):kc(C.toString(),w)}else _t(2);c.G=0,c.l&&c.l.sa(g),Nc(c),Ko(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Nc(c){if(c.G=0,c.ka=[],c.l){const g=Tc(c.h);(g.length!=0||c.i.length!=0)&&(L(c.ka,g),L(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function Dc(c,g,w){var C=w instanceof Yr?kn(w):new Yr(w);if(C.g!="")g&&(C.g=g+"."+C.g),Ni(C,C.s);else{var z=h.location;C=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;var K=new Yr(null);C&&Us(K,C),g&&(K.g=g),z&&Ni(K,z),w&&(K.l=w),C=K}return w=c.D,g=c.ya,w&&g&&et(C,w,g),et(C,"VER",c.la),Zr(c,C),C}function Oc(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new ct(new Jr({eb:w})):new ct(c.pa),g.Ha(c.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ol(){}n=Ol.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Zo(){}Zo.prototype.g=function(c,g){return new un(c,g)};function un(c,g){Pt.call(this),this.g=new Nl(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!q(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!q(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Cr(this)}A(un,Pt),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Gt(this.g)},un.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=_l(c),c=w);g.i.push(new vc(g.Ya++,c)),g.G==3&&Ir(g)},un.prototype.N=function(){this.g.l=null,delete this.j,Gt(this.g),delete this.g,un.aa.N.call(this)};function Lc(c){yr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}A(Lc,yr);function Mc(){Mo.call(this),this.status=1}A(Mc,Mo);function Cr(c){this.g=c}A(Cr,Ol),Cr.prototype.ua=function(){bt(this.g,"a")},Cr.prototype.ta=function(c){bt(this.g,new Lc(c))},Cr.prototype.sa=function(c){bt(this.g,new Mc)},Cr.prototype.ra=function(){bt(this.g,"b")},Zo.prototype.createWebChannel=Zo.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,oI=function(){return new Zo},sI=function(){return Ds()},iI=vr,xm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},jo.NO_ERROR=0,jo.TIMEOUT=8,jo.HTTP_ERROR=6,Hh=jo,mc.COMPLETE="complete",rI=mc,Lo.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",Pt.prototype.listen=Pt.prototype.K,fu=Lo,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,nI=ct}).apply(typeof Nh<"u"?Nh:typeof self<"u"?self:typeof window<"u"?window:{});const B0="@firebase/firestore",z0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new jd("@firebase/firestore");function Ta(){return mo.logLevel}function he(n,...e){if(mo.logLevel<=Oe.DEBUG){const t=e.map(Rg);mo.debug(`Firestore (${Za}): ${n}`,...t)}}function Ii(n,...e){if(mo.logLevel<=Oe.ERROR){const t=e.map(Rg);mo.error(`Firestore (${Za}): ${n}`,...t)}}function gs(n,...e){if(mo.logLevel<=Oe.WARN){const t=e.map(Rg);mo.warn(`Firestore (${Za}): ${n}`,...t)}}function Rg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,aI(n,r,t)}function aI(n,e,t){let r=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ii(r),new Error(r)}function $e(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||aI(e,s,r)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends ki{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $b{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}}class Wb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Hb{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new yi,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await s(this.currentUser)})},h=f=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yi)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new lI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class Gb{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qb{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new Gb(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Kb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const r=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,he("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Qb(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Ne(n,e){return n<e?-1:n>e?1:0}function Rm(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Ne(r,s);{const a=uI(),l=Yb(a.encode(W0(n,t)),a.encode(W0(e,t)));return l!==0?l:Ne(r,s)}}t+=r>65535?2:1}return Ne(n.length,e.length)}function W0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function Yb(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function Ua(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="__name__";class Rr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Rr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Rr.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Ne(e.length,t.length)}static compareSegments(e,t){const r=Rr.isNumericId(e),s=Rr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Rr.extractNumericId(e).compare(Rr.extractNumericId(t)):Rm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}}class Je extends Rr{construct(e,t,r){return new Je(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const Jb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Rr{construct(e,t,r){return new Jt(e,t,r)}static isValidIdentifier(e){return Jb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H0}static keyField(){return new Jt([H0])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(r+=h,s++):(a(),s++)}if(a(),l)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(t)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Je.fromString(e))}static fromName(e){return new ye(Je.fromString(e).popFirst(5))}static empty(){return new ye(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(n,e,t){if(!t)throw new ue(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Xb(n,e,t,r){if(e===!0&&r===!0)throw new ue(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function G0(n){if(!ye.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function q0(n){if(ye.isDocumentKey(n))throw new ue(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Hd(n);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ju(n,e){if(!hI(n))throw new ue(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new ue(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=-62135596800,Q0=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Q0);return new ut(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<K0)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ju(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-K0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:xt("string",ut._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ut(0,0))}static max(){return new Ce(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;function Zb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ce.fromTimestamp(r===1e9?new ut(t+1,0):new ut(t,r));return new _s(s,ye.empty(),e)}function eN(n){return new _s(n.readTime,n.key,Du)}class _s{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _s(Ce.min(),ye.empty(),Du)}static max(){return new _s(Ce.max(),ye.empty(),Du)}}function tN(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==nN)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):X.reject(t)}static resolve(e){return new X((t,r)=>{t(e)})}static reject(e){return new X((t,r)=>{r(e)})}static waitFor(e){return new X((t,r)=>{let s=0,a=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++a,l&&a===s&&t()},f=>r(f))}),l=!0,a===s&&t()})}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next(s=>s?X.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,a)=>{r.push(t.call(this,s,a))}),this.waitFor(r)}static mapArray(e,t){return new X((r,s)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next(y=>{l[p]=y,++h,h===a&&r(l)},y=>s(y))}})}static doWhile(e,t){return new X((r,s)=>{const a=()=>{e()===!0?t().next(()=>{a()},s):r()};a()})}}function iN(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function tl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Gd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=-1;function Xu(n){return n==null}function cd(n){return n===0&&1/n==-1/0}function sN(n){return typeof n=="number"&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="";function oN(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Y0(e)),e=aN(n.get(t),e);return Y0(e)}function aN(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case dI:t+="";break;default:t+=a}}return t}function Y0(n){return n+dI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ks(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function fI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rt=class Pm{constructor(e,t){this.comparator=e,this.root=t||us.EMPTY}insert(e,t){return new Pm(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,us.BLACK,null,null))}remove(e){return new Pm(this.comparator,this.root.remove(e,this.comparator).copy(null,null,us.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dh(this.root,e,this.comparator,!0)}},Dh=class{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},us=class ci{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??ci.RED,this.left=s??ci.EMPTY,this.right=a??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new ci(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ci.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}};us.EMPTY=null,us.RED=!0,us.BLACK=!1;us.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new us(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new X0(this.data.getIterator())}getIteratorFrom(e){return new X0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class X0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new Lt(Jt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new pI("Invalid base64 string: "+a):a}}(e);return new Zt(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const lN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ys(n){if($e(!!n,39018),typeof n=="string"){let e=0;const t=lN.exec(n);if($e(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function vs(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI="server_timestamp",gI="__type__",_I="__previous_value__",yI="__local_write_time__";function Ng(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[gI])===null||t===void 0?void 0:t.stringValue)===mI}function qd(n){const e=n.mapValue.fields[_I];return Ng(e)?qd(e):e}function Ou(n){const e=ys(n.mapValue.fields[yI].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,t,r,s,a,l,h,f,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=y}}const hd="(default)";class Lu{constructor(e,t){this.projectId=e,this.database=t||hd}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===hd}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="__type__",cN="__max__",Oh={mapValue:{}},wI="__vector__",dd="value";function ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ng(n)?4:dN(n)?9007199254740991:hN(n)?10:11:Ee(28295,{value:n})}function Fr(n,e){if(n===e)return!0;const t=ws(n);if(t!==ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ou(n).isEqual(Ou(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=ys(s.timestampValue),h=ys(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,a){return vs(s.bytesValue).isEqual(vs(a.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return vt(s.geoPointValue.latitude)===vt(a.geoPointValue.latitude)&&vt(s.geoPointValue.longitude)===vt(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return vt(s.integerValue)===vt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=vt(s.doubleValue),h=vt(a.doubleValue);return l===h?cd(l)===cd(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return Ua(n.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return function(s,a){const l=s.mapValue.fields||{},h=a.mapValue.fields||{};if(J0(l)!==J0(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Fr(l[f],h[f])))return!1;return!0}(n,e);default:return Ee(52216,{left:n})}}function Mu(n,e){return(n.values||[]).find(t=>Fr(t,e))!==void 0}function Ba(n,e){if(n===e)return 0;const t=ws(n),r=ws(e);if(t!==r)return Ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return function(a,l){const h=vt(a.integerValue||a.doubleValue),f=vt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return Z0(n.timestampValue,e.timestampValue);case 4:return Z0(Ou(n),Ou(e));case 5:return Rm(n.stringValue,e.stringValue);case 6:return function(a,l){const h=vs(a),f=vs(l);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const h=a.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const y=Ne(h[p],f[p]);if(y!==0)return y}return Ne(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const h=Ne(vt(a.latitude),vt(l.latitude));return h!==0?h:Ne(vt(a.longitude),vt(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ew(n.arrayValue,e.arrayValue);case 10:return function(a,l){var h,f,p,y;const v=a.fields||{},E=l.fields||{},S=(h=v[dd])===null||h===void 0?void 0:h.arrayValue,A=(f=E[dd])===null||f===void 0?void 0:f.arrayValue,N=Ne(((p=S?.values)===null||p===void 0?void 0:p.length)||0,((y=A?.values)===null||y===void 0?void 0:y.length)||0);return N!==0?N:ew(S,A)}(n.mapValue,e.mapValue);case 11:return function(a,l){if(a===Oh.mapValue&&l===Oh.mapValue)return 0;if(a===Oh.mapValue)return 1;if(l===Oh.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=l.fields||{},y=Object.keys(p);f.sort(),y.sort();for(let v=0;v<f.length&&v<y.length;++v){const E=Rm(f[v],y[v]);if(E!==0)return E;const S=Ba(h[f[v]],p[y[v]]);if(S!==0)return S}return Ne(f.length,y.length)}(n.mapValue,e.mapValue);default:throw Ee(23264,{le:t})}}function Z0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=ys(n),r=ys(e),s=Ne(t.seconds,r.seconds);return s!==0?s:Ne(t.nanos,r.nanos)}function ew(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=Ba(t[s],r[s]);if(a)return a}return Ne(t.length,r.length)}function za(n){return bm(n)}function bm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ys(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return vs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ye.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=bm(a);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${bm(t.fields[l])}`;return s+"}"}(n.mapValue):Ee(61005,{value:n})}function Gh(n){switch(ws(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qd(n);return e?16+Gh(e):16;case 5:return 2*n.stringValue.length;case 6:return vs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Gh(a),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return ks(r.fields,(a,l)=>{s+=a.length+Gh(l)}),s}(n.mapValue);default:throw Ee(13486,{value:n})}}function tw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Nm(n){return!!n&&"integerValue"in n}function Dg(n){return!!n&&"arrayValue"in n}function nw(n){return!!n&&"nullValue"in n}function rw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qh(n){return!!n&&"mapValue"in n}function hN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[vI])===null||t===void 0?void 0:t.stringValue)===wI}function vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ks(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=vu(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function dN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vu(t)}setAll(e){let t=Jt.emptyPath(),r={},s=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=h.popLast()}l?r[h.lastSegment()]=vu(l):s.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];qh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ks(t,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new dn(vu(this.value))}}function EI(n){const e=[];return ks(n.fields,(t,r)=>{const s=new Jt([t]);if(qh(r)){const a=EI(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t,r,s,a,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Wt(e,0,Ce.min(),Ce.min(),Ce.min(),dn.empty(),0)}static newFoundDocument(e,t,r,s){return new Wt(e,1,t,Ce.min(),r,s,0)}static newNoDocument(e,t){return new Wt(e,2,t,Ce.min(),Ce.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new Wt(e,3,t,Ce.min(),Ce.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.position=e,this.inclusive=t}}function iw(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=ye.comparator(ye.fromName(l.referenceValue),t.key):r=Ba(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function sw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t="asc"){this.field=e,this.dir=t}}function fN(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{}class At extends TI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mN(e,t,r):t==="array-contains"?new yN(e,r):t==="in"?new vN(e,r):t==="not-in"?new wN(e,r):t==="array-contains-any"?new EN(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gN(e,r):new _N(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ba(t,this.value)):t!==null&&ws(this.value)===ws(t)&&this.matchesComparison(Ba(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends TI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new gr(e,t)}matches(e){return II(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function II(n){return n.op==="and"}function CI(n){return pN(n)&&II(n)}function pN(n){for(const e of n.filters)if(e instanceof gr)return!1;return!0}function Dm(n){if(n instanceof At)return n.field.canonicalString()+n.op.toString()+za(n.value);if(CI(n))return n.filters.map(e=>Dm(e)).join(",");{const e=n.filters.map(t=>Dm(t)).join(",");return`${n.op}(${e})`}}function SI(n,e){return n instanceof At?function(r,s){return s instanceof At&&r.op===s.op&&r.field.isEqual(s.field)&&Fr(r.value,s.value)}(n,e):n instanceof gr?function(r,s){return s instanceof gr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,l,h)=>a&&SI(l,s.filters[h]),!0):!1}(n,e):void Ee(19439)}function AI(n){return n instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${za(t.value)}`}(n):n instanceof gr?function(t){return t.op.toString()+" {"+t.getFilters().map(AI).join(" ,")+"}"}(n):"Filter"}class mN extends At{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class gN extends At{constructor(e,t){super(e,"in",t),this.keys=kI("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _N extends At{constructor(e,t){super(e,"not-in",t),this.keys=kI("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function kI(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class yN extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dg(t)&&Mu(t.arrayValue,this.value)}}class vN extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mu(this.value.arrayValue,t)}}class wN extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Mu(this.value.arrayValue,t)}}class EN extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t=null,r=[],s=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=h,this.Pe=null}}function ow(n,e=null,t=[],r=[],s=null,a=null,l=null){return new TN(n,e,t,r,s,a,l)}function Og(n){const e=Pe(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Dm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Xu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>za(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>za(r)).join(",")),e.Pe=t}return e.Pe}function Lg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fN(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!SI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sw(n.startAt,e.startAt)&&sw(n.endAt,e.endAt)}function Om(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t=null,r=[],s=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function IN(n,e,t,r,s,a,l,h){return new Zu(n,e,t,r,s,a,l,h)}function Mg(n){return new Zu(n)}function aw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xI(n){return n.collectionGroup!==null}function wu(n){const e=Pe(n);if(e.Te===null){e.Te=[];const t=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new Lt(Jt.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{t.has(a.canonicalString())||a.isKeyField()||e.Te.push(new pd(a,r))}),t.has(Jt.keyField().canonicalString())||e.Te.push(new pd(Jt.keyField(),r))}return e.Te}function Or(n){const e=Pe(n);return e.Ie||(e.Ie=CN(e,wu(n))),e.Ie}function CN(n,e){if(n.limitType==="F")return ow(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new pd(s.field,a)});const t=n.endAt?new fd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new fd(n.startAt.position,n.startAt.inclusive):null;return ow(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Lm(n,e){const t=n.filters.concat([e]);return new Zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mm(n,e,t){return new Zu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Kd(n,e){return Lg(Or(n),Or(e))&&n.limitType===e.limitType}function RI(n){return`${Og(Or(n))}|lt:${n.limitType}`}function Ia(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>AI(s)).join(", ")}]`),Xu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>za(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>za(s)).join(",")),`Target(${r})`}(Or(n))}; limitType=${n.limitType})`}function Qd(n,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ye.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(n,e)&&function(r,s){for(const a of wu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(l,h,f){const p=iw(l,h,f);return l.inclusive?p<=0:p<0}(r.startAt,wu(r),s)||r.endAt&&!function(l,h,f){const p=iw(l,h,f);return l.inclusive?p>=0:p>0}(r.endAt,wu(r),s))}(n,e)}function SN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PI(n){return(e,t)=>{let r=!1;for(const s of wu(n)){const a=AN(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function AN(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(a,l,h){const f=l.data.field(a),p=h.data.field(a);return f!==null&&p!==null?Ba(f,p):Ee(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(t,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return fI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=new Rt(ye.comparator);function Ci(){return kN}const bI=new Rt(ye.comparator);function pu(...n){let e=bI;for(const t of n)e=e.insert(t.key,t);return e}function NI(n){let e=bI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function so(){return Eu()}function DI(){return Eu()}function Eu(){return new Io(n=>n.toString(),(n,e)=>n.isEqual(e))}const xN=new Rt(ye.comparator),RN=new Lt(ye.comparator);function Ve(...n){let e=RN;for(const t of n)e=e.add(t);return e}const PN=new Lt(Ne);function bN(){return PN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function OI(n){return{integerValue:""+n}}function NN(n,e){return sN(e)?OI(e):Vg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function DN(n,e,t){return n instanceof Vu?function(s,a){const l={fields:{[gI]:{stringValue:mI},[yI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Ng(a)&&(a=qd(a)),a&&(l.fields[_I]=a),{mapValue:l}}(t,e):n instanceof Fu?MI(n,e):n instanceof ju?VI(n,e):function(s,a){const l=LI(s,a),h=lw(l)+lw(s.Ee);return Nm(l)&&Nm(s.Ee)?OI(h):Vg(s.serializer,h)}(n,e)}function ON(n,e,t){return n instanceof Fu?MI(n,e):n instanceof ju?VI(n,e):t}function LI(n,e){return n instanceof md?function(r){return Nm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Vu extends Yd{}class Fu extends Yd{constructor(e){super(),this.elements=e}}function MI(n,e){const t=FI(e);for(const r of n.elements)t.some(s=>Fr(s,r))||t.push(r);return{arrayValue:{values:t}}}class ju extends Yd{constructor(e){super(),this.elements=e}}function VI(n,e){let t=FI(e);for(const r of n.elements)t=t.filter(s=>!Fr(s,r));return{arrayValue:{values:t}}}class md extends Yd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function lw(n){return vt(n.integerValue||n.doubleValue)}function FI(n){return Dg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t){this.field=e,this.transform=t}}function MN(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Fu&&s instanceof Fu||r instanceof ju&&s instanceof ju?Ua(r.elements,s.elements,Fr):r instanceof md&&s instanceof md?Fr(r.Ee,s.Ee):r instanceof Vu&&s instanceof Vu}(n.transform,e.transform)}class VN{constructor(e,t){this.version=e,this.transformResults=t}}class kt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kt}static exists(e){return new kt(void 0,e)}static updateTime(e){return new kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Jd{}function jI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tc(n.key,kt.none()):new ec(n.key,n.data,kt.none());{const t=n.data,r=dn.empty();let s=new Lt(Jt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new xs(n.key,r,new Ln(s.toArray()),kt.none())}}function FN(n,e,t){n instanceof ec?function(s,a,l){const h=s.value.clone(),f=cw(s.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof xs?function(s,a,l){if(!Kh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const h=cw(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(UI(s)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,t)}function Tu(n,e,t,r){return n instanceof ec?function(a,l,h,f){if(!Kh(a.precondition,l))return h;const p=a.value.clone(),y=hw(a.fieldTransforms,f,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof xs?function(a,l,h,f){if(!Kh(a.precondition,l))return h;const p=hw(a.fieldTransforms,f,l),y=l.data;return y.setAll(UI(a)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(a,l,h){return Kh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(n,e,t)}function jN(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=LI(r.transform,s||null);a!=null&&(t===null&&(t=dn.empty()),t.set(r.field,a))}return t||null}function uw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ua(r,s,(a,l)=>MN(a,l))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ec extends Jd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xs extends Jd{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function UI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function cw(n,e,t){const r=new Map;$e(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,h=e.data.field(a.field);r.set(a.field,ON(l,h,t[s]))}return r}function hw(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,DN(a,l,e))}return r}class tc extends Jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BI extends Jd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&FN(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Tu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=DI();return this.mutations.forEach(s=>{const a=e.get(s.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(s.key)?null:h;const f=jI(l,h);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(t,r)=>uw(t,r))&&Ua(this.baseMutations,e.baseMutations,(t,r)=>uw(t,r))}}class Fg{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){$e(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=function(){return xN}();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new Fg(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Be;function zI(n){switch(n){case J.OK:return Ee(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function $I(n){if(n===void 0)return Ii("GRPC error has no .code"),J.UNKNOWN;switch(n){case Ct.OK:return J.OK;case Ct.CANCELLED:return J.CANCELLED;case Ct.UNKNOWN:return J.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return J.INTERNAL;case Ct.UNAVAILABLE:return J.UNAVAILABLE;case Ct.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ct.NOT_FOUND:return J.NOT_FOUND;case Ct.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ct.ABORTED:return J.ABORTED;case Ct.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ct.DATA_LOSS:return J.DATA_LOSS;default:return Ee(39323,{code:n})}}(Be=Ct||(Ct={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=new ls([4294967295,4294967295],0);function dw(n){const e=uI().encode(n),t=new tI;return t.update(e),new Uint8Array(t.digest())}function fw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ls([t,r],0),new ls([s,a],0)]}class jg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mu(`Invalid padding: ${t}`);if(r<0)throw new mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new mu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=ls.fromNumber(this.fe)}pe(e,t,r){let s=e.add(t.multiply(ls.fromNumber(r)));return s.compare($N)===1&&(s=new ls([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=dw(e),[r,s]=fw(t);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,s,a);if(!this.ye(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new jg(a,s,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.fe===0)return;const t=dw(e),[r,s]=fw(t);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,s,a);this.we(l)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Xd(Ce.min(),s,new Rt(Ne),Ci(),Ve())}}class nc{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nc(r,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=s}}class WI{constructor(e,t){this.targetId=e,this.De=t}}class HI{constructor(e,t,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class pw{constructor(){this.ve=0,this.Ce=mw(),this.Fe=Zt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),t=Ve(),r=Ve();return this.Ce.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ee(38017,{changeType:a})}}),new nc(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=mw()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class WN{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ci(),this.je=Lh(),this.Je=Lh(),this.He=new Rt(Ne)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,r=e.De.count,s=this.st(t);if(s){const a=s.target;if(Om(a))if(r===0){const l=new ye(a.path);this.Xe(t,l,Wt.newNoDocument(l,Ce.min()))}else $e(r===1,20013,{expectedCount:r});else{const l=this.ot(t);if(l!==r){const h=this._t(e),f=h?this.ut(h,e,l):1;if(f!==0){this.rt(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,h;try{l=vs(r).toUint8Array()}catch(f){if(f instanceof pI)return gs("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new jg(l,s,a)}catch(f){return gs(f instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let s=0;return r.forEach(a=>{const l=this.We.lt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Xe(t,a,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((a,l)=>{const h=this.st(l);if(h){if(a.current&&Om(h.target)){const f=new ye(h.target.path);this.Tt(f).has(l)||this.It(l,f)||this.Xe(l,f,Wt.newNoDocument(f,e))}a.Ne&&(t.set(l,a.Le()),a.ke())}});let r=Ve();this.Je.forEach((a,l)=>{let h=!0;l.forEachWhile(f=>{const p=this.st(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ze.forEach((a,l)=>l.setReadTime(e));const s=new Xd(e,t,this.He,this.ze,r);return this.ze=Ci(),this.je=Lh(),this.Je=Lh(),this.He=new Rt(Ne),s}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new pw,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Lt(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Lt(Ne),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new pw),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Lh(){return new Rt(ye.comparator)}function mw(){return new Rt(ye.comparator)}const HN={asc:"ASCENDING",desc:"DESCENDING"},GN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qN={and:"AND",or:"OR"};class KN{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vm(n,e){return n.useProto3Json||Xu(e)?e:{value:e}}function gd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QN(n,e){return gd(n,e.toTimestamp())}function Mn(n){return $e(!!n,49232),Ce.fromTimestamp(function(t){const r=ys(t);return new ut(r.seconds,r.nanos)}(n))}function Ug(n,e){return Fm(n,e).canonicalString()}function Fm(n,e){const t=function(s){return new Je(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function qI(n){const e=Je.fromString(n);return $e(ZI(e),10190,{key:e.toString()}),e}function _d(n,e){return Ug(n.databaseId,e.path)}function Iu(n,e){const t=qI(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(QI(t))}function KI(n,e){return Ug(n.databaseId,e)}function YN(n){const e=qI(n);return e.length===4?Je.emptyPath():QI(e)}function jm(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QI(n){return $e(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function gw(n,e,t){return{name:_d(n,e),fields:t.value.mapValue.fields}}function JN(n,e){return"found"in e?function(r,s){$e(!!s.found,43571),s.found.name,s.found.updateTime;const a=Iu(r,s.found.name),l=Mn(s.found.updateTime),h=s.found.createTime?Mn(s.found.createTime):Ce.min(),f=new dn({mapValue:{fields:s.found.fields}});return Wt.newFoundDocument(a,l,h,f)}(n,e):"missing"in e?function(r,s){$e(!!s.missing,3894),$e(!!s.readTime,22933);const a=Iu(r,s.missing),l=Mn(s.readTime);return Wt.newNoDocument(a,l)}(n,e):Ee(7234,{result:e})}function XN(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ee(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(p,y){return p.useProto3Json?($e(y===void 0||typeof y=="string",58123),Zt.fromBase64String(y||"")):($e(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Zt.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const y=p.code===void 0?J.UNKNOWN:$I(p.code);return new ue(y,p.message||"")}(l);t=new HI(r,s,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Iu(n,r.document.name),a=Mn(r.document.updateTime),l=r.document.createTime?Mn(r.document.createTime):Ce.min(),h=new dn({mapValue:{fields:r.document.fields}}),f=Wt.newFoundDocument(s,a,l,h),p=r.targetIds||[],y=r.removedTargetIds||[];t=new Qh(p,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Iu(n,r.document),a=r.readTime?Mn(r.readTime):Ce.min(),l=Wt.newNoDocument(s,a),h=r.removedTargetIds||[];t=new Qh([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Iu(n,r.document),a=r.removedTargetIds||[];t=new Qh([],a,s,null)}else{if(!("filter"in e))return Ee(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new zN(s,a),h=r.targetId;t=new WI(h,l)}}return t}function YI(n,e){let t;if(e instanceof ec)t={update:gw(n,e.key,e.value)};else if(e instanceof tc)t={delete:_d(n,e.key)};else if(e instanceof xs)t={update:gw(n,e.key,e.data),updateMask:a2(e.fieldMask)};else{if(!(e instanceof BI))return Ee(16599,{Rt:e.type});t={verify:_d(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const h=l.transform;if(h instanceof Vu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Fu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ju)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof md)return{fieldPath:l.field.canonicalString(),increment:h.Ee};throw Ee(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:QN(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ee(27497)}(n,e.precondition)),t}function ZN(n,e){return n&&n.length>0?($e(e!==void 0,14353),n.map(t=>function(s,a){let l=s.updateTime?Mn(s.updateTime):Mn(a);return l.isEqual(Ce.min())&&(l=Mn(a)),new VN(l,s.transformResults||[])}(t,e))):[]}function e2(n,e){return{documents:[KI(n,e.path)]}}function t2(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=KI(n,s);const a=function(p){if(p.length!==0)return XI(gr.create(p,"and"))}(e.filters);a&&(t.structuredQuery.where=a);const l=function(p){if(p.length!==0)return p.map(y=>function(E){return{field:Ca(E.field),direction:i2(E.dir)}}(y))}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=Vm(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:s}}function n2(n){let e=YN(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){$e(r===1,65062);const y=t.from[0];y.allDescendants?s=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=function(v){const E=JI(v);return E instanceof gr&&CI(E)?E.getFilters():[E]}(t.where));let l=[];t.orderBy&&(l=function(v){return v.map(E=>function(A){return new pd(Sa(A.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,Xu(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(v){const E=!!v.before,S=v.values||[];return new fd(S,E)}(t.startAt));let p=null;return t.endAt&&(p=function(v){const E=!v.before,S=v.values||[];return new fd(S,E)}(t.endAt)),IN(e,s,l,a,h,"F",f,p)}function r2(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function JI(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Sa(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Sa(t.unaryFilter.field);return At.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Sa(t.unaryFilter.field);return At.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Sa(t.unaryFilter.field);return At.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(n):n.fieldFilter!==void 0?function(t){return At.create(Sa(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gr.create(t.compositeFilter.filters.map(r=>JI(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(t.compositeFilter.op))}(n):Ee(30097,{filter:n})}function i2(n){return HN[n]}function s2(n){return GN[n]}function o2(n){return qN[n]}function Ca(n){return{fieldPath:n.canonicalString()}}function Sa(n){return Jt.fromServerFormat(n.fieldPath)}function XI(n){return n instanceof At?function(t){if(t.op==="=="){if(rw(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NAN"}};if(nw(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rw(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NAN"}};if(nw(t.value))return{unaryFilter:{field:Ca(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(t.field),op:s2(t.op),value:t.value}}}(n):n instanceof gr?function(t){const r=t.getFilters().map(s=>XI(s));return r.length===1?r[0]:{compositeFilter:{op:o2(t.op),filters:r}}}(n):Ee(54877,{filter:n})}function a2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,r,s,a=Ce.min(),l=Ce.min(),h=Zt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e){this.gt=e}}function u2(n){const e=n2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.Dn=new h2}addToCollectionParentIndex(e,t){return this.Dn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(_s.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class h2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Lt(Je.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Lt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eC=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(eC,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new $a(0)}static ur(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="LruGarbageCollector",d2=1048576;function vw([n,e],[t,r]){const s=Ne(n,t);return s===0?Ne(e,r):s}class f2{constructor(e){this.Tr=e,this.buffer=new Lt(vw),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class p2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){he(yw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){tl(t)?he(yw,"Ignoring IndexedDB error during garbage collection: ",t):await el(t)}await this.Rr(3e5)})}}class m2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Gd.ue);const r=new f2(t);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(_w)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_w):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,s,a,l,h,f,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,l=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,h=Date.now(),this.removeTargets(e,r,t))).next(v=>(a=v,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(p=Date.now(),Ta()<=Oe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${s} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(p-f)+`ms
Total Duration: ${p-y}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:v})))}}function g2(n,e){return new m2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.changes=new Io(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Tu(r.mutation,s,Ln.empty(),ut.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ve()){const s=so();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(a=>{let l=pu();return a.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=so();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ve()))}populateOverlays(e,t,r){const s=[];return r.forEach(a=>{t.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,s){let a=Ci();const l=Eu(),h=function(){return Eu()}();return t.forEach((f,p)=>{const y=r.get(p.key);s.has(p.key)&&(y===void 0||y.mutation instanceof xs)?a=a.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),Tu(y.mutation,p,y.mutation.getFieldMask(),ut.now())):l.set(p.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((p,y)=>l.set(p,y)),t.forEach((p,y)=>{var v;return h.set(p,new y2(y,(v=l.get(p))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Eu();let s=new Rt((l,h)=>l-h),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(f=>{const p=t.get(f);if(p===null)return;let y=r.get(f)||Ln.empty();y=h.applyToLocalView(p,y),r.set(f,y);const v=(s.get(h.batchId)||Ve()).add(f);s=s.insert(h.batchId,v)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,y=f.value,v=DI();y.forEach(E=>{if(!a.has(E)){const S=jI(t.get(E),r.get(E));S!==null&&v.set(E,S),a=a.add(E)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,v))}return X.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(l){return ye.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):X.resolve(so());let h=Du,f=a;return l.next(p=>X.forEach(p,(y,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),a.get(y)?X.resolve():this.remoteDocumentCache.getEntry(e,y).next(E=>{f=f.insert(y,E)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,f,p,Ve())).next(y=>({batchId:h,changes:NI(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let s=pu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=pu();return this.indexManager.getCollectionParents(e,a).next(h=>X.forEach(h,f=>{const p=function(v,E){return new Zu(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next(y=>{y.forEach((v,E)=>{l=l.insert(v,E)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s))).next(l=>{a.forEach((f,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,Wt.newInvalidDocument(y)))});let h=pu();return l.forEach((f,p)=>{const y=a.get(f);y!==void 0&&Tu(y.mutation,p,Ln.empty(),ut.now()),Qd(t,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return X.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Mn(s.createTime)}}(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:u2(s.bundledQuery),readTime:Mn(s.readTime)}}(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.overlays=new Rt(ye.comparator),this.kr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=so();return X.forEach(t,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,a)=>{this.wt(e,t,a)}),X.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const s=so(),a=t.length+1,l=new ye(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return X.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Rt((p,y)=>p-y);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=a.get(p.largestBatchId);y===null&&(y=so(),a=a.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const h=so(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,y)=>h.set(p,y)),!(h.size()>=s)););return X.resolve(h)}wt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new BN(t,r));let a=this.kr.get(t);a===void 0&&(a=Ve(),this.kr.set(t,a)),this.kr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(){this.qr=new Lt(zt.Qr),this.$r=new Lt(zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new zt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new zt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new ye(new Je([])),r=new zt(t,e),s=new zt(t,e+1),a=[];return this.$r.forEachInRange([r,s],l=>{this.Wr(l),a.push(l.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new ye(new Je([])),r=new zt(t,e),s=new zt(t,e+1);let a=Ve();return this.$r.forEachInRange([r,s],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new zt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return ye.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Lt(zt.Qr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new UN(a,t,r,s);this.mutationQueue.push(l);for(const h of s)this.Yr=this.Yr.add(new zt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return X.resolve(l)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return X.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?bg:this.er-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new zt(t,0),s=new zt(t,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,s],l=>{const h=this.Zr(l.Hr);a.push(h)}),X.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Lt(Ne);return t.forEach(s=>{const a=new zt(s,0),l=new zt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],h=>{r=r.add(h.Hr)})}),X.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;ye.isDocumentKey(a)||(a=a.child(""));const l=new zt(new ye(a),0);let h=new Lt(Ne);return this.Yr.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(h=h.add(f.Hr)),!0)},l),X.resolve(this.ei(h))}ei(e){const t=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){$e(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return X.forEach(t.mutations,s=>{const a=new zt(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new zt(t,0),s=this.Yr.firstAfterOrEqual(r);return X.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.ni=e,this.docs=function(){return new Rt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():Wt.newInvalidDocument(t))}getEntries(e,t){let r=Ci();return t.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Wt.newInvalidDocument(s))}),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Ci();const l=t.path,h=new ye(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:y}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||tN(eN(y),r)<=0||(s.has(y.key)||Qd(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return X.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ee(9500)}ri(e,t){return X.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new S2(this)}getSize(e){return X.resolve(this.size)}}class S2 extends _2{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)}),X.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.persistence=e,this.ii=new Io(t=>Og(t),Lg),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.si=0,this.oi=new Bg,this.targetCount=0,this._i=$a.ar()}forEachTarget(e,t){return this.ii.forEach((r,s)=>t(s)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),X.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new $a(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.hr(t),X.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ii.forEach((l,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),X.waitFor(a).next(()=>s)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach(l=>{a.push(s.markPotentiallyOrphaned(e,l))}),X.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t){this.ai={},this.overlays={},this.ui=new Gd(0),this.ci=!1,this.ci=!0,this.li=new T2,this.referenceDelegate=e(this),this.hi=new A2(this),this.indexManager=new c2,this.remoteDocumentCache=function(s){return new C2(s)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new l2(t),this.Ti=new w2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new E2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new I2(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){he("MemoryPersistence","Starting transaction:",e);const s=new k2(this.ui.next());return this.referenceDelegate.Ii(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ei(e,t){return X.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class k2 extends rN{constructor(e){super(),this.currentSequenceNumber=e}}class zg{constructor(e){this.persistence=e,this.Ai=new Bg,this.Ri=null}static Vi(e){return new zg(e)}get mi(){if(this.Ri)return this.Ri;throw Ee(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.mi,r=>{const s=ye.fromPath(r);return this.fi(e,s).next(a=>{a||t.removeEntry(s,Ce.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return X.or([()=>X.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class yd{constructor(e,t){this.persistence=e,this.gi=new Io(r=>oN(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=g2(this,t)}static Vi(e,t){return new yd(e,t)}Ii(){}di(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return X.forEach(this.gi,(r,s)=>this.Sr(e,r,s).next(a=>a?X.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ri(e,l=>this.Sr(e,l,t).next(h=>{h||(r++,a.removeEntry(l,Ce.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),X.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Gh(e.data.value)),t}Sr(e,t,r){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=s}static Es(e,t){let r=Ve(),s=Ve();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new $g(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return rx()?8:iN(an())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.ps(e,t).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ys(e,t,s,r).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new x2;return this.ws(e,t,l).next(h=>{if(a.result=h,this.Rs)return this.Ss(e,t,l,h.size)})}).next(()=>a.result)}Ss(e,t,r,s){return r.documentReadCount<this.Vs?(Ta()<=Oe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Ta()<=Oe.DEBUG&&he("QueryEngine","Query:",Ia(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Ta()<=Oe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(t))):X.resolve())}ps(e,t){if(aw(t))return X.resolve(null);let r=Or(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Mm(t,null,"F"),r=Or(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Ve(...a);return this.gs.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const p=this.bs(t,h);return this.Ds(t,p,l,f.readTime)?this.ps(e,Mm(t,null,"F")):this.vs(e,p,t,f)}))})))}ys(e,t,r,s){return aw(t)||s.isEqual(Ce.min())?X.resolve(null):this.gs.getDocuments(e,r).next(a=>{const l=this.bs(t,a);return this.Ds(t,l,r,s)?X.resolve(null):(Ta()<=Oe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ia(t)),this.vs(e,l,t,Zb(s,Du)).next(h=>h))})}bs(e,t){let r=new Lt(PI(e));return t.forEach((s,a)=>{Qd(e,a)&&(r=r.add(a))}),r}Ds(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ws(e,t,r){return Ta()<=Oe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ia(t)),this.gs.getDocumentsMatchingQuery(e,t,_s.min(),r)}vs(e,t,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="LocalStore",P2=3e8;class b2{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new Rt(Ne),this.Ms=new Io(a=>Og(a),Lg),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function N2(n,e,t,r){return new b2(n,e,t,r)}async function nC(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let f=Ve();for(const p of s){l.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}for(const p of a){h.push(p.batchId);for(const y of p.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(r,f).next(p=>({Bs:p,removedBatchIds:l,addedBatchIds:h}))})})}function D2(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=t.Os.newChangeBuffer({trackRemovals:!0});return function(h,f,p,y){const v=p.batch,E=v.keys();let S=X.resolve();return E.forEach(A=>{S=S.next(()=>y.getEntry(f,A)).next(N=>{const L=p.docVersions.get(A);$e(L!==null,48541),N.version.compareTo(L)<0&&(v.applyToRemoteDocument(N,p),N.isValidDocument()&&(N.setReadTime(p.commitVersion),y.addEntry(N)))})}),S.next(()=>h.mutationQueue.removeMutationBatch(f,v))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Ve();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function rC(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function O2(n,e){const t=Pe(n),r=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const h=[];e.targetChanges.forEach((y,v)=>{const E=s.get(v);if(!E)return;h.push(t.hi.removeMatchingKeys(a,y.removedDocuments,v).next(()=>t.hi.addMatchingKeys(a,y.addedDocuments,v)));let S=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(v)!==null?S=S.withResumeToken(Zt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),s=s.insert(v,S),function(N,L,U){return N.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=P2?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0}(E,S,y)&&h.push(t.hi.updateTargetData(a,S))});let f=Ci(),p=Ve();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),h.push(L2(a,l,e.documentUpdates).next(y=>{f=y.Ls,p=y.ks})),!r.isEqual(Ce.min())){const y=t.hi.getLastRemoteSnapshotVersion(a).next(v=>t.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(y)}return X.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,f,p)).next(()=>f)}).then(a=>(t.Fs=s,a))}function L2(n,e,t){let r=Ve(),s=Ve();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ci();return t.forEach((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(h)),f.isNoDocument()&&f.version.isEqual(Ce.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):he(Wg,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Ls:l,ks:s}})}function M2(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V2(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.hi.getTargetData(r,e).next(a=>a?(s=a,X.resolve(s)):t.hi.allocateTargetId(r).next(l=>(s=new is(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function Um(n,e,t){const r=Pe(n),s=r.Fs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!tl(l))throw l;he(Wg,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function ww(n,e,t){const r=Pe(n);let s=Ce.min(),a=Ve();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,p,y){const v=Pe(f),E=v.Ms.get(y);return E!==void 0?X.resolve(v.Fs.get(E)):v.hi.getTargetData(p,y)}(r,l,Or(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(l,h.targetId).next(f=>{a=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:Ce.min(),t?a:Ve())).next(h=>(F2(r,SN(e),h),{documents:h,qs:a})))}function F2(n,e,t){let r=n.xs.get(e)||Ce.min();t.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.xs.set(e,r)}class Ew{constructor(){this.activeTargetIds=bN()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class j2{constructor(){this.Fo=new Ew,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Ew,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="ConnectivityMonitor";class Iw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){he(Tw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){he(Tw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh=null;function Bm(){return Mh===null?Mh=function(){return 268435456+Math.round(2147483648*Math.random())}():Mh++,"0x"+Mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="RestConnection",B2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class z2{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===hd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const l=Bm(),h=this.Go(e,t.toUriEncodedString());he(sm,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,s,a);const{host:p}=new URL(h),y=Cs(p);return this.jo(e,h,f,r,y).then(v=>(he(sm,`Received RPC '${e}' ${l}: `,v),v),v=>{throw gs(sm,`RPC '${e}' ${l} failed with error: `,v,"url: ",h,"request:",r),v})}Jo(e,t,r,s,a,l){return this.Wo(e,t,r,s,a)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Za}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}Go(e,t){const r=B2[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class W2 extends z2{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,s,a){const l=Bm();return new Promise((h,f)=>{const p=new nI;p.setWithCredentials(!0),p.listenOnce(rI.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Hh.NO_ERROR:const v=p.getResponseJson();he(sn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(v)),h(v);break;case Hh.TIMEOUT:he(sn,`RPC '${e}' ${l} timed out`),f(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const E=p.getStatus();if(he(sn,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const A=S?.error;if(A&&A.status&&A.message){const N=function(U){const q=U.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(q)>=0?q:J.UNKNOWN}(A.status);f(new ue(N,A.message))}else f(new ue(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new ue(J.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{c_:e,streamId:l,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{he(sn,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(s);he(sn,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",y,r,15)})}P_(e,t,r){const s=Bm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=oI(),h=sI(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const y=a.join("");he(sn,`Creating RPC '${e}' stream ${s}: ${y}`,f);const v=l.createWebChannel(y,f);this.T_(v);let E=!1,S=!1;const A=new $2({Ho:L=>{S?he(sn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(E||(he(sn,`Opening RPC '${e}' stream ${s} transport.`),v.open(),E=!0),he(sn,`RPC '${e}' stream ${s} sending:`,L),v.send(L))},Yo:()=>v.close()}),N=(L,U,q)=>{L.listen(U,G=>{try{q(G)}catch(Q){setTimeout(()=>{throw Q},0)}})};return N(v,fu.EventType.OPEN,()=>{S||(he(sn,`RPC '${e}' stream ${s} transport opened.`),A.s_())}),N(v,fu.EventType.CLOSE,()=>{S||(S=!0,he(sn,`RPC '${e}' stream ${s} transport closed`),A.__(),this.I_(v))}),N(v,fu.EventType.ERROR,L=>{S||(S=!0,gs(sn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),A.__(new ue(J.UNAVAILABLE,"The operation could not be completed")))}),N(v,fu.EventType.MESSAGE,L=>{var U;if(!S){const q=L.data[0];$e(!!q,16349);const G=q,Q=G?.error||((U=G[0])===null||U===void 0?void 0:U.error);if(Q){he(sn,`RPC '${e}' stream ${s} received error:`,Q);const Z=Q.status;let ie=function(x){const R=Ct[x];if(R!==void 0)return $I(R)}(Z),D=Q.message;ie===void 0&&(ie=J.INTERNAL,D="Unknown error status: "+Z+" with message "+Q.message),S=!0,A.__(new ue(ie,D)),v.close()}else he(sn,`RPC '${e}' stream ${s} received:`,q),A.a_(q)}}),N(h,iI.STAT_EVENT,L=>{L.stat===xm.PROXY?he(sn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===xm.NOPROXY&&he(sn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{A.o_()},0),A}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(n){return new KN(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=s,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-r);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw="PersistentStream";class iC{constructor(e,t,r,s,a,l,h,f){this.Fi=e,this.w_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Hg(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Ii(t.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.b_===t&&this.W_(r,s)},r=>{e(()=>{const s=new ue(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{r(()=>this.G_(s))}),this.stream.onMessage(s=>{r(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return he(Cw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(he(Cw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H2 extends iC{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=XN(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ce.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ce.min():l.readTime?Mn(l.readTime):Ce.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=jm(this.serializer),t.addTarget=function(a,l){let h;const f=l.target;if(h=Om(f)?{documents:e2(a,f)}:{query:t2(a,f).Vt},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=GI(a,l.resumeToken);const p=Vm(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ce.min())>0){h.readTime=gd(a,l.snapshotVersion.toTimestamp());const p=Vm(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=r2(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=jm(this.serializer),t.removeTarget=e,this.k_(t)}}class G2 extends iC{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=ZN(e.writeResults,e.commitTime),r=Mn(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=jm(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>YI(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{}class K2 extends q2{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Wo(e,Fm(t,r),s,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(J.UNKNOWN,a.toString())})}Jo(e,t,r,s,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Jo(e,Fm(t,r),s,l,h,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ue(J.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Q2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ii(t),this._a=!1):he("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="RemoteStore";class Y2{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(l=>{r.enqueueAndForget(async()=>{Co(this)&&(he(go,"Restarting streams for network reachability change."),await async function(f){const p=Pe(f);p.Ia.add(4),await rc(p),p.Aa.set("Unknown"),p.Ia.delete(4),await ef(p)}(this))})}),this.Aa=new Q2(r,s)}}async function ef(n){if(Co(n))for(const e of n.da)await e(!0)}async function rc(n){for(const e of n.da)await e(!1)}function sC(n,e){const t=Pe(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Qg(t)?Kg(t):nl(t).x_()&&qg(t,e))}function Gg(n,e){const t=Pe(n),r=nl(t);t.Ta.delete(e),r.x_()&&oC(t,e),t.Ta.size===0&&(r.x_()?r.B_():Co(t)&&t.Aa.set("Unknown"))}function qg(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nl(n).H_(e)}function oC(n,e){n.Ra.$e(e),nl(n).Y_(e)}function Kg(n){n.Ra=new WN({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),nl(n).start(),n.Aa.aa()}function Qg(n){return Co(n)&&!nl(n).M_()&&n.Ta.size>0}function Co(n){return Pe(n).Ia.size===0}function aC(n){n.Ra=void 0}async function J2(n){n.Aa.set("Online")}async function X2(n){n.Ta.forEach((e,t)=>{qg(n,e)})}async function Z2(n,e){aC(n),Qg(n)?(n.Aa.la(e),Kg(n)):n.Aa.set("Unknown")}async function eD(n,e,t){if(n.Aa.set("Online"),e instanceof HI&&e.state===2&&e.cause)try{await async function(s,a){const l=a.cause;for(const h of a.targetIds)s.Ta.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.Ta.delete(h),s.Ra.removeTarget(h))}(n,e)}catch(r){he(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vd(n,r)}else if(e instanceof Qh?n.Ra.Ye(e):e instanceof WI?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ce.min()))try{const r=await rC(n.localStore);t.compareTo(r)>=0&&await function(a,l){const h=a.Ra.Pt(l);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ta.get(p);y&&a.Ta.set(p,y.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,p)=>{const y=a.Ta.get(f);if(!y)return;a.Ta.set(f,y.withResumeToken(Zt.EMPTY_BYTE_STRING,y.snapshotVersion)),oC(a,f);const v=new is(y.target,f,p,y.sequenceNumber);qg(a,v)}),a.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){he(go,"Failed to raise snapshot:",r),await vd(n,r)}}async function vd(n,e,t){if(!tl(e))throw e;n.Ia.add(1),await rc(n),n.Aa.set("Offline"),t||(t=()=>rC(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{he(go,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await ef(n)})}function lC(n,e){return e().catch(t=>vd(n,t,e))}async function tf(n){const e=Pe(n),t=Es(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:bg;for(;tD(e);)try{const s=await M2(e.localStore,r);if(s===null){e.Pa.length===0&&t.B_();break}r=s.batchId,nD(e,s)}catch(s){await vd(e,s)}uC(e)&&cC(e)}function tD(n){return Co(n)&&n.Pa.length<10}function nD(n,e){n.Pa.push(e);const t=Es(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function uC(n){return Co(n)&&!Es(n).M_()&&n.Pa.length>0}function cC(n){Es(n).start()}async function rD(n){Es(n).na()}async function iD(n){const e=Es(n);for(const t of n.Pa)e.X_(t.mutations)}async function sD(n,e,t){const r=n.Pa.shift(),s=Fg.from(r,e,t);await lC(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await tf(n)}async function oD(n,e){e&&Es(n).Z_&&await async function(r,s){if(function(l){return zI(l)&&l!==J.ABORTED}(s.code)){const a=r.Pa.shift();Es(r).N_(),await lC(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await tf(r)}}(n,e),uC(n)&&cC(n)}async function Sw(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),he(go,"RemoteStore received new credentials");const r=Co(t);t.Ia.add(3),await rc(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await ef(t)}async function aD(n,e){const t=Pe(n);e?(t.Ia.delete(2),await ef(t)):e||(t.Ia.add(2),await rc(t),t.Aa.set("Unknown"))}function nl(n){return n.Va||(n.Va=function(t,r,s){const a=Pe(t);return a.ia(),new H2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:J2.bind(null,n),e_:X2.bind(null,n),n_:Z2.bind(null,n),J_:eD.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Qg(n)?Kg(n):n.Aa.set("Unknown")):(await n.Va.stop(),aC(n))})),n.Va}function Es(n){return n.ma||(n.ma=function(t,r,s){const a=Pe(t);return a.ia(),new G2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:rD.bind(null,n),n_:oD.bind(null,n),ea:iD.bind(null,n),ta:sD.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await tf(n)):(await n.ma.stop(),n.Pa.length>0&&(he(go,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,h=new Yg(e,t,l,s,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jg(n,e){if(Ii("AsyncQueue",`${e}: ${n}`),tl(n))return new ue(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{static emptySet(e){return new La(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=pu(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof La)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new La;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.fa=new Rt(ye.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):Ee(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Wa{constructor(e,t,r,s,a,l,h,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new Wa(e,t,La.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class uD{constructor(){this.queries=kw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const s=Pe(t),a=s.queries;s.queries=kw(),a.forEach((l,h)=>{for(const f of h.wa)f.onError(r)})})(this,new ue(J.ABORTED,"Firestore shutting down"))}}function kw(){return new Io(n=>RI(n),Kd)}async function hC(n,e){const t=Pe(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.ba()&&(r=2):(a=new lD,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await t.onListen(s,!0);break;case 1:a.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const h=Jg(l,`Initialization of query '${Ia(e.query)}' failed`);return void e.onError(h)}t.queries.set(s,a),a.wa.push(e),e.va(t.onlineState),a.ya&&e.Ca(a.ya)&&Xg(t)}async function dC(n,e){const t=Pe(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?s=e.ba()?0:1:!a.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function cD(n,e){const t=Pe(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const h of l.wa)h.Ca(s)&&(r=!0);l.ya=s}}r&&Xg(t)}function hD(n,e,t){const r=Pe(n),s=r.queries.get(e);if(s)for(const a of s.wa)a.onError(t);r.queries.delete(e)}function Xg(n){n.Da.forEach(e=>{e.next()})}var zm,xw;(xw=zm||(zm={})).Fa="default",xw.Cache="cache";class fC{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.key=e}}class mC{constructor(e){this.key=e}}class dD{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=PI(e),this.eu=new La(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new Aw,s=t?t.eu:this.eu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,h=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((y,v)=>{const E=s.get(y),S=Qd(this.query,v)?v:null,A=!!E&&this.mutatedKeys.has(E.key),N=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let L=!1;E&&S?E.data.isEqual(S.data)?A!==N&&(r.track({type:3,doc:S}),L=!0):this.iu(E,S)||(r.track({type:2,doc:S}),L=!0,(f&&this.Xa(S,f)>0||p&&this.Xa(S,p)<0)&&(h=!0)):!E&&S?(r.track({type:0,doc:S}),L=!0):E&&!S&&(r.track({type:1,doc:E}),L=!0,(f||p)&&(h=!0)),L&&(S?(l=l.add(S),a=N?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{eu:l,ru:r,Ds:h,mutatedKeys:a}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((y,v)=>function(S,A){const N=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{At:L})}};return N(S)-N(A)}(y.type,v.type)||this.Xa(y.doc,v.doc)),this.su(r),s=s!=null&&s;const h=t&&!s?this.ou():[],f=this.Za.size===0&&this.current&&!s?1:0,p=f!==this.Ya;return this.Ya=f,l.length!==0||p?{snapshot:new Wa(this.query,e.eu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Aw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new mC(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new pC(r))}),t}uu(e){this.Ha=e.qs,this.Za=Ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Wa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Zg="SyncEngine";class fD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class pD{constructor(e){this.key=e,this.lu=!1}}class mD{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new Io(h=>RI(h),Kd),this.Tu=new Map,this.Iu=new Set,this.du=new Rt(ye.comparator),this.Eu=new Map,this.Au=new Bg,this.Ru={},this.Vu=new Map,this.mu=$a.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gD(n,e,t=!0){const r=EC(n);let s;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.cu()):s=await gC(r,e,t,!0),s}async function _D(n,e){const t=EC(n);await gC(t,e,!0,!1)}async function gC(n,e,t,r){const s=await V2(n.localStore,Or(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return r&&(h=await yD(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&sC(n.remoteStore,s),h}async function yD(n,e,t,r,s){n.gu=(v,E,S)=>async function(N,L,U,q){let G=L.view.nu(U);G.Ds&&(G=await ww(N.localStore,L.query,!1).then(({documents:D})=>L.view.nu(D,G)));const Q=q&&q.targetChanges.get(L.targetId),Z=q&&q.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(G,N.isPrimaryClient,Q,Z);return Pw(N,L.targetId,ie._u),ie.snapshot}(n,v,E,S);const a=await ww(n.localStore,e,!0),l=new dD(e,a.qs),h=l.nu(a.documents),f=nc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(h,n.isPrimaryClient,f);Pw(n,t,p._u);const y=new fD(e,t,l);return n.Pu.set(e,y),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function vD(n,e,t){const r=Pe(n),s=r.Pu.get(e),a=r.Tu.get(s.targetId);if(a.length>1)return r.Tu.set(s.targetId,a.filter(l=>!Kd(l,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Um(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Gg(r.remoteStore,s.targetId),$m(r,s.targetId)}).catch(el)):($m(r,s.targetId),await Um(r.localStore,s.targetId,!0))}async function wD(n,e){const t=Pe(n),r=t.Pu.get(e),s=t.Tu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gg(t.remoteStore,r.targetId))}async function ED(n,e,t){const r=xD(n);try{const s=await function(l,h){const f=Pe(l),p=ut.now(),y=h.reduce((S,A)=>S.add(A.key),Ve());let v,E;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>{let A=Ci(),N=Ve();return f.Os.getEntries(S,y).next(L=>{A=L,A.forEach((U,q)=>{q.isValidDocument()||(N=N.add(U))})}).next(()=>f.localDocuments.getOverlayedDocuments(S,A)).next(L=>{v=L;const U=[];for(const q of h){const G=jN(q,v.get(q.key).overlayedDocument);G!=null&&U.push(new xs(q.key,G,EI(G.value.mapValue),kt.exists(!0)))}return f.mutationQueue.addMutationBatch(S,p,U,h)}).next(L=>{E=L;const U=L.applyToLocalDocumentSet(v,N);return f.documentOverlayCache.saveOverlays(S,L.batchId,U)})}).then(()=>({batchId:E.batchId,changes:NI(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(l,h,f){let p=l.Ru[l.currentUser.toKey()];p||(p=new Rt(Ne)),p=p.insert(h,f),l.Ru[l.currentUser.toKey()]=p}(r,s.batchId,t),await ic(r,s.changes),await tf(r.remoteStore)}catch(s){const a=Jg(s,"Failed to persist write");t.reject(a)}}async function _C(n,e){const t=Pe(n);try{const r=await O2(t.localStore,e);e.targetChanges.forEach((s,a)=>{const l=t.Eu.get(a);l&&($e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.lu=!0:s.modifiedDocuments.size>0?$e(l.lu,14607):s.removedDocuments.size>0&&($e(l.lu,42227),l.lu=!1))}),await ic(t,r,e)}catch(r){await el(r)}}function Rw(n,e,t){const r=Pe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Pu.forEach((a,l)=>{const h=l.view.va(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const f=Pe(l);f.onlineState=h;let p=!1;f.queries.forEach((y,v)=>{for(const E of v.wa)E.va(h)&&(p=!0)}),p&&Xg(f)}(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TD(n,e,t){const r=Pe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),a=s&&s.key;if(a){let l=new Rt(ye.comparator);l=l.insert(a,Wt.newNoDocument(a,Ce.min()));const h=Ve().add(a),f=new Xd(Ce.min(),new Map,new Rt(Ne),l,h);await _C(r,f),r.du=r.du.remove(a),r.Eu.delete(e),e_(r)}else await Um(r.localStore,e,!1).then(()=>$m(r,e,t)).catch(el)}async function ID(n,e){const t=Pe(n),r=e.batch.batchId;try{const s=await D2(t.localStore,e);vC(t,r,null),yC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ic(t,s)}catch(s){await el(s)}}async function CD(n,e,t){const r=Pe(n);try{const s=await function(l,h){const f=Pe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return f.mutationQueue.lookupMutationBatch(p,h).next(v=>($e(v!==null,37113),y=v.keys(),f.mutationQueue.removeMutationBatch(p,v))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,y,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>f.localDocuments.getDocuments(p,y))})}(r.localStore,e);vC(r,e,t),yC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ic(r,s)}catch(s){await el(s)}}function yC(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function vC(n,e,t){const r=Pe(n);let s=r.Ru[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function $m(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||wC(n,r)})}function wC(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Gg(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),e_(n))}function Pw(n,e,t){for(const r of t)r instanceof pC?(n.Au.addReference(r.key,e),SD(n,r)):r instanceof mC?(he(Zg,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||wC(n,r.key)):Ee(19791,{yu:r})}function SD(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(he(Zg,"New document in limbo: "+t),n.Iu.add(r),e_(n))}function e_(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new ye(Je.fromString(e)),r=n.mu.next();n.Eu.set(r,new pD(t)),n.du=n.du.insert(t,r),sC(n.remoteStore,new is(Or(Mg(t.path)),r,"TargetPurposeLimboResolution",Gd.ue))}}async function ic(n,e,t){const r=Pe(n),s=[],a=[],l=[];r.Pu.isEmpty()||(r.Pu.forEach((h,f)=>{l.push(r.gu(f,e,t).then(p=>{var y;if((p||t)&&r.isPrimaryClient){const v=p?!p.fromCache:(y=t?.targetChanges.get(f.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(p){s.push(p);const v=$g.Es(f.targetId,p);a.push(v)}}))}),await Promise.all(l),r.hu.J_(s),await async function(f,p){const y=Pe(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>X.forEach(p,E=>X.forEach(E.Is,S=>y.persistence.referenceDelegate.addReference(v,E.targetId,S)).next(()=>X.forEach(E.ds,S=>y.persistence.referenceDelegate.removeReference(v,E.targetId,S)))))}catch(v){if(!tl(v))throw v;he(Wg,"Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const S=y.Fs.get(E),A=S.snapshotVersion,N=S.withLastLimboFreeSnapshotVersion(A);y.Fs=y.Fs.insert(E,N)}}}(r.localStore,a))}async function AD(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){he(Zg,"User change. New user:",e.toKey());const r=await nC(t.localStore,e);t.currentUser=e,function(a,l){a.Vu.forEach(h=>{h.forEach(f=>{f.reject(new ue(J.CANCELLED,l))})}),a.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ic(t,r.Bs)}}function kD(n,e){const t=Pe(n),r=t.Eu.get(e);if(r&&r.lu)return Ve().add(r.key);{let s=Ve();const a=t.Tu.get(e);if(!a)return s;for(const l of a){const h=t.Pu.get(l);s=s.unionWith(h.view.tu)}return s}}function EC(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_C.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TD.bind(null,e),e.hu.J_=cD.bind(null,e.eventManager),e.hu.pu=hD.bind(null,e.eventManager),e}function xD(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ID.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CD.bind(null,e),e}class wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return N2(this.persistence,new R2,e.initialUser,this.serializer)}Du(e){return new tC(zg.Vi,this.serializer)}bu(e){return new j2}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wd.provider={build:()=>new wd};class RD extends wd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){$e(this.persistence.referenceDelegate instanceof yd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new p2(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new tC(r=>yd.Vi(r,t),this.serializer)}}class Wm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Rw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AD.bind(null,this.syncEngine),await aD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uD}()}createDatastore(e){const t=Zd(e.databaseInfo.databaseId),r=function(a){return new W2(a)}(e.databaseInfo);return function(a,l,h,f){return new K2(a,l,h,f)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,a,l,h){return new Y2(r,s,a,l,h)}(this.localStore,this.datastore,e.asyncQueue,t=>Rw(this.syncEngine,t,0),function(){return Iw.C()?new Iw:new U2}())}createSyncEngine(e,t){return function(s,a,l,h,f,p,y){const v=new mD(s,a,l,h,f,p);return y&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const a=Pe(s);he(go,"RemoteStore shutting down."),a.Ia.add(5),await rc(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wm.provider={build:()=>new Wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Ii("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ue(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(s,a){const l=Pe(s),h={documents:a.map(v=>_d(l.serializer,v))},f=await l.Jo("BatchGetDocuments",l.serializer.databaseId,Je.emptyPath(),h,a.length),p=new Map;f.forEach(v=>{const E=JN(l.serializer,v);p.set(E.key.toString(),E)});const y=[];return a.forEach(v=>{const E=p.get(v.toString());$e(!!E,55234,{key:v}),y.push(E)}),y}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const s=ye.fromPath(r);this.mutations.push(new BI(s,this.precondition(s)))}),await async function(r,s){const a=Pe(r),l={writes:s.map(h=>YI(a.serializer,h))};await a.Wo("Commit",a.serializer.databaseId,Je.emptyPath(),l)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ee(50498,{Wu:e.constructor.name});t=Ce.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ue(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ce.min())?kt.exists(!1):kt.updateTime(t):kt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ce.min()))throw new ue(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kt.updateTime(t)}return kt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,t,r,s,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=a,this.Gu=r.maxAttempts,this.F_=new Hg(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new PD(this.datastore),t=this.Ju(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Hu(s)}))}).catch(r=>{this.Hu(r)})})}Ju(e){try{const t=this.updateFunction(e);return!Xu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!zI(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="FirestoreClient";class ND{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=on.UNAUTHENTICATED,this.clientId=Pg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async l=>{he(Ts,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(he(Ts,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Jg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function am(n,e){n.asyncQueue.verifyOperationInProgress(),he(Ts,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>{gs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{he("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{gs("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function bw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DD(n);he(Ts,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Sw(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>Sw(e.remoteStore,s)),n._onlineComponents=e}async function DD(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(Ts,"Using user provided OfflineComponentProvider");try{await am(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===J.FAILED_PRECONDITION||s.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;gs("Error using user provided cache. Falling back to memory cache: "+t),await am(n,new wd)}}else he(Ts,"Using default OfflineComponentProvider"),await am(n,new RD(void 0));return n._offlineComponents}async function t_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(Ts,"Using user provided OnlineComponentProvider"),await bw(n,n._uninitializedComponentsProvider._online)):(he(Ts,"Using default OnlineComponentProvider"),await bw(n,new Wm))),n._onlineComponents}function OD(n){return t_(n).then(e=>e.syncEngine)}function LD(n){return t_(n).then(e=>e.datastore)}async function Hm(n){const e=await t_(n),t=e.eventManager;return t.onListen=gD.bind(null,e.syncEngine),t.onUnlisten=vD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=_D.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wD.bind(null,e.syncEngine),t}function MD(n,e,t={}){const r=new yi;return n.asyncQueue.enqueueAndForget(async()=>function(a,l,h,f,p){const y=new TC({next:E=>{y.Ou(),l.enqueueAndForget(()=>dC(a,v)),E.fromCache&&f.source==="server"?p.reject(new ue(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new fC(h,y,{includeMetadataChanges:!0,ka:!0});return hC(a,v)}(await Hm(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="firestore.googleapis.com",Dw=!0;class Ow{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CC,this.ssl=Dw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Dw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d2)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $b;switch(r.type){case"firstParty":return new qb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Nw.get(t);r&&(he("ComponentProvider","Removing Datastore"),Nw.delete(t),r.terminate())}(this),Promise.resolve()}}function VD(n,e,t,r={}){var s;n=In(n,nf);const a=Cs(e),l=n._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;a&&(pg(`https://${f}`),mg("Firestore",!0)),l.host!==CC&&l.host!==f&&gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:f,ssl:a,emulatorOptions:r});if(!ps(p,h)&&(n._setSettings(p),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=on.MOCK_USER;else{y=hT(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ue(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new on(E)}n._authCredentials=new Wb(new lI(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Ju(t,gt._jsonSchema))return new gt(e,r||null,new ye(Je.fromString(t.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:xt("string",gt._jsonSchemaVersion),referencePath:xt("string")};class cs extends So{constructor(e,t,r){super(e,t,Mg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ye(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function oo(n,e,...t){if(n=Ze(n),cI("collection","path",e),n instanceof nf){const r=Je.fromString(e,...t);return q0(r),new cs(n,null,r)}{if(!(n instanceof gt||n instanceof cs))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return q0(r),new cs(n.firestore,null,r)}}function wt(n,e,...t){if(n=Ze(n),arguments.length===1&&(e=Pg.newId()),cI("doc","path",e),n instanceof nf){const r=Je.fromString(e,...t);return G0(r),new gt(n,null,new ye(r))}{if(!(n instanceof gt||n instanceof cs))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Je.fromString(e,...t));return G0(r),new gt(n.firestore,n instanceof cs?n.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="AsyncQueue";class Mw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Hg(this,"async_queue_retry"),this.oc=()=>{const r=om();r&&he(Lw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=om();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=om();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new yi;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!tl(e))throw e;he(Lw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Ii("INTERNAL UNHANDLED ERROR: ",Vw(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Yg.createAndSchedule(this,e,t,r,a=>this.lc(a));return this.ec.push(s),s}ac(){this.tc&&Ee(47125,{hc:Vw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Vw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(n,["next","error","complete"])}class jr extends nf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Mw,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mw(e),this._firestoreClient=void 0,await e}}}function FD(n,e){const t=typeof n=="object"?n:yg(),r=typeof n=="string"?n:hd,s=Ud(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=lT("firestore");a&&VD(s,...a)}return s}function sc(n){if(n._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jD(n),n._firestoreClient}function jD(n){var e,t,r;const s=n._freezeSettings(),a=function(h,f,p,y){return new uN(h,f,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,IC(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new ND(n._authCredentials,n._appCheckCredentials,n._queue,a,n._componentsProvider&&function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this._byteString=e}static fromBase64String(e){try{return new On(Zt.fromBase64String(e))}catch(t){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new On(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:On._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ju(e,On._jsonSchema))return On.fromBase64String(e.bytes)}}On._jsonSchemaVersion="firestore/bytes/1.0",On._jsonSchema={type:xt("string",On._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lr._jsonSchemaVersion}}static fromJSON(e){if(Ju(e,Lr._jsonSchema))return new Lr(e.latitude,e.longitude)}}Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:xt("string",Lr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ju(e,Mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Mr(e.vectorValues);throw new ue(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Mr._jsonSchemaVersion="firestore/vectorValue/1.0",Mr._jsonSchema={type:xt("string",Mr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=/^__.*__$/;class BD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ec(e,this.data,t,this.fieldTransforms)}}class SC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ec:n})}}class n_{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ed(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(AC(this.Ec)&&UD.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class zD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zd(e)}Dc(e,t,r,s=!1){return new n_({Ec:e,methodName:t,bc:r,path:Jt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function il(n){const e=n._freezeSettings(),t=Zd(n._databaseId);return new zD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sf(n,e,t,r,s,a={}){const l=n.Dc(a.merge||a.mergeFields?2:0,e,t,s);o_("Data must be an object, but it was:",l,r);const h=kC(r,l);let f,p;if(a.merge)f=new Ln(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const v of a.mergeFields){const E=Gm(e,v,t);if(!l.contains(E))throw new ue(J.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);RC(y,E)||y.push(E)}f=new Ln(y),p=l.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,p=l.fieldTransforms;return new BD(new dn(h),f,p)}class of extends rf{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof of}}class r_ extends rf{_toFieldTransform(e){return new LN(e.path,new Vu)}isEqual(e){return e instanceof r_}}function i_(n,e,t,r){const s=n.Dc(1,e,t);o_("Data must be an object, but it was:",s,r);const a=[],l=dn.empty();ks(r,(f,p)=>{const y=a_(e,f,t);p=Ze(p);const v=s.gc(y);if(p instanceof of)a.push(y);else{const E=oc(p,v);E!=null&&(a.push(y),l.set(y,E))}});const h=new Ln(a);return new SC(l,h,s.fieldTransforms)}function s_(n,e,t,r,s,a){const l=n.Dc(1,e,t),h=[Gm(e,r,t)],f=[s];if(a.length%2!=0)throw new ue(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)h.push(Gm(e,a[E])),f.push(a[E+1]);const p=[],y=dn.empty();for(let E=h.length-1;E>=0;--E)if(!RC(p,h[E])){const S=h[E];let A=f[E];A=Ze(A);const N=l.gc(S);if(A instanceof of)p.push(S);else{const L=oc(A,N);L!=null&&(p.push(S),y.set(S,L))}}const v=new Ln(p);return new SC(y,v,l.fieldTransforms)}function $D(n,e,t,r=!1){return oc(t,n.Dc(r?4:3,e))}function oc(n,e){if(xC(n=Ze(n)))return o_("Unsupported field value:",e,n),kC(n,e);if(n instanceof rf)return function(r,s){if(!AC(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,s){const a=[];let l=0;for(const h of r){let f=oc(h,s.yc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}}(n,e)}return function(r,s){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ut.fromDate(r);return{timestampValue:gd(s.serializer,a)}}if(r instanceof ut){const a=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gd(s.serializer,a)}}if(r instanceof Lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof On)return{bytesValue:GI(s.serializer,r._byteString)};if(r instanceof gt){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ug(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Mr)return function(l,h){return{mapValue:{fields:{[vI]:{stringValue:wI},[dd]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.wc("VectorValues must only contain numeric values.");return Vg(h.serializer,p)})}}}}}}(r,s);throw s.wc(`Unsupported field value: ${Hd(r)}`)}(n,e)}function kC(n,e){const t={};return fI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(n,(r,s)=>{const a=oc(s,e.Vc(r));a!=null&&(t[r]=a)}),{mapValue:{fields:t}}}function xC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Lr||n instanceof On||n instanceof gt||n instanceof rf||n instanceof Mr)}function o_(n,e,t){if(!xC(t)||!hI(t)){const r=Hd(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Gm(n,e,t){if((e=Ze(e))instanceof rl)return e._internalPath;if(typeof e=="string")return a_(n,e);throw Ed("Field path arguments must be of type string or ",n,!1,void 0,t)}const WD=new RegExp("[~\\*/\\[\\]]");function a_(n,e,t){if(e.search(WD)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rl(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ed(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new ue(J.INVALID_ARGUMENT,h+n+f)}function RC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(l_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HD extends Td{data(){return super.data()}}function l_(n,e){return typeof e=="string"?a_(n,e):e instanceof rl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class u_{}class GD extends u_{}function xa(n,e,...t){let r=[];e instanceof u_&&r.push(e),r=r.concat(t),function(a){const l=a.filter(f=>f instanceof c_).length,h=a.filter(f=>f instanceof af).length;if(l>1||l>0&&h>0)throw new ue(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class af extends GD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new af(e,t,r)}_apply(e){const t=this._parse(e);return bC(e._query,t),new So(e.firestore,e.converter,Lm(e._query,t))}_parse(e){const t=il(e.firestore);return function(a,l,h,f,p,y,v){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ue(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Uw(v,y);const A=[];for(const N of v)A.push(jw(f,a,N));E={arrayValue:{values:A}}}else E=jw(f,a,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Uw(v,y),E=$D(h,l,v,y==="in"||y==="not-in");return At.create(p,y,E)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function di(n,e,t){const r=e,s=l_("where",n);return af._create(s,r,t)}class c_ extends u_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new c_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,a){let l=s;const h=a.getFlattenedFilters();for(const f of h)bC(l,f),l=Lm(l,f)}(e._query,t),new So(e.firestore,e.converter,Lm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function jw(n,e,t){if(typeof(t=Ze(t))=="string"){if(t==="")throw new ue(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xI(e)&&t.indexOf("/")!==-1)throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Je.fromString(t));if(!ye.isDocumentKey(r))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tw(n,new ye(r))}if(t instanceof gt)return tw(n,t._key);throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(t)}.`)}function Uw(n,e){if(!Array.isArray(n)||n.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bC(n,e){const t=function(s,a){for(const l of s)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NC{convertValue(e,t="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ks(e,(s,a)=>{r[s]=this.convertValue(a,t)}),r}convertVectorValue(e){var t,r,s;const a=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[dd].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(l=>vt(l.doubleValue));return new Mr(a)}convertGeoPoint(e){return new Lr(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const t=ys(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Je.fromString(e);$e(ZI(r),9688,{name:e});const s=new Lu(r.get(1),r.get(3)),a=new ye(r.popFirst(5));return s.isEqual(t)||Ii(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qD extends NC{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}class Ra{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hs extends Td{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(l_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=hs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",hs._jsonSchema={type:xt("string",hs._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class Yh extends hs{data(e={}){return super.data(e)}}class uo{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ra(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yh(this._firestore,this._userDataWriter,r.key,r,new Ra(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const f=new Yh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ra(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new Yh(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ra(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,y=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),y=l.indexOf(h.doc.key)),{type:KD(h.type),doc:f,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}uo._jsonSchemaVersion="firestore/querySnapshot/1.0",uo._jsonSchema={type:xt("string",uo._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class uf extends NC{constructor(e){super(),this.firestore=e}convertBytes(e){return new On(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function Bw(n){n=In(n,So);const e=In(n.firestore,jr),t=sc(e),r=new uf(e);return PC(n._query),MD(t,n._query).then(s=>new uo(e,r,n,s))}function DC(n,e,t){n=In(n,gt);const r=In(n.firestore,jr),s=lf(n.converter,e,t);return ac(r,[sf(il(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,kt.none())])}function Pa(n,e,t,...r){n=In(n,gt);const s=In(n.firestore,jr),a=il(s);let l;return l=typeof(e=Ze(e))=="string"||e instanceof rl?s_(a,"updateDoc",n._key,e,t,r):i_(a,"updateDoc",n._key,e),ac(s,[l.toMutation(n._key,kt.exists(!0))])}function zw(n){return ac(In(n.firestore,jr),[new tc(n._key,kt.none())])}function QD(n,e){const t=In(n.firestore,jr),r=wt(n),s=lf(n.converter,e);return ac(t,[sf(il(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,kt.exists(!1))]).then(()=>r)}function _o(n,...e){var t,r,s;n=Ze(n);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||Fw(e[l])||(a=e[l++]);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Fw(e[l])){const v=e[l];e[l]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[l+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[l+2]=(s=v.complete)===null||s===void 0?void 0:s.bind(v)}let f,p,y;if(n instanceof gt)p=In(n.firestore,jr),y=Mg(n._key.path),f={next:v=>{e[l]&&e[l](YD(p,n,v))},error:e[l+1],complete:e[l+2]};else{const v=In(n,So);p=In(v.firestore,jr),y=v._query;const E=new uf(p);f={next:S=>{e[l]&&e[l](new uo(p,E,v,S))},error:e[l+1],complete:e[l+2]},PC(n._query)}return function(E,S,A,N){const L=new TC(N),U=new fC(S,L,A);return E.asyncQueue.enqueueAndForget(async()=>hC(await Hm(E),U)),()=>{L.Ou(),E.asyncQueue.enqueueAndForget(async()=>dC(await Hm(E),U))}}(sc(p),y,h,f)}function ac(n,e){return function(r,s){const a=new yi;return r.asyncQueue.enqueueAndForget(async()=>ED(await OD(r),s,a)),a.promise}(sc(n),e)}function YD(n,e,t){const r=t.docs.get(e._key),s=new uf(n);return new hs(n,s,e._key,r,new Ra(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=il(e)}set(e,t,r){this._verifyNotCommitted();const s=ss(e,this._firestore),a=lf(s.converter,t,r),l=sf(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,r);return this._mutations.push(l.toMutation(s._key,kt.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const a=ss(e,this._firestore);let l;return l=typeof(t=Ze(t))=="string"||t instanceof rl?s_(this._dataReader,"WriteBatch.update",a._key,t,r,s):i_(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,kt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ss(e,this._firestore);return this._mutations=this._mutations.concat(new tc(t._key,kt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ss(n,e){if((n=Ze(n)).firestore!==e)throw new ue(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=il(e)}get(e){const t=ss(e,this._firestore),r=new qD(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||s.length!==1)return Ee(24041);const a=s[0];if(a.isFoundDocument())return new Td(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Td(this._firestore,r,t._key,null,t.converter);throw Ee(18433,{doc:a})})}set(e,t,r){const s=ss(e,this._firestore),a=lf(s.converter,t,r),l=sf(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const a=ss(e,this._firestore);let l;return l=typeof(t=Ze(t))=="string"||t instanceof rl?s_(this._dataReader,"Transaction.update",a._key,t,r,s):i_(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=ss(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO extends ZD{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ss(e,this._firestore),r=new uf(this._firestore);return super.get(e).then(s=>new hs(this._firestore,r,t._key,s._document,new Ra(!1,!1),t.converter))}}function $w(n,e,t){n=In(n,jr);const r=Object.assign(Object.assign({},JD),t);return function(a){if(a.maxAttempts<1)throw new ue(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(a,l,h){const f=new yi;return a.asyncQueue.enqueueAndForget(async()=>{const p=await LD(a);new bD(a.asyncQueue,p,h,l,f).zu()}),f.promise}(sc(n),s=>e(new eO(n,s)),r)}function co(){return new r_("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(n){return sc(n=In(n,jr)),new XD(n,e=>ac(n,e))}(function(e,t=!0){(function(s){Za=s})(Eo),ho(new ms("firestore",(r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new jr(new Hb(r.getProvider("auth-internal")),new Kb(l,r.getProvider("app-check-internal")),function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(p.options.projectId,y)}(l,s),l);return a=Object.assign({useFetchStreams:t},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),br(B0,z0,e),br(B0,z0,"esm2017")})();var Ww={};const Hw="@firebase/database",Gw="1.0.20";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OC="";function tO(n){OC=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Yt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Ru(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return zr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nO(e)}}catch{}return new rO},ao=LC("localStorage"),iO=LC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new jd("@firebase/database"),sO=function(){let n=1;return function(){return n++}}(),MC=function(n){const e=mx(n),t=new hx;t.update(e);const r=t.digest();return fg.encodeByteArray(r)},lc=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=lc.apply(null,r):typeof r=="object"?e+=Yt(r):e+=r,e+=" "}return e};let Cu=null,qw=!0;const oO=function(n,e){le(!0,"Can't turn on custom loggers persistently."),Ma.logLevel=Oe.VERBOSE,Cu=Ma.log.bind(Ma)},Qt=function(...n){if(qw===!0&&(qw=!1,Cu===null&&iO.get("logging_enabled")===!0&&oO()),Cu){const e=lc.apply(null,n);Cu(e)}},uc=function(n){return function(...e){Qt(n,...e)}},qm=function(...n){const e="FIREBASE INTERNAL ERROR: "+lc(...n);Ma.error(e)},Si=function(...n){const e=`FIREBASE FATAL ERROR: ${lc(...n)}`;throw Ma.error(e),new Error(e)},Cn=function(...n){const e="FIREBASE WARNING: "+lc(...n);Ma.warn(e)},aO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Cn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},cf=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},lO=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ha="[MIN_NAME]",yo="[MAX_NAME]",Ao=function(n,e){if(n===e)return 0;if(n===Ha||e===yo)return-1;if(e===Ha||n===yo)return 1;{const t=Kw(n),r=Kw(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},uO=function(n,e){return n===e?0:n<e?-1:1},au=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Yt(e))},d_=function(n){if(typeof n!="object"||n===null)return Yt(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Yt(e[r]),t+=":",t+=d_(n[e[r]]);return t+="}",t},VC=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let s=0;s<t;s+=e)s+e>t?r.push(n.substring(s,t)):r.push(n.substring(s,s+e));return r};function Sn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const FC=function(n){le(!cf(n),"Invalid JSON number");const e=11,t=52,r=(1<<e-1)-1;let s,a,l,h,f;n===0?(a=0,l=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(a=0,l=Math.round(n/Math.pow(2,1-r-t))));const p=[];for(f=t;f;f-=1)p.push(l%2?1:0),l=Math.floor(l/2);for(f=e;f;f-=1)p.push(a%2?1:0),a=Math.floor(a/2);p.push(s?1:0),p.reverse();const y=p.join("");let v="";for(f=0;f<64;f+=8){let E=parseInt(y.substr(f,8),2).toString(16);E.length===1&&(E="0"+E),v=v+E}return v.toLowerCase()},cO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},hO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},dO=new RegExp("^-?(0*)\\d{1,10}$"),fO=-2147483648,pO=2147483647,Kw=function(n){if(dO.test(n)){const e=Number(n);if(e>=fO&&e<=pO)return e}return null},sl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Cn("Exception was thrown by user callback.",t),e},Math.floor(0))}},mO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Su=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Dn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Cn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Qt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Cn(e)}}class Jh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Jh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="5",jC="v",UC="s",BC="r",zC="f",$C=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WC="ls",HC="p",Km="ac",GC="websocket",qC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t,r,s,a=!1,l="",h=!1,f=!1,p=null){this.secure=t,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=f,this.emulatorOptions=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ao.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ao.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function yO(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function QC(n,e,t){le(typeof e=="string","typeof type must == string"),le(typeof t=="object","typeof params must == object");let r;if(e===GC)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===qC)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);yO(n)&&(t.ns=n.namespace);const s=[];return Sn(t,(a,l)=>{s.push(a+"="+l)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(){this.counters_={}}incrementCounter(e,t=1){zr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Wk(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm={},um={};function p_(n){const e=n.toString();return lm[e]||(lm[e]=new vO),lm[e]}function wO(n,e){const t=n.toString();return um[t]||(um[t]=e()),um[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EO{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&sl(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="start",TO="close",IO="pLPCommand",CO="pRTLPCB",YC="id",JC="pw",XC="ser",SO="cb",AO="seg",kO="ts",xO="d",RO="dframe",ZC=1870,eS=30,PO=ZC-eS,bO=25e3,NO=3e4;class ba{constructor(e,t,r,s,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uc(e),this.stats_=p_(t),this.urlFn=f=>(this.appCheckToken&&(f[Km]=this.appCheckToken),QC(t,qC,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new EO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(NO)),lO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new m_((...a)=>{const[l,h,f,p,y]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===Qw)this.id=h,this.password=f;else if(l===TO)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={};r[Qw]="t",r[XC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[SO]=this.scriptTagHolder.uniqueCallbackIdentifier),r[jC]=f_,this.transportSessionId&&(r[UC]=this.transportSessionId),this.lastSessionId&&(r[WC]=this.lastSessionId),this.applicationId&&(r[HC]=this.applicationId),this.appCheckToken&&(r[Km]=this.appCheckToken),typeof location<"u"&&location.hostname&&$C.test(location.hostname)&&(r[BC]=zC);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ba.forceAllow_=!0}static forceDisallow(){ba.forceDisallow_=!0}static isAvailable(){return ba.forceAllow_?!0:!ba.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cO()&&!hO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=Yt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=sT(t),s=VC(r,PO);for(let a=0;a<s.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const r={};r[RO]="t",r[YC]=e,r[JC]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=Yt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class m_{constructor(e,t,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=sO(),window[IO+this.uniqueCallbackIdentifier]=e,window[CO+this.uniqueCallbackIdentifier]=t,this.myIFrame=m_.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Qt("frame writing exception"),h.stack&&Qt(h.stack),Qt(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Qt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[YC]=this.myID,e[JC]=this.myPW,e[XC]=this.currentSerial;let t=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+eS+r.length<=ZC;){const l=this.pendingSegs.shift();r=r+"&"+AO+s+"="+l.seg+"&"+kO+s+"="+l.ts+"&"+xO+s+"="+l.d,s++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(r,Math.floor(bO)),a=()=>{clearTimeout(s),r()};this.addTag(e,a)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Qt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=16384,OO=45e3;let Id=null;typeof MozWebSocket<"u"?Id=MozWebSocket:typeof WebSocket<"u"&&(Id=WebSocket);class hr{constructor(e,t,r,s,a,l,h){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uc(this.connId),this.stats_=p_(t),this.connURL=hr.connectionURL_(t,l,h,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,r,s,a){const l={};return l[jC]=f_,typeof location<"u"&&location.hostname&&$C.test(location.hostname)&&(l[BC]=zC),t&&(l[UC]=t),r&&(l[WC]=r),s&&(l[Km]=s),a&&(l[HC]=a),QC(e,GC,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ao.set("previous_websocket_failure",!0);try{let r;nx(),this.mySock=new Id(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){hr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(t);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&Id!==null&&!hr.forceDisallow_}static previouslyFailed(){return ao.isInMemoryStorage||ao.get("previous_websocket_failure")===!0}markConnectionHealthy(){ao.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=Ru(t);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(le(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const t=Yt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=VC(t,DO);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(OO))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}hr.responsesRequiredToBeHealthy=2;hr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{static get ALL_TRANSPORTS(){return[ba,hr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=hr&&hr.isAvailable();let r=t&&!hr.previouslyFailed();if(e.webSocketOnly&&(t||Cn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hr];else{const s=this.transports_=[];for(const a of Uu.ALL_TRANSPORTS)a&&a.isAvailable()&&s.push(a);Uu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Uu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=6e4,MO=5e3,VO=10*1024,FO=100*1024,cm="t",Yw="d",jO="s",Jw="r",UO="e",Xw="o",Zw="a",eE="n",tE="p",BO="h";class zO{constructor(e,t,r,s,a,l,h,f,p,y){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=f,this.onKill_=p,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uc("c:"+this.id+":"),this.transportManager_=new Uu(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Su(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>FO?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>VO?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(cm in e){const t=e[cm];t===Zw?this.upgradeIfSecondaryHealthy_():t===Jw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Xw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=au("t",e),r=au("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tE,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Zw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:eE,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=au("t",e),r=au("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=au(cm,e);if(Yw in e){const r=e[Yw];if(t===BO){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===eE){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===jO?this.onConnectionShutdown_(r):t===Jw?this.onReset_(r):t===UO?qm("Server Error: "+r):t===Xw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qm("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),f_!==r&&Cn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Su(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(LO))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Su(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(MO))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tE,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ao.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{put(e,t,r,s){}merge(e,t,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.allowedEvents_=e,this.listeners_={},le(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const s=this.getInitialEvent(e);s&&t.apply(r,s)}off(e,t,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let a=0;a<s.length;a++)if(s[a].callback===t&&(!r||r===s[a].context)){s.splice(a,1);return}}validateEventType_(e){le(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends nS{static getInstance(){return new Cd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!gg()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return le(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=32,rE=768;class tt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Xe(){return new tt("")}function Le(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Is(n){return n.pieces_.length-n.pieceNum_}function st(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new tt(n.pieces_,e)}function g_(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function $O(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Bu(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function rS(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new tt(e,0)}function Et(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof tt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&t.push(r[s])}return new tt(t,0)}function Me(n){return n.pieceNum_>=n.pieces_.length}function qn(n,e){const t=Le(n),r=Le(e);if(t===null)return e;if(t===r)return qn(st(n),st(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function WO(n,e){const t=Bu(n,0),r=Bu(e,0);for(let s=0;s<t.length&&s<r.length;s++){const a=Ao(t[s],r[s]);if(a!==0)return a}return t.length===r.length?0:t.length<r.length?-1:1}function iS(n,e){if(Is(n)!==Is(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Kn(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Is(n)>Is(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class HO{constructor(e,t){this.errorPrefix_=t,this.parts_=Bu(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Fd(this.parts_[r]);sS(this)}}function GO(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Fd(e),sS(n)}function qO(n){const e=n.parts_.pop();n.byteLength_-=Fd(e),n.parts_.length>0&&(n.byteLength_-=1)}function sS(n){if(n.byteLength_>rE)throw new Error(n.errorPrefix_+"has a key path longer than "+rE+" bytes ("+n.byteLength_+").");if(n.parts_.length>nE)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+nE+") or object contains a cycle "+io(n))}function io(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __ extends nS{static getInstance(){return new __}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return le(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=1e3,KO=60*5*1e3,iE=30*1e3,QO=1.3,YO=3e4,JO="server_kill",sE=3;class vi extends tS{constructor(e,t,r,s,a,l,h,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.authOverride_=f,this.id=vi.nextPersistentConnectionId_++,this.log_=uc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lu,this.maxReconnectDelay_=KO,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");__.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Cd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,r){const s=++this.requestNumber_,a={r:s,a:e,b:t};this.log_(Yt(a)),le(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const t=new hi,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const h=l.d;l.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),t.promise}listen(e,t,r,s){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),le(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const h={onComplete:s,hashFn:t,query:e,tag:r};this.listens.get(l).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(e){const t=e.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const a={p:r},l="q";e.tag&&(a.q=t._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,h=>{const f=h.d,p=h.s;vi.warnOnListenWarnings_(f,t),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",h),p!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(p,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&zr(e,"w")){const r=Fa(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',a=t._path.toString();Cn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||cx(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=iE)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=ux(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const a=s.s,l=s.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,r=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(e,t){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),le(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,t)}sendUnlisten_(e,t,r,s){this.log_("Unlisten on "+e+" for "+t);const a={p:e},l="n";s&&(a.q=r,a.t=s),this.sendRequest(l,a)}onDisconnectPut(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:r})}onDisconnectMerge(e,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:r})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,r,s){const a={p:t,d:r};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{s&&setTimeout(()=>{s(l.s,l.d)},Math.floor(0))})}put(e,t,r,s){this.putInternal("p",e,t,r,s)}merge(e,t,r,s){this.putInternal("m",e,t,r,s)}putInternal(e,t,r,s,a){this.initConnection_();const l={p:t,d:r};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:s}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,r,a=>{this.log_(t+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(a.s,a.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,r=>{if(r.s!=="ok"){const a=r.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Yt(e));const t=e.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):qm("Unrecognized action received from server: "+Yt(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){le(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>YO&&(this.reconnectDelay_=lu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*QO)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+vi.nextConnectionId_++,a=this.lastSessionId;let l=!1,h=null;const f=function(){h?h.close():(l=!0,r())},p=function(v){le(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:f,sendRequest:p};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,E]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);l?Qt("getToken() completed but was canceled"):(Qt("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=E&&E.token,h=new zO(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,r,S=>{Cn(S+" ("+this.repoInfo_.toString()+")"),this.interrupt(JO)},a))}catch(v){this.log_("Failed to get token: "+v),l||(this.repoInfo_.nodeAdmin&&Cn(v),f())}}}interrupt(e){Qt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Qt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],td(this.interruptReasons_)&&(this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let r;t?r=t.map(a=>d_(a)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const r=new tt(e).toString();let s;if(this.listens.has(r)){const a=this.listens.get(r);s=a.get(t),a.delete(t),a.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,t){Qt("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=sE&&(this.reconnectDelay_=iE,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Qt("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=sE&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+OC.replace(/\./g,"-")]=1,gg()?e["framework.cordova"]=1:dT()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Cd.getInstance().currentlyOnline();return td(this.interruptReasons_)&&e}}vi.nextPersistentConnectionId_=0;vi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new ze(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new ze(Ha,e),s=new ze(Ha,t);return this.compare(r,s)!==0}minPost(){return ze.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh;class oS extends hf{static get __EMPTY_NODE(){return Vh}static set __EMPTY_NODE(e){Vh=e}compare(e,t){return Ao(e.name,t.name)}isDefinedOn(e){throw Ya("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ze.MIN}maxPost(){return new ze(yo,Vh)}makePost(e,t){return le(typeof e=="string","KeyIndex indexValue must always be a string."),new ze(e,Vh)}toString(){return".key"}}const Va=new oS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t,r,s,a=null){this.isReverse_=s,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,s&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class $t{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??$t.RED,this.left=s??Tn.EMPTY_NODE,this.right=a??Tn.EMPTY_NODE}copy(e,t,r,s,a){return new $t(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return a<0?s=s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Tn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let r,s;if(r=this,t(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),t(e,r.key)===0){if(r.right.isEmpty())return Tn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}$t.RED=!0;$t.BLACK=!1;class XO{copy(e,t,r,s,a){return this}insert(e,t,r){return new $t(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Tn{constructor(e,t=Tn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Tn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,$t.BLACK,null,null))}remove(e){return new Tn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$t.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,s=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Fh(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Fh(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Fh(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Fh(this.root_,null,this.comparator_,!0,e)}}Tn.EMPTY_NODE=new XO;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(n,e){return Ao(n.name,e.name)}function y_(n,e){return Ao(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qm;function eL(n){Qm=n}const aS=function(n){return typeof n=="number"?"number:"+FC(n):"string:"+n},lS=function(n){if(n.isLeafNode()){const e=n.val();le(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zr(e,".sv"),"Priority must be a string or number.")}else le(n===Qm||n.isEmpty(),"priority of unexpected type.");le(n===Qm||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oE;class Bt{static set __childrenNodeConstructor(e){oE=e}static get __childrenNodeConstructor(){return oE}constructor(e,t=Bt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,le(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),lS(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Bt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Bt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Me(e)?this:Le(e)===".priority"?this.priorityNode_:Bt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Bt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const r=Le(e);return r===null?t:t.isEmpty()&&r!==".priority"?this:(le(r!==".priority"||Is(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Bt.__childrenNodeConstructor.EMPTY_NODE.updateChild(st(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+aS(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=FC(this.value_):e+=this.value_,this.lazyHash_=MC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Bt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Bt.__childrenNodeConstructor?-1:(le(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,r=typeof this.value_,s=Bt.VALUE_TYPE_ORDER.indexOf(t),a=Bt.VALUE_TYPE_ORDER.indexOf(r);return le(s>=0,"Unknown leaf type: "+t),le(a>=0,"Unknown leaf type: "+r),s===a?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Bt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uS,cS;function tL(n){uS=n}function nL(n){cS=n}class rL extends hf{compare(e,t){const r=e.node.getPriority(),s=t.node.getPriority(),a=r.compareTo(s);return a===0?Ao(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ze.MIN}maxPost(){return new ze(yo,new Bt("[PRIORITY-POST]",cS))}makePost(e,t){const r=uS(e);return new ze(t,new Bt("[PRIORITY-POST]",r))}toString(){return".priority"}}const Xt=new rL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL=Math.log(2);class sL{constructor(e){const t=a=>parseInt(Math.log(a)/iL,10),r=a=>parseInt(Array(a+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Sd=function(n,e,t,r){n.sort(e);const s=function(f,p){const y=p-f;let v,E;if(y===0)return null;if(y===1)return v=n[f],E=t?t(v):v,new $t(E,v.node,$t.BLACK,null,null);{const S=parseInt(y/2,10)+f,A=s(f,S),N=s(S+1,p);return v=n[S],E=t?t(v):v,new $t(E,v.node,$t.BLACK,A,N)}},a=function(f){let p=null,y=null,v=n.length;const E=function(A,N){const L=v-A,U=v;v-=A;const q=s(L+1,U),G=n[L],Q=t?t(G):G;S(new $t(Q,G.node,N,null,q))},S=function(A){p?(p.left=A,p=A):(y=A,p=A)};for(let A=0;A<f.count;++A){const N=f.nextBitIsOne(),L=Math.pow(2,f.count-(A+1));N?E(L,$t.BLACK):(E(L,$t.BLACK),E(L,$t.RED))}return y},l=new sL(n.length),h=a(l);return new Tn(r||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm;const Ea={};class mi{static get Default(){return le(Ea&&Xt,"ChildrenNode.ts has not been loaded"),hm=hm||new mi({".priority":Ea},{".priority":Xt}),hm}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Fa(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Tn?t:null}hasIndex(e){return zr(this.indexSet_,e.toString())}addIndex(e,t){le(e!==Va,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const a=t.getIterator(ze.Wrap);let l=a.getNext();for(;l;)s=s||e.isDefinedOn(l.node),r.push(l),l=a.getNext();let h;s?h=Sd(r,e.getCompare()):h=Ea;const f=e.toString(),p=Object.assign({},this.indexSet_);p[f]=e;const y=Object.assign({},this.indexes_);return y[f]=h,new mi(y,p)}addToIndexes(e,t){const r=nd(this.indexes_,(s,a)=>{const l=Fa(this.indexSet_,a);if(le(l,"Missing index implementation for "+a),s===Ea)if(l.isDefinedOn(e.node)){const h=[],f=t.getIterator(ze.Wrap);let p=f.getNext();for(;p;)p.name!==e.name&&h.push(p),p=f.getNext();return h.push(e),Sd(h,l.getCompare())}else return Ea;else{const h=t.get(e.name);let f=s;return h&&(f=f.remove(new ze(e.name,h))),f.insert(e,e.node)}});return new mi(r,this.indexSet_)}removeFromIndexes(e,t){const r=nd(this.indexes_,s=>{if(s===Ea)return s;{const a=t.get(e.name);return a?s.remove(new ze(e.name,a)):s}});return new mi(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu;class Qe{static get EMPTY_NODE(){return uu||(uu=new Qe(new Tn(y_),null,mi.Default))}constructor(e,t,r){this.children_=e,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&lS(this.priorityNode_),this.children_.isEmpty()&&le(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uu}updatePriority(e){return this.children_.isEmpty()?this:new Qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?uu:t}}getChild(e){const t=Le(e);return t===null?this:this.getImmediateChild(t).getChild(st(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(le(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const r=new ze(e,t);let s,a;t.isEmpty()?(s=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,t),a=this.indexMap_.addToIndexes(r,this.children_));const l=s.isEmpty()?uu:this.priorityNode_;return new Qe(s,l,a)}}updateChild(e,t){const r=Le(e);if(r===null)return t;{le(Le(e)!==".priority"||Is(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(st(e),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let r=0,s=0,a=!0;if(this.forEachChild(Xt,(l,h)=>{t[l]=h.val(e),r++,a&&Qe.INTEGER_REGEXP_.test(l)?s=Math.max(s,Number(l)):a=!1}),!e&&a&&s<2*r){const l=[];for(const h in t)l[h]=t[h];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+aS(this.getPriority().val())+":"),this.forEachChild(Xt,(t,r)=>{const s=r.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":MC(e)}return this.lazyHash_}getPredecessorChildName(e,t,r){const s=this.resolveIndex_(r);if(s){const a=s.getPredecessorKey(new ze(e,t));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new ze(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const r=t.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new ze(t,this.children_.get(t)):null}forEachChild(e,t){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ze.Wrap);let a=s.peek();for(;a!=null&&t.compare(a,e)<0;)s.getNext(),a=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ze.Wrap);let a=s.peek();for(;a!=null&&t.compare(a,e)>0;)s.getNext(),a=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===cc?-1:0}withIndex(e){if(e===Va||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Qe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Va||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const r=this.getIterator(Xt),s=t.getIterator(Xt);let a=r.getNext(),l=s.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=r.getNext(),l=s.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Va?null:this.indexMap_.get(e.toString())}}Qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class oL extends Qe{constructor(){super(new Tn(y_),Qe.EMPTY_NODE,mi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qe.EMPTY_NODE}isEmpty(){return!1}}const cc=new oL;Object.defineProperties(ze,{MIN:{value:new ze(Ha,Qe.EMPTY_NODE)},MAX:{value:new ze(yo,cc)}});oS.__EMPTY_NODE=Qe.EMPTY_NODE;Bt.__childrenNodeConstructor=Qe;eL(cc);nL(cc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL=!0;function St(n,e=null){if(n===null)return Qe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),le(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Bt(t,St(e))}if(!(n instanceof Array)&&aL){const t=[];let r=!1;if(Sn(n,(l,h)=>{if(l.substring(0,1)!=="."){const f=St(h);f.isEmpty()||(r=r||!f.getPriority().isEmpty(),t.push(new ze(l,f)))}}),t.length===0)return Qe.EMPTY_NODE;const a=Sd(t,ZO,l=>l.name,y_);if(r){const l=Sd(t,Xt.getCompare());return new Qe(a,St(e),new mi({".priority":l},{".priority":Xt}))}else return new Qe(a,St(e),mi.Default)}else{let t=Qe.EMPTY_NODE;return Sn(n,(r,s)=>{if(zr(n,r)&&r.substring(0,1)!=="."){const a=St(s);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(St(e))}}tL(St);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL extends hf{constructor(e){super(),this.indexPath_=e,le(!Me(e)&&Le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),s=this.extractChild(t.node),a=r.compareTo(s);return a===0?Ao(e.name,t.name):a}makePost(e,t){const r=St(e),s=Qe.EMPTY_NODE.updateChild(this.indexPath_,r);return new ze(t,s)}maxPost(){const e=Qe.EMPTY_NODE.updateChild(this.indexPath_,cc);return new ze(yo,e)}toString(){return Bu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL extends hf{compare(e,t){const r=e.node.compareTo(t.node);return r===0?Ao(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ze.MIN}maxPost(){return ze.MAX}makePost(e,t){const r=St(e);return new ze(t,r)}toString(){return".value"}}const cL=new uL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){return{type:"value",snapshotNode:n}}function dL(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function fL(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function aE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function pL(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return le(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return le(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ha}hasEnd(){return this.endSet_}getIndexEndValue(){return le(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return le(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return le(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xt}copy(){const e=new v_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lE(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Xt?t="$priority":n.index_===cL?t="$value":n.index_===Va?t="$key":(le(n.index_ instanceof lL,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Yt(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=Yt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Yt(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Yt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Yt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function uE(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Xt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends tS{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(le(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=uc("p:rest:"),this.listens_={}}listen(e,t,r,s){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Ad.getListenId_(e,r),h={};this.listens_[l]=h;const f=lE(e._queryParams);this.restRequest_(a+".json",f,(p,y)=>{let v=y;if(p===404&&(v=null,p=null),p===null&&this.onDataUpdate_(a,v,!1,r),Fa(this.listens_,l)===h){let E;p?p===401?E="permission_denied":E="rest_error:"+p:E="ok",s(E,null)}})}unlisten(e,t){const r=Ad.getListenId_(e,t);delete this.listens_[r]}get(e){const t=lE(e._queryParams),r=e._path.toString(),s=new hi;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(r,h,!1,null),s.resolve(h)):s.reject(new Error(h))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,a])=>{s&&s.accessToken&&(t.auth=s.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ja(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&h.readyState===4){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let f=null;if(h.status>=200&&h.status<300){try{f=Ru(h.responseText)}catch{Cn("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,f)}else h.status!==401&&h.status!==404&&Cn("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this.rootNode_=Qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(){return{value:null,children:new Map}}function ol(n,e,t){if(Me(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const r=Le(e);n.children.has(r)||n.children.set(r,kd());const s=n.children.get(r);e=st(e),ol(s,e,t)}}function Ym(n,e){if(Me(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Xt,(r,s)=>{ol(n,new tt(r),s)}),Ym(n,e)}}else if(n.children.size>0){const t=Le(e);return e=st(e),n.children.has(t)&&Ym(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function Jm(n,e,t){n.value!==null?t(e,n.value):gL(n,(r,s)=>{const a=new tt(e.toString()+"/"+r);Jm(s,a,t)})}function gL(n,e){n.children.forEach((t,r)=>{e(r,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Sn(this.last_,(r,s)=>{t[r]=t[r]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=10*1e3,yL=30*1e3,vL=5*60*1e3;class wL{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new _L(e);const r=cE+(yL-cE)*Math.random();Su(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Sn(e,(s,a)=>{a>0&&zr(this.statsToReport_,s)&&(t[s]=a,r=!0)}),r&&this.server_.reportStats(t),Su(this.reportStats_.bind(this),Math.floor(Math.random()*2*vL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Pr||(Pr={}));function hS(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fS(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Pr.ACK_USER_WRITE,this.source=hS()}operationForChild(e){if(Me(this.path)){if(this.affectedTree.value!=null)return le(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new tt(e));return new xd(Xe(),t,this.revert)}}else return le(Le(this.path)===e,"operationForChild called for unrelated child."),new xd(st(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Pr.OVERWRITE}operationForChild(e){return Me(this.path)?new vo(this.source,Xe(),this.snap.getImmediateChild(e)):new vo(this.source,st(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Pr.MERGE}operationForChild(e){if(Me(this.path)){const t=this.children.subtree(new tt(e));return t.isEmpty()?null:t.value?new vo(this.source,Xe(),t.value):new zu(this.source,Xe(),t)}else return le(Le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zu(this.source,st(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Me(e))return this.isFullyInitialized()&&!this.filtered_;const t=Le(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function EL(n,e,t,r){const s=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(pL(l.childName,l.snapshotNode))}),cu(n,s,"child_removed",e,r,t),cu(n,s,"child_added",e,r,t),cu(n,s,"child_moved",a,r,t),cu(n,s,"child_changed",e,r,t),cu(n,s,"value",e,r,t),s}function cu(n,e,t,r,s,a){const l=r.filter(h=>h.type===t);l.sort((h,f)=>IL(n,h,f)),l.forEach(h=>{const f=TL(n,h,a);s.forEach(p=>{p.respondsTo(h.type)&&e.push(p.createEvent(f,n.query_))})})}function TL(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function IL(n,e,t){if(e.childName==null||t.childName==null)throw Ya("Should only compare child_ events.");const r=new ze(e.childName,e.snapshotNode),s=new ze(t.childName,t.snapshotNode);return n.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(n,e){return{eventCache:n,serverCache:e}}function Au(n,e,t,r){return pS(new w_(e,t,r),n.serverCache)}function mS(n,e,t,r){return pS(n.eventCache,new w_(e,t,r))}function Xm(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function wo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dm;const CL=()=>(dm||(dm=new Tn(uO)),dm);class lt{static fromObject(e){let t=new lt(null);return Sn(e,(r,s)=>{t=t.set(new tt(r),s)}),t}constructor(e,t=CL()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Xe(),value:this.value};if(Me(e))return null;{const r=Le(e),s=this.children.get(r);if(s!==null){const a=s.findRootMostMatchingPathAndValue(st(e),t);return a!=null?{path:Et(new tt(r),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Me(e))return this;{const t=Le(e),r=this.children.get(t);return r!==null?r.subtree(st(e)):new lt(null)}}set(e,t){if(Me(e))return new lt(t,this.children);{const r=Le(e),a=(this.children.get(r)||new lt(null)).set(st(e),t),l=this.children.insert(r,a);return new lt(this.value,l)}}remove(e){if(Me(e))return this.children.isEmpty()?new lt(null):new lt(null,this.children);{const t=Le(e),r=this.children.get(t);if(r){const s=r.remove(st(e));let a;return s.isEmpty()?a=this.children.remove(t):a=this.children.insert(t,s),this.value===null&&a.isEmpty()?new lt(null):new lt(this.value,a)}else return this}}get(e){if(Me(e))return this.value;{const t=Le(e),r=this.children.get(t);return r?r.get(st(e)):null}}setTree(e,t){if(Me(e))return t;{const r=Le(e),a=(this.children.get(r)||new lt(null)).setTree(st(e),t);let l;return a.isEmpty()?l=this.children.remove(r):l=this.children.insert(r,a),new lt(this.value,l)}}fold(e){return this.fold_(Xe(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((s,a)=>{r[s]=a.fold_(Et(e,s),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Xe(),t)}findOnPath_(e,t,r){const s=this.value?r(t,this.value):!1;if(s)return s;if(Me(e))return null;{const a=Le(e),l=this.children.get(a);return l?l.findOnPath_(st(e),Et(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Xe(),t)}foreachOnPath_(e,t,r){if(Me(e))return this;{this.value&&r(t,this.value);const s=Le(e),a=this.children.get(s);return a?a.foreachOnPath_(st(e),Et(t,s),r):new lt(null)}}foreach(e){this.foreach_(Xe(),e)}foreach_(e,t){this.children.inorderTraversal((r,s)=>{s.foreach_(Et(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.writeTree_=e}static empty(){return new pr(new lt(null))}}function ku(n,e,t){if(Me(e))return new pr(new lt(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let a=r.value;const l=qn(s,e);return a=a.updateChild(l,t),new pr(n.writeTree_.set(s,a))}else{const s=new lt(t),a=n.writeTree_.setTree(e,s);return new pr(a)}}}function hE(n,e,t){let r=n;return Sn(t,(s,a)=>{r=ku(r,Et(e,s),a)}),r}function dE(n,e){if(Me(e))return pr.empty();{const t=n.writeTree_.setTree(e,new lt(null));return new pr(t)}}function Zm(n,e){return ko(n,e)!=null}function ko(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(qn(t.path,e)):null}function fE(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Xt,(r,s)=>{e.push(new ze(r,s))}):n.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new ze(r,s.value))}),e}function ds(n,e){if(Me(e))return n;{const t=ko(n,e);return t!=null?new pr(new lt(t)):new pr(n.writeTree_.subtree(e))}}function eg(n){return n.writeTree_.isEmpty()}function Ga(n,e){return gS(Xe(),n.writeTree_,e)}function gS(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((s,a)=>{s===".priority"?(le(a.value!==null,"Priority writes must always be leaf nodes"),r=a.value):t=gS(Et(n,s),a,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Et(n,".priority"),r)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(n,e){return TS(e,n)}function SL(n,e,t,r,s){le(r>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:s}),s&&(n.visibleWrites=ku(n.visibleWrites,e,t)),n.lastWriteId=r}function AL(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}function kL(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);le(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let s=r.visible,a=!1,l=n.allWrites.length-1;for(;s&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&xL(h,r.path)?s=!1:Kn(r.path,h.path)&&(a=!0)),l--}if(s){if(a)return RL(n),!0;if(r.snap)n.visibleWrites=dE(n.visibleWrites,r.path);else{const h=r.children;Sn(h,f=>{n.visibleWrites=dE(n.visibleWrites,Et(r.path,f))})}return!0}else return!1}function xL(n,e){if(n.snap)return Kn(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Kn(Et(n.path,t),e))return!0;return!1}function RL(n){n.visibleWrites=yS(n.allWrites,PL,Xe()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function PL(n){return n.visible}function yS(n,e,t){let r=pr.empty();for(let s=0;s<n.length;++s){const a=n[s];if(e(a)){const l=a.path;let h;if(a.snap)Kn(t,l)?(h=qn(t,l),r=ku(r,h,a.snap)):Kn(l,t)&&(h=qn(l,t),r=ku(r,Xe(),a.snap.getChild(h)));else if(a.children){if(Kn(t,l))h=qn(t,l),r=hE(r,h,a.children);else if(Kn(l,t))if(h=qn(l,t),Me(h))r=hE(r,Xe(),a.children);else{const f=Fa(a.children,Le(h));if(f){const p=f.getChild(st(h));r=ku(r,Xe(),p)}}}else throw Ya("WriteRecord should have .snap or .children")}}return r}function vS(n,e,t,r,s){if(!r&&!s){const a=ko(n.visibleWrites,e);if(a!=null)return a;{const l=ds(n.visibleWrites,e);if(eg(l))return t;if(t==null&&!Zm(l,Xe()))return null;{const h=t||Qe.EMPTY_NODE;return Ga(l,h)}}}else{const a=ds(n.visibleWrites,e);if(!s&&eg(a))return t;if(!s&&t==null&&!Zm(a,Xe()))return null;{const l=function(p){return(p.visible||s)&&(!r||!~r.indexOf(p.writeId))&&(Kn(p.path,e)||Kn(e,p.path))},h=yS(n.allWrites,l,e),f=t||Qe.EMPTY_NODE;return Ga(h,f)}}}function bL(n,e,t){let r=Qe.EMPTY_NODE;const s=ko(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Xt,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=ds(n.visibleWrites,e);return t.forEachChild(Xt,(l,h)=>{const f=Ga(ds(a,new tt(l)),h);r=r.updateImmediateChild(l,f)}),fE(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}else{const a=ds(n.visibleWrites,e);return fE(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}}function NL(n,e,t,r,s){le(r||s,"Either existingEventSnap or existingServerSnap must exist");const a=Et(e,t);if(Zm(n.visibleWrites,a))return null;{const l=ds(n.visibleWrites,a);return eg(l)?s.getChild(t):Ga(l,s.getChild(t))}}function DL(n,e,t,r){const s=Et(e,t),a=ko(n.visibleWrites,s);if(a!=null)return a;if(r.isCompleteForChild(t)){const l=ds(n.visibleWrites,s);return Ga(l,r.getNode().getImmediateChild(t))}else return null}function OL(n,e){return ko(n.visibleWrites,e)}function LL(n,e,t,r,s,a,l){let h;const f=ds(n.visibleWrites,e),p=ko(f,Xe());if(p!=null)h=p;else if(t!=null)h=Ga(f,t);else return[];if(h=h.withIndex(l),!h.isEmpty()&&!h.isLeafNode()){const y=[],v=l.getCompare(),E=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let S=E.getNext();for(;S&&y.length<s;)v(S,r)!==0&&y.push(S),S=E.getNext();return y}else return[]}function ML(){return{visibleWrites:pr.empty(),allWrites:[],lastWriteId:-1}}function tg(n,e,t,r){return vS(n.writeTree,n.treePath,e,t,r)}function wS(n,e){return bL(n.writeTree,n.treePath,e)}function pE(n,e,t,r){return NL(n.writeTree,n.treePath,e,t,r)}function Rd(n,e){return OL(n.writeTree,Et(n.treePath,e))}function VL(n,e,t,r,s,a){return LL(n.writeTree,n.treePath,e,t,r,s,a)}function E_(n,e,t){return DL(n.writeTree,n.treePath,e,t)}function ES(n,e){return TS(Et(n.treePath,e),n.writeTree)}function TS(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;le(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),le(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const a=s.type;if(t==="child_added"&&a==="child_removed")this.changeMap.set(r,aE(r,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&a==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&a==="child_changed")this.changeMap.set(r,fL(r,s.oldSnap));else if(t==="child_changed"&&a==="child_added")this.changeMap.set(r,dL(r,e.snapshotNode));else if(t==="child_changed"&&a==="child_changed")this.changeMap.set(r,aE(r,e.snapshotNode,s.oldSnap));else throw Ya("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}}const IS=new jL;class T_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new w_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return E_(this.writes_,e,r)}}getChildAfterChild(e,t,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:wo(this.viewCache_),a=VL(this.writes_,s,t,1,r,e);return a.length===0?null:a[0]}}function UL(n,e){le(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),le(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function BL(n,e,t,r,s){const a=new FL;let l,h;if(t.type===Pr.OVERWRITE){const p=t;p.source.fromUser?l=ng(n,e,p.path,p.snap,r,s,a):(le(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered()&&!Me(p.path),l=Pd(n,e,p.path,p.snap,r,s,h,a))}else if(t.type===Pr.MERGE){const p=t;p.source.fromUser?l=$L(n,e,p.path,p.children,r,s,a):(le(p.source.fromServer,"Unknown source."),h=p.source.tagged||e.serverCache.isFiltered(),l=rg(n,e,p.path,p.children,r,s,h,a))}else if(t.type===Pr.ACK_USER_WRITE){const p=t;p.revert?l=GL(n,e,p.path,r,s,a):l=WL(n,e,p.path,p.affectedTree,r,s,a)}else if(t.type===Pr.LISTEN_COMPLETE)l=HL(n,e,t.path,r,a);else throw Ya("Unknown operation type: "+t.type);const f=a.getChanges();return zL(e,l,f),{viewCache:l,changes:f}}function zL(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Xm(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(hL(Xm(e)))}}function CS(n,e,t,r,s,a){const l=e.eventCache;if(Rd(r,t)!=null)return e;{let h,f;if(Me(t))if(le(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const p=wo(e),y=p instanceof Qe?p:Qe.EMPTY_NODE,v=wS(r,y);h=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const p=tg(r,wo(e));h=n.filter.updateFullNode(e.eventCache.getNode(),p,a)}else{const p=Le(t);if(p===".priority"){le(Is(t)===1,"Can't have a priority with additional path components");const y=l.getNode();f=e.serverCache.getNode();const v=pE(r,t,y,f);v!=null?h=n.filter.updatePriority(y,v):h=l.getNode()}else{const y=st(t);let v;if(l.isCompleteForChild(p)){f=e.serverCache.getNode();const E=pE(r,t,l.getNode(),f);E!=null?v=l.getNode().getImmediateChild(p).updateChild(y,E):v=l.getNode().getImmediateChild(p)}else v=E_(r,p,e.serverCache);v!=null?h=n.filter.updateChild(l.getNode(),p,v,y,s,a):h=l.getNode()}}return Au(e,h,l.isFullyInitialized()||Me(t),n.filter.filtersNodes())}}function Pd(n,e,t,r,s,a,l,h){const f=e.serverCache;let p;const y=l?n.filter:n.filter.getIndexedFilter();if(Me(t))p=y.updateFullNode(f.getNode(),r,null);else if(y.filtersNodes()&&!f.isFiltered()){const S=f.getNode().updateChild(t,r);p=y.updateFullNode(f.getNode(),S,null)}else{const S=Le(t);if(!f.isCompleteForPath(t)&&Is(t)>1)return e;const A=st(t),L=f.getNode().getImmediateChild(S).updateChild(A,r);S===".priority"?p=y.updatePriority(f.getNode(),L):p=y.updateChild(f.getNode(),S,L,A,IS,null)}const v=mS(e,p,f.isFullyInitialized()||Me(t),y.filtersNodes()),E=new T_(s,v,a);return CS(n,v,t,s,E,h)}function ng(n,e,t,r,s,a,l){const h=e.eventCache;let f,p;const y=new T_(s,e,a);if(Me(t))p=n.filter.updateFullNode(e.eventCache.getNode(),r,l),f=Au(e,p,!0,n.filter.filtersNodes());else{const v=Le(t);if(v===".priority")p=n.filter.updatePriority(e.eventCache.getNode(),r),f=Au(e,p,h.isFullyInitialized(),h.isFiltered());else{const E=st(t),S=h.getNode().getImmediateChild(v);let A;if(Me(E))A=r;else{const N=y.getCompleteChild(v);N!=null?g_(E)===".priority"&&N.getChild(rS(E)).isEmpty()?A=N:A=N.updateChild(E,r):A=Qe.EMPTY_NODE}if(S.equals(A))f=e;else{const N=n.filter.updateChild(h.getNode(),v,A,E,y,l);f=Au(e,N,h.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function mE(n,e){return n.eventCache.isCompleteForChild(e)}function $L(n,e,t,r,s,a,l){let h=e;return r.foreach((f,p)=>{const y=Et(t,f);mE(e,Le(y))&&(h=ng(n,h,y,p,s,a,l))}),r.foreach((f,p)=>{const y=Et(t,f);mE(e,Le(y))||(h=ng(n,h,y,p,s,a,l))}),h}function gE(n,e,t){return t.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function rg(n,e,t,r,s,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,p;Me(t)?p=r:p=new lt(null).setTree(t,r);const y=e.serverCache.getNode();return p.children.inorderTraversal((v,E)=>{if(y.hasChild(v)){const S=e.serverCache.getNode().getImmediateChild(v),A=gE(n,S,E);f=Pd(n,f,new tt(v),A,s,a,l,h)}}),p.children.inorderTraversal((v,E)=>{const S=!e.serverCache.isCompleteForChild(v)&&E.value===null;if(!y.hasChild(v)&&!S){const A=e.serverCache.getNode().getImmediateChild(v),N=gE(n,A,E);f=Pd(n,f,new tt(v),N,s,a,l,h)}}),f}function WL(n,e,t,r,s,a,l){if(Rd(s,t)!=null)return e;const h=e.serverCache.isFiltered(),f=e.serverCache;if(r.value!=null){if(Me(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return Pd(n,e,t,f.getNode().getChild(t),s,a,h,l);if(Me(t)){let p=new lt(null);return f.getNode().forEachChild(Va,(y,v)=>{p=p.set(new tt(y),v)}),rg(n,e,t,p,s,a,h,l)}else return e}else{let p=new lt(null);return r.foreach((y,v)=>{const E=Et(t,y);f.isCompleteForPath(E)&&(p=p.set(y,f.getNode().getChild(E)))}),rg(n,e,t,p,s,a,h,l)}}function HL(n,e,t,r,s){const a=e.serverCache,l=mS(e,a.getNode(),a.isFullyInitialized()||Me(t),a.isFiltered());return CS(n,l,t,r,IS,s)}function GL(n,e,t,r,s,a){let l;if(Rd(r,t)!=null)return e;{const h=new T_(r,e,s),f=e.eventCache.getNode();let p;if(Me(t)||Le(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=tg(r,wo(e));else{const v=e.serverCache.getNode();le(v instanceof Qe,"serverChildren would be complete if leaf node"),y=wS(r,v)}y=y,p=n.filter.updateFullNode(f,y,a)}else{const y=Le(t);let v=E_(r,y,e.serverCache);v==null&&e.serverCache.isCompleteForChild(y)&&(v=f.getImmediateChild(y)),v!=null?p=n.filter.updateChild(f,y,v,st(t),h,a):e.eventCache.getNode().hasChild(y)?p=n.filter.updateChild(f,y,Qe.EMPTY_NODE,st(t),h,a):p=f,p.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=tg(r,wo(e)),l.isLeafNode()&&(p=n.filter.updateFullNode(p,l,a)))}return l=e.serverCache.isFullyInitialized()||Rd(r,Xe())!=null,Au(e,p,l,n.filter.filtersNodes())}}function qL(n,e){const t=wo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Me(e)&&!t.getImmediateChild(Le(e)).isEmpty())?t.getChild(e):null}function _E(n,e,t,r){e.type===Pr.MERGE&&e.source.queryId!==null&&(le(wo(n.viewCache_),"We should always have a full cache before handling merges"),le(Xm(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,a=BL(n.processor_,s,e,t,r);return UL(n.processor_,a.viewCache),le(a.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,KL(n,a.changes,a.viewCache.eventCache.getNode())}function KL(n,e,t,r){const s=n.eventRegistrations_;return EL(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yE;function QL(n){le(!yE,"__referenceConstructor has already been defined"),yE=n}function I_(n,e,t,r){const s=e.source.queryId;if(s!==null){const a=n.views.get(s);return le(a!=null,"SyncTree gave us an op for an invalid query."),_E(a,e,t,r)}else{let a=[];for(const l of n.views.values())a=a.concat(_E(l,e,t,r));return a}}function C_(n,e){let t=null;for(const r of n.views.values())t=t||qL(r,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vE;function YL(n){le(!vE,"__referenceConstructor has already been defined"),vE=n}class wE{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lt(null),this.pendingWriteTree_=ML(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function SS(n,e,t,r,s){return SL(n.pendingWriteTree_,e,t,r,s),s?ff(n,new vo(hS(),e,t)):[]}function lo(n,e,t=!1){const r=AL(n.pendingWriteTree_,e);if(kL(n.pendingWriteTree_,e)){let a=new lt(null);return r.snap!=null?a=a.set(Xe(),!0):Sn(r.children,l=>{a=a.set(new tt(l),!0)}),ff(n,new xd(r.path,a,t))}else return[]}function df(n,e,t){return ff(n,new vo(dS(),e,t))}function JL(n,e,t){const r=lt.fromObject(t);return ff(n,new zu(dS(),e,r))}function XL(n,e,t,r){const s=xS(n,r);if(s!=null){const a=RS(s),l=a.path,h=a.queryId,f=qn(l,e),p=new vo(fS(h),f,t);return PS(n,l,p)}else return[]}function ZL(n,e,t,r){const s=xS(n,r);if(s){const a=RS(s),l=a.path,h=a.queryId,f=qn(l,e),p=lt.fromObject(t),y=new zu(fS(h),f,p);return PS(n,l,y)}else return[]}function S_(n,e,t){const s=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const f=qn(l,e),p=C_(h,f);if(p)return p});return vS(s,e,a,t,!0)}function ff(n,e){return AS(e,n.syncPointTree_,null,_S(n.pendingWriteTree_,Xe()))}function AS(n,e,t,r){if(Me(n.path))return kS(n,e,t,r);{const s=e.get(Xe());t==null&&s!=null&&(t=C_(s,Xe()));let a=[];const l=Le(n.path),h=n.operationForChild(l),f=e.children.get(l);if(f&&h){const p=t?t.getImmediateChild(l):null,y=ES(r,l);a=a.concat(AS(h,f,p,y))}return s&&(a=a.concat(I_(s,n,r,t))),a}}function kS(n,e,t,r){const s=e.get(Xe());t==null&&s!=null&&(t=C_(s,Xe()));let a=[];return e.children.inorderTraversal((l,h)=>{const f=t?t.getImmediateChild(l):null,p=ES(r,l),y=n.operationForChild(l);y&&(a=a.concat(kS(y,h,f,p)))}),s&&(a=a.concat(I_(s,n,r,t))),a}function xS(n,e){return n.tagToQueryMap.get(e)}function RS(n){const e=n.indexOf("$");return le(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new tt(n.substr(0,e))}}function PS(n,e,t){const r=n.syncPointTree_.get(e);le(r,"Missing sync point for query tag that we're tracking");const s=_S(n.pendingWriteTree_,e);return I_(r,t,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new A_(t)}node(){return this.node_}}class k_{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Et(this.path_,e);return new k_(this.syncTree_,t)}node(){return S_(this.syncTree_,this.path_)}}const eM=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},EE=function(n,e,t){if(!n||typeof n!="object")return n;if(le(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return tM(n[".sv"],e,t);if(typeof n[".sv"]=="object")return nM(n[".sv"],e);le(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},tM=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:le(!1,"Unexpected server value: "+n)}},nM=function(n,e,t){n.hasOwnProperty("increment")||le(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;typeof r!="number"&&le(!1,"Unexpected increment value: "+r);const s=e.node();if(le(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const l=s.getValue();return typeof l!="number"?r:l+r},rM=function(n,e,t,r){return x_(e,new k_(t,n),r)},bS=function(n,e,t){return x_(n,new A_(e),t)};function x_(n,e,t){const r=n.getPriority().val(),s=EE(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=EE(l.getValue(),e,t);return h!==l.getValue()||s!==l.getPriority().val()?new Bt(h,St(s)):n}else{const l=n;return a=l,s!==l.getPriority().val()&&(a=a.updatePriority(new Bt(s))),l.forEachChild(Xt,(h,f)=>{const p=x_(f,e.getImmediateChild(h),t);p!==f&&(a=a.updateImmediateChild(h,p))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function P_(n,e){let t=e instanceof tt?e:new tt(e),r=n,s=Le(t);for(;s!==null;){const a=Fa(r.node.children,s)||{children:{},childCount:0};r=new R_(s,r,a),t=st(t),s=Le(t)}return r}function al(n){return n.node.value}function NS(n,e){n.node.value=e,ig(n)}function DS(n){return n.node.childCount>0}function iM(n){return al(n)===void 0&&!DS(n)}function pf(n,e){Sn(n.node.children,(t,r)=>{e(new R_(t,n,r))})}function OS(n,e,t,r){t&&e(n),pf(n,s=>{OS(s,e,!0)})}function sM(n,e,t){let r=n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function hc(n){return new tt(n.parent===null?n.name:hc(n.parent)+"/"+n.name)}function ig(n){n.parent!==null&&oM(n.parent,n.name,n)}function oM(n,e,t){const r=iM(t),s=zr(n.node.children,e);r&&s?(delete n.node.children[e],n.node.childCount--,ig(n)):!r&&!s&&(n.node.children[e]=t.node,n.node.childCount++,ig(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=/[\[\].#$\/\u0000-\u001F\u007F]/,lM=/[\[\].#$\u0000-\u001F\u007F]/,fm=10*1024*1024,b_=function(n){return typeof n=="string"&&n.length!==0&&!aM.test(n)},LS=function(n){return typeof n=="string"&&n.length!==0&&!lM.test(n)},uM=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),LS(n)},MS=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!cf(n)||n&&typeof n=="object"&&zr(n,".sv")},sg=function(n,e,t,r){mf(ja(n,"value"),e,t)},mf=function(n,e,t){const r=t instanceof tt?new HO(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+io(r));if(typeof e=="function")throw new Error(n+"contains a function "+io(r)+" with contents = "+e.toString());if(cf(e))throw new Error(n+"contains "+e.toString()+" "+io(r));if(typeof e=="string"&&e.length>fm/3&&Fd(e)>fm)throw new Error(n+"contains a string greater than "+fm+" utf8 bytes "+io(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,a=!1;if(Sn(e,(l,h)=>{if(l===".value")s=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!b_(l)))throw new Error(n+" contains an invalid key ("+l+") "+io(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);GO(r,l),mf(n,h,r),qO(r)}),s&&a)throw new Error(n+' contains ".value" child '+io(r)+" in addition to actual children.")}},cM=function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Bu(r);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!b_(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(WO);let s=null;for(t=0;t<e.length;t++){if(r=e[t],s!==null&&Kn(s,r))throw new Error(n+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},hM=function(n,e,t,r){const s=ja(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const a=[];Sn(e,(l,h)=>{const f=new tt(l);if(mf(s,h,Et(t,f)),g_(f)===".priority"&&!MS(h))throw new Error(s+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),cM(s,a)},dM=function(n,e,t){if(cf(e))throw new Error(ja(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!MS(e))throw new Error(ja(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},VS=function(n,e,t,r){if(!LS(t))throw new Error(ja(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},fM=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),VS(n,e,t)},gu=function(n,e){if(Le(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},pM=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!b_(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!uM(t))throw new Error(ja(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function FS(n,e){let t=null;for(let r=0;r<e.length;r++){const s=e[r],a=s.getPath();t!==null&&!iS(a,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:a}),t.events.push(s)}t&&n.eventLists_.push(t)}function Ai(n,e,t){FS(n,t),gM(n,r=>Kn(r,e)||Kn(e,r))}function gM(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const s=n.eventLists_[r];if(s){const a=s.path;e(a)?(_M(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function _M(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const r=t.getEventRunner();Cu&&Qt("event: "+t.toString()),sl(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM="repo_interrupt",vM=25;class wM{constructor(e,t,r,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new mM,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kd(),this.transactionQueueTree_=new R_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function EM(n,e,t){if(n.stats_=p_(n.repoInfo_),n.forceRestClient_||mO())n.server_=new Ad(n.repoInfo_,(r,s,a,l)=>{TE(n,r,s,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>IE(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Yt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new vi(n.repoInfo_,e,(r,s,a,l)=>{TE(n,r,s,a,l)},r=>{IE(n,r)},r=>{IM(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=wO(n.repoInfo_,()=>new wL(n.stats_,n.server_)),n.infoData_=new mL,n.infoSyncTree_=new wE({startListening:(r,s,a,l)=>{let h=[];const f=n.infoData_.getNode(r._path);return f.isEmpty()||(h=df(n.infoSyncTree_,r._path,f),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),D_(n,"connected",!1),n.serverSyncTree_=new wE({startListening:(r,s,a,l)=>(n.server_.listen(r,a,s,(h,f)=>{const p=l(h,f);Ai(n.eventQueue_,r._path,p)}),[]),stopListening:(r,s)=>{n.server_.unlisten(r,s)}})}function TM(n){const t=n.infoData_.getNode(new tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function N_(n){return eM({timestamp:TM(n)})}function TE(n,e,t,r,s){n.dataUpdateCount++;const a=new tt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(s)if(r){const f=nd(t,p=>St(p));l=ZL(n.serverSyncTree_,a,f,s)}else{const f=St(t);l=XL(n.serverSyncTree_,a,f,s)}else if(r){const f=nd(t,p=>St(p));l=JL(n.serverSyncTree_,a,f)}else{const f=St(t);l=df(n.serverSyncTree_,a,f)}let h=a;l.length>0&&(h=gf(n,a)),Ai(n.eventQueue_,h,l)}function IE(n,e){D_(n,"connected",e),e===!1&&SM(n)}function IM(n,e){Sn(e,(t,r)=>{D_(n,t,r)})}function D_(n,e,t){const r=new tt("/.info/"+e),s=St(t);n.infoData_.updateSnapshot(r,s);const a=df(n.infoSyncTree_,r,s);Ai(n.eventQueue_,r,a)}function jS(n){return n.nextWriteId_++}function CM(n,e,t,r,s){O_(n,"set",{path:e.toString(),value:t,priority:r});const a=N_(n),l=St(t,r),h=S_(n.serverSyncTree_,e),f=bS(l,h,a),p=jS(n),y=SS(n.serverSyncTree_,e,f,p,!0);FS(n.eventQueue_,y),n.server_.put(e.toString(),l.val(!0),(E,S)=>{const A=E==="ok";A||Cn("set at "+e+" failed: "+E);const N=lo(n.serverSyncTree_,p,!A);Ai(n.eventQueue_,e,N),qa(n,s,E,S)});const v=WS(n,e);gf(n,v),Ai(n.eventQueue_,v,[])}function SM(n){O_(n,"onDisconnectEvents");const e=N_(n),t=kd();Jm(n.onDisconnect_,Xe(),(s,a)=>{const l=rM(s,a,n.serverSyncTree_,e);ol(t,s,l)});let r=[];Jm(t,Xe(),(s,a)=>{r=r.concat(df(n.serverSyncTree_,s,a));const l=WS(n,s);gf(n,l)}),n.onDisconnect_=kd(),Ai(n.eventQueue_,Xe(),r)}function AM(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,s)=>{r==="ok"&&Ym(n.onDisconnect_,e),qa(n,t,r,s)})}function CE(n,e,t,r){const s=St(t);n.server_.onDisconnectPut(e.toString(),s.val(!0),(a,l)=>{a==="ok"&&ol(n.onDisconnect_,e,s),qa(n,r,a,l)})}function kM(n,e,t,r,s){const a=St(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{l==="ok"&&ol(n.onDisconnect_,e,a),qa(n,s,l,h)})}function xM(n,e,t,r){if(td(t)){Qt("onDisconnect().update() called with empty data.  Don't do anything."),qa(n,r,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(s,a)=>{s==="ok"&&Sn(t,(l,h)=>{const f=St(h);ol(n.onDisconnect_,Et(e,l),f)}),qa(n,r,s,a)})}function RM(n){n.persistentConnection_&&n.persistentConnection_.interrupt(yM)}function O_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Qt(t,...e)}function qa(n,e,t,r){e&&sl(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let a=s;r&&(a+=": "+r);const l=new Error(a);l.code=s,e(l)}})}function US(n,e,t){return S_(n.serverSyncTree_,e,t)||Qe.EMPTY_NODE}function L_(n,e=n.transactionQueueTree_){if(e||_f(n,e),al(e)){const t=zS(n,e);le(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&PM(n,hc(e),t)}else DS(e)&&pf(e,t=>{L_(n,t)})}function PM(n,e,t){const r=t.map(p=>p.currentWriteId),s=US(n,e,r);let a=s;const l=s.hash();for(let p=0;p<t.length;p++){const y=t[p];le(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const v=qn(e,y.path);a=a.updateChild(v,y.currentOutputSnapshotRaw)}const h=a.val(!0),f=e;n.server_.put(f.toString(),h,p=>{O_(n,"transaction put response",{path:f.toString(),status:p});let y=[];if(p==="ok"){const v=[];for(let E=0;E<t.length;E++)t[E].status=2,y=y.concat(lo(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&v.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();_f(n,P_(n.transactionQueueTree_,e)),L_(n,n.transactionQueueTree_),Ai(n.eventQueue_,e,y);for(let E=0;E<v.length;E++)sl(v[E])}else{if(p==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{Cn("transaction at "+f.toString()+" failed: "+p);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=p}gf(n,e)}},l)}function gf(n,e){const t=BS(n,e),r=hc(t),s=zS(n,t);return bM(n,s,r),r}function bM(n,e,t){if(e.length===0)return;const r=[];let s=[];const l=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const f=e[h],p=qn(t,f.path);let y=!1,v;if(le(p!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)y=!0,v=f.abortReason,s=s.concat(lo(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=vM)y=!0,v="maxretry",s=s.concat(lo(n.serverSyncTree_,f.currentWriteId,!0));else{const E=US(n,f.path,l);f.currentInputSnapshot=E;const S=e[h].update(E.val());if(S!==void 0){mf("transaction failed: Data returned ",S,f.path);let A=St(S);typeof S=="object"&&S!=null&&zr(S,".priority")||(A=A.updatePriority(E.getPriority()));const L=f.currentWriteId,U=N_(n),q=bS(A,E,U);f.currentOutputSnapshotRaw=A,f.currentOutputSnapshotResolved=q,f.currentWriteId=jS(n),l.splice(l.indexOf(L),1),s=s.concat(SS(n.serverSyncTree_,f.path,q,f.currentWriteId,f.applyLocally)),s=s.concat(lo(n.serverSyncTree_,L,!0))}else y=!0,v="nodata",s=s.concat(lo(n.serverSyncTree_,f.currentWriteId,!0))}Ai(n.eventQueue_,t,s),s=[],y&&(e[h].status=2,function(E){setTimeout(E,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?r.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):r.push(()=>e[h].onComplete(new Error(v),!1,null))))}_f(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)sl(r[h]);L_(n,n.transactionQueueTree_)}function BS(n,e){let t,r=n.transactionQueueTree_;for(t=Le(e);t!==null&&al(r)===void 0;)r=P_(r,t),e=st(e),t=Le(e);return r}function zS(n,e){const t=[];return $S(n,e,t),t.sort((r,s)=>r.order-s.order),t}function $S(n,e,t){const r=al(e);if(r)for(let s=0;s<r.length;s++)t.push(r[s]);pf(e,s=>{$S(n,s,t)})}function _f(n,e){const t=al(e);if(t){let r=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[r]=t[s],r++);t.length=r,NS(e,t.length>0?t:void 0)}pf(e,r=>{_f(n,r)})}function WS(n,e){const t=hc(BS(n,e)),r=P_(n.transactionQueueTree_,e);return sM(r,s=>{pm(n,s)}),pm(n,r),OS(r,s=>{pm(n,s)}),t}function pm(n,e){const t=al(e);if(t){const r=[];let s=[],a=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(le(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):(le(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),s=s.concat(lo(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?NS(e,void 0):t.length=a+1,Ai(n.eventQueue_,hc(e),s);for(let l=0;l<r.length;l++)sl(r[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let s=t[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function DM(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Cn(`Invalid query segment '${t}' in query '${n}'`)}return e}const SE=function(n,e){const t=OM(n),r=t.namespace;t.domain==="firebase.com"&&Si(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Si("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||aO();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new KC(t.host,t.secure,r,s,e,"",r!==t.subdomain),path:new tt(t.pathString)}},OM=function(n){let e="",t="",r="",s="",a="",l=!0,h="https",f=443;if(typeof n=="string"){let p=n.indexOf("//");p>=0&&(h=n.substring(0,p-1),n=n.substring(p+2));let y=n.indexOf("/");y===-1&&(y=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(y,v)),y<v&&(s=NM(n.substring(y,v)));const E=DM(n.substring(Math.min(n.length,v)));p=e.indexOf(":"),p>=0?(l=h==="https"||h==="wss",f=parseInt(e.substring(p+1),10)):p=e.length;const S=e.slice(0,p);if(S.toLowerCase()==="localhost")t="localhost";else if(S.split(".").length<=2)t=S;else{const A=e.indexOf(".");r=e.substring(0,A).toLowerCase(),t=e.substring(A+1),a=r}"ns"in E&&(a=E.ns)}return{host:e,port:f,domain:t,subdomain:r,secure:l,scheme:h,pathString:s,namespace:a}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new hi;return AM(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){gu("OnDisconnect.remove",this._path);const e=new hi;return CE(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){gu("OnDisconnect.set",this._path),sg("OnDisconnect.set",e,this._path);const t=new hi;return CE(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){gu("OnDisconnect.setWithPriority",this._path),sg("OnDisconnect.setWithPriority",e,this._path),dM("OnDisconnect.setWithPriority",t);const r=new hi;return kM(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){gu("OnDisconnect.update",this._path),hM("OnDisconnect.update",e,this._path);const t=new hi;return xM(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,t,r,s){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=s}get key(){return Me(this._path)?null:g_(this._path)}get ref(){return new xo(this._repo,this._path)}get _queryIdentifier(){const e=uE(this._queryParams),t=d_(e);return t==="{}"?"default":t}get _queryObject(){return uE(this._queryParams)}isEqual(e){if(e=Ze(e),!(e instanceof M_))return!1;const t=this._repo===e._repo,r=iS(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+$O(this._path)}}class xo extends M_{constructor(e,t){super(e,t,new v_,!1)}get parent(){const e=rS(this._path);return e===null?null:new xo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}function AE(n,e){return n=Ze(n),n._checkNotDeleted("ref"),e!==void 0?MM(n._root,e):n._root}function MM(n,e){return n=Ze(n),Le(n._path)===null?fM("child","path",e):VS("child","path",e),new xo(n._repo,Et(n._path,e))}function kE(n){return n=Ze(n),new LM(n._repo,n._path)}function xE(n,e){n=Ze(n),gu("set",n._path),sg("set",e,n._path);const t=new hi;return CM(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}QL(xo);YL(xo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="FIREBASE_DATABASE_EMULATOR_HOST",og={};let FM=!1;function jM(n,e,t,r){const s=e.lastIndexOf(":"),a=e.substring(0,s),l=Cs(a);n.repoInfo_=new KC(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),r&&(n.authTokenProvider_=r)}function UM(n,e,t,r,s){let a=r||n.options.databaseURL;a===void 0&&(n.options.projectId||Si("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qt("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=SE(a,s),h=l.repoInfo,f;typeof process<"u"&&Ww&&(f=Ww[VM]),f?(a=`http://${f}?ns=${h.namespace}`,l=SE(a,s),h=l.repoInfo):l.repoInfo.secure;const p=new _O(n.name,n.options,e);pM("Invalid Firebase Database URL",l),Me(l.path)||Si("Database URL must point to the root of a Firebase Database (not including a child path).");const y=zM(h,n,p,new gO(n,t));return new $M(y,n)}function BM(n,e){const t=og[e];(!t||t[n.key]!==n)&&Si(`Database ${e}(${n.repoInfo_}) has already been deleted.`),RM(n),delete t[n.key]}function zM(n,e,t,r){let s=og[e.name];s||(s={},og[e.name]=s);let a=s[n.toURLString()];return a&&Si("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new wM(n,FM,t,r),s[n.toURLString()]=a,a}class $M{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(EM(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xo(this._repo,Xe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(BM(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Si("Cannot call "+e+" on a deleted database.")}}function WM(n=yg(),e){const t=Ud(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const r=lT("database");r&&HM(t,...r)}return t}function HM(n,e,t,r={}){n=Ze(n),n._checkNotDeleted("useEmulator");const s=`${e}:${t}`,a=n._repoInternal;if(n._instanceStarted){if(s===n._repoInternal.repoInfo_.host&&ps(r,a.repoInfo_.emulatorOptions))return;Si("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Si('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Jh(Jh.OWNER);else if(r.mockUserToken){const h=typeof r.mockUserToken=="string"?r.mockUserToken:hT(r.mockUserToken,n.app.options.projectId);l=new Jh(h)}Cs(e)&&(pg(e),mg("Database",!0)),jM(a,s,r,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(n){tO(Eo),ho(new ms("database",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return UM(r,s,a,t)},"PUBLIC").setMultipleInstances(!0)),br(Hw,Gw,n),br(Hw,Gw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM={".sv":"timestamp"};function mm(){return qM}vi.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};vi.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};GM();const KM={apiKey:"AIzaSyAtHGfl2GwWOaNO5GlJbwYP8U10lNSnz68",authDomain:"smite2pbsimulator.firebaseapp.com",projectId:"smite2pbsimulator",storageBucket:"smite2pbsimulator.firebasestorage.app",messagingSenderId:"1019891524633",appId:"1:1019891524633:web:43b4556d609bed2c03f688",measurementId:"G-21N494VBGR"},V_=gT(KM),qe=FD(V_),$r=Lb(V_),RE=WM(V_);Ag($r,n=>{n?console.log("User signed in with UID:",n.uid):console.log("User is signed out.")});const HS=j.createContext(void 0),QM=({children:n})=>{const[e,t]=j.useState("dark"),r=()=>{t(a=>a==="light"?"dark":"light")},s=j.useMemo(()=>({theme:e,toggleTheme:r}),[e]);return T.jsx(HS.Provider,{value:s,children:n})},ll=()=>{const n=j.useContext(HS);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},dc=()=>{const[n]=Wd($r),[e,t]=j.useState(null),[r,s]=j.useState(!0),[a,l]=j.useState(null);return j.useEffect(()=>{if(!n){t(null),s(!1);return}const h=wt(qe,"users",n.uid),f=_o(h,p=>{p.exists()?t({id:p.id,...p.data()}):l("User profile not found in the database."),s(!1)},p=>{l("Failed to fetch user profile."),s(!1)});return()=>f()},[n]),{user:n,userProfile:e,loading:r,error:a}},fs=[{id:33,name:"Aladdin",image:"https://wiki.smite2.com/images/thumb/GodCard_Aladdin.png/720px-GodCard_Aladdin.png?87e68",roles:["Jungle","Mid","Carry"],skins:[""],voiceLine:"",position:"center 25%"},{id:11,name:"Agni",image:"https://wiki.smite2.com/images/thumb/GodCard_Agni.png/720px-GodCard_Agni.png?87e68",roles:["Mid","Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:27,name:"Achilles",image:"https://wiki.smite2.com/images/thumb/GodCard_Achilles.png/720px-GodCard_Achilles.png?3ef24",roles:["Solo","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:28,name:"Amaterasu",image:"https://wiki.smite2.com/images/thumb/GodCard_Amaterasu.png/720px-GodCard_Amaterasu.png?dad20",roles:["Solo","Jungle"],skins:[""],voiceLine:"",position:"center 25%"},{id:42,name:"Anhur",image:"https://wiki.smite2.com/images/thumb/GodCard_Anhur.png/720px-GodCard_Anhur.png?dad20",roles:["Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:13,name:"Anubis",image:"https://wiki.smite2.com/images/thumb/GodCard_Anubis.png/720px-GodCard_Anubis.png?7859a",roles:["Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:63,name:"Aphrodite",image:"https://wiki.smite2.com/images/thumb/GodCard_Aphrodite.png/720px-GodCard_Aphrodite.png?7859a",roles:["Support","Mid","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:43,name:"Apollo",image:"https://wiki.smite2.com/images/thumb/GodCard_Apollo.png/720px-GodCard_Apollo.png?184d1",roles:["Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:1,name:"Ares",image:"https://wiki.smite2.com/images/thumb/GodCard_Ares.png/720px-GodCard_Ares.png?7859a",roles:["Support","Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:44,name:"Artemis",image:"https://wiki.smite2.com/images/thumb/GodCard_Artemis.png/720px-GodCard_Artemis.png?ac80c",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:2,name:"Athena",image:"https://wiki.smite2.com/images/thumb/GodCard_Athena.png/360px-GodCard_Athena.png?b6c55",roles:["Support","Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:34,name:"Awilix",image:"https://wiki.smite2.com/images/thumb/GodCard_Awilix.png/720px-GodCard_Awilix.png?381d1",roles:["Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:3,name:"Bacchus",image:"https://wiki.smite2.com/images/thumb/GodCard_Bacchus.png/720px-GodCard_Bacchus.png?b6c55",roles:["Support","Solo"],skins:[""],voiceLine:"",position:"center 25%"},{id:64,name:"Baron Samedi",image:"https://wiki.smite2.com/images/thumb/GodCard_Baron_Samedi.png/720px-GodCard_Baron_Samedi.png?75202",roles:["Support","Solo","Mid"],skins:[""],voiceLine:"",position:"center 10%"},{id:29,name:"Bellona",image:"https://wiki.smite2.com/images/thumb/GodCard_Bellona.png/720px-GodCard_Bellona.png?b6c55",roles:["Solo","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:4,name:"Cabrakan",image:"https://wiki.smite2.com/images/thumb/GodCard_Cabrakan.png/720px-GodCard_Cabrakan.png?381d1",roles:["Solo","Jungle","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:5,name:"Cerberus",image:"https://wiki.smite2.com/images/thumb/GodCard_Cerberus.png/720px-GodCard_Cerberus.png?ac80c",roles:["Solo","Support"],skins:[""],voiceLine:"",position:"center 30%"},{id:45,name:"Cernunnos",image:"https://wiki.smite2.com/images/thumb/GodCard_Cernunnos.png/720px-GodCard_Cernunnos.png?ac80c",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:30,name:"Chaac",image:"https://wiki.smite2.com/images/thumb/GodCard_Chaac.png/720px-GodCard_Chaac.png?381d1",roles:["Solo","Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:46,name:"Cupid",image:"https://wiki.smite2.com/images/thumb/GodCard_Cupid.png/720px-GodCard_Cupid.png?ac80c",roles:["Carry","Support"],skins:[""],voiceLine:"",position:"center 25%"},{id:47,name:"Danzaburou",image:"https://wiki.smite2.com/images/thumb/GodCard_Danzaburou.png/720px-GodCard_Danzaburou.png?75202",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:35,name:"Fenrir",image:"https://wiki.smite2.com/images/thumb/GodCard_Fenrir.png/720px-GodCard_Fenrir.png?87e68",roles:["Jungle","Support","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:70,name:"Ganesha",image:"https://wiki.smite2.com/images/thumb/GodCard_Ganesha.png/720px-GodCard_Ganesha.png?57532",roles:["Support","Solo"],skins:[""],voiceLine:"",position:"center 25%"},{id:7,name:"Geb",image:"https://wiki.smite2.com/images/thumb/GodCard_Geb.png/720px-GodCard_Geb.png?ac80c",roles:["Support","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:31,name:"Guan Yu",image:"https://wiki.smite2.com/images/thumb/GodCard_Guan_Yu.png/720px-GodCard_Guan_Yu.png?ac80c",roles:["Solo","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:65,name:"Hades",image:"https://wiki.smite2.com/images/thumb/GodCard_Hades.png/720px-GodCard_Hades.png?75202",roles:["Solo","Support","Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:66,name:"Hecate",image:"https://wiki.smite2.com/images/thumb/GodCard_Hecate.png/720px-GodCard_Hecate.png?75202",roles:["Support","Mid"],skins:[""],voiceLine:"",position:"center 10%"},{id:57,name:"Hercules",image:"https://wiki.smite2.com/images/thumb/GodCard_Hercules.png/720px-GodCard_Hercules.png?75202",roles:["Solo","Support","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:72,name:"Hou Yi",image:"https://wiki.smite2.com/images/thumb/SkinArt_Hou_YiS2_Default.png/720px-SkinArt_Hou_YiS2_Default.png?4b881",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 15%"},{id:32,name:"Mulan",image:"https://wiki.smite2.com/images/thumb/GodCard_Hua_Mulan.png/720px-GodCard_Hua_Mulan.png?87e68",roles:["Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:60,name:"Hun Batz",image:"https://wiki.smite2.com/images/thumb/GodCard_Hun_Batz.png/720px-GodCard_Hun_Batz.png?cc9cb",roles:["Jungle","Support","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:48,name:"Izanami",image:"https://wiki.smite2.com/images/thumb/GodCard_Izanami.png/720px-GodCard_Izanami.png?87e68",roles:["Carry"],skins:[""],voiceLine:"",position:"center 25%"},{id:71,name:"Janus",image:"https://wiki.smite2.com/images/thumb/T_JanusS2_Default.png/720px-T_JanusS2_Default.png?c245f",roles:["Mid","Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:49,name:"Jing Wei",image:"https://wiki.smite2.com/images/thumb/GodCard_Jing_Wei.png/720px-GodCard_Jing_Wei.png?87e68",roles:["Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:36,name:"Kali",image:"https://wiki.smite2.com/images/thumb/GodCard_Kali.png/720px-GodCard_Kali.png?cc9cb",roles:["Jungle","Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:8,name:"Khepri",image:"https://wiki.smite2.com/images/thumb/GodCard_Khepri.png/720px-GodCard_Khepri.png?cc9cb",roles:["Support"],skins:[""],voiceLine:"",position:"center 35%"},{id:18,name:"Kukulkan",image:"https://wiki.smite2.com/images/thumb/GodCard_Kukulkan.png/720px-GodCard_Kukulkan.png?cc9cb",roles:["Mid"],skins:[""],voiceLine:"",position:"center 30%"},{id:37,name:"Loki",image:"https://wiki.smite2.com/images/thumb/GodCard_Loki.png/720px-GodCard_Loki.png?cc9cb",roles:["Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:50,name:"Medusa",image:"https://wiki.smite2.com/images/thumb/GodCard_Medusa.png/720px-GodCard_Medusa.png?e757b",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 30%"},{id:38,name:"Mercury",image:"https://wiki.smite2.com/images/thumb/GodCard_Mercury.png/720px-GodCard_Mercury.png?7520c",roles:["Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:19,name:"Merlin",image:"https://wiki.smite2.com/images/thumb/GodCard_Merlin.png/720px-GodCard_Merlin.png?544c9",roles:["Mid","Solo"],skins:[""],voiceLine:"",position:"center 15%"},{id:67,name:"Mordred",image:"https://wiki.smite2.com/images/thumb/GodCard_Mordred.png/720px-GodCard_Mordred.png?b6c55",roles:["Solo","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:51,name:"Neith",image:"https://wiki.smite2.com/images/thumb/GodCard_Neith.png/720px-GodCard_Neith.png?e757b",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 25%"},{id:39,name:"Nemesis",image:"https://wiki.smite2.com/images/thumb/GodCard_Nemesis.png/720px-GodCard_Nemesis.png?87e68",roles:["Jungle","Solo"],skins:[""],voiceLine:"",position:"center 20%"},{id:20,name:"Nu Wa",image:"https://wiki.smite2.com/images/thumb/GodCard_Nu_Wa.png/720px-GodCard_Nu_Wa.png?75202",roles:["Mid","Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:58,name:"Odin",image:"https://wiki.smite2.com/images/thumb/GodCard_Odin.png/720px-GodCard_Odin.png?87e68",roles:["Solo","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:61,name:"Pele",image:"https://wiki.smite2.com/images/thumb/GodCard_Pele.png/720px-GodCard_Pele.png?cc9cb",roles:["Jungle","Mid","Carry","Solo"],skins:[""],voiceLine:"",position:"center 25%"},{id:21,name:"Poseidon",image:"https://wiki.smite2.com/images/thumb/GodCard_Poseidon.png/720px-GodCard_Poseidon.png?dcbb5",roles:["Mid","Carry","Jungle"],skins:[""],voiceLine:"",position:"center 15%"},{id:68,name:"Princess Bari",image:"https://wiki.smite2.com/images/thumb/GodCard_Princess_Bari.png/720px-GodCard_Princess_Bari.png?cc9cb",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:55,name:"Ra",image:"https://wiki.smite2.com/images/thumb/GodCard_Ra.png/720px-GodCard_Ra.png?b6c55",roles:["Mid","Solo"],skins:[""],voiceLine:"",position:"center 15%"},{id:52,name:"Rama",image:"https://wiki.smite2.com/images/thumb/GodCard_Rama.png/720px-GodCard_Rama.png?cc9cb",roles:["Carry"],skins:[""],voiceLine:"",position:"center 20%"},{id:23,name:"Scylla",image:"https://wiki.smite2.com/images/thumb/GodCard_Scylla.png/720px-GodCard_Scylla.png?c2048",roles:["Mid"],skins:[""],voiceLine:"",position:"center 25%"},{id:9,name:"Sobek",image:"https://wiki.smite2.com/images/thumb/GodCard_Sobek.png/720px-GodCard_Sobek.png?b6c55",roles:["Support","Solo"],skins:[""],voiceLine:"",position:"center 25%"},{id:24,name:"Sol",image:"https://wiki.smite2.com/images/thumb/GodCard_Sol.png/720px-GodCard_Sol.png?cc9cb",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:59,name:"Sun Wukong",image:"https://wiki.smite2.com/images/thumb/GodCard_SunWukong.png/720px-GodCard_SunWukong.png?13d5c",roles:["Solo","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:40,name:"Susano",image:"https://wiki.smite2.com/images/thumb/GodCard_Susano.png/720px-GodCard_Susano.png?dcbb5",roles:["Jungle","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:41,name:"Thanatos",image:"https://wiki.smite2.com/images/thumb/GodCard_Thanatos.png/720px-GodCard_Thanatos.png?c2048",roles:["Jungle","Solo"],skins:[""],voiceLine:"",position:"center 15%"},{id:69,name:"The Morrigan",image:"https://wiki.smite2.com/images/thumb/GodCard_The_Morrigan.png/720px-GodCard_The_Morrigan.png?75202",roles:["Carry","Mid","Support","Solo","Jungle"],skins:[""],voiceLine:"",position:"center 20%"},{id:62,name:"Thor",image:"https://wiki.smite2.com/images/thumb/GodCard_Thor.png/720px-GodCard_Thor.png?e757b",roles:["Jungle","Solo","Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:53,name:"Ullr",image:"https://wiki.smite2.com/images/thumb/GodCard_Ullr.png/720px-GodCard_Ullr.png?55475",roles:["Carry","Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:56,name:"Vulcan",image:"https://wiki.smite2.com/images/thumb/GodCard_Vulcan.png/720px-GodCard_Vulcan.png?cc9cb",roles:["Mid"],skins:[""],voiceLine:"",position:"center 20%"},{id:54,name:"Yemoja",image:"https://wiki.smite2.com/images/thumb/GodCard_Yemoja.png/720px-GodCard_Yemoja.png?75202",roles:["Support"],skins:[""],voiceLine:"",position:"center 20%"},{id:10,name:"Ymir",image:"https://wiki.smite2.com/images/thumb/GodCard_Ymir.png/720px-GodCard_Ymir.png?7859a",roles:["Support","Solo","Jungle"],skins:[""],voiceLine:"",position:"center 10%"},{id:26,name:"Zeus",image:"https://wiki.smite2.com/images/thumb/GodCard_Zeus.png/720px-GodCard_Zeus.png?75202",roles:["Mid","Carry"],skins:[""],voiceLine:"",position:"center 15%"}],YM=()=>{const[n,e]=j.useState(!1),[t,r]=j.useState(.1),[s,a]=j.useState(new Map),l=p=>{if(n)return;let y=s.get(p);if(y)y.currentTime=0,y.volume=t,y.play().catch(v=>{console.error("Error playing audio:",v)});else{const v=p.replace(/ /g,"%20");y=new Audio(`${v}.ogg`),y.preload="auto",y.volume=t,a(S=>new Map(S).set(p,y));const E=()=>{y.currentTime=0,y.volume=t,y.play().catch(S=>{console.error("Error playing audio:",S)})};y.readyState>=2?E():(y.addEventListener("loadeddata",E,{once:!0}),y.addEventListener("canplaythrough",E,{once:!0}))}},h=p=>{r(p),s.forEach(y=>{y.volume=p})},f=()=>{e(p=>!p)};return j.useEffect(()=>{s.forEach(p=>{p.volume=n?0:t})},[n,t,s]),{isMuted:n,volume:t,playAudio:l,handleVolumeChange:h,toggleMute:f}},GS=j.createContext(null),yf=()=>{const n=j.useContext(GS);if(!n)throw new Error("useAudioContext must be used within an AudioProvider");return n},F_=({children:n})=>{const e=YM(),t=j.useRef(!1),r=j.useCallback(()=>{if(t.current)return;t.current=!0;const a=new Audio("data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=");a.volume=0,a.play().catch(()=>{}),console.log("Audio unlocked")},[]),s={...e,unlockAudio:r};return T.jsx(GS.Provider,{value:s,children:n})},gm=["A","B","B","A","A","B","B","A","A","B"],JM=({mode:n,initialState:e})=>{const[t]=j.useState(fs),[r,s]=j.useState(e?.phase||"BAN"),[a,l]=j.useState(e?.currentTeam||"A"),[h,f]=j.useState([]),p=()=>{if(!e?.picks)return{A:Array(5).fill(null),B:Array(5).fill(null)};const x=R=>!R||!Array.isArray(R)?Array(5).fill(null):R.map(O=>O?typeof O=="string"?fs.find(V=>V.name===O)||null:O:null);return{A:x(e.picks.A),B:x(e.picks.B)}},y=()=>{if(!e?.bans)return{A:Array(3).fill(null),B:Array(3).fill(null)};const x=R=>R.map(O=>O?typeof O=="string"?fs.find(V=>V.name===O)||null:O:null);return{A:x(e.bans.A),B:x(e.bans.B)}},[v,E]=j.useState(p()),[S,A]=j.useState(y()),[N,L]=j.useState(e?.aspects||{A:Array(5).fill(!1),B:Array(5).fill(!1)}),{playAudio:U}=yf();return{mode:n,characters:t,phase:r,currentTeam:a,picks:v,bans:S,aspects:N,handleCharacterSelect:x=>{if(U(x.name),n!=="freedom")if(f(R=>[...R,{picks:v,bans:S,phase:r,currentTeam:a}]),r==="BAN")A(R=>{const O={...R},V=[...R[a]],b=V.findIndex(ve=>ve===null);if(b!==-1)V[b]=x;else return R;return O[a]=V,O.A.filter(Boolean).length+O.B.filter(Boolean).length>=6?(s("PICK"),l(gm[0])):l(ve=>ve==="A"?"B":"A"),O});else{const R=v.A.filter(Boolean).length+v.B.filter(Boolean).length;E(V=>{const b={...V},ke=[...b[a]],ve=ke.findIndex(Ke=>Ke===null);return ve!==-1&&(ke[ve]=x),b[a]=ke,b});const O=R+1;O<gm.length&&l(gm[O])}},handleDragStart:(x,R)=>{x.dataTransfer.setData("characterId",R.id.toString())},handleDragOver:x=>{x.preventDefault()},handleDrop:(x,R,O,V)=>{const b=parseInt(x.dataTransfer.getData("characterId")),ke=t.find(ve=>ve.id===b);ke&&(U(ke.name),O==="ban"?A(ve=>({...ve,[R]:[...ve[R].slice(0,V),ke,...ve[R].slice(V+1)]})):E(ve=>({...ve,[R]:[...ve[R].slice(0,V),ke,...ve[R].slice(V+1)]})))},handleUndo:()=>{if(h.length>0){const x=h.pop();x&&(E(x.picks),A(x.bans),s(x.phase),l(x.currentTeam))}},handleClear:()=>{E({A:Array(5).fill(null),B:Array(5).fill(null)}),A({A:Array(3).fill(null),B:Array(3).fill(null)}),s("BAN"),l("A"),f([])},toggleAspect:(x,R)=>{L(O=>{const V={...O};return V[x]=[...O[x]],V[x][R]=!O[x][R],V})}}},XM=({initialState:n,draftId:e,currentUser:t})=>{const[r]=j.useState(fs),{playAudio:s}=yf(),a=j.useRef(n),[l,h]=j.useState(n?.status||"lobby"),[f,p]=j.useState({A:[],B:[]}),[y,v]=j.useState({A:Array(5).fill(!1),B:Array(5).fill(!1)}),[E,S]=j.useState(!1);return j.useEffect(()=>{if(!n||!t)return;h(n.status);const q=n.bans?.A||[],G=n.bans?.B||[],Q=O=>O.map(V=>fs.find(b=>b.name===V)||null);p({A:Q(q),B:Q(G)});const{pickOrder:Z,currentPickIndex:ie,status:D,picks:k,teamA:x,teamB:R}=n;if((D==="banning"||D==="picking")&&ie<Z.length){const V=Z[ie].team,ke=(V==="teamA"?x:R).captain===t.uid;let ve=0;if(D==="picking")for(let Ke=ie;Ke<Z.length&&(Z[Ke].team===V&&Z[Ke].type==="pick");Ke++)ve++;if(ve>1){const Ke=n[V].players,We=Object.keys(Ke).includes(t.uid);let se=!1;if(ke)for(let pe=0;pe<ve;pe++){const ae=ie+pe;if(!k[ae]){se=!0;break}}else for(let pe=0;pe<ve;pe++){const ae=ie+pe;if(Z[ae]?.uid===t.uid&&!k[ae]){se=!0;break}}S(We&&se)}else{const Ke=Z[ie],We=t?.uid===Ke.uid;S(We||ke)}}else S(!1);a.current=n},[n,t]),{mode:"standard",characters:r,phase:l,picks:{A:[],B:[]},bans:f,aspects:y,isMyTurn:E,handleCharacterSelect:async q=>{if(!e||!t)return;const G=wt(qe,"drafts",e);s(q.name);try{await $w(qe,async Q=>{const Z=await Q.get(G);if(!Z.exists())throw new Error("Draft document does not exist!");const ie=Z.data(),{status:D,pickOrder:k,currentPickIndex:x,bans:R,picks:O,teamA:V,teamB:b}=ie;let ke=!1,ve=-1;const Ke=k[x];if(!Ke)return;const pe=(Ke.team==="teamA"?V:b).captain===t.uid;if(D==="banning")ke=k[x].uid===t.uid||pe,ve=x;else if(D==="picking"){const de=k[x].team;let Ae=0;for(let we=x;we<k.length&&(k[we].team===de&&k[we].type==="pick");we++)Ae++;if(Ae>0)if(pe)for(let we=0;we<Ae;we++){const Re=x+we;if(!O[Re]){ke=!0,ve=Re;break}}else for(let we=0;we<Ae;we++){const Re=x+we;if(k[Re]?.uid===t.uid&&!O[Re]){ke=!0,ve=Re;break}}else(k[x].uid===t.uid||pe)&&(ke=!0,ve=x)}if(!ke){console.warn("Not your turn or you have already picked.");return}const ae=[...R?.A||[],...R?.B||[]],B=Object.values(O||{}).map(de=>de.character);if(ae.includes(q.name)||B.includes(q.name)){console.warn("Character already taken.");return}const Y={};if(D==="banning"){const de=k[x].team.slice(-1),Ae=R[de]||[];Y[`bans.${de}`]=[...Ae,q.name],Y.currentPickIndex=x+1,k[Y.currentPickIndex]?.type==="pick"&&(Y.status="picking")}else if(D==="picking"){const de=k[ve].uid;Y[`picks.${ve}`]={uid:de,character:q.name};const Ae={...O,[ve]:{uid:de,character:q.name}},we=k[x].team;let Re=0;for(let be=x;be<k.length&&(k[be].team===we&&k[be].type==="pick");be++)Re++;let je=0;for(let be=0;be<Re;be++)Ae[x+be]&&je++;if(je===Re){const be=x+Re;Y.currentPickIndex=be,be>=k.length&&(Y.status="complete")}}Object.keys(Y).length>0&&(Y.lastActionTimestamp=co(),Q.update(G,Y))})}catch(Q){console.error("Draft transaction failed: ",Q)}},handleReset:async()=>{if(!e)return;const q=wt(qe,"drafts",e);await Pa(q,{status:"lobby",pickOrder:[],currentPickIndex:0,teamA:{name:"Team A",captain:null,players:{}},teamB:{name:"Team B",captain:null,players:{}},bans:{A:[],B:[]},picks:{},availableGods:fs.map(G=>G.name),lastActionTimestamp:co()})},handleLeave:async()=>{if(!e||!t)return;const q=wt(qe,"drafts",e);try{await $w(qe,async G=>{const Q=await G.get(q);if(!Q.exists())return;const Z=Q.data(),ie={},D=t.uid;let k=null;if(Z.teamA.players[D]?k="teamA":Z.teamB.players[D]&&(k="teamB"),k){const x=Z.leftPlayers||[];x.includes(D)||(ie.leftPlayers=[...x,D]);const R={...Z[k].players};if(delete R[D],ie[`${k}.players`]=R,Z[k].captain===D){const ke=Object.keys(R);ie[`${k}.captain`]=ke.length>0?ke[0]:null}const O=k==="teamA"?"teamB":"teamA",V=k==="teamA"?Object.keys(ie["teamA.players"]).length:Object.keys(Z.teamA.players).length,b=k==="teamB"?Object.keys(ie["teamB.players"]).length:Object.keys(Z.teamB.players).length;V===0&&b===0&&(ie.status="archived"),ie.lastActionTimestamp=co(),G.update(q,ie)}})}catch(G){console.error("Failed to leave draft: ",G)}},handleDragStart:()=>{},handleDragOver:()=>{},handleDragLeave:()=>{},handleDrop:()=>{},handleStandardDrop:()=>{},handleUndo:()=>{},handleClear:()=>{},toggleAspect:(q,G)=>{v(Q=>{const Z={...Q};return Z[q]=[...Q[q]],Z[q][G]=!Q[q][G],Z})}}},qS=(n,e)=>(j.useEffect(()=>{if(!n||!e)return;const r=AE(RE,`/status/${n}`),s={state:"offline",last_changed:mm(),draftId:e},a={state:"online",last_changed:mm(),draftId:e};return kE(r).set(s).then(()=>{xE(r,a)}),()=>{kE(r).cancel()}},[n,e]),{setViewingFinalTeams:j.useCallback(()=>{if(!n||!e)return;const r=AE(RE,`/status/${n}`);xE(r,{state:"viewingFinalTeams",last_changed:mm(),draftId:e})},[n,e])}),KS=j.createContext(null),Wr=()=>{const n=j.useContext(KS);if(!n)throw new Error("useDraftContext must be used within a DraftProvider");return n},j_=({children:n,mode:e,initialState:t,draftId:r,currentUser:s,teamAName:a,teamBName:l,teamAColor:h,teamBColor:f})=>{const p=r?XM({initialState:t,draftId:r,currentUser:s}):JM({mode:e,initialState:t});qS(s?.uid,r);const y={...p,draftId:r,initialState:t,currentUser:s,teamAName:a,teamBName:l,teamAColor:h,teamBColor:f};return T.jsx(KS.Provider,{value:y,children:n})},ZM=()=>{const{isMuted:n,toggleMute:e,volume:t,handleVolumeChange:r}=yf();return T.jsxs("div",{className:"flex items-center gap-2.5",children:[T.jsx("button",{onClick:e,className:"text-2xl",children:n?"🔇":"🔊"}),T.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:t,onChange:s=>r(parseFloat(s.target.value)),className:"w-24"})]})};var QS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},PE=fr.createContext&&fr.createContext(QS),e4=["attr","size","title"];function t4(n,e){if(n==null)return{};var t=n4(n,e),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(s=0;s<a.length;s++)r=a[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function n4(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function bd(){return bd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},bd.apply(this,arguments)}function bE(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Nd(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?bE(Object(t),!0).forEach(function(r){r4(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):bE(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function r4(n,e,t){return e=i4(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i4(n){var e=s4(n,"string");return typeof e=="symbol"?e:e+""}function s4(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function YS(n){return n&&n.map((e,t)=>fr.createElement(e.tag,Nd({key:t},e.attr),YS(e.child)))}function fc(n){return e=>fr.createElement(o4,bd({attr:Nd({},n.attr)},e),YS(n.child))}function o4(n){var e=t=>{var{attr:r,size:s,title:a}=n,l=t4(n,e4),h=s||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),fr.createElement("svg",bd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,l,{className:f,style:Nd(Nd({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),a&&fr.createElement("title",null,a),n.children)};return PE!==void 0?fr.createElement(PE.Consumer,null,t=>e(t)):e(QS)}function NE(n){return fc({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"},child:[]}]})(n)}function JS(n){return fc({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(n)}function DE(n){return fc({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"},child:[]}]})(n)}function a4(n){return fc({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function XS(n){return fc({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(n)}const U_=()=>{const{theme:n,toggleTheme:e}=ll(),t=n==="dark";return T.jsxs("button",{onClick:e,className:`
        relative flex items-center w-18 h-9 rounded-full p-1 transition-all duration-300 ease-in-out transform hover:scale-105
        ${t?"bg-gradient-to-r from-purple-900 via-blue-900 to-indigo-900 hover:from-purple-800 hover:via-blue-800 hover:to-indigo-800 shadow-lg shadow-purple-500/25":"bg-gradient-to-r from-orange-400 via-yellow-400 to-orange-500 hover:from-orange-300 hover:via-yellow-300 hover:to-orange-400 shadow-lg shadow-orange-400/25"}
        focus:outline-none focus:ring-2 focus:ring-cyan-400 focus:ring-opacity-60 border border-opacity-30
        ${t?"border-cyan-400":"border-orange-200"}
      `,children:[T.jsxs("div",{className:`
          relative w-7 h-7 rounded-full shadow-xl transform transition-all duration-500 ease-out flex items-center justify-center
          ${t?"translate-x-0 bg-gradient-to-br from-slate-800 to-slate-900 border-2 border-cyan-400":"translate-x-9 bg-gradient-to-br from-white to-gray-100 border-2 border-orange-300"}
        `,children:[T.jsx("div",{className:`absolute inset-0 rounded-full transition-opacity duration-300 ${t?"bg-cyan-400/20":"bg-orange-400/20"}`}),t?T.jsx(DE,{className:"text-cyan-300 text-sm z-10 drop-shadow-sm"}):T.jsx(NE,{className:"text-orange-600 text-sm z-10 drop-shadow-sm"})]}),T.jsxs("div",{className:"absolute inset-0 rounded-full overflow-hidden",children:[T.jsx("div",{className:`absolute inset-0 transition-opacity duration-300 ${t?"opacity-100":"opacity-0"}`,children:T.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-600/10 to-blue-600/10"})}),T.jsx("div",{className:`absolute inset-0 transition-opacity duration-300 ${t?"opacity-0":"opacity-100"}`,children:T.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-300/10 to-orange-300/10"})})]}),T.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-2 pointer-events-none",children:[T.jsx("div",{className:`transition-all duration-300 ${t?"opacity-0 scale-75":"opacity-40 scale-90"}`,children:T.jsx(DE,{className:"text-white text-xs drop-shadow-md"})}),T.jsx("div",{className:`transition-all duration-300 ${t?"opacity-40 scale-90":"opacity-0 scale-75"}`,children:T.jsx(NE,{className:"text-cyan-200 text-xs drop-shadow-md"})})]})]})},B_=n=>{const e=n.indexOf("@");if(e<=3)return n;const t=n.substring(0,3),r=n.substring(e);return`${t}***${r}`},ZS=({user:n,userProfile:e})=>{const[t,r]=j.useState(!1),[s,a]=j.useState(!1),l=Qn(),{theme:h,toggleTheme:f}=ll(),p=()=>{$T($r),l("/")},y=()=>{navigator.clipboard.writeText(n.uid),a(!0),setTimeout(()=>a(!1),2e3)};return T.jsxs("div",{className:"relative",children:[T.jsxs("button",{onClick:()=>r(!t),className:"flex items-center gap-2 text-white font-bold py-2 px-4 rounded focus:outline-none",children:[T.jsx("span",{children:e?.displayName||B_(n.email||"")}),T.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${t?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),t&&T.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-gray-700 rounded-md shadow-lg z-10",children:T.jsxs("div",{className:"py-1",children:[T.jsxs("div",{className:"px-4 py-2",children:[T.jsx("span",{className:"text-sm text-gray-400",children:"Player ID"}),T.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[T.jsx("input",{type:"text",value:n.uid,readOnly:!0,className:"w-full bg-gray-800 text-white text-xs rounded px-2 py-1 focus:outline-none"}),T.jsx("button",{onClick:y,className:"bg-gray-600 hover:bg-gray-500 text-white font-bold py-1 px-2 rounded text-xs",children:s?"Copied!":"Copy"})]})]}),T.jsx("div",{className:"border-t border-gray-600 my-1"}),T.jsx("button",{onClick:()=>l("/profile"),className:"block w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-600",children:"Profile"}),T.jsx("button",{onClick:p,className:"block w-full text-left px-4 py-2 text-sm text-white hover:bg-gray-600",children:"Logout"})]})})]})},l4=()=>{const{user:n,userProfile:e}=dc(),t=Qn(),r=_r(),s=r.pathname.includes("/local")||r.pathname.includes("/draft/");let a=null;try{s&&(a=Wr())}catch{console.warn("Draft context not available in header")}const l=async()=>{r.pathname.startsWith("/draft/"),t("/")},h=()=>{if(!a){t("/final-teams");return}const{initialState:f,picks:p,bans:y,draftId:v,phase:E,currentTeam:S,mode:A,aspects:N}=a,L=!!v;let U;if(L&&f){const q=[],G=[];Object.entries(f.picks).forEach(([D,k])=>{const x=f.pickOrder[parseInt(D,10)];x?.team==="teamA"?q.push(k):x?.team==="teamB"&&G.push(k)});const Q={...f.teamA.players,...f.teamB.players},Z=q.reduce((D,k,x)=>{const R=`final-A-${x}`;return D[R]={uid:R,displayName:Q[k.uid]?.displayName||"Unknown Player",pick:k.character},D},{}),ie=G.reduce((D,k,x)=>{const R=`final-B-${x}`;return D[R]={uid:R,displayName:Q[k.uid]?.displayName||"Unknown Player",pick:k.character},D},{});U={teamA:{name:f.teamA?.name||"Team A",players:Z},teamB:{name:f.teamB?.name||"Team B",players:ie},bans:{A:f.bans?.A||[],B:f.bans?.B||[]},status:f.status,pickOrder:f.pickOrder,currentPickIndex:f.currentPickIndex}}else{const q=p.A.map((Q,Z)=>({uid:`local-A-${Z}`,displayName:`Player ${Z+1}`,pick:Q?Q.name:"N/A"})),G=p.B.map((Q,Z)=>({uid:`local-B-${Z}`,displayName:`Player ${Z+6}`,pick:Q?Q.name:"N/A"}));U={teamA:{name:"ORDER",players:q.reduce((Q,Z)=>({...Q,[Z.uid]:Z}),{})},teamB:{name:"CHAOS",players:G.reduce((Q,Z)=>({...Q,[Z.uid]:Z}),{})},bans:{A:y.A.map(Q=>Q?Q.name:null).filter(Boolean),B:y.B.map(Q=>Q?Q.name:null).filter(Boolean)},status:"complete",pickOrder:[],currentPickIndex:0}}t("/final-teams",{state:{draft:U,rawDraftState:{picks:p,bans:y,phase:E,currentTeam:S,mode:A,aspects:N}}})};return T.jsxs("div",{className:"bg-dark-blue flex items-center justify-between px-5 py-3 border-b-2 border-light-blue shadow-lg",children:[T.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[T.jsxs("button",{onClick:l,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors duration-200 shadow-md flex-shrink-0",title:"Return to Home",children:[T.jsx(JS,{className:"text-lg"}),T.jsx("span",{className:"hidden sm:inline",children:"HOME"})]}),T.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:T.jsx(ZM,{})})]}),T.jsxs("div",{className:"flex flex-col items-center justify-center px-4 flex-shrink-0",children:[T.jsx("div",{className:"text-xl lg:text-2xl font-bold tracking-[2px] text-gold text-center text-shadow-[0_0_10px_rgba(255,215,0,0.5)]",children:"SMITE 2 PICK/BAN SIMULATOR"}),T.jsx("div",{className:"text-red-400 text-lg lg:text-xl font-semibold",children:"BETA - NOT FINAL"})]}),T.jsxs("div",{className:"flex items-center gap-3 justify-end min-w-0 flex-1",children:[T.jsx(U_,{}),s&&T.jsxs("button",{onClick:h,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors duration-200 shadow-md flex-shrink-0",title:"View Final Teams",children:[T.jsx(XS,{className:"text-lg"}),T.jsx("span",{className:"hidden sm:inline",children:"FINAL TEAMS"})]}),n&&e?T.jsx(ZS,{user:n,userProfile:e}):T.jsx("button",{onClick:()=>t("/login"),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded flex-shrink-0",children:"Login"})]})]})},OE=({initialName:n,onNameChange:e,team:t})=>{const r=j.useRef(null);j.useEffect(()=>{r.current&&r.current.textContent!==n&&(r.current.textContent=n)},[n]);const s=a=>{e(a.currentTarget.textContent||"")};return T.jsx("div",{className:`text-2xl font-bold uppercase tracking-wider mb-1 p-1 rounded-md outline-none transition-all duration-200 bg-black/20 border border-white/10 hover:bg-black/30 hover:border-white/20 focus:bg-black/40 focus:shadow-[0_0_0_1px_var(--light-blue)] focus:border-light-blue ${t==="A"?"text-order shadow-[0_0_5px_rgba(0,204,255,0.5)]":"text-chaos shadow-[0_0_5px_rgba(255,51,102,0.5)]"}`,contentEditable:"true",suppressContentEditableWarning:!0,spellCheck:"false",ref:r,onInput:s})},u4=({teamAName:n,teamBName:e,onTeamANameChange:t,onTeamBNameChange:r,teamAColor:s,teamBColor:a})=>{const{handleUndo:l,handleClear:h,currentTeam:f,phase:p,draftId:y,handleReset:v,handleLeave:E,initialState:S,picks:A,bans:N,mode:L}=Wr();Qn();const U=!!y,q=()=>{if(U&&S){const{status:G,pickOrder:Q,currentPickIndex:Z,teamA:ie,teamB:D}=S;if(G==="complete")return T.jsx("span",{children:"DRAFT COMPLETE"});if(G==="lobby")return T.jsx("span",{children:"DRAFT LOBBY"});const k=Q[Z];if(!k)return T.jsx("span",{children:"Waiting..."});let x=0;if(G==="picking"){const ke=Q[Z].team;for(let ve=Z;ve<Q.length&&(Q[ve].team===ke&&Q[ve].type==="pick");ve++)x++}if(x>1){const ke=k.team==="teamA"?n:e,ve=k.team==="teamA"?s:a;return T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{color:ve},children:ke.toUpperCase()}),T.jsxs("span",{children:[" TO PICK (",x,")"]})]})}const O=(k.team==="teamA"?ie:D).players[k.uid],V=k.team==="teamA"?s:a,b=G==="banning"?"BAN":"PICK";return T.jsxs(T.Fragment,{children:[T.jsx("span",{style:{color:V},children:O.displayName.toUpperCase()}),T.jsx("span",{children:" TO "}),T.jsx("span",{className:b==="BAN"?"text-red-500":"text-teal-400",children:b})]})}return L==="freedom"?T.jsx("span",{children:"Free Mode - Drag any god to any position"}):T.jsxs(T.Fragment,{children:["Current Phase -"," ",T.jsx("span",{className:`turn-text ${f==="A"?"text-teal-400":"text-red-500"}`,style:{color:f==="A"?s:a},children:f==="A"?`${n.toUpperCase()}`:`${e.toUpperCase()}`})," ","-"," ",T.jsx("span",{className:`phase-text ${p==="BAN"?"text-red-500 shadow-[0_0_5px_rgba(255,51,51,0.5)] font-bold":"text-teal-400 font-bold"}`,children:p})]})};return T.jsxs("div",{className:"flex items-center justify-between py-4 px-6 bg-black/50 border-b border-light-blue shadow-[0_2px_10px_rgba(0,204,255,0.3)] relative z-20 min-h-[80px]",children:[T.jsxs("div",{className:"flex flex-col items-center flex-shrink-0",style:{width:"20%"},children:[T.jsx(OE,{initialName:n,onNameChange:t,team:"A"}),T.jsx("div",{className:"text-sm font-bold uppercase tracking-wider text-order mt-1",children:"1ST PICK"})]}),T.jsxs("div",{className:"flex items-center justify-center gap-4 flex-shrink-0",children:[!U&&T.jsx("button",{className:"bg-gray-700 text-white border border-gray-500 rounded-full py-2 px-4 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-gray-500 hover:border-gray-400",onClick:l,children:"UNDO"}),U&&T.jsx("button",{className:"bg-red-700 text-white border border-red-500 rounded-full py-2 px-4 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-red-500 hover:border-red-400",onClick:v,children:"RESET"}),T.jsx("div",{className:"bg-black/70 px-6 py-3 rounded-full text-center border border-light-blue shadow-border-glow text-lg lg:text-xl flex justify-center items-center min-w-[280px]",children:T.jsx("div",{className:"truncate",children:q()})}),!U&&T.jsx("button",{className:"bg-red-700 text-white border border-red-500 rounded-full py-2 px-4 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-red-500 hover:border-red-400",onClick:h,children:"CLEAR"})]}),T.jsxs("div",{className:"flex flex-col items-center flex-shrink-0",style:{width:"20%"},children:[T.jsx(OE,{initialName:e,onNameChange:r,team:"B"}),T.jsx("div",{className:"text-sm font-bold uppercase tracking-wider text-chaos mt-1",children:"2ND PICK"})]})]})},ul=n=>n.image,Dd=[{name:"All",classes:"bg-gray-600 text-white",borderColor:"border-transparent",textColor:"text-gold"},{name:"Jungle",classes:"bg-jungle text-black",borderColor:"border-jungle",textColor:"text-jungle"},{name:"Support",classes:"bg-support text-white",borderColor:"border-support",textColor:"text-support"},{name:"Carry",classes:"bg-carry text-white",borderColor:"border-carry",textColor:"text-carry"},{name:"Mid",classes:"bg-mid text-white",borderColor:"border-mid",textColor:"text-mid"},{name:"Solo",classes:"bg-solo text-white",borderColor:"border-solo",textColor:"text-solo"}],c4=n=>{const e=Dd.find(t=>t.name===n);return e?e.borderColor:"border-transparent"},h4=n=>{const e=Dd.find(t=>t.name===n);return e?e.textColor:"text-gold"};function d4(){const{characters:n,initialState:e,picks:t,bans:r,handleCharacterSelect:s,handleDragStart:a,isMyTurn:l}=Wr(),[h,f]=j.useState("All"),p=S=>{const A=[...r?.A||[],...r?.B||[]].filter(Boolean).map(U=>U.name),N=[...t?.A||[],...t?.B||[]].filter(Boolean).map(U=>U.name);return!(A.includes(S.name)||N.includes(S.name))},y=n.filter(S=>h==null?!1:h==="All"?!0:S.roles.includes(h)),v=h==="All"?[...y].sort((S,A)=>S.name.localeCompare(A.name)):y,E=S=>{const A=l===void 0?!0:l;return p(S)&&A};return T.jsxs("div",{className:"flex flex-col h-full",children:[T.jsx("div",{className:"flex justify-around mb-5",children:T.jsx("div",{className:"flex justify-center gap-2.5 md:flex-wrap",children:Dd.map(S=>{const A=Dd.find(L=>L.name===S.name),N=h===S.name;return T.jsx("button",{className:`py-2 px-4 rounded-md cursor-pointer transition-all duration-200 border-2 ${N?`${A?.classes} text-white shadow-[0_0_10px_var(--${S.name.toLowerCase()}-color)]`:`bg-gray-800/50 ${A?.borderColor} ${A?.textColor} hover:bg-gray-700/70`}`,onClick:()=>f(h===S.name?null:S.name),children:S.name},S.name)})})}),T.jsx("div",{className:"flex-1 overflow-y-auto p-4 scroll-pt-2.5 scrollbar-custom",children:T.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(120px,1fr))] gap-4 p-4 justify-center",children:v.map(S=>{const A=h==="All"?S.roles[0]:h||S.roles[0],N=E(S),L=p(S);return T.jsxs("div",{className:`bg-gray-700 rounded-md overflow-hidden transition-transform duration-200 flex flex-col border-3 ${c4(A)} ${L?"":"opacity-30 cursor-not-allowed"} ${N?"cursor-pointer hover:transform hover:-translate-y-px hover:scale-105":"cursor-not-allowed grayscale"}`,onClick:()=>N&&s(S),draggable:N,onDragStart:U=>N&&a(U,S),children:[T.jsx("img",{src:ul(S),alt:S.name}),T.jsxs("div",{className:"p-2 text-center bg-black/80 flex flex-col justify-center gap-0.5 flex-grow min-h-[3.5em]",children:[T.jsx("div",{className:"font-bold text-sm text-white leading-tight overflow-hidden",children:S.name}),T.jsx("div",{className:`text-xs ${h4(A)}`,children:A})]})]},S.id)})})})]})}const f4=({bansA:n,bansB:e})=>{const{mode:t,phase:r,currentTeam:s,handleDragOver:a,handleDragLeave:l,handleDrop:h,handleStandardDrop:f}=Wr(),p=(y,v)=>([...n,...e].filter(Boolean).length,T.jsx("div",{className:`flex gap-2.5 ${y==="A"?"justify-start":"justify-end"}`,children:v.map((E,S)=>{let A=!1;if(r==="BAN"&&!E){const L=v.filter(Boolean).length;y===s&&S===L&&(A=!0)}return T.jsx("div",{className:`w-24 h-32 bg-black/50 border-2 border-gray-500 rounded-md flex items-center justify-center ${A?"shadow-[0_0_15px_5px_#ffdf00]":""}`,onDragOver:a,onDragLeave:l,onDrop:N=>t==="freedom"?h(N,y,"ban",S):f(N,y,"ban",S),children:E&&T.jsx("img",{src:ul(E),alt:E.name,className:"w-full h-full object-cover"})},S)})}));return T.jsxs("div",{className:"flex justify-between items-center p-4 bg-black/30 rounded-md mb-4",children:[p("A",n),T.jsx("div",{className:"text-2xl font-bold text-gray-400",children:"BANS"}),p("B",e)]})},e1=({isActive:n,isDisabled:e,onClick:t,position:r})=>{const s=a=>{a.preventDefault(),a.stopPropagation(),e||t()};return T.jsx("button",{onClick:s,disabled:e,className:`absolute top-1 ${r==="left"?"left-1":"right-1"} w-16 h-16 rounded-sm border transition-all duration-200 flex items-center justify-center z-10 ${e?"border-gray-600 bg-black/30 cursor-default opacity-50":n?"border-orange-500 bg-orange-500/20 shadow-lg hover:bg-orange-500/30 shadow-orange-500/30":"border-gray-500 bg-black/50 hover:border-gray-400 hover:bg-black/70 cursor-pointer"}`,title:e?"Select a god first":n?"Aspect: ON":"Aspect: OFF",children:T.jsx("img",{src:"/720px-Aspect_Burst.png",alt:"Aspect",className:`w-14 h-14 object-contain transition-all duration-200 ${e?"opacity-30 grayscale":n?"opacity-100 brightness-110 drop-shadow-sm":"opacity-50 grayscale"}`})})},LE=({team:n})=>{const{initialState:e,aspects:t,toggleAspect:r}=Wr();if(!e)return T.jsx("div",{className:"w-1/5",children:"Loading Team..."});const s=n==="A"?"teamA":"teamB",a=e[s],l=n==="A"?"border-order":"border-chaos";if(!a)return T.jsx("div",{className:"w-1/5",children:"Loading Team Data..."});const h=a.captain,f=e.pickOrder.map((S,A)=>({...S,originalIndex:A})).filter(S=>S.type==="pick"&&S.team===s).map(S=>S.originalIndex);for(;f.length<5;)f.push(-1);const{pickOrder:p,currentPickIndex:y,status:v}=e;let E=[];if(v==="picking"&&y<p.length){const S=p[y].team;if(s===S)for(let A=y;A<p.length&&(p[A].team===S&&p[A].type==="pick");A++)E.push(A)}else v==="banning"&&p[y]?.team===s&&E.push(y);return T.jsx("div",{className:"flex flex-col w-1/5 gap-2 py-2",children:f.map((S,A)=>{if(S===-1)return T.jsx("div",{className:`border-2 rounded-md h-full bg-black/30 ${l}`},`empty-${A}`);const N=e.pickOrder[S].uid,L=a.players[N],U=e.picks?.[S],q=U?fs.find(ie=>ie.name===U.character):null,G=q?{name:q.name,image:ul(q)}:null,Q=L?.uid===h,Z=E.includes(S)&&!U;return T.jsxs("div",{className:`border-2 rounded-md flex flex-col h-full justify-between overflow-hidden bg-black/30 relative ${l} ${Z?"shadow-[0_0_15px_5px_#ffdf00]":""}`,children:[T.jsxs("div",{className:"text-center p-1 bg-black/50 flex justify-between items-center",children:[T.jsx("p",{className:"font-bold text-white truncate",children:L?.displayName||"Empty Slot"}),Q&&T.jsx("p",{className:"text-xs text-yellow-400",children:"Captain"})]}),T.jsx("div",{className:"flex-grow flex items-center justify-center",children:G?T.jsx("img",{src:G.image,alt:G.name,className:"w-full h-full object-cover transform -translate-y-40"}):T.jsx("div",{className:"text-4xl text-gray-500",children:"?"})}),G&&T.jsx("div",{className:"text-white text-lg bg-black/70 absolute bottom-0 left-0 right-0 text-center p-1",children:G.name}),T.jsx(e1,{isActive:t[n]?.[A]||!1,isDisabled:!G,onClick:()=>r(n,A),position:n==="A"?"right":"left"})]},S)})})},ME=({team:n,picks:e})=>{const{currentTeam:t,phase:r,aspects:s,toggleAspect:a,picks:l}=Wr(),h=n==="A"?"border-order":"border-chaos";return T.jsx("div",{className:"flex flex-col w-1/5 gap-2 py-2",children:Array.from({length:5}).map((f,p)=>{const y=e[p],v=[...l?.A||[],...l?.B||[]].filter(Boolean).length;let E=!1;if(r==="PICK"&&!y&&t===n){const S=e.filter(Boolean).length,A=["A","B","B","A","A","B","B","A","A","B"];let N=0;for(let L=v;L<A.length&&A[L]===t;L++)N++;p>=S&&p<S+N&&(E=!0)}return T.jsxs("div",{className:`border-2 rounded-md flex flex-col h-full justify-between overflow-hidden bg-black/30 relative ${h} ${E?"shadow-[0_0_15px_5px_#ffdf00]":""}`,children:[T.jsx("div",{className:"text-center p-1 bg-black/50",children:T.jsxs("p",{className:"font-bold text-white",children:[n==="A"?"Order":"Chaos"," Pick ",p+1]})}),T.jsx("div",{className:"flex-grow flex items-center justify-center",children:y?T.jsx("img",{src:ul(y),alt:y.name,className:"w-full h-full object-cover transform -translate-y-40"}):T.jsx("div",{className:"text-4xl text-gray-500",children:"?"})}),y&&T.jsx("div",{className:"text-white text-lg bg-black/70 absolute bottom-0 left-0 right-0 text-center p-1",children:y.name}),T.jsx(e1,{isActive:s[n]?.[p]||!1,isDisabled:!y,onClick:()=>a(n,p),position:n==="A"?"right":"left"})]},p)})})},p4=()=>{const{draftId:n,currentUser:e}=Wr(),[t,r]=j.useState([]);j.useEffect(()=>{if(!n||!e)return;const a=xa(oo(qe,"drafts",n,"tradeRequests"),di("to","==",e.uid),di("status","==","pending")),l=_o(a,h=>{r(h.docs.map(f=>({id:f.id,...f.data()})))});return()=>l()},[n,e]);const s=async(a,l)=>{if(!n)return;const h=t.find(y=>y.id===a);if(!h)return;const f=h_(qe),p=wt(qe,"drafts",n,"tradeRequests",a);if(l){const y=wt(qe,"drafts",n),v=`teamA.players.${h.from}.pick`,E=`teamA.players.${h.to}.pick`;f.update(y,{[v]:h.toPick,[E]:h.fromPick}),f.update(p,{status:"accepted"})}else f.update(p,{status:"declined"});await f.commit()};return t.length===0?null:T.jsxs("div",{className:"absolute top-20 right-10 bg-gray-800 p-4 rounded-lg shadow-lg z-50",children:[T.jsx("h3",{className:"text-lg font-bold mb-2",children:"Incoming Trade Requests"}),t.map(a=>T.jsxs("div",{className:"p-2 border-b border-gray-700",children:[T.jsxs("p",{children:["From: ",a.fromName]}),T.jsxs("p",{children:["Your Pick: ",a.toPick]}),T.jsxs("p",{children:["Their Pick: ",a.fromPick]}),T.jsxs("div",{className:"flex gap-2 mt-2",children:[T.jsx("button",{onClick:()=>s(a.id,!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-2 rounded",children:"Accept"}),T.jsx("button",{onClick:()=>s(a.id,!1),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-2 rounded",children:"Decline"})]})]},a.id))]})},t1=({teamAName:n,onTeamANameChange:e,teamBName:t,onTeamBNameChange:r,teamAColor:s,teamBColor:a,mode:l,setMode:h})=>{const{theme:f}=ll(),{bans:p,picks:y,draftId:v}=Wr(),{unlockAudio:E}=yf(),S=!!v;return j.useEffect(()=>{const A=()=>{E(),window.removeEventListener("click",A)};return window.addEventListener("click",A),()=>{window.removeEventListener("click",A)}},[E]),T.jsxs("div",{className:`${f} font-sans overflow-hidden flex flex-col h-screen ${l}`,children:[T.jsx(l4,{}),T.jsx(p4,{}),T.jsx(u4,{teamAName:n,onTeamANameChange:e,teamBName:t,onTeamBNameChange:r,teamAColor:s,teamBColor:a}),T.jsxs("div",{className:"flex overflow-y-auto px-4 gap-4 h-full w-full relative",children:[S?T.jsx(LE,{team:"A"}):T.jsx(ME,{team:"A",picks:y.A}),T.jsxs("div",{className:"flex-1 flex flex-col",children:[T.jsx(f4,{bansA:p.A,bansB:p.B}),T.jsx("div",{className:"flex-1 bg-black/30 rounded-md overflow-y-auto flex flex-col border-2 border-light-blue shadow-[0_0_10px_rgba(0,204,255,0.3)] p-2.5 lg:p-4",children:T.jsx(d4,{})})]}),S?T.jsx(LE,{team:"B"}):T.jsx(ME,{team:"B",picks:y.B})]})]})},z_=()=>{const[n]=Wd($r),[e,t]=j.useState([]),[r,s]=j.useState([]),[a,l]=j.useState(!0),[h,f]=j.useState(null),p=j.useCallback(N=>{const L=xa(oo(qe,"friends"),di("members","array-contains",N.uid));return _o(L,async U=>{if(l(!0),U.empty){t([]),l(!1);return}const q=U.docs.map(G=>G.data().members).flat().filter(G=>G!==N.uid);if(q.length>0){const G=xa(oo(qe,"users"),di("uid","in",q)),Z=(await Bw(G)).docs.map(ie=>({id:ie.id,...ie.data()}));t(Z)}else t([]);l(!1)},()=>{f("Failed to fetch friends."),l(!1)})},[]),y=j.useCallback(N=>{const L=oo(qe,"friendRequests"),U=xa(L,di("recipientId","==",N.uid),di("status","==","pending"));return _o(U,q=>{s(q.docs.map(G=>({id:G.id,...G.data()})))},()=>f("Failed to fetch friend requests."))},[]);return j.useEffect(()=>{if(n){const N=p(n),L=y(n);return()=>{N(),L()}}else t([]),s([]),l(!1)},[n,p,y]),{friends:e,incomingRequests:r,sendFriendRequest:async N=>{if(!n)return f("You must be logged in.");if(n.uid===N)return f("You can't send a request to yourself.");f(null);try{if((await Bw(xa(oo(qe,"users"),di("uid","==",N)))).empty)return f("User not found.");const q=[n.uid,N].sort().join("_"),G=wt(qe,"friendRequests",q);await DC(G,{id:q,senderId:n.uid,senderEmail:n.email,recipientId:N,status:"pending",createdAt:co()})}catch{f("Failed to send friend request.")}},acceptFriendRequest:async(N,L)=>{if(n)try{const U=h_(qe),q=[n.uid,L].sort().join("_"),G=wt(qe,"friends",q);U.set(G,{members:[n.uid,L],createdAt:co()});const Q=wt(qe,"friendRequests",N);U.delete(Q),await U.commit()}catch(U){console.error("Error accepting friend request:",U),f("Failed to accept friend request.")}},declineFriendRequest:async N=>{try{await zw(wt(qe,"friendRequests",N))}catch{f("Failed to decline friend request.")}},removeFriend:async N=>{if(!n)return f("You must be logged in.");try{const L=[n.uid,N].sort().join("_"),U=wt(qe,"friends",L);await zw(U)}catch{f("Failed to remove friend.")}},loading:a,error:h}},m4=()=>{const[n]=Wd($r),{friends:e}=z_(),[t,r]=j.useState([]),[s,a]=j.useState(!0),[l,h]=j.useState(null);return j.useEffect(()=>{if(!n){r([]),a(!1);return}if(e.length===0){r([]),a(!1);return}a(!0);const f=e.map(E=>E.uid);if(f.length===0){r([]),a(!1);return}const p=oo(qe,"drafts"),y=xa(p,di("hostId","in",f),di("status","!=","archived")),v=_o(y,E=>{const S=E.docs.map(A=>({id:A.id,...A.data()})).filter(A=>!A.leftPlayers?.includes(n.uid));r(S),a(!1)},E=>{console.error(E),h("Failed to fetch friend lobbies."),a(!1)});return()=>v()},[n,e]),{friendDrafts:t,loading:s,error:l}};function g4(n){if(!n||!n.seconds)return"just now";const e=new Date,t=new Date(n.seconds*1e3),r=Math.floor((e.getTime()-t.getTime())/1e3);if(r<60)return`${r} seconds ago`;const s=Math.floor(r/60);if(s<60)return`${s} minutes ago`;const a=Math.floor(s/60);return a<24?`${a} hours ago`:`${Math.floor(a/24)} days ago`}const n1=()=>{const{friendDrafts:n,loading:e,error:t}=m4(),{friends:r}=z_(),s=Qn();if(e)return T.jsx("p",{className:"text-white",children:"Loading friend lobbies..."});if(t)return T.jsx("p",{className:"text-red-500",children:t});if(n.length===0)return T.jsx("p",{className:"text-gray-400",children:"No active lobbies from your friends."});const a=l=>{const h=r.find(f=>f.uid===l);return h?h.displayName:"A friend"};return T.jsxs("div",{className:"mt-6 w-full max-w-md",children:[T.jsx("h2",{className:"text-2xl text-gold mb-4",children:"Join a Friend's Lobby"}),T.jsx("ul",{className:"bg-gray-900 p-4 rounded",children:n.map(l=>T.jsxs("li",{className:"flex justify-between items-center p-2 border-b border-gray-700",children:[T.jsxs("div",{children:[T.jsx("span",{className:"text-white",children:l.draftName}),T.jsxs("p",{className:"text-gray-400 text-sm",children:["Hosted by ",a(l.hostId)," - ",g4(l.createdAt)]})]}),T.jsx("button",{onClick:()=>s(`/lobby/${l.id}`),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-3 rounded",children:"Join"})]},l.id))})]})},_4=()=>{const n=Qn(),{user:e,userProfile:t}=dc(),{theme:r}=ll(),a={light:{bg:"bg-gray-200",text:"text-gray-800",cardBg:"bg-gray-50/70",cardBorder:"border-gray-300",buttonText:"text-white",headerText:"text-blue-600",subHeaderText:"text-gray-600",footerBg:"bg-gray-200/80",footerBorder:"border-gray-300",backgroundImage:"url(/AI_Jing_Wei_Light_Theme.png)"},dark:{bg:"bg-[#121a23]",text:"text-white",cardBg:"bg-[#1a2430]/70",cardBorder:"border-gray-700",buttonText:"text-white",headerText:"text-yellow-400",subHeaderText:"text-gray-400",footerBg:"bg-[#1a2430]/70",footerBorder:"border-gray-700",backgroundImage:"url(/AI_Jing_Wei_Dark_Theme.png)"}}[r],l=async()=>{if(!e||!t){alert("You must be logged in and have a profile to create an online draft.");return}if(!t.displayName){alert("Please set a display name in your profile before creating a draft."),n("/profile");return}const h=prompt("Enter a name for your draft lobby:",`${t.displayName}'s Draft`);if(h)try{const f={draftName:h,status:"lobby",pickOrder:[],currentPickIndex:0,teamA:{name:"Team A",captain:null,players:{}},teamB:{name:"Team B",captain:null,players:{}},bans:{A:[],B:[]},picks:{A:[],B:[]},availableGods:fs.map(y=>y.name),createdAt:co(),hostId:e.uid},p=await QD(oo(qe,"drafts"),f);n(`/lobby/${p.id}`)}catch(f){console.error("Error creating online draft: ",f),alert("Failed to create online draft. Please try again.")}};return T.jsx("div",{className:`${a.bg} min-h-screen ${a.text} font-sans`,style:{backgroundImage:a.backgroundImage,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:T.jsxs("div",{className:"container mx-auto px-4 py-8 relative",children:[T.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[T.jsx(U_,{}),e&&t?T.jsx(ZS,{user:e,userProfile:t}):T.jsx("button",{onClick:()=>n("/login"),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Login"})]}),T.jsxs("div",{className:"text-center mb-20",children:[T.jsx("h1",{className:`text-5xl font-bold ${a.headerText} tracking-wider`,children:"SMITE 2 PICK/BAN SIMULATOR"}),T.jsx("p",{className:"text-red-500 font-semibold mt-2 text-xl",children:"BETA - NOT FINAL"})]}),T.jsx("div",{className:"max-w-3xl mx-auto mb-12 mt-16",children:T.jsxs("div",{className:`${a.cardBg} p-8 rounded-lg border ${a.cardBorder}`,children:[T.jsx("h2",{className:"text-3xl font-bold text-center mb-8",children:"Draft Modes"}),T.jsxs("div",{className:"mb-8",children:[T.jsxs("div",{className:"flex justify-between items-center mb-4",children:[T.jsx("h3",{className:"text-3xl font-bold",children:"Solo Draft"}),T.jsx("span",{className:"text-sm font-semibold bg-green-600 text-white px-3 py-1 rounded",children:"RECOMMENDED"})]}),T.jsx("p",{className:`${a.text} mb-6 text-lg`,children:"Practice draft strategies on your own. Control both teams and experiment with different picks and bans."}),T.jsxs("button",{onClick:()=>n("/local"),className:`w-full bg-green-600 hover:bg-green-700 ${a.buttonText} font-bold py-4 px-6 rounded-lg flex items-center justify-center text-xl`,children:[T.jsx(a4,{className:"mr-3 text-lg"})," Solo Draft"]})]}),T.jsx("div",{className:`border-t ${a.cardBorder} my-8`}),T.jsxs("div",{children:[T.jsxs("div",{className:"flex justify-between items-center mb-3",children:[T.jsx("h3",{className:"text-xl font-bold",children:"Draft with Friends"}),T.jsx("span",{className:"text-xs font-semibold bg-gray-600 px-2 py-1 rounded text-white",children:"MULTIPLAYER"})]}),T.jsx("p",{className:`${a.text} mb-4`,children:"Create a draft lobby and invite friends to join. Perfect for team practice or competitive preparation."}),T.jsxs("button",{onClick:l,className:`w-full bg-blue-600 hover:bg-blue-700 ${a.buttonText} font-bold py-2 px-4 rounded-lg flex items-center justify-center`,children:[T.jsx(XS,{className:"mr-2"})," Draft with Friends"]})]})]})}),T.jsx("div",{className:"mb-12",children:T.jsxs("div",{children:[T.jsx("h2",{className:`text-3xl font-bold ${a.headerText} mb-4`,children:"Join a Friend's Draft"}),T.jsx("div",{className:`${a.cardBg} p-6 rounded-lg border ${a.cardBorder}`,children:T.jsx(n1,{})})]})})]})})},VE=({player:n,teamColor:e})=>T.jsxs("div",{className:"text-center",children:[T.jsx("img",{src:ul(n.pick),alt:n.pick.name,className:"w-[12vmin] h-[16vmin] rounded-lg object-cover border-[0.5vmin]",style:{borderColor:e}}),T.jsx("p",{className:"text-[2.2vmin] font-semibold mt-[0.8vmin]",children:n.pick.name}),T.jsx("p",{className:"text-[1.8vmin] text-secondary",children:n.displayName})]}),FE=({teamName:n,teamColor:e,players:t,bans:r})=>T.jsxs("div",{className:"w-full p-[1vmin]",children:[T.jsx("h2",{className:"text-[4.5vmin] font-bold mb-[1.5vmin] text-center",style:{color:e},children:n}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-[3vmin] font-semibold mb-[1.5vmin] text-center",children:"PICKS"}),t.length>0?T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"flex justify-center gap-[1.5vmin] mb-[1.5vmin]",children:t.slice(0,3).map(s=>T.jsx(VE,{player:s,teamColor:e},s.uid))}),T.jsx("div",{className:"flex justify-center gap-[1.5vmin]",children:t.slice(3,5).map(s=>T.jsx(VE,{player:s,teamColor:e},s.uid))})]}):T.jsx("p",{children:"No picks."})]}),T.jsxs("div",{className:"mt-[2.5vmin]",children:[T.jsx("h3",{className:"text-[3vmin] font-semibold mb-[1.5vmin] text-center",children:"BANS"}),T.jsx("div",{className:"flex flex-wrap gap-[1.5vmin] justify-center",children:r.length>0?r.map(s=>T.jsxs("div",{className:"text-center",children:[T.jsx("img",{src:ul(s),alt:s.name,className:"w-[10vmin] h-[10vmin] rounded-md object-cover grayscale"}),T.jsx("p",{className:"text-[1.6vmin]",children:s.name})]},s.name)):T.jsx("p",{children:"No bans."})})]})]}),y4=()=>{const{theme:n}=ll(),{initialState:e,characters:t,draftId:r,picks:s,bans:a,phase:l,currentTeam:h,aspects:f}=Wr(),p=Qn(),y=_r(),v=()=>{p("/")},E=()=>{if(r)p(`/draft/${r}`);else{const Z=y.state?.rawDraftState;Z?p("/local",{state:{preserveDraft:!0,draftState:Z}}):p("/local",{state:{preserveDraft:!0,draftState:{picks:s,bans:a,phase:l,currentTeam:h,aspects:f}}})}};if(!e)return T.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:"Loading Final Teams Data..."});const{teamA:S,teamB:A,bans:N}=e;if(!S||!A||!N)return T.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:"Error: Incomplete draft data."});const L=Z=>t.find(ie=>ie.name===Z),U=Object.entries(S.players).map(([Z,ie])=>({uid:Z,displayName:ie.displayName,pick:L(ie.pick)})).filter(Z=>Z.pick),q=Object.entries(A.players).map(([Z,ie])=>({uid:Z,displayName:ie.displayName,pick:L(ie.pick)})).filter(Z=>Z.pick),G=N.A.map(L).filter(Boolean),Q=N.B.map(L).filter(Boolean);return T.jsxs("div",{className:`${n} flex flex-col items-center justify-center h-screen overflow-hidden p-[2vmin]`,children:[T.jsx("div",{className:"absolute top-4 left-4",children:T.jsxs("button",{onClick:v,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 transition-colors duration-200 shadow-md",title:"Return to Home",children:[T.jsx(JS,{className:"text-lg"}),T.jsx("span",{className:"hidden sm:inline",children:"HOME"})]})}),T.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[T.jsx(U_,{}),T.jsx("button",{onClick:E,className:"bg-blue-700 text-white border border-blue-500 rounded-full py-2 px-5 text-base font-bold cursor-pointer transition-colors duration-200 hover:bg-blue-500 hover:border-blue-400",children:"Return to Draft"})]}),T.jsx("h1",{className:"text-[5.5vmin] font-bold mb-[1.5vmin]",children:"Final Rosters"}),T.jsxs("div",{className:"flex w-full max-w-[95vw] bg-card rounded-lg shadow-lg p-[2vmin] flex-grow",children:[T.jsx("div",{className:"w-1/2 pr-[1vmin]",children:T.jsx(FE,{teamName:S.name||"Team A",teamColor:"#1abc9c",players:U,bans:G})}),T.jsx("div",{className:"border-l-[0.5vmin] border-themed mx-[1vmin]"}),T.jsx("div",{className:"w-1/2 pl-[1vmin]",children:T.jsx(FE,{teamName:A.name||"Team B",teamColor:"#ff6666",players:q,bans:Q})})]})]})},r1=()=>{const[n,e]=j.useState(null),[t,r]=j.useState(!0);return j.useEffect(()=>{const s=Ag($r,a=>{e(a),r(!1)});return()=>s()},[]),{user:n,loading:t}},v4=()=>{const{draftId:n}=Wr(),{user:e}=r1(),{setViewingFinalTeams:t}=qS(e?.uid,n);return j.useEffect(()=>{t()},[t]),T.jsx(y4,{})},w4=()=>{const e=_r().state?.draft,{user:t}=r1();return T.jsx(F_,{children:T.jsx(j_,{mode:"standard",initialState:e,draftId:e?.id,currentUser:t,teamAName:e?.teamA?.name||"ORDER",teamBName:e?.teamB?.name||"CHAOS",teamAColor:"#1abc9c",teamBColor:"#ff6666",children:T.jsx(v4,{})})})},E4=()=>{const n=Qn(),[e,t]=j.useState(""),[r,s]=j.useState(""),[a,l]=j.useState(null),h=async f=>{f.preventDefault(),l(null);try{await TP($r,e,r),n("/")}catch(p){l(p.message)}};return T.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-800 text-white",children:T.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-900 rounded-lg shadow-lg",children:[T.jsx("h1",{className:"text-2xl font-bold text-center text-gold",children:"Login"}),T.jsxs("form",{onSubmit:h,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-bold text-gray-400",children:"Email"}),T.jsx("input",{id:"email",type:"email",value:e,onChange:f=>t(f.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-bold text-gray-400",children:"Password"}),T.jsx("input",{id:"password",type:"password",value:r,onChange:f=>s(f.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),a&&T.jsx("p",{className:"text-red-500 text-xs italic",children:a}),T.jsx("button",{type:"submit",className:"w-full py-2 px-4 font-bold text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-blue-500",children:"Login"})]}),T.jsxs("p",{className:"text-sm text-center text-gray-400",children:["Don't have an account?"," ",T.jsx(Md,{to:"/signup",className:"font-bold text-gold hover:underline",children:"Sign Up"})]})]})})},T4=()=>{const n=Qn(),[e,t]=j.useState(""),[r,s]=j.useState(""),[a,l]=j.useState(""),[h,f]=j.useState(""),[p,y]=j.useState(null),v=async E=>{if(E.preventDefault(),!e.trim()){y("Display name is required.");return}if(a!==h){y("Passwords do not match.");return}y(null);try{const A=(await EP($r,r,a)).user;await DC(wt(qe,"users",A.uid),{uid:A.uid,email:A.email,displayName:e.trim(),friends:[],createdAt:co()}),n("/")}catch(S){y(S.message)}};return T.jsx("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-800 text-white",children:T.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-gray-900 rounded-lg shadow-lg",children:[T.jsx("h1",{className:"text-2xl font-bold text-center text-gold",children:"Create Account"}),T.jsxs("form",{onSubmit:v,className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{htmlFor:"display-name",className:"block mb-2 text-sm font-bold text-gray-400",children:"Display Name"}),T.jsx("input",{id:"display-name",type:"text",value:e,onChange:E=>t(E.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"signup-email",className:"block mb-2 text-sm font-bold text-gray-400",children:"Email"}),T.jsx("input",{id:"signup-email",type:"email",value:r,onChange:E=>s(E.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"signup-password",className:"block mb-2 text-sm font-bold text-gray-400",children:"Password"}),T.jsx("input",{id:"signup-password",type:"password",value:a,onChange:E=>l(E.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),T.jsxs("div",{children:[T.jsx("label",{htmlFor:"confirm-password",className:"block mb-2 text-sm font-bold text-gray-400",children:"Confirm Password"}),T.jsx("input",{id:"confirm-password",type:"password",value:h,onChange:E=>f(E.target.value),className:"w-full px-4 py-2 text-gray-900 bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gold",required:!0})]}),p&&T.jsx("p",{className:"text-red-500 text-xs italic",children:p}),T.jsx("button",{type:"submit",className:"w-full py-2 px-4 font-bold text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-green-500",children:"Sign Up"})]}),T.jsxs("p",{className:"text-sm text-center text-gray-400",children:["Already have an account?"," ",T.jsx(Md,{to:"/login",className:"font-bold text-gold hover:underline",children:"Login"})]})]})})},I4=({sendFriendRequest:n,error:e})=>{const[t,r]=j.useState(""),s=a=>{a.preventDefault(),t.trim()&&(n(t.trim()),r(""))};return T.jsxs("form",{onSubmit:s,className:"flex flex-col gap-2 mt-4",children:[T.jsx("input",{type:"text",value:t,onChange:a=>r(a.target.value),placeholder:"Enter friend's unique ID to send request",className:"p-2 rounded bg-gray-700 text-white border border-gray-600",required:!0}),T.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Send Friend Request"}),e&&T.jsx("p",{className:"text-red-500 mt-2",children:e})]})},C4=({requests:n,acceptFriendRequest:e,declineFriendRequest:t})=>n.length===0?null:T.jsxs("div",{className:"mt-6 w-full max-w-md",children:[T.jsx("h2",{className:"text-2xl text-gold mb-4",children:"Incoming Requests"}),T.jsx("ul",{className:"bg-gray-900 p-4 rounded",children:n.map(r=>T.jsxs("li",{className:"flex justify-between items-center p-2 border-b border-gray-700",children:[T.jsx("span",{className:"text-white",children:r.senderEmail}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("button",{onClick:()=>e(r.id,r.senderId),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-1 px-3 rounded",children:"Accept"}),T.jsx("button",{onClick:()=>t(r.id),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-3 rounded",children:"Decline"})]})]},r.id))})]}),S4=({message:n="Loading",size:e="md"})=>{const t={sm:"text-sm",md:"text-base",lg:"text-lg"};return T.jsx("div",{className:"flex items-center justify-center",children:T.jsxs("p",{className:`text-white ${t[e]}`,children:[n,"..."]})})},A4=({error:n,size:e="md"})=>{const t={sm:"text-sm",md:"text-base",lg:"text-lg"};return T.jsx("p",{className:`text-red-500 ${t[e]}`,children:n})},k4=({title:n,loading:e,error:t,children:r,emptyMessage:s="No items found",emptyIcon:a})=>e?T.jsx(S4,{message:n?`Loading ${n}`:"Loading"}):t?T.jsx(A4,{error:t}):fr.Children.toArray(r).length===0?T.jsxs("div",{className:"text-center text-gray-500 py-4",children:[a&&T.jsx("div",{className:"mb-2",children:a}),T.jsx("p",{children:s})]}):T.jsxs("div",{children:[n&&T.jsx("h3",{className:"text-lg font-bold mb-3 text-white",children:n}),T.jsx("div",{className:"space-y-2",children:r})]}),x4=({children:n,actions:e,onClick:t,className:r=""})=>{const s="flex justify-between items-center p-2 border-b border-gray-700 hover:bg-gray-800/50 transition-colors",a=t?"cursor-pointer":"";return T.jsxs("div",{className:`${s} ${a} ${r}`,onClick:t,children:[T.jsx("div",{className:"flex-1 text-white",children:n}),e&&T.jsx("div",{className:"flex items-center gap-2",children:e})]})},R4=({variant:n="primary",size:e="md",children:t,onClick:r,disabled:s=!1,className:a="",type:l="button"})=>{const h="font-bold rounded transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",f={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500"},p={sm:"py-1 px-2 text-sm",md:"py-2 px-4",lg:"py-4 px-6 text-lg"},y=s?"opacity-50 cursor-not-allowed":"";return T.jsx("button",{type:l,onClick:r,disabled:s,className:`${h} ${f[n]} ${p[e]} ${y} ${a}`,children:t})},P4=()=>{const{friends:n,incomingRequests:e,sendFriendRequest:t,acceptFriendRequest:r,declineFriendRequest:s,removeFriend:a,loading:l,error:h}=z_(),[f,p]=j.useState(!1);return T.jsxs("div",{className:"mt-6 w-full max-w-md",children:[T.jsx(I4,{sendFriendRequest:t,error:h}),T.jsx(C4,{requests:e,acceptFriendRequest:r,declineFriendRequest:s}),T.jsxs("button",{onClick:()=>p(!f),className:"text-2xl text-gold mb-4 mt-6 w-full text-left flex justify-between items-center hover:text-yellow-300 transition-colors",children:[T.jsx("span",{children:"Friends List"}),T.jsx("span",{children:f?"▲":"▼"})]}),f&&T.jsx("div",{className:"bg-gray-900 p-4 rounded",children:T.jsx(k4,{loading:l,error:h,emptyMessage:"You have no friends yet. Send a request to add one!",children:n.map(y=>T.jsx(x4,{actions:T.jsx(R4,{variant:"danger",size:"sm",onClick:()=>a(y.uid),children:"Remove"}),children:T.jsx("span",{children:y.displayName||B_(y.email)})},y.id))})})]})},b4=()=>{const{user:n,userProfile:e,loading:t}=dc(),{theme:r}=ll(),[s,a]=j.useState(""),[l,h]=j.useState(!1),[f,p]=j.useState(null),y=Qn();j.useEffect(()=>{e?.displayName&&a(e.displayName)},[e]);const v=()=>{$T($r),y("/")},E=async()=>{if(!n||!s.trim()){p("Display name cannot be empty.");return}p(null);try{const N=wt(qe,"users",n.uid);await Pa(N,{displayName:s.trim()}),h(!1)}catch{p("Failed to update display name.")}},A={light:{bg:"bg-gray-100",text:"text-gray-800",cardBg:"bg-white/80",cardBorder:"border-gray-200",headerText:"text-blue-600",subHeaderText:"text-gray-600",backgroundImage:"url(/AI_Jing_Wei_Light_Theme.png)"},dark:{bg:"bg-[#121a23]",text:"text-white",cardBg:"bg-[#1a2430]/70",cardBorder:"border-gray-700",headerText:"text-yellow-400",subHeaderText:"text-gray-400",backgroundImage:"url(/AI_Jing_Wei_Dark_Theme.png)"}}[r];return t?T.jsx("div",{className:`flex flex-col items-center justify-center min-h-screen ${A.bg} ${A.text}`,children:"Loading profile..."}):n?T.jsx("div",{className:`${A.bg} min-h-screen ${A.text} font-sans`,style:{backgroundImage:A.backgroundImage,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:T.jsxs("div",{className:"container mx-auto px-4 py-8",children:[T.jsxs("div",{className:"flex justify-between items-center mb-8",children:[T.jsx("button",{onClick:()=>y("/"),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"← Back to Home"}),T.jsx("h1",{className:`text-4xl font-bold ${A.headerText}`,children:"Your Profile"}),T.jsx("button",{onClick:v,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"Logout"})]}),T.jsxs("div",{className:`${A.cardBg} p-6 rounded-lg border ${A.cardBorder} mb-8`,children:[T.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User Information"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("p",{children:[T.jsx("span",{className:"font-bold",children:"Email:"})," ",B_(n.email||"")]}),T.jsxs("div",{children:[T.jsx("span",{className:"font-bold",children:"Display Name:"}),l?T.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[T.jsx("input",{type:"text",value:s,onChange:N=>a(N.target.value),className:`p-2 rounded ${r==="dark"?"bg-gray-700 text-white border-gray-600":"bg-gray-100 text-gray-800 border-gray-300"} border`}),T.jsx("button",{onClick:E,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Save"}),T.jsx("button",{onClick:()=>h(!1),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"})]}):T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("span",{children:e?.displayName||"Not set"}),T.jsx("button",{onClick:()=>h(!0),className:"text-sm text-blue-400 hover:underline",children:"Edit"})]}),f&&T.jsx("p",{className:"text-red-500 mt-2",children:f})]})]})]}),T.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[T.jsxs("div",{children:[T.jsx("h2",{className:`text-3xl font-bold ${A.headerText} mb-4`,children:"Friends Management"}),T.jsx("div",{className:`${A.cardBg} p-6 rounded-lg border ${A.cardBorder}`,children:T.jsx(P4,{})})]}),T.jsxs("div",{children:[T.jsx("h2",{className:`text-3xl font-bold ${A.headerText} mb-4`,children:"Draft Activities"}),T.jsxs("div",{className:`${A.cardBg} p-6 rounded-lg border ${A.cardBorder}`,children:[T.jsx("h3",{className:"text-xl font-bold mb-4",children:"Join Friend's Draft"}),T.jsx(n1,{})]})]})]})]})}):T.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen ${A.bg} ${A.text}`,children:[T.jsx("p",{children:"You must be logged in to view this page."}),T.jsx("button",{onClick:()=>y("/login"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Login"})]})},N4=()=>{const{draftId:n}=QE(),e=Qn(),{user:t,userProfile:r}=dc(),[s,a]=fr.useState(null);fr.useEffect(()=>{if(!n)return;const E=_o(wt(qe,"drafts",n),S=>{if(S.exists()){const A=S.data();a(A),A.status!=="lobby"&&e(`/draft/${n}`)}else console.error("Draft not found!"),e("/")});return()=>E()},[n,e]);const l=async()=>{if(!n||!s)return;const{teamA:E,teamB:S}=s;let{captainA:A,captainB:N}={captainA:E.captain,captainB:S.captain};if(!A&&Object.keys(E.players).length>0&&(A=Object.keys(E.players)[0]),!N&&Object.keys(S.players).length>0&&(N=Object.keys(S.players)[0]),!A||!N){alert("Both teams must have at least one player to start the draft.");return}const L=Object.keys(E.players),U=Object.keys(S.players);if(L.length===0||U.length===0){alert("Both teams must have at least one player to start the draft.");return}const q=(D,k)=>{const x=[];for(let R=0;R<k;R++)x.push(D[R%D.length]);return x},G=q(L,5),Q=q(U,5),Z=[{type:"ban",team:"teamA",uid:A},{type:"ban",team:"teamB",uid:N},{type:"ban",team:"teamA",uid:A},{type:"ban",team:"teamB",uid:N},{type:"ban",team:"teamA",uid:A},{type:"ban",team:"teamB",uid:N},{type:"pick",team:"teamA",uid:G[0]},{type:"pick",team:"teamB",uid:Q[0]},{type:"pick",team:"teamB",uid:Q[1]},{type:"pick",team:"teamA",uid:G[1]},{type:"pick",team:"teamA",uid:G[2]},{type:"pick",team:"teamB",uid:Q[2]},{type:"pick",team:"teamB",uid:Q[3]},{type:"pick",team:"teamA",uid:G[3]},{type:"pick",team:"teamA",uid:G[4]},{type:"pick",team:"teamB",uid:Q[4]}],ie=wt(qe,"drafts",n);await Pa(ie,{status:"banning","teamA.captain":A,"teamB.captain":N,pickOrder:Z,currentPickIndex:0})},h=async E=>{if(!n||!t||!r)return;const S=`${E}.players.${t.uid}`;await Pa(wt(qe,"drafts",n),{[S]:{displayName:r.displayName,pick:null,hasPicked:!1}})},f=async E=>{if(!n||!t)return;const S=`${E}.captain`;await Pa(wt(qe,"drafts",n),{[S]:t.uid})},p=async E=>{if(!n||!t)return;const S=`${E}.captain`;await Pa(wt(qe,"drafts",n),{[S]:null})},y=async E=>{if(!n||!t||!r||!s)return;const S=E==="teamA"?"teamB":"teamA";if(Object.keys(s[S].players).length>=5){alert("The other team is full.");return}const A=h_(qe),N=wt(qe,"drafts",n),L={...s[E].players};delete L[t.uid];const U={[`${E}.players`]:L};s[E].captain===t.uid&&(U[`${E}.captain`]=null),U[`${S}.players.${t.uid}`]={displayName:r.displayName,pick:null,hasPicked:!1},A.update(N,U),await A.commit()};if(!s||!t||!r)return T.jsx("div",{children:"Loading Lobby..."});const v=E=>{const S=s[E],A=s.pickOrder.filter(Q=>Q.type==="pick"&&Q.team===E).map(Q=>Q.uid),N=[...new Set(A)],L=N.length>0?N:Object.keys(S.players),U=Object.keys(S.players).some(Q=>Q===t.uid),q=t.uid in s.teamA.players||t.uid in s.teamB.players,G=S.captain===t.uid;return T.jsxs("div",{className:"w-1/2 p-4",children:[T.jsx("h2",{className:"text-2xl font-bold mb-2",children:S.name}),L.map(Q=>{const Z=S.players[Q];return Z?T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("p",{children:Z.displayName}),S.captain===Q&&T.jsx("span",{className:"text-yellow-400",children:"(Captain)"})]},Q):null}),!q&&Object.keys(S.players).length<5&&T.jsx("button",{onClick:()=>h(E),className:"mt-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-2 rounded",children:"Join Team"}),U&&T.jsx("button",{onClick:()=>y(E),className:"mt-2 bg-purple-600 hover:bg-purple-700 text-white font-bold py-1 px-2 rounded",children:"Switch Team"}),U&&!G&&!S.captain&&T.jsx("button",{onClick:()=>f(E),className:"mt-2 bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-1 px-2 rounded",children:"Become Captain"}),G&&T.jsx("button",{onClick:()=>p(E),className:"mt-2 bg-red-600 hover:bg-red-700 text-white font-bold py-1 px-2 rounded",children:"Relinquish Captain"})]})};return T.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-4",children:[T.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["Draft Lobby: ",s.draftName]}),T.jsxs("div",{className:"flex w-full max-w-4xl justify-around",children:[v("teamA"),v("teamB")]}),s.hostId===t.uid&&s.status==="lobby"&&T.jsx("button",{onClick:l,className:"mt-8 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"Start Draft"})]})},D4=()=>{const n=_r(),[e,t]=j.useState("standard"),[r,s]=j.useState("ORDER"),[a,l]=j.useState("CHAOS"),h=n.state?.preserveDraft?n.state.draftState:null;return T.jsx(F_,{children:T.jsx(j_,{mode:e,initialState:h,teamAName:r,teamBName:a,teamAColor:"#1abc9c",teamBColor:"#ff6666",children:T.jsx(t1,{teamAName:r,onTeamANameChange:s,teamBName:a,onTeamBNameChange:l,teamAColor:"#1abc9c",teamBColor:"#ff6666",mode:e,setMode:t})})})},O4=()=>{const{draftId:n}=QE(),[e,t]=j.useState(null),{user:r}=dc(),s=Qn();if(j.useEffect(()=>{if(!n||!r)return;const p=wt(qe,"drafts",n),y=_o(p,v=>{if(v.exists()){const E=v.data();E.status==="lobby"?s(`/lobby/${n}`):t(E)}else console.error("Draft not found!"),s("/")});return()=>y()},[n,s,r]),!e||!r)return T.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-800 text-white",children:"Loading Online Draft..."});const a=e.teamA?.name||"Team A",l=e.teamB?.name||"Team B",h="#1abc9c",f="#ff6666";return T.jsx(F_,{children:T.jsx(j_,{mode:"standard",initialState:e,draftId:n,currentUser:r,teamAName:a,teamBName:l,teamAColor:h,teamBColor:f,children:T.jsx(t1,{teamAName:a,onTeamANameChange:()=>{},teamBName:l,onTeamBNameChange:()=>{},teamAColor:h,teamBColor:f,mode:"standard",setMode:()=>{}})})})};function L4(){return T.jsx(QM,{children:T.jsxs(ak,{children:[T.jsx(ui,{path:"/",element:T.jsx(_4,{})}),T.jsx(ui,{path:"/local",element:T.jsx(D4,{})}),T.jsx(ui,{path:"/draft/:draftId",element:T.jsx(O4,{})}),T.jsx(ui,{path:"/lobby/:draftId",element:T.jsx(N4,{})}),T.jsx(ui,{path:"/login",element:T.jsx(E4,{})}),T.jsx(ui,{path:"/signup",element:T.jsx(T4,{})}),T.jsx(ui,{path:"/profile",element:T.jsx(b4,{})}),T.jsx(ui,{path:"/final-teams",element:T.jsx(w4,{})})]})})}const M4=gA.createRoot(document.getElementById("root")),V4=()=>{const[n,e,t]=Wd($r);return e?T.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:"Authenticating..."}):t?T.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-900 text-white",children:T.jsxs("p",{children:["Authentication Error: ",t.message]})}):T.jsx(L4,{})};M4.render(T.jsx(fr.StrictMode,{children:T.jsx(bk,{children:T.jsx(V4,{})})}));
